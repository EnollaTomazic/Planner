/* =========================================================
   Theme tokens + per-theme glitch backdrops
   ========================================================= */

/* ---------- Tokens (dark base) ---------- */
:root {
  --background: #0d0c18;
  --foreground: #f4f3f7;
  --text: var(--foreground);
  --card: #141221;
  --panel: var(--card);
  --border: #312d43;
  --line: var(--border);
  --input: #1a1825;
  --ring: #7c3bed;
  --theme-ring: var(--ring);
  --primary: #7c3bed;
  --primary-foreground: #ffffff;
  --primary-soft: #240854;
  --accent: #9409aa;
  --accent-2: #006680;
  --accent-foreground: #ffffff;
  --accent-soft: #3f0449;
  --glow: #9409aa;
  --ring-muted: #302d43;
  --danger: #ef4343;
  --muted: #1d1a2d;
  --muted-foreground: #aba7be;
  --surface: #191726;
  --surface-2: #221f33;
  --surface-vhs: #0b0f13;
  --surface-streak: #1a1a23;
  --shadow-color: #7c3bed;
  --lav-deep: #f042b6;
  --success: #f96cd3;
  --success-glow: #f514b999;
  --aurora-g: #33ff99;
  --aurora-g-light: #b3ffd9;
  --aurora-p: #9e47eb;
  --aurora-p-light: #dbbaf7;
  --icon-fg: #978aff;
  --accent-overlay: var(--accent);
  --ring-contrast: var(--ring);
  --glow-active: var(--glow);
  --text-on-accent: var(--foreground);

  /* Default button tones */
  --neon: var(--glow);
  --neon-soft: var(--neon);
  --btn-bg: transparent;
  --btn-fg: var(--foreground);

  /* Hairlines, radii, motion, control geometry, gradients */
  /* Fallback (works everywhere) */
  --card-hairline: var(--border);

  --hairline-w: 1px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-2xl: 24px;
  --radius-card: var(--radius-xl);
  --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
  --ease-snap: cubic-bezier(0.2, 0.8, 0.2, 1);
  --dur-quick: 140ms; --dur-chill: 220ms; --dur-slow: 420ms;
  --control-h: 44px; --control-radius: var(--radius-xl);
  --control-fs: 0.9rem; --control-px: 1rem;

  --edge-iris: conic-gradient(
    from 180deg,
    #7c3bed00,
    #7c3bedb3,
    #0dc4f2b3,
    #f042b6b3,
    #7c3bed00
  );
  --seg-active-grad: linear-gradient(
    90deg,
    #7c3bedf2,
    #d547ebf2,
    #0dc4f2f2
  );
  --shadow: 0 10px 30px #04040759;
}

/* Upgrade tokens when color-mix(oklab) is supported */
@supports (color: color-mix(in oklab, white, black)) {
  :root {
    --accent-overlay: color-mix(in oklab, var(--accent) 60%, transparent);
    --ring-contrast: color-mix(in oklab, var(--ring) 70%, var(--background) 30%);
    --glow-active: color-mix(in oklab, var(--glow) 50%, transparent);
    --neon-soft: color-mix(in oklab, var(--neon) 50%, transparent);
    --card-hairline: color-mix(
      in oklab,
      var(--border) 82%,
      var(--accent) 18%
    );
  }
}

/* Upgrade contrast token when color-contrast is supported */
@supports (color: color-contrast(white vs black)) {
  :root {
    --text-on-accent: color-contrast(var(--accent-overlay) vs var(--foreground), var(--background));
  }
}

/* Retina half-pixel hairlines when available */
@supports (border: 0.5px solid transparent) {
  :root { --hairline-w: 0.5px; }
}

/* ---------- Light ---------- */
html.light {
  --background: #ffffff;
  --foreground: #17171c;
  --text: var(--foreground);
  --card: #ffffff;
  --panel: var(--card);
  --border: #e3e3e8;
  --line: var(--border);
  --input: #f7f7f8;
  --ring: #7c3bed;
  --theme-ring: var(--ring);
  --primary: #7c3bed;
  --primary-foreground: #ffffff;
  --primary-soft: #e6dafc;
  --accent: #b617cf;
  --accent-2: #00aaff;
  --accent-foreground: #ffffff;
  --accent-soft: #f9e3fc;
  --glow: #b617cf;
  --ring-muted: #e3e3e8;
  --danger: #ed2c2c;
  --muted: #f4f4f5;
  --muted-foreground: #56565d;
  --surface: #fafafa;
  --surface-2: #f4f4f5;
  --surface-vhs: #ecf0f4;
  --surface-streak: #e7e7ee;
  --shadow-color: #7c3bed;
  --lav-deep: #f042b6;
  --success: #f14bc5;
  --success-glow: #e411ac8c;
}

/* ---------- Aurora ---------- */
html.theme-aurora {
  --background: #0f0014;
  --foreground: #faf9fb;
  --text: var(--foreground);
  --card: #180024;
  --panel: var(--card);
  --border: #32004d;
  --line: var(--border);
  --input: #32004d;
  --ring: #33ff99;
  --theme-ring: var(--ring);
  --primary: #33ff99;
  --primary-foreground: #ffffff;
  --primary-soft: #006633;
  --accent: #9e47eb;
  --accent-2: #33ff99;
  --accent-foreground: #ffffff;
  --accent-soft: #360a5c;
  --muted: #32004d;
  --muted-foreground: #c3b3cc;
  --shadow-color: #33ff99;
  --lav-deep: #9e47eb;
  --success: #f96cd3;
  --success-glow: #f514b999;
  --edge-iris: conic-gradient(
    from 180deg,
    #33ff9900,
    #33ff99b3,
    #9e47ebb3,
    #33ff99b3,
    #33ff9900
  );
  --seg-active-grad: linear-gradient(
    90deg,
    #33ff99f2,
    #9e47ebf2,
    #33ff99f2
  );
  --shadow: 0 10px 30px #0b070d4d;
}

/* ---------- Citrus ---------- */
html.theme-citrus {
  /* Dark citrus palette inspired by industrial orange hardware */
  --background: #111417;
  --foreground: #f8f5f1;
  --text: var(--foreground);
  --card: #181e25;
  --panel: var(--card);
  --border: #3b4654;
  --line: var(--border);
  --input: #202832;
  --ring: #f96d10;
  --theme-ring: var(--ring);
  --primary: #f96d10;
  --primary-foreground: #ffffff;
  --primary-soft: #6d2d03;
  --accent: #af4804;
  --accent-2: #0d7362;
  --accent-foreground: #ffffff;
  --accent-soft: #4b1f02;
  --muted: #323c48;
  --muted-foreground: #a9b6c6;
  --shadow-color: #c75305;
  --lav-deep: #f96d10;
  --success: #22c373;
  --success-glow: #1b985999;
}

/* ---------- Noir ---------- */
html.theme-noir {
  --background: #110305;
  --foreground: #ebebeb;
  --text: var(--foreground);
  --card: #22070c;
  --panel: var(--card);
  --border: #4f2229;
  --line: var(--border);
  --input: #2c1115;
  --ring: #f53d3d;
  --theme-ring: var(--ring);
  --primary: #f53d3d;
  --primary-foreground: #ffffff;
  --primary-soft: #740606;
  --accent: #067a76;
  --accent-2: #7d5403;
  --accent-foreground: #ffffff;
  --accent-soft: #02312f;
  --muted: #3e1e23;
  --muted-foreground: #bc8f97;
  --shadow-color: #f20d0d;
  --lav-deep: #f65555;
  --success: #33cc66;
  --success-glow: #29a35299;
}

/* ---------- Oceanic ---------- */
html.theme-ocean {
  --background: #0a111f;
  --foreground: #f3f5f7;
  --text: var(--foreground);
  --card: #141b29;
  --panel: var(--card);
  --border: #313949;
  --line: var(--border);
  --input: #1b212c;
  --ring: #2bbdee;
  --theme-ring: var(--ring);
  --primary: #2bbdee;
  --primary-foreground: #ffffff;
  --primary-soft: #063a4b;
  --accent: #005e8a;
  --accent-2: #0b2c8e;
  --accent-foreground: #ffffff;
  --accent-soft: #002a3d;
  --muted: #1f2633;
  --muted-foreground: #aeb4c2;
  --shadow-color: #25aff4;
  --lav-deep: #765eed;
  --success: #22c38e;
  --success-glow: #1b986e99;
}

/* ---------- Kitten ---------- */
html.theme-kitten {
  --background: #0a0005;
  --foreground: #f7f3f5;
  --text: var(--foreground);
  --card: #1f000f;
  --panel: var(--card);
  --border: #660033;
  --line: var(--border);
  --input: #3d001f;
  --ring: #ff0a85;
  --theme-ring: var(--ring);
  --primary: #ff0a85;
  --primary-foreground: #ffffff;
  --primary-soft: #7a003d;
  --accent: #8a0037;
  --accent-2: #cc0066;
  --accent-foreground: #ffffff;
  --accent-soft: #3d0018;
  --muted: #660033;
  --muted-foreground: #c2a3b3;
  --shadow-color: #ff0080;
  --lav-deep: #ff3399;
  --success: #28bd73;
  --success-glow: #20975c99;
}

/* ---------- Hardstuck ---------- */
html.theme-hardstuck {
  --background: #020802;
  --foreground: #66ff66;
  --text: var(--foreground);
  --card: #061406;
  --panel: var(--card);
  --border: #1f471f;
  --line: var(--border);
  --input: #0b1e0b;
  --ring: #33ff33;
  --theme-ring: var(--ring);
  --primary: #33ff33;
  --primary-foreground: #000000;
  --primary-soft: #007a00;
  --accent: #33ff33;
  --accent-2: #006600;
  --accent-foreground: #000000;
  --text-on-accent: var(--background);
  --accent-soft: #003d00;
  --glow: #33ff33;
  --ring-muted: #244224;
  --danger: #ef4343;
  --muted: #112211;
  --muted-foreground: #a7bea7;
  --surface: #0e1b0e;
  --surface-2: #152815;
  --surface-vhs: #070d07;
  --surface-streak: #151e15;
  --shadow-color: #00cc00;
  --lav-deep: #00ff00;
  --icon-fg: #33ff33;
  --success: #00ff00;
  --success-glow: #00cc0099;
}

/* =========================================================
   Per-theme glitch backdrops
   ========================================================= */

/* Default Lavender-Glitch backdrop:
   Applies if youâ€™re on theme-lg (both light & dark) OR no theme class. */
html.theme-lg body,
html.theme-lg-dark body,
html.theme-lg-light body,
html:not(.theme-citrus):not(.theme-noir):not(.theme-ocean):not(.theme-kitten):not(.theme-aurora):not(.theme-hardstuck) body {
  background-image:
    radial-gradient(1200px 700px at 18% -10%, #7c3bed29, transparent 60%),
    radial-gradient(1100px 600px at 110% 18%, #0dc4f224, transparent 60%),
    radial-gradient(900px 480px at 50% 120%, #f042b61a, transparent 65%);
  background-attachment: fixed, fixed, fixed;
}
html.theme-lg body::before,
html.theme-lg-dark body::before,
html.theme-lg-light body::before,
html:not(.theme-citrus):not(.theme-noir):not(.theme-ocean):not(.theme-kitten):not(.theme-aurora):not(.theme-hardstuck) body::before {
  content: ""; position: fixed; inset: 0; pointer-events: none; z-index: 0; opacity: 0.1;
  background:
    repeating-linear-gradient(90deg, var(--accent) 0 1px, transparent 1px 26px),
    repeating-linear-gradient(0deg,  var(--accent) 0 1px, transparent 1px 26px);
  mix-blend-mode: screen; animation: lg-grid-drift 18s linear infinite;
}
html.theme-lg body::after,
html.theme-lg-dark body::after,
html.theme-lg-light body::after,
html:not(.theme-citrus):not(.theme-noir):not(.theme-ocean):not(.theme-kitten):not(.theme-aurora):not(.theme-hardstuck) body::after {
  content: ""; position: fixed; inset: -10%; pointer-events: none; z-index: 0;
  background:
    radial-gradient(60% 40% at 10% 0%,   #7c3bed33, transparent 60%),
    radial-gradient(50% 35% at 100% 5%,  #0dc4f22e, transparent 60%),
    radial-gradient(55% 35% at 50% 120%, #f042b624, transparent 65%),
    radial-gradient(120% 100% at 50% 100%, #00000059, transparent 70%);
  filter: blur(2px) saturate(110%);
  animation: lg-aurora-pan 24s ease-in-out infinite alternate;
}

/* Aurora backdrop */
html.theme-aurora body {
  background-image:
    radial-gradient(1000px 600px at 20% -10%, #33ff9933, transparent 60%),
    linear-gradient(180deg, var(--card), var(--background));
  background-attachment: fixed, fixed;
}
html.theme-aurora body::before,
html.theme-aurora body::after {
  content: none;
}

/* Citrus backdrop */
html.theme-citrus body {
  background-image:
    radial-gradient(1200px 700px at 20% -10%, #f96d1038, transparent 60%),
    radial-gradient(1200px 600px at 120% 10%, #17cfb02e, transparent 60%),
    linear-gradient(180deg, var(--card), var(--background));
  background-attachment: fixed, fixed, fixed;
}
html.theme-citrus body::before {
  content: ""; position: fixed; inset: 0; pointer-events: none; z-index: 0; opacity: 0.08;
  background:
    repeating-linear-gradient(90deg, #f96d1040 0 1px, transparent 1px 26px),
    repeating-linear-gradient(0deg,  #17cfb040 0 1px, transparent 1px 26px);
  mix-blend-mode: screen; animation: citrus-grid 20s linear infinite;
}
html.theme-citrus body::after {
  content: ""; position: fixed; inset: -8%; pointer-events: none; z-index: 0;
  background:
    radial-gradient(60% 40% at 12% -5%,  #f96d102e, transparent 60%),
    radial-gradient(50% 35% at 105% 10%, #17cfb029, transparent 60%),
    radial-gradient(55% 35% at 50% 110%, #f96d101f, transparent 65%);
  filter: blur(2px) saturate(110%); animation: citrus-pan 28s ease-in-out infinite alternate;
}
@keyframes citrus-grid { to { transform: translate3d(26px, 26px, 0); } }
@keyframes citrus-pan {
  0%   { transform: translate3d(-1%, -1%, 0) scale(1.01); opacity: .95; }
  50%  { transform: translate3d( 1%,  0%, 0) scale(1.00); opacity: 1; }
  100% { transform: translate3d( 2%,  1%, 0) scale(1.01); opacity: .95; }
}

/* Noir backdrop */
html.theme-noir body {
  background-image:
    radial-gradient(1000px 520px at 15% -10%, #eb474726, transparent 60%),
    radial-gradient(900px 520px at 110% 15%, #dd3c3c1f, transparent 60%),
    linear-gradient(180deg, color-mix(in srgb, var(--card) 90%, transparent), var(--background));
  background-attachment: fixed, fixed, fixed;
}
html.theme-noir body::before {
  content: ""; position: fixed; inset: 0; pointer-events: none; z-index: 0;
  background: repeating-linear-gradient(0deg, #eb47470d 0 1px, transparent 1px 3px);
  mix-blend-mode: screen; opacity: 0.2; animation: noir-scan 14s linear infinite;
}
html.theme-noir body::after {
  content: ""; position: fixed; inset: -12%; pointer-events: none; z-index: 0;
  background:
    radial-gradient(80% 60% at 50% 120%, #1d020273, transparent 70%),
    radial-gradient(40% 25% at 6% 4%,  #eb474726, transparent 60%),
    radial-gradient(40% 25% at 94% 10%, #cc33331f, transparent 60%);
  filter: blur(1.5px) saturate(110%); opacity: 0.9; animation: noir-drift 26s ease-in-out infinite alternate;
}
@keyframes noir-scan { 0%{background-position-y:0} 100%{background-position-y:100%} }
@keyframes noir-drift { 0%{transform:translate3d(-1%,0,0)} 100%{transform:translate3d(1%,0,0)} }

/* Oceanic backdrop */
html.theme-ocean body {
  background-image:
    radial-gradient(1200px 700px at 12% -12%, #2bbdee33, transparent 60%),
    radial-gradient(1100px 600px at 108% 16%, #25d1f429, transparent 60%),
    linear-gradient(180deg, color-mix(in srgb, var(--card) 90%, transparent), var(--background));
  background-attachment: fixed, fixed, fixed;
}
html.theme-ocean body::before {
  content:""; position:fixed; inset:0; z-index:0; pointer-events:none;
  background:
    repeating-linear-gradient(90deg, #2bbdee47 0 1px, transparent 1px 26px),
    repeating-linear-gradient(0deg,  #426ef038 0 1px, transparent 1px 26px);
  mix-blend-mode: screen; opacity:.10; animation: lg-grid-drift 20s linear infinite;
}
html.theme-ocean body::after {
  content:""; position:fixed; inset:-10%; z-index:0; pointer-events:none;
  background:
    radial-gradient(60% 40% at 14% -6%, #2bbdee2e, transparent 60%),
    radial-gradient(55% 35% at 50% 114%, #426ef01f, transparent 65%),
    radial-gradient(50% 35% at 102% 8%,  #22c38e1a, transparent 60%);
  filter: blur(2px) saturate(112%); animation: ocean-pan 26s ease-in-out infinite alternate;
}
@keyframes ocean-pan {
  0% { transform: translate3d(-1%, -1%, 0) scale(1.01); opacity:.95; }
  50%{ transform: translate3d( 1%,  0%, 0) scale(1.00); opacity:1; }
 100% { transform: translate3d( 2%,  1%, 0) scale(1.01); opacity:.95; }
}

/* Kitten backdrop */
html.theme-kitten body {
  background-image:
    radial-gradient(1100px 620px at 16% -8%,  #b3003333, transparent 60%),
    radial-gradient(1000px 560px at 106% 14%, #e6004c29, transparent 60%),
    linear-gradient(180deg, color-mix(in srgb, var(--card) 92%, transparent), var(--background));
  background-attachment: fixed, fixed, fixed;
}
html.theme-kitten body::before {
  content:""; position:fixed; inset:0; z-index:0; pointer-events:none;
  background:
    repeating-linear-gradient(90deg, #b300334d 0 1px, transparent 1px 26px),
    repeating-linear-gradient(0deg,  #e6004c42 0 1px, transparent 1px 26px);
  mix-blend-mode: screen; opacity:.10; animation: lg-grid-drift 18s linear infinite;
}
html.theme-kitten body::after {
  content:""; position:fixed; inset:-10%; z-index:0; pointer-events:none;
  background:
    radial-gradient(60% 40% at 12% -6%, #b300332e, transparent 60%),
    radial-gradient(55% 35% at 50% 116%, #e6004c1f, transparent 65%),
    radial-gradient(50% 35% at 100% 8%,   #ffccd71a, transparent 60%);
  filter: blur(2px) saturate(112%); animation: kitten-pan 27s ease-in-out infinite alternate;
}
@keyframes kitten-pan { 0% { transform: translate3d(-1%,-1%,0) } 100% { transform: translate3d(1%,1%,0) } }

/* Hardstuck backdrop */
html.theme-hardstuck body {
  background-image:
    radial-gradient(1000px 520px at 20% -10%, #33ff3326, transparent 60%),
    radial-gradient(900px 520px at 110% 15%, #14b8141f, transparent 60%),
    linear-gradient(180deg, color-mix(in srgb, var(--card) 90%, transparent), var(--background));
  background-attachment: fixed, fixed, fixed;
}
html.theme-hardstuck body::before {
  content:""; position:fixed; inset:0; pointer-events:none; z-index:0;
  background: repeating-linear-gradient(0deg, #33ff330d 0 1px, transparent 1px 3px);
  mix-blend-mode: screen; opacity:0.2; animation: hardstuck-scan 14s linear infinite;
}
html.theme-hardstuck body::after {
  content:""; position:fixed; inset:-12%; pointer-events:none; z-index:0;
  background:
    radial-gradient(80% 60% at 50% 120%, #021d0273, transparent 70%),
    radial-gradient(40% 25% at 6% 4%,  #33ff3326, transparent 60%),
    radial-gradient(40% 25% at 94% 10%, #14b8141f, transparent 60%);
  filter: blur(1.5px) saturate(110%); opacity:0.9; animation: hardstuck-drift 26s ease-in-out infinite alternate;
}
@keyframes hardstuck-scan { 0%{background-position-y:0} 100%{background-position-y:100%} }
@keyframes hardstuck-drift { 0%{transform:translate3d(-1%,0,0)} 100%{transform:translate3d(1%,0,0)} }

/* Additional background options */
html.bg-alt1 body {
  background-image:
    radial-gradient(1000px 600px at 10% -10%, color-mix(in srgb, var(--accent) 20%, transparent), transparent 60%),
    radial-gradient(900px 500px at 110% 20%, color-mix(in srgb, var(--accent-2) 18%, transparent), transparent 60%),
    linear-gradient(180deg, var(--card), var(--background));
  background-attachment: fixed, fixed, fixed;
}
html.bg-alt1 body::before,
html.bg-alt1 body::after {
  content: none;
}

html.bg-alt2 body {
  background-image:
    radial-gradient(1000px 600px at 50% 0%, color-mix(in srgb, var(--primary) 18%, transparent), transparent 60%),
    radial-gradient(900px 500px at 50% 120%, color-mix(in srgb, var(--accent) 16%, transparent), transparent 60%),
    linear-gradient(180deg, var(--card), var(--background));
  background-attachment: fixed, fixed, fixed;
}
html.bg-alt2 body::before,
html.bg-alt2 body::after {
  content: none;
}

html.bg-light body {
  background-image:
    radial-gradient(1200px 700px at 50% -10%, color-mix(in srgb, var(--foreground) 8%, transparent), transparent 60%),
    radial-gradient(1000px 600px at 50% 120%, color-mix(in srgb, var(--accent) 6%, transparent), transparent 60%),
    linear-gradient(180deg, var(--card), var(--background));
  background-attachment: fixed, fixed, fixed;
}
html.bg-light body::before,
html.bg-light body::after {
  content: none;
}

html.bg-vhs body {
  background-color: var(--surface-vhs);
  background-image:
    radial-gradient(circle at 20% 30%, color-mix(in srgb, var(--accent-2) 15%, transparent), transparent 60%),
    repeating-linear-gradient(
      to bottom,
      color-mix(in srgb, var(--accent-2) 15%, transparent),
      color-mix(in srgb, var(--accent-2) 15%, transparent) 1px,
      transparent 1px,
      transparent 3px
    );
  background-blend-mode: screen;
}
html.bg-vhs body::before,
html.bg-vhs body::after {
  content: none;
}

html.bg-streak body {
  background-color: var(--surface-streak);
  background-image:
    radial-gradient(circle at 70% 40%, color-mix(in srgb, var(--accent) 25%, transparent), transparent 40%),
    repeating-linear-gradient(
      to right,
      color-mix(in srgb, var(--accent) 20%, transparent),
      color-mix(in srgb, var(--accent) 20%, transparent) 6px,
      transparent 6px,
      transparent 20px
    );
  background-blend-mode: lighten;
}
html.bg-streak body::before,
html.bg-streak body::after {
  content: none;
}

/* ---------- Shared backdrop animations ---------- */
@keyframes lg-grid-drift { 0%{transform:translate3d(0,0,0)} 100%{transform:translate3d(26px,26px,0)} }
@keyframes lg-aurora-pan {
  0% { transform: translate3d(-2%,-1%,0) scale(1.02); opacity:.95; }
 50% { transform: translate3d( 1%, 0%,0) scale(1.01); opacity:1; }
100% { transform: translate3d( 2%, 1%,0) scale(1.02); opacity:.95; }
}

/* ---------- Intensity toggles (all themes) ---------- */
html.bg-intense body::before { opacity: 0.05; }
html.bg-intense body::after  { filter: blur(2px) saturate(120%); }

/* =========================================================
   Pretty Chroma Hairline (utility)
   =========================================================
   Usage: add class="pretty-border" to any container that should
   have a tinted, animated hairline that respects --card-hairline.
   No literal white is used for the border color itself.
*/
.pretty-border {
  position: relative;
  border-radius: var(--radius-card, 1rem);
  background-clip: padding-box;
  border: 1px solid var(--card-hairline);
  isolation: isolate;
}

/* Outer chroma ring (masked to the border box) */
.pretty-border::before {
  content: "";
  position: absolute;
  inset: -1px;
  padding: 1px;
  border-radius: inherit;
  pointer-events: none;
  background: conic-gradient(
    from 180deg,
    #7c3bed00,
    #7c3beda6,
    #0dc4f2a6,
    #f042b6a6,
    #7c3bed00
  );
  /* mask to only show the ring, not fill the card */
  -webkit-mask: linear-gradient(var(--foreground) 0 0) content-box, linear-gradient(var(--foreground) 0 0);
  -webkit-mask-composite: xor;
          mask: linear-gradient(var(--foreground) 0 0) content-box, linear-gradient(var(--foreground) 0 0);
          mask-composite: exclude;
  opacity: .55;
  animation:
    pb-hue 8s linear infinite,
    pb-jitter 2.4s steps(6,end) infinite;
}

/* Soft CRT scan overlay (uses foreground tint, not white) */
.pretty-border::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  background: repeating-linear-gradient(
    to bottom,
    color-mix(in srgb, var(--foreground) 5%, transparent) 0 1px,
    transparent 2px 3px
  );
  mix-blend-mode: soft-light;
  opacity: .18;
}

@keyframes pb-hue { to { filter: hue-rotate(360deg); } }
@keyframes pb-jitter {
  0%,100% { transform: translate(0,0); }
  25% { transform: translate(.25px,-.2px); }
  50% { transform: translate(-.2px,.25px); }
  75% { transform: translate(.15px,.15px); }
}
