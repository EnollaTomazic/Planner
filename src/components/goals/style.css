/* src/components/goals/style.css
   Scoped, tiny helpers for Goals. Lavender-Glitch friendly.
   NOTE: Globals still own tokens and utilities.
*/

/* Cap/remaining pill */
[data-scope="goals"] .goals-cap {
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  padding: .4rem .6rem;
  border-radius: 9999px;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--muted)/.2);
  font-size: .75rem;
  color: hsl(var(--muted-foreground));
}

/* Compact goal row shell */
[data-scope="goals"] .goal-row {
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: .5rem;
  align-items: center;
  border: 1px solid hsl(var(--border));
  border-radius: 12px;
  background: hsl(var(--card)/.6);
  padding: .5rem .6rem;
}

/* ───────────────── Terminal-style waitlist ───────────────── */
.waitlist-terminal {
  --wl-bg: hsl(var(--card));
  --wl-hair: hsl(var(--border));
  --wl-text: hsl(var(--muted-foreground));
  --wl-ink: hsl(var(--foreground));
  --wl-accent: hsl(var(--primary));
  background:
    linear-gradient(to bottom, transparent 0, hsl(var(--foreground)/0.02) 2px, transparent 2px) top/100% 24px,
    var(--wl-bg);
  border: 1px solid var(--wl-hair);
  border-radius: 14px;
  overflow: hidden;
}

.waitlist-terminal__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: .6rem .9rem;
  border-bottom: 1px solid color-mix(in oklab, var(--wl-hair), transparent 30%);
}

.waitlist-terminal__feed {
  max-height: 300px;
  overflow: auto;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  color: var(--wl-text);
}

.waitlist-terminal__line {
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: .5rem;
  align-items: center;
  padding: .5rem .9rem;
  border-bottom: 1px dashed color-mix(in oklab, var(--wl-hair), transparent 50%);
}

.waitlist-terminal__dot {
  width: .375rem;
  height: .375rem;
  border-radius: 9999px;
  background: color-mix(in oklab, var(--wl-accent), white 12%);
  box-shadow: 0 0 10px color-mix(in oklab, var(--wl-accent), transparent 60%);
}

.waitlist-terminal__input {
  display: flex;
  align-items: center;
  gap: .5rem;
  padding: .6rem .9rem;
  border-top: 1px solid color-mix(in oklab, var(--wl-hair), transparent 30%);
  background: linear-gradient(to right, hsl(var(--foreground)/0.02), transparent);
}

.waitlist-terminal__caret {
  width: 10px;
  height: 1.2em;
  margin-left: .5ch;
  background: var(--wl-ink);
  animation: wl-blink 1.1s steps(1, end) infinite;
}

@keyframes wl-blink { 50% { opacity: 0; } }

/* Scanline overlay for cards */
.scanlines {
  position: relative;
}
.scanlines::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: inherit;
  background:
    repeating-linear-gradient(
      to bottom,
      hsl(var(--foreground) / 0.06) 0 1px,
      transparent 1px 3px
    );
  mix-blend-mode: overlay;
}

/* Subtle glitch text utility */
.glitch-text {
  animation: glitch-text 2.8s steps(2, end) infinite;
}
@keyframes glitch-text {
  0%, 100% {
    text-shadow: 0.5px 0 hsl(var(--accent)), -0.5px 0 hsl(var(--accent-2));
  }
  50% {
    text-shadow: -0.5px 0 hsl(var(--accent)), 0.5px 0 hsl(var(--accent-2));
  }
}

/* Retro-inspired section card */
.goal-card {
  position: relative;
  border-radius: 14px;
  border: 1px solid hsl(var(--border));
  background: linear-gradient(
    135deg,
    hsl(var(--surface-2)),
    hsl(var(--surface))
  );
  box-shadow:
    0 0 0 1px hsl(var(--border)) inset,
    0 0 30px hsl(var(--accent) / 0.15);
  overflow: hidden;
}
.goal-card::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: inherit;
  background: repeating-linear-gradient(
    to bottom,
    hsl(var(--foreground) / 0.06) 0 1px,
    transparent 1px 3px
  );
  mix-blend-mode: overlay;
}

/* Simple pixelated TV slot */
.goal-tv {
  position: relative;
  border: 4px solid hsl(var(--border));
  border-radius: 8px;
  background: hsl(var(--surface));
  padding: 0.25rem;
}
.goal-tv__screen {
  position: relative;
  width: 100%;
  aspect-ratio: 4 / 3;
  background: hsl(var(--surface-2));
  border-radius: 2px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  font-size: 0.875rem;
  text-align: center;
  color: hsl(var(--foreground));
}
.goal-tv__empty {
  color: hsl(var(--muted-foreground));
}
.goal-tv__check,
.goal-tv__edit,
.goal-tv__delete {
  position: absolute;
  bottom: 0.25rem;
  padding: 0.15rem;
  border-radius: 4px;
  background: hsl(var(--surface));
  color: hsl(var(--foreground));
  display: flex;
}
.goal-tv__check {
  right: 0.25rem;
}
.goal-tv__edit {
  left: 0.25rem;
  opacity: 0;
  transition: opacity 0.2s;
}
.goal-tv__delete {
  left: 1.75rem;
  opacity: 0;
  transition: opacity 0.2s;
}
.goal-tv:hover .goal-tv__edit,
.goal-tv:hover .goal-tv__delete {
  opacity: 1;
}

/* Done state */
.goal-tv--done .goal-tv__screen {
  background: hsl(var(--muted));
  color: hsl(var(--muted-foreground));
}
.goal-tv--done .goal-tv__screen > div > span:first-child {
  text-decoration: line-through;
}
.goal-tv--done .goal-tv__check {
  color: hsl(var(--success));
}
