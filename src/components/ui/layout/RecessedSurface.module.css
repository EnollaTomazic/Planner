.panel {
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: calc(var(--radius-2xl) * 1.35);
  background: linear-gradient(
    165deg,
    hsl(var(--surface) / 0.88),
    hsl(var(--card) / 0.82)
  );
  border: 1px solid hsl(var(--card-hairline) / 0.45);
  box-shadow:
    inset 0 calc(var(--space-6) * -1)
      calc(var(--space-8) + var(--space-2)) hsl(var(--shadow-base) / 0.35),
    inset 0 calc(var(--space-1) / 2) calc(var(--space-4))
      hsl(var(--highlight) / 0.1),
    0 calc(var(--space-8) - var(--space-1)) calc(var(--space-8) + var(--space-2))
      hsl(var(--shadow-base) / 0.22);
  opacity: 0.94;
  transition:
    box-shadow var(--dur-chill) var(--ease-out),
    opacity var(--dur-chill) var(--ease-out);
}

@supports (color: color-mix(in oklab, white, black)) {
  .panel {
    background: linear-gradient(
      165deg,
      color-mix(
        in oklab,
        hsl(var(--surface)) 82%,
        hsl(var(--background)) 18%
      ),
      color-mix(
        in oklab,
        hsl(var(--card)) 90%,
        hsl(var(--background)) 10%
      )
    );
  }
}

@media (prefers-contrast: more) {
  .panel {
    background: hsl(var(--background));
    border: 1px solid hsl(var(--foreground) / 0.6);
    box-shadow: inset 0 0 0 calc(var(--space-0-5)) hsl(var(--foreground) / 0.5);
    opacity: 1;
  }
}

@media (forced-colors: active) {
  .panel {
    background: Canvas;
    border: 1px solid CanvasText;
    box-shadow: none;
    opacity: 1;
  }
}

.surface {
  position: relative;
  isolation: isolate;
}

.surface::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: calc(var(--radius-2xl) * 1.1);
  background: linear-gradient(
    180deg,
    hsl(var(--card) / 0.55),
    hsl(var(--surface) / 0.25)
  );
  border: 1px solid hsl(var(--card-hairline) / 0.4);
  box-shadow:
    0 calc(var(--space-6) - var(--space-0-5))
      calc(var(--space-8) + var(--space-1)) hsl(var(--shadow-base) / 0.28);
  -webkit-backdrop-filter: blur(18px);
  backdrop-filter: blur(18px);
  opacity: 0.85;
  pointer-events: none;
  transition:
    opacity var(--dur-quick) var(--ease-out),
    box-shadow var(--dur-quick) var(--ease-out);
  z-index: -1;
}

@supports (color: color-mix(in oklab, white, black)) {
  .surface::before {
    background: linear-gradient(
      180deg,
      color-mix(
        in oklab,
        hsl(var(--card)) 70%,
        hsl(var(--surface)) 30%
      ),
      color-mix(
        in oklab,
        hsl(var(--surface)) 60%,
        transparent 40%
      )
    );
  }
}

.surface:hover::before,
.surface:focus-within::before {
  opacity: 0.95;
  box-shadow:
    0 calc(var(--space-6))
      calc(var(--space-8) + var(--space-2)) hsl(var(--shadow-base) / 0.35);
}

@media (prefers-reduced-motion: reduce) {
  .panel,
  .surface::before {
    transition-duration: 0.01ms;
  }
}

@media (prefers-contrast: more) {
  .surface::before {
    background: hsl(var(--card));
    border: 1px solid hsl(var(--foreground) / 0.6);
    box-shadow: 0 calc(var(--space-5)) calc(var(--space-7))
      hsl(var(--shadow-base) / 0.35);
    opacity: 1;
  }
}

@media (forced-colors: active) {
  .surface::before {
    background: Canvas;
    border: 1px solid CanvasText;
    box-shadow: none;
    opacity: 1;
  }
}
