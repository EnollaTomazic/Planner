{"version":3,"file":"static/chunks/444.160582b6fa87214b.js","mappings":"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","sources":["webpack://_N_E/./src/components/prompts/CodexPromptsTab.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\n\nimport { GlitchNeoCard } from \"@/components/ui\";\nimport {\n  EntityForm,\n  type EntityFormOption,\n  type EntityFormValues,\n} from \"@/components/forms/EntityForm\";\nimport { SavedPromptList } from \"./SavedPromptList\";\nimport type { PromptWithTitle } from \"./types\";\n\nconst PROMPT_CATEGORY_OPTIONS = [\n  { value: \"ChatGPT\", label: \"ChatGPT\" },\n  { value: \"Codex review\", label: \"Codex review\" },\n  { value: \"Notes\", label: \"Notes\" },\n] satisfies ReadonlyArray<EntityFormOption>;\n\ninterface CodexPromptsTabProps {\n  prompts: PromptWithTitle[];\n  query: string;\n  savePrompt: (title: string, text: string, category: string) => boolean;\n  updatePrompt: (id: string, title: string, text: string) => boolean;\n  deletePrompt: (id: string) => boolean;\n}\n\nconst createCodexComposeDefaults = (): EntityFormValues => ({\n  title: \"\",\n  prompt: \"\",\n  category: \"Codex review\",\n});\n\nexport function CodexPromptsTab({\n  prompts,\n  query,\n  savePrompt,\n  updatePrompt,\n  deletePrompt,\n}: CodexPromptsTabProps) {\n  const composeHeadingId = React.useId();\n  const libraryHeadingId = React.useId();\n  const formId = React.useId();\n  const [composeValues, setComposeValues] = React.useState<EntityFormValues>(\n    createCodexComposeDefaults,\n  );\n  const composeValuesRef = React.useRef(composeValues);\n  React.useEffect(() => {\n    composeValuesRef.current = composeValues;\n  }, [composeValues]);\n  const [editingPromptId, setEditingPromptId] = React.useState<string | null>(\n    null,\n  );\n\n  const resetComposeValues = React.useCallback(() => {\n    const nextState = createCodexComposeDefaults();\n    composeValuesRef.current = nextState;\n    setComposeValues(nextState);\n    setEditingPromptId(null);\n  }, []);\n\n  const handleSave = React.useCallback(\n    (values: EntityFormValues) => {\n      const title = values.title?.trim() ?? \"\";\n      const prompt = values.prompt?.trim() ?? \"\";\n      if (!title || !prompt) {\n        return false;\n      }\n\n      const category = values.category ?? \"Codex review\";\n      if (editingPromptId) {\n        const success = updatePrompt(editingPromptId, title, prompt);\n        if (success) {\n          resetComposeValues();\n        }\n        return success;\n      }\n      const success = savePrompt(title, prompt, category);\n      if (success) {\n        resetComposeValues();\n      }\n      return success;\n    },\n    [editingPromptId, resetComposeValues, savePrompt, updatePrompt],\n  );\n\n  const handleValuesChange = React.useCallback((values: EntityFormValues) => {\n    const nextTitle = values.title ?? \"\";\n    const nextPrompt = values.prompt ?? \"\";\n    const nextCategory = values.category ?? \"Codex review\";\n\n    const previous = composeValuesRef.current;\n    if (\n      previous.title === nextTitle &&\n      previous.prompt === nextPrompt &&\n      previous.category === nextCategory\n    ) {\n      return;\n    }\n\n    const nextState = {\n      title: nextTitle,\n      prompt: nextPrompt,\n      category: nextCategory,\n    } satisfies EntityFormValues;\n\n    React.startTransition(() => {\n      composeValuesRef.current = nextState;\n      setComposeValues(nextState);\n    });\n  }, []);\n\n  const handleEditPrompt = React.useCallback(\n    (prompt: PromptWithTitle) => {\n      const nextState = {\n        title: prompt.title,\n        prompt: prompt.text,\n        category: composeValuesRef.current.category ?? \"Codex review\",\n      } satisfies EntityFormValues;\n      composeValuesRef.current = nextState;\n      setComposeValues(nextState);\n      setEditingPromptId(prompt.id);\n    },\n    [],\n  );\n\n  const handleDeletePrompt = React.useCallback(\n    (prompt: PromptWithTitle) => {\n      const didDelete = deletePrompt(prompt.id);\n      if (didDelete && editingPromptId === prompt.id) {\n        resetComposeValues();\n      }\n    },\n    [deletePrompt, editingPromptId, resetComposeValues],\n  );\n\n  const submitDisabled = React.useMemo(() => {\n    const title = composeValues.title?.trim() ?? \"\";\n    const prompt = composeValues.prompt?.trim() ?? \"\";\n    return title.length === 0 || prompt.length === 0;\n  }, [composeValues.prompt, composeValues.title]);\n\n  const submitLabel = editingPromptId ? \"Update\" : \"Save\";\n\n  return (\n    <div className=\"flex flex-col gap-[var(--space-6)]\">\n      <section\n        aria-labelledby={composeHeadingId}\n        className=\"flex flex-col gap-[var(--space-3)]\"\n      >\n        <div className=\"space-y-[var(--space-1)]\">\n          <h3 id={composeHeadingId} className=\"type-title\">\n            Review checklist\n          </h3>\n          <p className=\"text-ui text-muted-foreground\">\n            Capture Codex review prompts that help validate architecture,\n            testing, and release notes.\n          </p>\n        </div>\n        <GlitchNeoCard className=\"p-[var(--space-4)]\">\n          <EntityForm\n            id={`codex-prompts-form-${formId}`}\n            title=\"New Codex prompt\"\n            fields={[\n              {\n                id: \"title\",\n                label: \"Title\",\n                placeholder: \"Audit deployment plan\",\n                required: true,\n              },\n              {\n                id: \"category\",\n                label: \"Category\",\n                type: \"select\",\n                options: PROMPT_CATEGORY_OPTIONS,\n                defaultValue: \"Codex review\",\n              },\n              {\n                id: \"prompt\",\n                label: \"Prompt\",\n                placeholder: \"Outline review checklistâ€¦\",\n                type: \"textarea\",\n                rows: 6,\n                required: true,\n              },\n            ]}\n            initialValues={composeValues}\n            submitLabel={submitLabel}\n            submitDisabled={submitDisabled}\n            onSubmit={handleSave}\n            onValuesChange={handleValuesChange}\n          />\n        </GlitchNeoCard>\n      </section>\n\n      <section\n        aria-labelledby={libraryHeadingId}\n        className=\"flex flex-col gap-[var(--space-3)]\"\n      >\n        <div className=\"space-y-[var(--space-1)]\">\n          <h3 id={libraryHeadingId} className=\"type-title\">\n            Codex prompts\n          </h3>\n          <p className=\"text-ui text-muted-foreground\">\n            Saved checklists appear here for quick reuse during reviews.\n          </p>\n        </div>\n        <SavedPromptList\n          prompts={prompts}\n          query={query}\n          onSelectPrompt={handleEditPrompt}\n          onEditPrompt={handleEditPrompt}\n          onDeletePrompt={handleDeletePrompt}\n        />\n      </section>\n    </div>\n  );\n}\n"],"names":["PROMPT_CATEGORY_OPTIONS","value","label","createCodexComposeDefaults","title","prompt","category","CodexPromptsTab","prompts","query","savePrompt","updatePrompt","deletePrompt","composeHeadingId","React","libraryHeadingId","formId","composeValues","setComposeValues","composeValuesRef","current","editingPromptId","setEditingPromptId","resetComposeValues","nextState","handleSave","values","trim","success","handleValuesChange","nextTitle","nextPrompt","nextCategory","previous","handleEditPrompt","text","id","handleDeletePrompt","submitDisabled","length","submitLabel","div","className","section","aria-labelledby","h3","p","GlitchNeoCard","EntityForm","fields","placeholder","required","type","options","defaultValue","rows","initialValues","onSubmit","onValuesChange","SavedPromptList","onSelectPrompt","onEditPrompt","onDeletePrompt"],"sourceRoot":"","ignoreList":[]}