{"version":3,"file":"static/chunks/8899-784d6828d8f465a7.js","mappings":"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","sources":["webpack://_N_E/./src/components/prompts/PromptsPage.tsx","webpack://_N_E/./src/components/prompts/ChatPromptsTab.tsx","webpack://_N_E/./src/components/forms/EntityForm.tsx","webpack://_N_E/./src/components/prompts/types.ts","webpack://_N_E/./src/components/prompts/usePromptLibrary.ts","webpack://_N_E/./src/components/prompts/useNotes.ts","webpack://_N_E/./src/components/prompts/usePersonas.ts","webpack://_N_E/./src/components/prompts/SavedPromptList.tsx","webpack://_N_E/./src/components/prompts/PromptsHeader.tsx","webpack://_N_E/./src/components/prompts/useChatPrompts.ts","webpack://_N_E/./src/components/prompts/tabs.ts","webpack://_N_E/./src/components/prompts/useCodexPrompts.ts"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\n\nimport { PageShell } from \"@/components/ui\";\nimport { usePersistentState } from \"@/lib/db\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  ChatPromptsTab,\n  type ChatPromptsTabHandle,\n} from \"./ChatPromptsTab\";\nimport { PromptsHeader } from \"./PromptsHeader\";\nimport type { Persona, PromptWithTitle } from \"./types\";\nimport { useChatPrompts } from \"./useChatPrompts\";\nimport { useCodexPrompts } from \"./useCodexPrompts\";\nimport type {\n  CodexPromptsTabHandle,\n  CodexPromptsTabProps,\n} from \"./CodexPromptsTab\";\nimport { useNotes } from \"./useNotes\";\nimport type { NotesTabHandle, NotesTabProps } from \"./NotesTab\";\nimport { usePersonas } from \"./usePersonas\";\nimport {\n  PROMPTS_TAB_ID_BASE,\n  PROMPTS_TAB_ITEMS,\n  type PromptsTabKey,\n} from \"./tabs\";\n\nconst TAB_STORAGE_KEY = \"prompts.tab.v1\" as const;\n\nconst LazyCodexPromptsTab = React.lazy(async () => ({\n  default: (await import(\"./CodexPromptsTab\")).CodexPromptsTab,\n})) as React.LazyExoticComponent<\n  React.ForwardRefExoticComponent<\n    CodexPromptsTabProps & React.RefAttributes<CodexPromptsTabHandle>\n  >\n>;\n\nconst LazyNotesTab = React.lazy(async () => ({\n  default: (await import(\"./NotesTab\")).NotesTab,\n})) as React.LazyExoticComponent<\n  React.ForwardRefExoticComponent<\n    NotesTabProps & React.RefAttributes<NotesTabHandle>\n  >\n>;\n\nexport function PromptsPage() {\n  const {\n    prompts: chatPrompts,\n    query: chatQuery,\n    setQuery: setChatQuery,\n    filtered: chatFiltered,\n    save: saveChatPrompt,\n    update: updateChatPrompt,\n    remove: deleteChatPrompt,\n  } = useChatPrompts();\n  const {\n    prompts: codexPrompts,\n    query: codexQuery,\n    setQuery: setCodexQuery,\n    filtered: codexFiltered,\n    save: saveCodexPrompt,\n    update: updateCodexPrompt,\n    remove: deleteCodexPrompt,\n  } = useCodexPrompts();\n  const [personas] = usePersonas();\n  const [notes, setNotes] = useNotes();\n\n  const [activeTab, setActiveTab] = usePersistentState<PromptsTabKey>(\n    TAB_STORAGE_KEY,\n    \"chat\",\n  );\n\n  const tabCounts = React.useMemo(\n    () => ({\n      chat: chatPrompts.length,\n      codex: codexPrompts.length,\n      notes: notes.trim().length > 0 ? 1 : 0,\n    }),\n    [chatPrompts.length, codexPrompts.length, notes],\n  );\n\n  const activeQuery = React.useMemo(() => {\n    if (activeTab === \"chat\") return chatQuery;\n    if (activeTab === \"codex\") return codexQuery;\n    return \"\";\n  }, [activeTab, chatQuery, codexQuery]);\n\n  const handleQueryChange = React.useCallback(\n    (value: string) => {\n      if (activeTab === \"chat\") {\n        setChatQuery(value);\n        return;\n      }\n      if (activeTab === \"codex\") {\n        setCodexQuery(value);\n      }\n    },\n    [activeTab, setChatQuery, setCodexQuery],\n  );\n\n  const chatTabRef = React.useRef<ChatPromptsTabHandle | null>(null);\n  const codexTabRef = React.useRef<CodexPromptsTabHandle | null>(null);\n  const notesTabRef = React.useRef<NotesTabHandle | null>(null);\n  const pendingFocusRef = React.useRef<\n    | { type: \"prompt\" | \"persona\"; tab: PromptsTabKey }\n    | null\n  >(null);\n  const focusLoopRef = React.useRef<number | null>(null);\n  const activeTabRef = React.useRef(activeTab);\n\n  const tryFocus = React.useCallback(\n    (pending: { type: \"prompt\" | \"persona\"; tab: PromptsTabKey }) => {\n      if (pending.tab === \"chat\") {\n        const handle = chatTabRef.current;\n        if (!handle) return false;\n        if (pending.type === \"prompt\") {\n          handle.focusCompose();\n        } else {\n          handle.focusPersonas();\n        }\n        return true;\n      }\n      if (pending.tab === \"codex\") {\n        const handle = codexTabRef.current;\n        if (!handle) return false;\n        handle.focusCompose();\n        return true;\n      }\n      const handle = notesTabRef.current;\n      if (!handle) return false;\n      handle.focusScratchpad();\n      return true;\n    },\n    [chatTabRef, codexTabRef, notesTabRef],\n  );\n\n  const ensureFocusLoop = React.useCallback(() => {\n    if (focusLoopRef.current != null) {\n      return;\n    }\n\n    const step = () => {\n      const pending = pendingFocusRef.current;\n      if (!pending) {\n        focusLoopRef.current = null;\n        return;\n      }\n\n      if (pending.tab === activeTabRef.current && tryFocus(pending)) {\n        pendingFocusRef.current = null;\n        focusLoopRef.current = null;\n        return;\n      }\n\n      focusLoopRef.current = window.requestAnimationFrame(step);\n    };\n\n    focusLoopRef.current = window.requestAnimationFrame(step);\n  }, [tryFocus]);\n\n  React.useEffect(() => {\n    activeTabRef.current = activeTab;\n    if (pendingFocusRef.current && focusLoopRef.current == null) {\n      ensureFocusLoop();\n    }\n  }, [activeTab, ensureFocusLoop]);\n\n  React.useEffect(() => {\n    return () => {\n      if (focusLoopRef.current != null) {\n        window.cancelAnimationFrame(focusLoopRef.current);\n        focusLoopRef.current = null;\n      }\n    };\n  }, []);\n\n  const handleNewPrompt = React.useCallback(() => {\n    const target: PromptsTabKey = activeTab;\n    const action = { type: \"prompt\" as const, tab: target };\n    if (tryFocus(action)) {\n      pendingFocusRef.current = null;\n      return;\n    }\n\n    pendingFocusRef.current = action;\n    ensureFocusLoop();\n  }, [activeTab, ensureFocusLoop, tryFocus]);\n\n  const handleNewPersona = React.useCallback(() => {\n    const action = { type: \"persona\" as const, tab: \"chat\" as const };\n    if (activeTab === \"chat\" && tryFocus(action)) {\n      pendingFocusRef.current = null;\n      return;\n    }\n\n    pendingFocusRef.current = action;\n    ensureFocusLoop();\n    if (activeTab !== \"chat\") {\n      setActiveTab(\"chat\");\n    }\n  }, [activeTab, ensureFocusLoop, setActiveTab, tryFocus]);\n\n  return (\n    <>\n      <PageShell as=\"header\" className=\"py-[var(--space-6)]\">\n        <PromptsHeader\n          id=\"prompts-header\"\n          query={activeQuery}\n          onQueryChange={handleQueryChange}\n          activeTab={activeTab}\n          onTabChange={setActiveTab}\n          onNewPrompt={handleNewPrompt}\n          onNewPersona={handleNewPersona}\n          tabCounts={tabCounts}\n        />\n      </PageShell>\n\n      <PageShell\n        as=\"main\"\n        id=\"page-main\"\n        tabIndex={-1}\n        className=\"space-y-[var(--space-6)] py-[var(--space-6)]\"\n        aria-labelledby=\"prompts-header\"\n      >\n        {PROMPTS_TAB_ITEMS.map((item) => {\n          const isActive = activeTab === item.key;\n          const tabId = `${PROMPTS_TAB_ID_BASE}-${item.key}-tab`;\n          const panelId = `${PROMPTS_TAB_ID_BASE}-${item.key}-panel`;\n\n          let panelContent: React.ReactNode;\n          if (item.key === \"chat\") {\n            panelContent = (\n              <ChatTabPanel\n                ref={chatTabRef}\n                prompts={chatFiltered}\n                query={chatQuery}\n                personas={personas}\n                savePrompt={saveChatPrompt}\n                updatePrompt={updateChatPrompt}\n                deletePrompt={deleteChatPrompt}\n              />\n            );\n          } else if (item.key === \"codex\") {\n            panelContent = (\n              <React.Suspense fallback={<TabFallback>Loading Codex checklist…</TabFallback>}>\n                <CodexTabPanel\n                  ref={codexTabRef}\n                  prompts={codexFiltered}\n                  query={codexQuery}\n                  savePrompt={saveCodexPrompt}\n                  updatePrompt={updateCodexPrompt}\n                  deletePrompt={deleteCodexPrompt}\n                />\n              </React.Suspense>\n            );\n          } else {\n            panelContent = (\n              <React.Suspense fallback={<TabFallback>Preparing notes…</TabFallback>}>\n                <LazyNotesTab\n                  ref={notesTabRef}\n                  value={notes}\n                  onChange={setNotes}\n                />\n              </React.Suspense>\n            );\n          }\n\n          return (\n            <div\n              key={item.key}\n              role=\"tabpanel\"\n              id={panelId}\n              aria-labelledby={tabId}\n              hidden={!isActive}\n              tabIndex={isActive ? 0 : -1}\n              data-state={isActive ? \"active\" : \"inactive\"}\n              className={cn(\n                \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background focus-visible:shadow-[var(--shadow-glow-md)]\",\n                \"pb-[var(--space-8)]\",\n              )}\n            >\n              {isActive ? panelContent : null}\n            </div>\n          );\n        })}\n      </PageShell>\n    </>\n  );\n}\n\ninterface ChatTabPanelProps {\n  prompts: PromptWithTitle[];\n  query: string;\n  personas: Persona[];\n  savePrompt: (title: string, text: string) => boolean;\n  updatePrompt: (id: string, title: string, text: string) => boolean;\n  deletePrompt: (id: string) => boolean;\n}\n\nconst ChatTabPanel = React.forwardRef<\n  ChatPromptsTabHandle,\n  ChatTabPanelProps\n>(function ChatTabPanel(\n  { prompts, query, personas, savePrompt, updatePrompt, deletePrompt },\n  ref,\n) {\n  const handleSave = React.useCallback(\n    (title: string, text: string, _category: string) => savePrompt(title, text),\n    [savePrompt],\n  );\n\n  return (\n    <ChatPromptsTab\n      ref={ref}\n      prompts={prompts}\n      query={query}\n      personas={personas}\n      savePrompt={handleSave}\n      updatePrompt={updatePrompt}\n      deletePrompt={deletePrompt}\n    />\n  );\n});\n\nChatTabPanel.displayName = \"ChatTabPanel\";\n\ninterface CodexTabPanelProps {\n  prompts: PromptWithTitle[];\n  query: string;\n  savePrompt: (title: string, text: string) => boolean;\n  updatePrompt: (id: string, title: string, text: string) => boolean;\n  deletePrompt: (id: string) => boolean;\n}\n\nconst CodexTabPanel = React.forwardRef<\n  CodexPromptsTabHandle,\n  CodexTabPanelProps\n>(function CodexTabPanel(\n  { prompts, query, savePrompt, updatePrompt, deletePrompt },\n  ref,\n) {\n  const handleSave = React.useCallback(\n    (title: string, text: string, _category: string) => savePrompt(title, text),\n    [savePrompt],\n  );\n\n  return (\n    <LazyCodexPromptsTab\n      ref={ref}\n      prompts={prompts}\n      query={query}\n      savePrompt={handleSave}\n      updatePrompt={updatePrompt}\n      deletePrompt={deletePrompt}\n    />\n  );\n});\n\nCodexTabPanel.displayName = \"CodexTabPanel\";\n\nfunction TabFallback({ children }: { children: React.ReactNode }) {\n  return (\n    <div\n      role=\"status\"\n      aria-live=\"polite\"\n      className=\"rounded-[var(--radius-md)] border border-dashed border-border bg-muted/30 p-[var(--space-4)] text-center text-ui text-muted-foreground\"\n    >\n      {children}\n    </div>\n  );\n}\n\n","\"use client\";\n\nimport * as React from \"react\";\n\nimport { Card, GlitchNeoCard } from \"@/components/ui\";\nimport {\n  EntityForm,\n  type EntityFormHandle,\n  type EntityFormOption,\n  type EntityFormValues,\n} from \"@/components/forms/EntityForm\";\nimport { SavedPromptList } from \"./SavedPromptList\";\nimport type { Persona, PromptWithTitle } from \"./types\";\nimport { LOCALE } from \"@/lib/utils\";\n\nconst PROMPT_CATEGORY_OPTIONS = [\n  { value: \"ChatGPT\", label: \"ChatGPT\" },\n  { value: \"Codex review\", label: \"Codex review\" },\n  { value: \"Notes\", label: \"Notes\" },\n] satisfies ReadonlyArray<EntityFormOption>;\n\nexport interface ChatPromptsTabHandle {\n  focusCompose: (options?: FocusOptions) => void;\n  focusPersonas: (options?: FocusOptions) => void;\n}\n\ninterface ChatPromptsTabProps {\n  prompts: PromptWithTitle[];\n  query: string;\n  personas: Persona[];\n  savePrompt: (title: string, text: string, category: string) => boolean;\n  updatePrompt: (id: string, title: string, text: string) => boolean;\n  deletePrompt: (id: string) => boolean;\n}\n\nconst createChatComposeDefaults = (): EntityFormValues => ({\n  title: \"\",\n  prompt: \"\",\n  category: \"ChatGPT\",\n});\n\nexport const ChatPromptsTab = React.forwardRef<\n  ChatPromptsTabHandle,\n  ChatPromptsTabProps\n>(function ChatPromptsTab(\n  { prompts, query, personas, savePrompt, updatePrompt, deletePrompt },\n  ref,\n) {\n  const composeHeadingId = React.useId();\n  const personasHeadingId = React.useId();\n  const libraryHeadingId = React.useId();\n  const formId = React.useId();\n  const [composeValues, setComposeValues] = React.useState<EntityFormValues>(\n    createChatComposeDefaults,\n  );\n  const composeValuesRef = React.useRef(composeValues);\n  React.useEffect(() => {\n    composeValuesRef.current = composeValues;\n  }, [composeValues]);\n  const [editingPromptId, setEditingPromptId] = React.useState<string | null>(\n    null,\n  );\n  const composeFormRef = React.useRef<EntityFormHandle | null>(null);\n  const personasHeadingRef = React.useRef<HTMLHeadingElement | null>(null);\n\n  const resetComposeValues = React.useCallback(() => {\n    const nextState = createChatComposeDefaults();\n    composeValuesRef.current = nextState;\n    setComposeValues(nextState);\n    setEditingPromptId(null);\n  }, []);\n\n  const handleSave = React.useCallback(\n    (values: EntityFormValues) => {\n      const title = values.title?.trim() ?? \"\";\n      const prompt = values.prompt?.trim() ?? \"\";\n      if (!title || !prompt) {\n        return false;\n      }\n\n      const category = values.category ?? \"ChatGPT\";\n      if (editingPromptId) {\n        const success = updatePrompt(editingPromptId, title, prompt);\n        if (success) {\n          resetComposeValues();\n        }\n        return success;\n      }\n      const success = savePrompt(title, prompt, category);\n      if (success) {\n        resetComposeValues();\n      }\n      return success;\n    },\n    [editingPromptId, resetComposeValues, savePrompt, updatePrompt],\n  );\n\n  const handleValuesChange = React.useCallback((values: EntityFormValues) => {\n    const nextTitle = values.title ?? \"\";\n    const nextPrompt = values.prompt ?? \"\";\n    const nextCategory = values.category ?? \"ChatGPT\";\n\n    const previous = composeValuesRef.current;\n    if (\n      previous.title === nextTitle &&\n      previous.prompt === nextPrompt &&\n      previous.category === nextCategory\n    ) {\n      return;\n    }\n\n    const nextState = {\n      title: nextTitle,\n      prompt: nextPrompt,\n      category: nextCategory,\n    } satisfies EntityFormValues;\n\n    React.startTransition(() => {\n      composeValuesRef.current = nextState;\n      setComposeValues(nextState);\n    });\n  }, []);\n\n  const handleEditPrompt = React.useCallback(\n    (prompt: PromptWithTitle) => {\n      const nextState = {\n        title: prompt.title,\n        prompt: prompt.text,\n        category: composeValuesRef.current.category ?? \"ChatGPT\",\n      } satisfies EntityFormValues;\n      composeValuesRef.current = nextState;\n      setComposeValues(nextState);\n      setEditingPromptId(prompt.id);\n    },\n    [],\n  );\n\n  const handleDeletePrompt = React.useCallback(\n    (prompt: PromptWithTitle) => {\n      const didDelete = deletePrompt(prompt.id);\n      if (didDelete && editingPromptId === prompt.id) {\n        resetComposeValues();\n      }\n    },\n    [deletePrompt, editingPromptId, resetComposeValues],\n  );\n\n  const submitDisabled = React.useMemo(() => {\n    const title = composeValues.title?.trim() ?? \"\";\n    const prompt = composeValues.prompt?.trim() ?? \"\";\n    return title.length === 0 || prompt.length === 0;\n  }, [composeValues.prompt, composeValues.title]);\n\n  const submitLabel = editingPromptId ? \"Update\" : \"Save\";\n\n  React.useImperativeHandle(\n    ref,\n    () => ({\n      focusCompose: (options) => {\n        composeFormRef.current?.focus(options);\n      },\n      focusPersonas: () => {\n        personasHeadingRef.current?.focus();\n      },\n    }),\n    [],\n  );\n\n  return (\n    <div className=\"flex flex-col gap-[var(--space-6)]\">\n      <section\n        aria-labelledby={composeHeadingId}\n        className=\"flex flex-col gap-[var(--space-3)]\"\n      >\n        <div className=\"space-y-[var(--space-1)]\">\n          <h3 id={composeHeadingId} className=\"type-title\">\n            Compose prompt\n          </h3>\n          <p className=\"text-ui text-muted-foreground\">\n            Draft a ChatGPT request and save it for future reuse.\n          </p>\n        </div>\n        <GlitchNeoCard className=\"p-[var(--space-4)]\">\n          <EntityForm\n            id={`chat-prompts-form-${formId}`}\n            title=\"New ChatGPT prompt\"\n            ref={composeFormRef}\n            fields={[\n              {\n                id: \"title\",\n                label: \"Title\",\n                placeholder: \"Review macro calls\",\n                required: true,\n              },\n              {\n                id: \"category\",\n                label: \"Category\",\n                type: \"select\",\n                options: PROMPT_CATEGORY_OPTIONS,\n                defaultValue: \"ChatGPT\",\n              },\n              {\n                id: \"prompt\",\n                label: \"Prompt\",\n                placeholder: \"Write your prompt or snippet…\",\n                type: \"textarea\",\n                rows: 6,\n                required: true,\n              },\n            ]}\n            initialValues={composeValues}\n            submitLabel={submitLabel}\n            submitDisabled={submitDisabled}\n            onSubmit={handleSave}\n            onValuesChange={handleValuesChange}\n          />\n        </GlitchNeoCard>\n      </section>\n\n      <section\n        aria-labelledby={personasHeadingId}\n        className=\"flex flex-col gap-[var(--space-3)]\"\n      >\n        <div className=\"space-y-[var(--space-1)]\">\n          <h3\n            id={personasHeadingId}\n            ref={personasHeadingRef}\n            className=\"type-title\"\n            tabIndex={-1}\n          >\n            Personas\n          </h3>\n          <p className=\"text-ui text-muted-foreground\">\n            Keep tailored introductions to quickly set tone and context.\n          </p>\n        </div>\n        {personas.length > 0 ? (\n          <ul className=\"grid gap-[var(--space-3)] md:grid-cols-2\">\n            {personas.map((persona) => (\n              <li key={persona.id}>\n                <Card className=\"flex h-full flex-col gap-[var(--space-3)] p-[var(--space-4)]\">\n                  <header className=\"space-y-[var(--space-1)]\">\n                    <h4 className=\"font-semibold text-body\">{persona.name}</h4>\n                    {persona.description ? (\n                      <p className=\"text-ui text-muted-foreground\">\n                        {persona.description}\n                      </p>\n                    ) : null}\n                    <time\n                      dateTime={new Date(persona.createdAt).toISOString()}\n                      className=\"block text-label text-muted-foreground\"\n                    >\n                      Added {new Date(persona.createdAt).toLocaleString(LOCALE)}\n                    </time>\n                  </header>\n                  <p className=\"whitespace-pre-wrap rounded-[var(--radius-md)] bg-card/60 p-[var(--space-3)] text-ui\">\n                    {persona.prompt}\n                  </p>\n                </Card>\n              </li>\n            ))}\n          </ul>\n        ) : (\n          <p className=\"text-ui text-muted-foreground\">\n            No personas yet. Start a collection to keep favorite tones handy.\n          </p>\n        )}\n      </section>\n\n      <section\n        aria-labelledby={libraryHeadingId}\n        className=\"flex flex-col gap-[var(--space-3)]\"\n      >\n        <div className=\"space-y-[var(--space-1)]\">\n          <h3 id={libraryHeadingId} className=\"type-title\">\n            Reusable prompts\n          </h3>\n          <p className=\"text-ui text-muted-foreground\">\n            Saved ChatGPT prompts appear here with newest first.\n          </p>\n        </div>\n        <SavedPromptList\n          prompts={prompts}\n          query={query}\n          onSelectPrompt={handleEditPrompt}\n          onEditPrompt={handleEditPrompt}\n          onDeletePrompt={handleDeletePrompt}\n        />\n      </section>\n    </div>\n  );\n});\n\nChatPromptsTab.displayName = \"ChatPromptsTab\";\n","\"use client\";\n\nimport * as React from \"react\";\n\nimport { Badge, Button } from \"@/components/ui\";\nimport { Field } from \"@/components/ui\";\nimport { cn } from \"@/lib/utils\";\n\nexport type EntityFormFieldType =\n  | \"text\"\n  | \"textarea\"\n  | \"select\";\n\nexport interface EntityFormOption {\n  label: string;\n  value: string;\n}\n\nexport interface EntityFormField {\n  id: string;\n  label: string;\n  placeholder?: string;\n  type?: EntityFormFieldType;\n  options?: ReadonlyArray<EntityFormOption>;\n  helper?: React.ReactNode;\n  required?: boolean;\n  defaultValue?: string;\n  description?: React.ReactNode;\n  autoFocus?: boolean;\n  disabled?: boolean;\n  rows?: number;\n  inputMode?: React.HTMLAttributes<HTMLInputElement>[\"inputMode\"];\n  inputType?: React.HTMLInputTypeAttribute;\n}\n\nexport type EntityFormValues = Record<string, string>;\n\nexport type EntityFormSubmitResult =\n  | void\n  | boolean\n  | Promise<void | boolean>;\n\nexport interface EntityFormProps {\n  id?: string;\n  title?: React.ReactNode;\n  description?: React.ReactNode;\n  className?: string;\n  contentClassName?: string;\n  submitLabel?: string;\n  submitDisabled?: boolean;\n  resetOnSubmit?: boolean;\n  initialValues?: EntityFormValues;\n  fields: EntityFormField[];\n  onSubmit?: (values: EntityFormValues) => EntityFormSubmitResult;\n  onValuesChange?: (values: EntityFormValues) => void;\n  afterFields?: React.ReactNode;\n  footer?: React.ReactNode;\n  actions?: React.ReactNode;\n  statusBadge?: React.ReactNode;\n}\n\nexport interface EntityFormHandle {\n  focus: (options?: FocusOptions) => void;\n  reset: () => void;\n}\n\nconst DEFAULT_SUBMIT_LABEL = \"Save\";\n\nconst areValuesEqual = (\n  a: EntityFormValues,\n  b: EntityFormValues,\n): boolean => {\n  const aKeys = Object.keys(a);\n  const bKeys = Object.keys(b);\n  if (aKeys.length !== bKeys.length) {\n    return false;\n  }\n  for (const key of aKeys) {\n    if (a[key] !== b[key]) {\n      return false;\n    }\n  }\n  return true;\n};\n\nconst areOptionalValuesEqual = (\n  a: EntityFormValues | undefined,\n  b: EntityFormValues | undefined,\n): boolean => {\n  if (a === b) {\n    return true;\n  }\n\n  if (!a || !b) {\n    return false;\n  }\n\n  return areValuesEqual(a, b);\n};\n\nexport const EntityForm = React.forwardRef<EntityFormHandle, EntityFormProps>(\n  (\n    {\n      id,\n      title,\n      description,\n      className,\n      contentClassName,\n      submitLabel = DEFAULT_SUBMIT_LABEL,\n      submitDisabled,\n      resetOnSubmit = true,\n      initialValues,\n      fields,\n      onSubmit,\n      onValuesChange,\n      afterFields,\n      footer,\n      actions,\n      statusBadge,\n    },\n    ref,\n  ) => {\n    const formId = React.useId();\n    const resolvedId = id ?? formId;\n\n    const defaultValues = React.useMemo(() => {\n      const base: EntityFormValues = {};\n      for (const field of fields) {\n        const fieldId = field.id;\n        base[fieldId] =\n          initialValues?.[fieldId] ?? field.defaultValue ?? \"\";\n      }\n      return base;\n    }, [fields, initialValues]);\n\n    const [values, setValues] = React.useState<EntityFormValues>(defaultValues);\n    const valuesRef = React.useRef(values);\n    React.useEffect(() => {\n      valuesRef.current = values;\n    }, [values]);\n    const fieldIds = React.useMemo(\n      () => fields.map((field) => field.id),\n      [fields],\n    );\n    const prevDefaultsRef = React.useRef(defaultValues);\n    const prevInitialValuesRef = React.useRef(initialValues);\n    const prevFieldIdsRef = React.useRef(fieldIds);\n    const isFirstRenderRef = React.useRef(true);\n\n    React.useEffect(() => {\n      const prevDefaults = prevDefaultsRef.current;\n      const prevInitialValues = prevInitialValuesRef.current;\n      const prevFieldIds = prevFieldIdsRef.current;\n      const hasFieldStructureChanged =\n        prevFieldIds.length !== fieldIds.length ||\n        fieldIds.some((id, index) => id !== prevFieldIds[index]);\n      const defaultsChanged =\n        hasFieldStructureChanged || !areValuesEqual(prevDefaults, defaultValues);\n      const initialValuesChanged = !areOptionalValuesEqual(\n        prevInitialValues,\n        initialValues,\n      );\n      const hasValuesDriftedFromDefaults =\n        !areValuesEqual(valuesRef.current, defaultValues);\n\n      if (\n        isFirstRenderRef.current ||\n        defaultsChanged ||\n        (initialValuesChanged && hasValuesDriftedFromDefaults)\n      ) {\n        isFirstRenderRef.current = false;\n        prevDefaultsRef.current = defaultValues;\n        prevInitialValuesRef.current = initialValues;\n        prevFieldIdsRef.current = fieldIds;\n        valuesRef.current = defaultValues;\n        setValues(defaultValues);\n        return;\n      }\n\n      prevDefaultsRef.current = defaultValues;\n      prevInitialValuesRef.current = initialValues;\n      prevFieldIdsRef.current = fieldIds;\n      isFirstRenderRef.current = false;\n    }, [defaultValues, fieldIds, initialValues, onValuesChange]);\n\n    const firstFieldRef = React.useRef<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement | null>(\n      null,\n    );\n\n    const handleFieldChange = React.useCallback((fieldId: string, nextValue: string) => {\n      setValues((prev) => ({ ...prev, [fieldId]: nextValue }));\n    }, []);\n\n    const resetForm = React.useCallback(() => {\n      setValues(defaultValues);\n    }, [defaultValues]);\n\n    React.useImperativeHandle(\n      ref,\n      () => ({\n        focus: (options) => {\n          firstFieldRef.current?.focus(options);\n        },\n        reset: resetForm,\n      }),\n      [resetForm],\n    );\n\n    React.useEffect(() => {\n      if (!onValuesChange) {\n        return;\n      }\n\n      onValuesChange(values);\n    }, [onValuesChange, values]);\n\n    const handleSubmit = React.useCallback(\n      async (event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        if (!onSubmit) {\n          return;\n        }\n        const result = await onSubmit(values);\n        if (resetOnSubmit && result !== false) {\n          resetForm();\n        }\n      },\n      [onSubmit, resetOnSubmit, resetForm, values],\n    );\n\n    return (\n      <form id={resolvedId} onSubmit={handleSubmit} className={className}>\n        <div\n          className={cn(\n            \"flex flex-col gap-[var(--space-4)]\",\n            contentClassName,\n          )}\n        >\n          {(title || description || statusBadge) && (\n            <header className=\"space-y-[var(--space-2)]\">\n              <div className=\"flex flex-wrap items-start justify-between gap-[var(--space-2)]\">\n                <div className=\"space-y-[var(--space-1)]\">\n                  {title ? (\n                    <h3 className=\"text-title font-semibold tracking-[-0.01em]\">\n                      {title}\n                    </h3>\n                  ) : null}\n                  {description ? (\n                    <p className=\"text-ui text-muted-foreground\">\n                      {description}\n                    </p>\n                  ) : null}\n                </div>\n                {statusBadge ? (\n                  <span className=\"shrink-0\">{statusBadge}</span>\n                ) : null}\n              </div>\n            </header>\n          )}\n\n          <div className=\"flex flex-col gap-[var(--space-4)]\">\n            {fields.map((field, index) => {\n              const fieldId = `${resolvedId}-${field.id}`;\n              const value = values[field.id] ?? \"\";\n              const helperId = field.helper ? `${fieldId}-helper` : undefined;\n              const descriptionId = field.description\n                ? `${fieldId}-description`\n                : undefined;\n              const commonProps = {\n                id: fieldId,\n                name: field.id,\n                placeholder: field.placeholder,\n                value,\n                onChange: (event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n                  handleFieldChange(field.id, event.target.value);\n                },\n                required: field.required,\n                disabled: field.disabled,\n              } as const;\n\n              const helperContent = field.helper\n                ? field.helper\n                : undefined;\n\n              const labelId = `${fieldId}-label`;\n\n              return (\n                <div\n                  key={field.id}\n                  className=\"space-y-[var(--space-2)]\"\n                >\n                  <div className=\"grid gap-[var(--space-1)]\">\n                    <div className=\"flex flex-wrap items-center gap-[var(--space-2)]\">\n                      <label\n                        id={labelId}\n                        htmlFor={fieldId}\n                        className=\"text-ui font-medium text-foreground\"\n                      >\n                        {field.label}\n                      </label>\n                      {field.required ? (\n                        <Badge\n                          size=\"sm\"\n                          tone=\"accent\"\n                          className=\"uppercase tracking-[0.08em]\"\n                          aria-hidden=\"true\"\n                        >\n                          Required\n                        </Badge>\n                      ) : null}\n                    </div>\n                    {field.description ? (\n                      <span\n                        id={descriptionId}\n                        className=\"text-label text-muted-foreground\"\n                      >\n                        {field.description}\n                      </span>\n                    ) : null}\n                  </div>\n                  <Field.Root\n                    helper={helperContent}\n                    helperId={helperId}\n                    className=\"bg-card/60\"\n                  >\n                      {renderFieldControl({\n                        field,\n                        commonProps,\n                        descriptionId,\n                        helperId,\n                        setFirstFieldRef:\n                          index === 0\n                            ? (element) => {\n                                firstFieldRef.current = element;\n                              }\n                            : undefined,\n                      })}\n                  </Field.Root>\n                </div>\n              );\n            })}\n          </div>\n\n          {afterFields}\n\n          <div className=\"flex flex-wrap items-center justify-end gap-[var(--space-3)]\">\n            {actions}\n            <Button type=\"submit\" disabled={submitDisabled} size=\"sm\">\n              {submitLabel}\n            </Button>\n          </div>\n\n          {footer}\n        </div>\n      </form>\n    );\n  },\n);\n\nEntityForm.displayName = \"EntityForm\";\n\ninterface RenderFieldControlArgs {\n  field: EntityFormField;\n  commonProps: {\n    id: string;\n    name: string;\n    placeholder?: string;\n    value: string;\n    onChange: (\n      event:\n        | React.ChangeEvent<HTMLInputElement>\n        | React.ChangeEvent<HTMLTextAreaElement>\n        | React.ChangeEvent<HTMLSelectElement>,\n    ) => void;\n    required?: boolean;\n    disabled?: boolean;\n  };\n  descriptionId?: string;\n  helperId?: string;\n  setFirstFieldRef?: (\n    element: HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement | null,\n  ) => void;\n}\n\nfunction renderFieldControl({\n  field,\n  commonProps,\n  descriptionId,\n  helperId,\n  setFirstFieldRef,\n}: RenderFieldControlArgs) {\n  const fieldType = field.type ?? \"text\";\n  const inputProps = {\n    ...commonProps,\n    \"aria-describedby\":\n      descriptionId && helperId\n        ? `${descriptionId} ${helperId}`\n        : descriptionId ?? helperId,\n  } as const;\n\n  switch (fieldType) {\n    case \"textarea\":\n      return (\n        <Field.Textarea\n          {...inputProps}\n          rows={field.rows}\n          ref={setFirstFieldRef as React.Ref<HTMLTextAreaElement> | undefined}\n        />\n      );\n    case \"select\":\n      return (\n        <Field.Select\n          {...inputProps}\n          ref={setFirstFieldRef as React.Ref<HTMLSelectElement> | undefined}\n        >\n          <option value=\"\" disabled hidden>\n            {field.placeholder ?? \"Select\"}\n          </option>\n          {(field.options ?? []).map((option) => (\n            <option key={option.value} value={option.value}>\n              {option.label}\n            </option>\n          ))}\n        </Field.Select>\n      );\n    case \"text\":\n    default:\n      return (\n        <Field.Input\n          {...inputProps}\n          type={field.inputType}\n          inputMode={field.inputMode}\n          ref={setFirstFieldRef as React.Ref<HTMLInputElement> | undefined}\n        />\n      );\n  }\n}\n","export type Prompt = {\n  id: string;\n  title?: string;\n  text: string;\n  createdAt: number;\n};\n\nexport type PromptWithTitle = Prompt & { title: string };\n\nexport type Persona = {\n  id: string;\n  name: string;\n  prompt: string;\n  description?: string;\n  createdAt: number;\n};\n\nexport function derivePromptTitle(prompt: Prompt): string {\n  if (prompt.title && prompt.title.trim()) return prompt.title.trim();\n  const firstLine = (prompt.text || \"\")\n    .split(/\\r?\\n/)\n    .find((line) => line.trim())?.trim();\n  return firstLine || \"Untitled\";\n}\n","\"use client\";\n\nimport * as React from \"react\";\nimport type Fuse from \"fuse.js\";\nimport { usePersistentState, uid } from \"@/lib/db\";\nimport {\n  derivePromptTitle,\n  type Prompt,\n  type PromptWithTitle,\n} from \"./types\";\n\nfunction isRecord(value: unknown): value is Record<string, unknown> {\n  return typeof value === \"object\" && value !== null && !Array.isArray(value);\n}\n\nfunction decodePrompt(value: unknown): Prompt | null {\n  if (!isRecord(value)) return null;\n  const id = value[\"id\"];\n  const text = value[\"text\"];\n  const createdAt = value[\"createdAt\"];\n  if (typeof id !== \"string\") return null;\n  if (typeof text !== \"string\") return null;\n  if (typeof createdAt !== \"number\" || !Number.isFinite(createdAt)) return null;\n  const prompt: Prompt = { id, text, createdAt };\n  const title = value[\"title\"];\n  if (typeof title === \"string\") {\n    prompt.title = title;\n  }\n  return prompt;\n}\n\nexport function decodePrompts(value: unknown): Prompt[] | null {\n  if (!Array.isArray(value)) return null;\n  const result: Prompt[] = [];\n  for (const entry of value) {\n    const prompt = decodePrompt(entry);\n    if (prompt) result.push(prompt);\n  }\n  return result;\n}\n\nconst EMPTY_PROMPT_LIST: Prompt[] = [];\n\nexport function usePromptLibrary(storageKey: string) {\n  const [prompts, setPrompts] = usePersistentState<Prompt[]>(\n    storageKey,\n    EMPTY_PROMPT_LIST,\n    {\n      decode: decodePrompts,\n    },\n  );\n  const [query, setQuery] = React.useState(\"\");\n\n  const withTitles = React.useMemo(\n    () => prompts.map((prompt) => ({ ...prompt, title: derivePromptTitle(prompt) })),\n    [prompts],\n  );\n\n  const fuseModulePromiseRef = React.useRef<Promise<typeof import(\"fuse.js\")> | null>(null);\n  const fuseRef = React.useRef<Fuse<PromptWithTitle> | null>(null);\n\n  const [filtered, setFiltered] = React.useState<PromptWithTitle[]>(withTitles);\n\n  const ensureFuse = React.useCallback(async () => {\n    if (!fuseModulePromiseRef.current) {\n      fuseModulePromiseRef.current = import(\"fuse.js\");\n    }\n    const { default: FuseModule } = await fuseModulePromiseRef.current;\n    if (fuseRef.current) {\n      fuseRef.current.setCollection(withTitles);\n      return fuseRef.current;\n    }\n    const instance = new FuseModule<PromptWithTitle>(withTitles, {\n      keys: [\"title\", \"text\"],\n      threshold: 0.3,\n    });\n    fuseRef.current = instance;\n    return instance;\n  }, [withTitles]);\n\n  React.useEffect(() => {\n    const trimmed = query.trim();\n    if (!trimmed) {\n      setFiltered(withTitles);\n      return;\n    }\n\n    let cancelled = false;\n\n    if (!fuseRef.current) {\n      const lowered = trimmed.toLowerCase();\n      setFiltered(\n        withTitles.filter((prompt) => {\n          return (\n            prompt.title.toLowerCase().includes(lowered) ||\n            prompt.text.toLowerCase().includes(lowered)\n          );\n        }),\n      );\n    }\n\n    const runSearch = async () => {\n      const fuse = await ensureFuse();\n      if (cancelled) return;\n      const results = fuse.search(trimmed);\n      if (cancelled) return;\n      setFiltered(results.map((res) => res.item));\n    };\n\n    void runSearch();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [ensureFuse, query, withTitles]);\n\n  const save = React.useCallback(\n    (titleDraft: string, textDraft: string) => {\n      const text = textDraft.trim();\n      const title =\n        titleDraft.trim() || text.split(/\\r?\\n/)[0]?.trim() || \"Untitled\";\n      if (!text && !titleDraft.trim()) return false;\n      const next: Prompt = {\n        id: uid(\"p\"),\n        title,\n        text,\n        createdAt: Date.now(),\n      };\n      setPrompts((prev) => [next, ...prev]);\n      return true;\n    },\n    [setPrompts],\n  );\n\n  const update = React.useCallback(\n    (id: string, titleDraft: string, textDraft: string) => {\n      const text = textDraft.trim();\n      const title =\n        titleDraft.trim() || text.split(/\\r?\\n/)[0]?.trim() || \"Untitled\";\n      if (!text && !titleDraft.trim()) return false;\n      let didUpdate = false;\n      setPrompts((prev) =>\n        prev.map((prompt) => {\n          if (prompt.id !== id) return prompt;\n          didUpdate = true;\n          return { ...prompt, title, text } satisfies Prompt;\n        }),\n      );\n      return didUpdate;\n    },\n    [setPrompts],\n  );\n\n  const remove = React.useCallback(\n    (id: string) => {\n      let didRemove = false;\n      setPrompts((prev) => {\n        const next = prev.filter((prompt) => {\n          const keep = prompt.id !== id;\n          if (!keep) {\n            didRemove = true;\n          }\n          return keep;\n        });\n        return next;\n      });\n      return didRemove;\n    },\n    [setPrompts],\n  );\n\n  return { prompts, query, setQuery, filtered, save, update, remove } as const;\n}\n","\"use client\";\n\nimport { usePersistentState } from \"@/lib/db\";\n\nexport const PROMPT_NOTES_STORAGE_KEY = \"prompts.notes.v1\" as const;\n\nexport function useNotes() {\n  return usePersistentState<string>(PROMPT_NOTES_STORAGE_KEY, \"\");\n}\n","\"use client\";\n\nimport { usePersistentState } from \"@/lib/db\";\nimport type { Persona } from \"./types\";\n\nexport const PROMPT_PERSONAS_STORAGE_KEY = \"prompts.personas.v1\" as const;\nconst EMPTY_PERSONA_LIST: Persona[] = [];\n\nexport function usePersonas() {\n  return usePersistentState<Persona[]>(\n    PROMPT_PERSONAS_STORAGE_KEY,\n    EMPTY_PERSONA_LIST,\n  );\n}\n","\"use client\";\n\nimport * as React from \"react\";\nimport { Pencil, Trash2 } from \"lucide-react\";\n\nimport { GenericList } from \"@/components/lists/GenericList\";\nimport type { GenericListEmptyState } from \"@/components/lists/GenericList\";\nimport { Card, IconButton } from \"@/components/ui\";\nimport { Badge } from \"@/components/ui/primitives/Badge\";\nimport { cn, LOCALE } from \"@/lib/utils\";\nimport type { PromptWithTitle } from \"./types\";\n\nexport interface SavedPromptListProps {\n  prompts: PromptWithTitle[];\n  query: string;\n  onSelectPrompt?: (prompt: PromptWithTitle) => void;\n  onEditPrompt?: (prompt: PromptWithTitle) => void;\n  onDeletePrompt?: (prompt: PromptWithTitle) => void;\n}\n\ntype FormattedPrompt = PromptWithTitle & {\n  createdAtDateTime: string;\n  createdAtLabel: string;\n};\n\nexport function SavedPromptList({\n  prompts,\n  query,\n  onSelectPrompt,\n  onEditPrompt,\n  onDeletePrompt,\n}: SavedPromptListProps) {\n  const trimmedQuery = query.trim();\n\n  const formattedPrompts = React.useMemo<FormattedPrompt[]>(\n    () =>\n      prompts.map((prompt) => {\n        const createdAt = new Date(prompt.createdAt);\n        return {\n          ...prompt,\n          createdAtDateTime: createdAt.toISOString(),\n          createdAtLabel: createdAt.toLocaleString(LOCALE),\n        } satisfies FormattedPrompt;\n      }),\n    [prompts],\n  );\n\n  const emptyState: GenericListEmptyState | undefined = React.useMemo(() => {\n    if (prompts.length === 0) {\n      if (trimmedQuery) {\n        return {\n          title: \"No prompts found\",\n          description: (\n            <span className=\"inline-flex items-center gap-[var(--space-1)]\">\n              No prompts match <Badge size=\"sm\" tone=\"neutral\">{trimmedQuery}</Badge>\n            </span>\n          ),\n        } satisfies GenericListEmptyState;\n      }\n      return {\n        title: \"No prompts saved yet\",\n        description: \"Create a prompt to build your library.\",\n      } satisfies GenericListEmptyState;\n    }\n    return undefined;\n  }, [prompts.length, trimmedQuery]);\n\n  return (\n    <GenericList\n      items={formattedPrompts}\n      getKey={(prompt) => prompt.id}\n      listClassName=\"mt-[var(--space-4)] space-y-[var(--space-3)]\"\n      emptyState={emptyState}\n      renderItem={(prompt) => {\n        const handleSelect = () => {\n          onSelectPrompt?.(prompt);\n        };\n\n        const handleKeyDown: React.KeyboardEventHandler<HTMLDivElement> = (\n          event,\n        ) => {\n          if (!onSelectPrompt) return;\n          if (event.key === \"Enter\" || event.key === \" \") {\n            event.preventDefault();\n            onSelectPrompt(prompt);\n          }\n        };\n\n        const handleEditClick: React.MouseEventHandler<HTMLButtonElement> = (\n          event,\n        ) => {\n          event.stopPropagation();\n          onEditPrompt?.(prompt);\n        };\n\n        const handleDeleteClick: React.MouseEventHandler<HTMLButtonElement> = (\n          event,\n        ) => {\n          event.stopPropagation();\n          onDeletePrompt?.(prompt);\n        };\n\n        return (\n          <Card\n            role={onSelectPrompt ? \"button\" : undefined}\n            tabIndex={onSelectPrompt ? 0 : undefined}\n            onClick={onSelectPrompt ? handleSelect : undefined}\n            onKeyDown={handleKeyDown}\n            className={cn(\n              \"group flex flex-col gap-[var(--space-2)] rounded-card border border-border bg-card/80 p-[var(--space-3)] shadow-neo transition-all\",\n              \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background\",\n              onSelectPrompt &&\n                \"cursor-pointer hover:ring-2 hover:ring-ring hover:ring-offset-2 hover:ring-offset-background\",\n            )}\n          >\n            <header className=\"flex items-start justify-between gap-[var(--space-3)]\">\n              <div className=\"min-w-0 space-y-[var(--space-1)]\">\n                <h3 className=\"truncate font-semibold text-body\">{prompt.title}</h3>\n                <time\n                  dateTime={prompt.createdAtDateTime}\n                  className=\"block text-label text-muted-foreground\"\n                >\n                  Saved {prompt.createdAtLabel}\n                </time>\n              </div>\n              <div className=\"flex shrink-0 items-center gap-[var(--space-1-5)]\">\n                <IconButton\n                  aria-label={`Edit ${prompt.title}`}\n                  size=\"sm\"\n                  variant=\"quiet\"\n                  tone=\"primary\"\n                  onClick={handleEditClick}\n                >\n                  <Pencil aria-hidden=\"true\" />\n                </IconButton>\n                <IconButton\n                  aria-label={`Delete ${prompt.title}`}\n                  size=\"sm\"\n                  variant=\"quiet\"\n                  tone=\"danger\"\n                  onClick={handleDeleteClick}\n                >\n                  <Trash2 aria-hidden=\"true\" />\n                </IconButton>\n              </div>\n            </header>\n            {prompt.text ? (\n              <p className=\"line-clamp-3 whitespace-pre-line text-ui text-muted-foreground\">\n                {prompt.text}\n              </p>\n            ) : null}\n          </Card>\n        );\n      }}\n    />\n  );\n}\n","\"use client\";\n\nimport * as React from \"react\";\nimport { Button, Hero } from \"@/components/ui\";\nimport { Badge } from \"@/components/ui/primitives/Badge\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  PROMPTS_TAB_ID_BASE,\n  PROMPTS_TAB_ITEMS,\n  type PromptsTabKey,\n} from \"./tabs\";\n\nconst chips = [\"hover\", \"focus\", \"active\", \"disabled\", \"loading\"];\n\ninterface PromptsHeaderProps {\n  id?: string;\n  query: string;\n  onQueryChange: (value: string) => void;\n  activeTab: PromptsTabKey;\n  onTabChange: (tab: PromptsTabKey) => void;\n  onNewPrompt: () => void;\n  onNewPersona: () => void;\n  tabCounts?: Partial<Record<PromptsTabKey, number>>;\n}\n\nexport function PromptsHeader({\n  id = \"prompts-header\",\n  query,\n  onQueryChange,\n  activeTab,\n  onTabChange,\n  onNewPrompt,\n  onNewPersona,\n  tabCounts,\n}: PromptsHeaderProps) {\n  const tabs = React.useMemo(() => {\n    return PROMPTS_TAB_ITEMS.map((item) => {\n      const badge = tabCounts?.[item.key];\n      return {\n        key: item.key,\n        label: item.label,\n        badge: badge && badge > 0 ? badge : undefined,\n      };\n    });\n  }, [tabCounts]);\n\n  const handleChip = React.useCallback(\n    (chip: string) => {\n      const nextQuery = query === chip ? \"\" : chip;\n      onQueryChange(nextQuery);\n    },\n    [onQueryChange, query],\n  );\n\n  const searchId = `${id}-search`;\n\n  return (\n    <Hero\n      id={id}\n      className=\"col-span-full\"\n      title=\"Prompts\"\n      subtitle=\"Compose, save, and reuse AI prompts.\"\n      sticky={false}\n      frame={false}\n      tone=\"heroic\"\n      padding=\"none\"\n      barClassName=\"flex flex-col items-start gap-[var(--space-2)] sm:flex-row sm:items-center sm:justify-between\"\n      tabs={{\n        items: tabs,\n        value: activeTab,\n        onChange: onTabChange,\n        ariaLabel: \"Prompt workspaces\",\n        idBase: PROMPTS_TAB_ID_BASE,\n      }}\n      actions={\n        <div className=\"flex flex-wrap items-center gap-[var(--space-2)]\">\n          <Button size=\"sm\" onClick={onNewPrompt}>\n            New prompt\n          </Button>\n          <Button size=\"sm\" variant=\"quiet\" onClick={onNewPersona}>\n            New persona\n          </Button>\n        </div>\n      }\n      bodyClassName=\"px-[var(--space-2)] sm:px-[var(--space-1)] md:px-0\"\n      searchBar={{\n        id: searchId,\n        value: query,\n        onValueChange: onQueryChange,\n        debounceMs: 300,\n        placeholder: \"Search prompts…\",\n        \"aria-label\": \"Search prompts\",\n        variant: \"neo\",\n        round: true,\n      }}\n    >\n      <div\n        role=\"group\"\n        aria-label=\"Prompt chip filters\"\n        className={cn(\n          \"flex items-center gap-[var(--space-2)]\",\n          \"overflow-x-auto\",\n          \"pb-[var(--space-1)]\",\n          \"[-webkit-overflow-scrolling:touch]\",\n          \"-mx-[var(--space-2)] sm:-mx-[var(--space-1)] md:mx-0\",\n          \"px-[var(--space-2)] sm:px-[var(--space-1)] md:px-0\",\n        )}\n      >\n        {chips.map((chip) => {\n          const isSelected = query === chip;\n\n          return (\n            <Badge\n              key={chip}\n              interactive\n              selected={isSelected}\n              aria-pressed={isSelected}\n              onClick={() => handleChip(chip)}\n              tone=\"accent\"\n              className={cn(\n                \"[--badge-surface:transparent]\",\n                \"border-[theme('colors.interaction.accent.surfaceHover')]\",\n                \"text-muted-foreground\",\n                \"hover:text-foreground\",\n                \"focus-visible:text-foreground\",\n                \"data-[selected=true]:!bg-[theme('colors.interaction.accent.tintActive')]\",\n                \"data-[selected=true]:!text-on-accent\",\n                \"data-[selected=true]:!border-[theme('colors.interaction.accent.surfaceActive')]\",\n              )}\n            >\n              {chip}\n            </Badge>\n          );\n        })}\n      </div>\n    </Hero>\n  );\n}\n\n","\"use client\";\n\nimport { usePromptLibrary } from \"./usePromptLibrary\";\n\nexport const CHAT_PROMPTS_STORAGE_KEY = \"prompts.chat.v1\" as const;\n\nexport function useChatPrompts() {\n  return usePromptLibrary(CHAT_PROMPTS_STORAGE_KEY);\n}\n","export const PROMPTS_TAB_ITEMS = [\n  { key: \"chat\", label: \"ChatGPT\" },\n  { key: \"codex\", label: \"Codex review\" },\n  { key: \"notes\", label: \"Notes\" },\n] as const;\n\nexport type PromptsTabKey = (typeof PROMPTS_TAB_ITEMS)[number][\"key\"];\n\nexport const PROMPTS_TAB_ID_BASE = \"prompts-tabs\" as const;\n","\"use client\";\n\nimport { usePromptLibrary } from \"./usePromptLibrary\";\n\nexport const CODEX_PROMPTS_STORAGE_KEY = \"prompts.codex.v1\" as const;\n\nexport function useCodexPrompts() {\n  return usePromptLibrary(CODEX_PROMPTS_STORAGE_KEY);\n}\n"],"names":["LazyCodexPromptsTab","React","default","CodexPromptsTab","LazyNotesTab","NotesTab","PromptsPage","prompts","chatPrompts","query","chatQuery","setQuery","setChatQuery","filtered","chatFiltered","save","saveChatPrompt","update","updateChatPrompt","remove","deleteChatPrompt","useChatPrompts","codexPrompts","codexQuery","setCodexQuery","codexFiltered","saveCodexPrompt","updateCodexPrompt","deleteCodexPrompt","useCodexPrompts","personas","usePersonas","notes","setNotes","useNotes","activeTab","setActiveTab","usePersistentState","TAB_STORAGE_KEY","tabCounts","chat","length","codex","trim","activeQuery","handleQueryChange","value","chatTabRef","codexTabRef","notesTabRef","pendingFocusRef","focusLoopRef","activeTabRef","tryFocus","pending","tab","handle","current","type","focusCompose","focusPersonas","focusScratchpad","ensureFocusLoop","step","window","requestAnimationFrame","cancelAnimationFrame","handleNewPrompt","action","target","handleNewPersona","PageShell","as","className","PromptsHeader","id","onQueryChange","onTabChange","onNewPrompt","onNewPersona","tabIndex","aria-labelledby","PROMPTS_TAB_ITEMS","map","item","panelContent","isActive","key","tabId","PROMPTS_TAB_ID_BASE","panelId","ChatTabPanel","ref","savePrompt","updatePrompt","deletePrompt","fallback","TabFallback","CodexTabPanel","onChange","div","role","hidden","data-state","cn","handleSave","title","text","_category","ChatPromptsTab","displayName","children","aria-live","PROMPT_CATEGORY_OPTIONS","label","createChatComposeDefaults","prompt","category","composeHeadingId","personasHeadingId","libraryHeadingId","formId","composeValues","setComposeValues","composeValuesRef","editingPromptId","setEditingPromptId","composeFormRef","personasHeadingRef","resetComposeValues","nextState","values","success","handleValuesChange","nextTitle","nextPrompt","nextCategory","previous","handleEditPrompt","handleDeletePrompt","didDelete","submitDisabled","submitLabel","focus","options","section","h3","p","GlitchNeoCard","EntityForm","fields","placeholder","required","defaultValue","rows","initialValues","onSubmit","onValuesChange","ul","persona","li","Card","header","h4","name","description","time","dateTime","Date","createdAt","toISOString","toLocaleString","LOCALE","SavedPromptList","onSelectPrompt","onEditPrompt","onDeletePrompt","areValuesEqual","a","b","aKeys","Object","keys","bKeys","contentClassName","DEFAULT_SUBMIT_LABEL","resetOnSubmit","afterFields","footer","actions","statusBadge","resolvedId","defaultValues","base","field","fieldId","setValues","valuesRef","fieldIds","prevDefaultsRef","prevInitialValuesRef","prevFieldIdsRef","isFirstRenderRef","prevDefaults","prevInitialValues","prevFieldIds","defaultsChanged","hasFieldStructureChanged","some","index","initialValuesChanged","areOptionalValuesEqual","hasValuesDriftedFromDefaults","firstFieldRef","handleFieldChange","nextValue","prev","resetForm","reset","handleSubmit","event","preventDefault","result","form","span","helperId","helper","undefined","descriptionId","commonProps","disabled","helperContent","labelId","htmlFor","Badge","size","tone","aria-hidden","Field","Root","renderFieldControl","setFirstFieldRef","fieldType","inputProps","Textarea","Select","option","Input","inputType","inputMode","element","Button","decodePrompts","Array","isArray","entry","decodePrompt","isRecord","Number","isFinite","push","EMPTY_PROMPT_LIST","usePromptLibrary","storageKey","setPrompts","decode","withTitles","derivePromptTitle","firstLine","split","find","line","fuseModulePromiseRef","fuseRef","setFiltered","ensureFuse","FuseModule","setCollection","instance","threshold","trimmed","cancelled","lowered","toLowerCase","filter","includes","runSearch","fuse","results","search","res","titleDraft","textDraft","next","uid","now","didUpdate","didRemove","keep","EMPTY_PERSONA_LIST","PROMPT_PERSONAS_STORAGE_KEY","trimmedQuery","formattedPrompts","createdAtDateTime","createdAtLabel","emptyState","GenericList","items","getKey","listClassName","renderItem","onClick","handleSelect","onKeyDown","handleKeyDown","IconButton","aria-label","variant","handleEditClick","stopPropagation","Pencil","handleDeleteClick","Trash2","chips","tabs","badge","handleChip","chip","nextQuery","searchId","Hero","subtitle","sticky","frame","padding","barClassName","ariaLabel","idBase","bodyClassName","searchBar","onValueChange","debounceMs","round","isSelected","interactive","selected","aria-pressed","CHAT_PROMPTS_STORAGE_KEY"],"sourceRoot":"","ignoreList":[]}