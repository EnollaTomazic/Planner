{"version":3,"file":"static/chunks/444.553567c64ddd0b22.js","mappings":"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","sources":["webpack://_N_E/./src/components/prompts/CodexPromptsTab.tsx"],"sourcesContent":["\"use client\";\n\nimport * as React from \"react\";\n\nimport { GlitchNeoCard } from \"@/components/ui\";\nimport {\n  EntityForm,\n  type EntityFormHandle,\n  type EntityFormOption,\n  type EntityFormValues,\n} from \"@/components/forms/EntityForm\";\nimport { SavedPromptList } from \"./SavedPromptList\";\nimport type { PromptWithTitle } from \"./types\";\n\nconst PROMPT_CATEGORY_OPTIONS = [\n  { value: \"ChatGPT\", label: \"ChatGPT\" },\n  { value: \"Codex review\", label: \"Codex review\" },\n  { value: \"Notes\", label: \"Notes\" },\n] satisfies ReadonlyArray<EntityFormOption>;\n\nexport interface CodexPromptsTabHandle {\n  focusCompose: (options?: FocusOptions) => void;\n}\n\nexport interface CodexPromptsTabProps {\n  prompts: PromptWithTitle[];\n  query: string;\n  savePrompt: (title: string, text: string, category: string) => boolean;\n  updatePrompt: (id: string, title: string, text: string) => boolean;\n  deletePrompt: (id: string) => boolean;\n}\n\nconst createCodexComposeDefaults = (): EntityFormValues => ({\n  title: \"\",\n  prompt: \"\",\n  category: \"Codex review\",\n});\n\nexport const CodexPromptsTab = React.forwardRef<\n  CodexPromptsTabHandle,\n  CodexPromptsTabProps\n>(function CodexPromptsTab(\n  { prompts, query, savePrompt, updatePrompt, deletePrompt },\n  ref,\n) {\n  const composeHeadingId = React.useId();\n  const libraryHeadingId = React.useId();\n  const formId = React.useId();\n  const [composeValues, setComposeValues] = React.useState<EntityFormValues>(\n    createCodexComposeDefaults,\n  );\n  const composeValuesRef = React.useRef(composeValues);\n  React.useEffect(() => {\n    composeValuesRef.current = composeValues;\n  }, [composeValues]);\n  const [editingPromptId, setEditingPromptId] = React.useState<string | null>(\n    null,\n  );\n  const composeFormRef = React.useRef<EntityFormHandle | null>(null);\n\n  const resetComposeValues = React.useCallback(() => {\n    const nextState = createCodexComposeDefaults();\n    composeValuesRef.current = nextState;\n    setComposeValues(nextState);\n    setEditingPromptId(null);\n  }, []);\n\n  const handleSave = React.useCallback(\n    (values: EntityFormValues) => {\n      const title = values.title?.trim() ?? \"\";\n      const prompt = values.prompt?.trim() ?? \"\";\n      if (!title || !prompt) {\n        return false;\n      }\n\n      const category = values.category ?? \"Codex review\";\n      if (editingPromptId) {\n        const success = updatePrompt(editingPromptId, title, prompt);\n        if (success) {\n          resetComposeValues();\n        }\n        return success;\n      }\n      const success = savePrompt(title, prompt, category);\n      if (success) {\n        resetComposeValues();\n      }\n      return success;\n    },\n    [editingPromptId, resetComposeValues, savePrompt, updatePrompt],\n  );\n\n  const handleValuesChange = React.useCallback((values: EntityFormValues) => {\n    const nextTitle = values.title ?? \"\";\n    const nextPrompt = values.prompt ?? \"\";\n    const nextCategory = values.category ?? \"Codex review\";\n\n    const previous = composeValuesRef.current;\n    if (\n      previous.title === nextTitle &&\n      previous.prompt === nextPrompt &&\n      previous.category === nextCategory\n    ) {\n      return;\n    }\n\n    const nextState = {\n      title: nextTitle,\n      prompt: nextPrompt,\n      category: nextCategory,\n    } satisfies EntityFormValues;\n\n    React.startTransition(() => {\n      composeValuesRef.current = nextState;\n      setComposeValues(nextState);\n    });\n  }, []);\n\n  const handleEditPrompt = React.useCallback(\n    (prompt: PromptWithTitle) => {\n      const nextState = {\n        title: prompt.title,\n        prompt: prompt.text,\n        category: composeValuesRef.current.category ?? \"Codex review\",\n      } satisfies EntityFormValues;\n      composeValuesRef.current = nextState;\n      setComposeValues(nextState);\n      setEditingPromptId(prompt.id);\n    },\n    [],\n  );\n\n  const handleDeletePrompt = React.useCallback(\n    (prompt: PromptWithTitle) => {\n      const didDelete = deletePrompt(prompt.id);\n      if (didDelete && editingPromptId === prompt.id) {\n        resetComposeValues();\n      }\n    },\n    [deletePrompt, editingPromptId, resetComposeValues],\n  );\n\n  const submitDisabled = React.useMemo(() => {\n    const title = composeValues.title?.trim() ?? \"\";\n    const prompt = composeValues.prompt?.trim() ?? \"\";\n    return title.length === 0 || prompt.length === 0;\n  }, [composeValues.prompt, composeValues.title]);\n\n  const submitLabel = editingPromptId ? \"Update\" : \"Save\";\n\n  React.useImperativeHandle(\n    ref,\n    () => ({\n      focusCompose: (options) => {\n        composeFormRef.current?.focus(options);\n      },\n    }),\n    [],\n  );\n\n  return (\n    <div className=\"flex flex-col gap-[var(--space-6)]\">\n      <section\n        aria-labelledby={composeHeadingId}\n        className=\"flex flex-col gap-[var(--space-3)]\"\n      >\n        <div className=\"space-y-[var(--space-1)]\">\n          <h3 id={composeHeadingId} className=\"type-title\">\n            Review checklist\n          </h3>\n          <p className=\"text-ui text-muted-foreground\">\n            Capture Codex review prompts that help validate architecture,\n            testing, and release notes.\n          </p>\n        </div>\n        <GlitchNeoCard className=\"p-[var(--space-4)]\">\n          <EntityForm\n            id={`codex-prompts-form-${formId}`}\n            title=\"New Codex prompt\"\n            ref={composeFormRef}\n            fields={[\n              {\n                id: \"title\",\n                label: \"Title\",\n                placeholder: \"Audit deployment plan\",\n                required: true,\n              },\n              {\n                id: \"category\",\n                label: \"Category\",\n                type: \"select\",\n                options: PROMPT_CATEGORY_OPTIONS,\n                defaultValue: \"Codex review\",\n              },\n              {\n                id: \"prompt\",\n                label: \"Prompt\",\n                placeholder: \"Outline review checklistâ€¦\",\n                type: \"textarea\",\n                rows: 6,\n                required: true,\n              },\n            ]}\n            initialValues={composeValues}\n            submitLabel={submitLabel}\n            submitDisabled={submitDisabled}\n            onSubmit={handleSave}\n            onValuesChange={handleValuesChange}\n          />\n        </GlitchNeoCard>\n      </section>\n\n      <section\n        aria-labelledby={libraryHeadingId}\n        className=\"flex flex-col gap-[var(--space-3)]\"\n      >\n        <div className=\"space-y-[var(--space-1)]\">\n          <h3 id={libraryHeadingId} className=\"type-title\">\n            Codex prompts\n          </h3>\n          <p className=\"text-ui text-muted-foreground\">\n            Saved checklists appear here for quick reuse during reviews.\n          </p>\n        </div>\n        <SavedPromptList\n          prompts={prompts}\n          query={query}\n          onSelectPrompt={handleEditPrompt}\n          onEditPrompt={handleEditPrompt}\n          onDeletePrompt={handleDeletePrompt}\n        />\n      </section>\n    </div>\n  );\n});\n\nCodexPromptsTab.displayName = \"CodexPromptsTab\";\n"],"names":["PROMPT_CATEGORY_OPTIONS","value","label","createCodexComposeDefaults","title","prompt","category","CodexPromptsTab","React","ref","prompts","query","savePrompt","updatePrompt","deletePrompt","composeHeadingId","libraryHeadingId","formId","composeValues","setComposeValues","composeValuesRef","current","editingPromptId","setEditingPromptId","composeFormRef","resetComposeValues","nextState","handleSave","values","trim","success","handleValuesChange","nextTitle","nextPrompt","nextCategory","previous","handleEditPrompt","text","id","handleDeletePrompt","submitDisabled","length","submitLabel","focusCompose","focus","options","div","className","section","aria-labelledby","h3","p","GlitchNeoCard","EntityForm","fields","placeholder","required","type","defaultValue","rows","initialValues","onSubmit","onValuesChange","SavedPromptList","onSelectPrompt","onEditPrompt","onDeletePrompt","displayName"],"sourceRoot":"","ignoreList":[]}