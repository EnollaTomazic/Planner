(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3792],{8659:(e,t,a)=>{"use strict";a.d(t,{PlannerPage:()=>K});var r=a(95155);a(48768);var n=a(12115),l=a(91182),s=a(64637),i=a(60815),o=a(25505),c=a(28727),u=a(27566),d=a(51616),m=a.n(d),p=a(57649),f=a(38283),g=a(25488),h=a(77372),v=a(10383),b=a(84804),x=a(17424),y=a(94911);let{heroPanel:k,heroContent:j,heroText:w,heroEyebrow:N,heroHeading:P,heroSubtitle:C,heroDial:T,heroRing:S,heroRingReduced:D,heroRingValue:_,heroRingCaption:E,heroSliderLabel:I,heroSlider:A,heroFeedback:M,heroActions:F,heroPortrait:R}=m(),L=n.lazy(async()=>({default:(await Promise.resolve().then(a.bind(a,80376))).DayView})),B=n.lazy(async()=>({default:(await Promise.resolve().then(a.bind(a,43476))).WeekView})),O=n.lazy(async()=>({default:(await Promise.resolve().then(a.bind(a,95288))).MonthView})),z=n.lazy(async()=>({default:(await Promise.resolve().then(a.bind(a,43244))).AgendaView})),W=[{value:"day",label:"Day"},{value:"week",label:"Week"},{value:"month",label:"Month"},{value:"agenda",label:"Agenda"}],H="planner-view",q={day:L,week:B,month:O,agenda:z},$={day:{title:"Loading day planner",description:"Syncing today's focus and notes…"},week:{title:"Loading week overview",description:"Pulling the sprint schedule and totals…"},month:{title:"Loading month planner",description:"Rendering the expanded calendar grid…"},agenda:{title:"Loading agenda",description:"Collecting tasks and reminders for the list…"}};function Y(e){let{mode:t}=e,a=$[t];return(0,r.jsxs)("div",{role:"status","aria-live":"polite",className:"flex min-h-[12rem] flex-col items-center justify-center gap-[var(--space-2)] rounded-lg border border-dashed border-border/60 bg-muted/20 p-[var(--space-6)] text-center text-muted-foreground",children:[(0,r.jsx)("span",{className:"text-label font-medium tracking-[0.08em] uppercase",children:a.title}),(0,r.jsx)("p",{className:"max-w-prose text-subtle",children:a.description})]})}function U(){var e;let{iso:t,today:a}=(0,p.useFocusDate)(),{viewMode:d,setViewMode:m}=(0,f.usePlanner)(),{start:x,end:L}=(0,p.useWeek)(t),B=a===g.hs,O=(0,c.Fe)(),z=null!=(e=null==O?void 0:O[0].variant)?e:"aurora",$=(0,o.j)(),[U,K]=n.useState(72),V=n.useMemo(()=>B?"Week preview loading…":(0,b.tj)(x,L),[L,B,x]),G=n.useId(),Z=n.useId(),X=n.useCallback(e=>{e!==d&&m(e)},[m,d]),J=n.useMemo(()=>"noir"===z||"hardstuck"===z?"back-to-back":"aurora"===z||"ocean"===z?"angel-leading":"demon-leading",[z]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.qK,{as:"header",grid:!0,className:"py-[var(--space-6)]",children:[(0,r.jsx)("section",{className:k,"aria-labelledby":"planner-hero-heading",children:(0,r.jsxs)("div",{className:j,children:[(0,r.jsxs)("div",{className:(0,u.cn)(w,"col-span-full"),children:[(0,r.jsx)("span",{className:N,children:"Planner autopilot"}),(0,r.jsx)("h2",{id:"planner-hero-heading",className:P,children:"Agnes & Noxi tuned this sprint blueprint"}),(0,r.jsx)("p",{className:C,children:"Tweak the focus dial before locking the week. Agnes maps the calm line, Noxi keeps the glitch guardrails on. Every suggestion stays editable."}),(0,r.jsxs)("div",{className:T,children:[(0,r.jsxs)("div",{className:(0,u.cn)(S,$&&D),children:[(0,r.jsx)(i.A,{pct:U,size:"l"}),(0,r.jsxs)("span",{className:_,children:[U,"%"]})]}),(0,r.jsx)("span",{className:E,children:"Focus calibration"}),(0,r.jsxs)("label",{className:I,htmlFor:Z,children:[(0,r.jsx)("span",{className:"text-label font-medium tracking-[0.08em] uppercase",children:"Adjust energy"}),(0,r.jsx)("input",{id:Z,type:"range",min:20,max:100,step:1,value:U,onChange:e=>K(Number(e.target.value)),className:A,"aria-valuemin":20,"aria-valuemax":100,"aria-valuenow":U,"aria-describedby":"".concat(Z,"-feedback")}),(0,r.jsx)("span",{id:"".concat(Z,"-feedback"),className:M,"aria-live":"polite",children:U>=75?"High-intensity push queued.":U<=40?"Keeping a low-impact tempo.":"Balanced cadence engaged."})]})]}),(0,r.jsxs)("div",{className:F,children:[(0,r.jsx)(l.$n,{size:"sm",variant:"ghost",tone:"accent",children:"Retry suggestions"}),(0,r.jsx)(l.$n,{size:"sm",variant:"default",tone:"accent",children:"Edit draft"}),(0,r.jsx)(l.$n,{size:"sm",variant:"ghost",children:"Cancel"})]})]}),(0,r.jsx)("div",{className:R,children:(0,r.jsx)(s.f,{pose:J,transparentBackground:!0})})]})}),(0,r.jsx)(l.zY,{containerClassName:"col-span-full",header:{id:"planner-header",tabIndex:-1,eyebrow:"Planner",heading:"Planner for Today",subtitle:"Plan your week",icon:(0,r.jsx)(v.A,{className:"opacity-80"}),sticky:!1},hero:{sticky:!1,heading:"Week controls",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.PlannerIslandBoundary,{name:"planner:week-picker",title:"Week controls unavailable",description:"We hit an error loading the planner controls. Retry to restore the week picker.",retryLabel:"Retry controls",children:(0,r.jsx)(h.WeekPicker,{})}),(0,r.jsx)("div",{"aria-live":"polite",className:"sr-only",children:V})]})}}),(0,r.jsxs)("div",{className:"col-span-full mt-[var(--space-4)] flex flex-wrap items-center justify-between gap-[var(--space-2)]",children:[(0,r.jsx)("span",{id:G,className:"text-label font-medium text-muted-foreground",children:"View"}),(0,r.jsx)(l.bK,{value:d,onChange:X,ariaLabelledby:G,children:W.map(e=>{let t="".concat(H,"-").concat(e.value,"-tab"),a="".concat(H,"-").concat(e.value,"-panel");return(0,r.jsx)(l.s$,{value:e.value,id:t,"aria-controls":a,children:e.label},e.value)})})]})]}),W.map(e=>{let t="".concat(H,"-").concat(e.value,"-tab"),a="".concat(H,"-").concat(e.value,"-panel"),l=d===e.value,s=q[e.value];return(0,r.jsx)("div",{role:"tabpanel",id:a,"aria-labelledby":t,hidden:!l,tabIndex:l?0:-1,children:l?(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)(Y,{mode:e.value}),children:(0,r.jsx)(s,{})}):null},e.value)})]})}function K(){return(0,r.jsx)(x.$L,{children:(0,r.jsx)(f.PlannerProvider,{children:(0,r.jsx)(U,{})})})}},9535:(e,t,a)=>{"use strict";a.d(t,{useSelectedProject:()=>c,useSelectedTask:()=>d,useSelectionState:()=>s});var r=a(12115),n=a(38283);let l={};function s(e,t){let{getCurrentId:a,produceSelection:l}=t,{selected:s,setSelected:i}=(0,n.useSelection)();return[a(s[e]),r.useCallback(t=>{i(a=>{let r=a[e],n=l(t,r);return r&&r.projectId===n.projectId&&r.taskId===n.taskId?a:{...a,[e]:n}})},[e,l,i])]}let i=e=>{var t;return null!=(t=null==e?void 0:e.projectId)?t:""},o=e=>e?{projectId:e}:{};function c(e){var t;let{days:a}=(0,n.useDays)(),l=s(e,{getCurrentId:i,produceSelection:o}),[c,u]=l,d=null==(t=a[e])?void 0:t.projects;return r.useEffect(()=>{c&&((null==d?void 0:d.some(e=>e.id===c))||u(""))},[d,c,u]),l}let u=e=>{var t;return null!=(t=null==e?void 0:e.taskId)?t:""};function d(e){var t;let{days:a,tasksById:i}=(0,n.useDays)(),o=null!=(t=i[e])?t:l,c=a[e];return s(e,{getCurrentId:u,produceSelection:r.useCallback(e=>{var t,a,r;if(!e)return{};let n=null!=(r=null!=(a=o[e])?a:null==c||null==(t=c.tasksById)?void 0:t[e])?r:null==c?void 0:c.tasks.find(t=>t.id===e);return{taskId:e,projectId:null==n?void 0:n.projectId}},[o,c])})}},11468:(e,t,a)=>{"use strict";a.d(t,{FocusPanel:()=>c});var r=a(95155);a(48768);var n=a(12115),l=a(3278),s=a(52105),i=a(11615),o=a(81393);function c(e){let{iso:t}=e,{value:a,setValue:c,saving:u,isDirty:d,lastSavedRef:m,commit:p}=(0,o.useDayFocus)(t),f=n.useMemo(()=>"focus-".concat(t,"-header"),[t]);return(0,r.jsxs)(l.SectionCard,{className:"card-neo-soft",children:[(0,r.jsx)(l.SectionCard.Header,{id:f,title:"Daily Focus",titleAs:"h6",titleClassName:"text-title font-semibold tracking-tight"}),(0,r.jsxs)(l.SectionCard.Body,{children:[(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p()},className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)(s.Input,{placeholder:"What’s the one thing today?",value:a,onChange:e=>c(e.target.value),onBlur:p,name:"focus-".concat(t),autoComplete:"off",className:"flex-1","aria-labelledby":f}),(0,r.jsx)(i.Button,{type:"submit",variant:"default",size:"sm",disabled:!d||u,"aria-disabled":!d||u,children:u?"Saving…":"Save"})]}),(0,r.jsx)("div",{className:"mt-[var(--space-2)] text-label text-muted-foreground","aria-live":"polite",children:u?"Saving changes…":d?"Unsaved changes":m.current?"All changes saved":"No focus set yet"})]})]})}},12607:(e,t,a)=>{"use strict";a.d(t,{useDay:()=>i});var r=a(12115),n=a(25488),l=a(83996),s=a(51266);function i(e){let{days:t,upsertDay:a}=(0,s.usePlannerStore)(),i=r.useMemo(()=>(0,n.pF)(t,e),[t,e]),o=i.tasks,c=i.tasksById,u=i.tasksByProject,d=r.useMemo(()=>(0,l.v_)(e,a),[e,a]),m=i.doneCount,p=i.totalCount;return{projects:i.projects,tasks:o,tasksById:c,tasksByProject:u,addProject:d.addProject,renameProject:d.renameProject,deleteProject:d.removeProject,toggleProject:d.toggleProject,addTask:d.addTask,renameTask:d.renameTask,deleteTask:d.removeTask,toggleTask:d.toggleTask,addTaskImage:d.addTaskImage,removeTaskImage:d.removeTaskImage,updateTaskReminder:d.updateTaskReminder,doneCount:m,totalCount:p}}},13920:e=>{e.exports={thumbnail:"TaskRow_thumbnail__MRf_B"}},15892:(e,t,a)=>{"use strict";a.d(t,{$:()=>s});var r=a(95155),n=a(12115),l=a(93706);let s=n.memo(function(e){let{iso:t,isToday:a}=e;return(0,r.jsx)("li",{id:"day-".concat(t),"aria-label":"Day ".concat(t).concat(a?" (Today)":""),className:"w-full scroll-m-[calc(var(--space-8)+var(--space-6))] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",tabIndex:0,children:(0,r.jsx)(l.DayCard,{iso:t,isToday:a})})},(e,t)=>e.iso===t.iso&&e.isToday===t.isToday)},16386:(e,t,a)=>{"use strict";a.d(t,{AI:()=>u,By:()=>l,DQ:()=>p,Vo:()=>g,XZ:()=>c,ei:()=>d,mr:()=>f,oB:()=>s,oE:()=>o,u0:()=>m,wE:()=>i});var r=a(25488);function n(e){var t,a,n,l,s,i;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=null!=(t=o.projects)?t:e.projects,u=Object.prototype.hasOwnProperty.call(o,"tasks"),d=u&&null!=(a=o.tasks)?a:e.tasks,m=null!=(n=e.tasksById)?n:{},p=null!=(l=e.tasksByProject)?l:{};if(u){let e=(0,r.he)(d);m=e.tasksById,p=e.tasksByProject}else Object.prototype.hasOwnProperty.call(o,"tasksById")&&(m=null!=(s=o.tasksById)?s:{}),Object.prototype.hasOwnProperty.call(o,"tasksByProject")&&(p=null!=(i=o.tasksByProject)?i:{});let{doneCount:f,totalCount:g}=(0,r.IZ)(c,d);return{...e,...o,projects:c,tasks:d,tasksById:m,tasksByProject:p,doneCount:f,totalCount:g}}function l(e,t,a){let r=a.trim();if(!r)return e;let l=Date.now(),s=[...e.projects,{id:t,name:r,done:!1,createdAt:l}];return n(e,{projects:s})}function s(e,t,a){let r=a.trim();if(!r)return e;let l=e.projects.find(e=>e.id===t);return l&&l.name!==r?n(e,{projects:e.projects.map(e=>e.id===t?{...e,name:r}:e)}):e}function i(e,t){var a,r;let l=null!=(r=null==(a=e.projects.find(e=>e.id===t))?void 0:a.done)&&r,s=e.projects.map(e=>e.id===t?{...e,done:!l}:e),i=e.tasks.map(e=>e.projectId===t?{...e,done:!l}:e);return n(e,{projects:s,tasks:i})}function o(e,t){return n(e,{projects:e.projects.filter(e=>e.id!==t),tasks:e.tasks.filter(e=>e.projectId!==t)})}function c(e,t,a,r){let l=a.trim();if(!l)return e;let s=Date.now(),i=[...e.tasks,{id:t,title:l,done:!1,projectId:r,createdAt:s,images:[]}];return n(e,{tasks:i})}function u(e,t,a){let r=a.trim();if(!r)return e;let l=e.tasks.find(e=>e.id===t);return l&&l.title!==r?n(e,{tasks:e.tasks.map(e=>e.id===t?{...e,title:r}:e)}):e}function d(e,t){return n(e,{tasks:e.tasks.map(e=>e.id===t?{...e,done:!e.done}:e)})}function m(e,t){return n(e,{tasks:e.tasks.filter(e=>e.id!==t)})}function p(e,t,a){let l=!1,s=e.tasks.map(e=>{var n;if(e.id!==t)return e;if(null===a){if(!e.reminder)return e;l=!0;let t={...e};return delete t.reminder,t}let s=null!=(n=e.reminder)?n:{},i=(0,r.JY)({...s,...a});if((0,r.x6)(e.reminder,i))return e;if(l=!0,!i){let t={...e};return delete t.reminder,t}return{...e,reminder:i}});return l?n(e,{tasks:s}):e}function f(e,t,a){let r=a.trim();return r?n(e,{tasks:e.tasks.map(e=>e.id===t?{...e,images:[...e.images,r]}:e)}):e}function g(e,t,a,r){return n(e,{tasks:e.tasks.map(e=>{if(e.id!==t)return e;let n=void 0!==r&&e.images[r]===a?r:e.images.indexOf(a);if(n<0)return e;let l=e.images.slice();return l.splice(n,1),{...e,images:l}})})}},17424:(e,t,a)=>{"use strict";a.d(t,{$L:()=>p,ZP:()=>f,dZ:()=>d});var r=a(95155),n=a(12115),l=a(67419);function s(e,t,a,r,n){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6?arguments[6]:void 0,o=Date.now();return{id:(0,l.uid)("rem"),title:e,body:t,tags:a,source:r,group:n,pinned:s,domain:i,createdAt:o,updatedAt:o}}let i=[s("Hit 2 first","Push 3 melees → step up or respect if losing push.",[],"BLA","quick",!0,"Learn"),s("Jungle start check","Track start → first gank lane → second spawn prio.",[],"BrokenByConcept","quick",!0,"Learn"),s("3-wave plan","Say it: slow then crash 3 OR hold then thin/freeze.",[],"MLA","pregame",!1,"League"),s("Ward 2:30","River/tri at 2:30. Sweep before shove.",[],"BrokenByConcept","pregame",!1,"Learn"),s("Space with casters","Trade when your casters live; back off on enemy wave.",[],"MLA","laning",!1,"League"),s("CD punish","Trade on enemy cooldown gaps; track sums.",[],"MLA","trading",!1,"League"),s("Good recall","Shove → recall on spike → arrive first to river.",[],"BrokenByConcept","tempo",!1,"Learn"),s("Death audit","Wave, vision, jungle, greed. Name the fix.",[],"BLA","review",!1,"Learn")],o=[{key:"quick",label:"Quick",hint:"Pin-worthy"},{key:"pregame",label:"Pre-Game",hint:"Before queue"},{key:"laning",label:"Laning",hint:"Wave & trades"},{key:"trading",label:"Trading",hint:"Windows & sums"},{key:"tempo",label:"Tempo",hint:"Recall & prio"},{key:"review",label:"Review",hint:"After game"}],c=["all","MLA","BLA","BrokenByConcept","Custom"].map(e=>({key:e,label:"all"===e?"All":e})),u=e=>e.trim().toLowerCase(),d=n.createContext(null);function m(e,t){return e.filter(e=>(e.domain?e.domain:"BLA"===e.source||"BrokenByConcept"===e.source?"Learn":"League")===t)}function p(e){let{children:t}=e,a=function(){let[e,t]=(0,l.ud)("goals.reminders.v4",i),[a,r]=n.useState(""),[s,d]=n.useState(!1),[p,f]=(0,l.ud)("goals.reminders.domain.v2","League"),[g,h]=(0,l.ud)("goals.reminders.group.v1","quick"),[v,b]=(0,l.ud)("goals.reminders.source.v1","all"),[x,y]=n.useState(""),[k,j]=n.useState(null),[w,N]=n.useState(!1),P="League"===p||"Learn"===p,C=n.useMemo(()=>m(e,p),[e,p]),T=n.useCallback(()=>{j(null)},[j]),S=n.useCallback(e=>{j(e)},[j]),D=n.useMemo(()=>C.reduce((e,t)=>{var a;return e[t.group]=(null!=(a=e[t.group])?a:0)+1,e},{quick:0,pregame:0,laning:0,trading:0,tempo:0,review:0}),[C]),_=n.useMemo(()=>{let e=a.trim().toLowerCase();return C.filter(e=>!P||e.group===g).filter(e=>"all"===v||e.source===v).filter(e=>!s||e.pinned).filter(t=>{var a;return!e||[t.title,null!=(a=t.body)?a:"",t.tags.join(" "),t.source,t.group].join(" ").toLowerCase().includes(e)}).sort((e,t)=>!!t.pinned==!!e.pinned?t.updatedAt-e.updatedAt:Number(t.pinned)-Number(e.pinned))},[C,g,v,s,a,P]),E=n.useCallback(e=>{let a=!1;return t(t=>{let r=Date.now(),n=(null!=e?e:"New reminder").trim()||"New reminder",s=m(t,p),i=s.some(e=>u(e.title)===u(n));if(i&&e)return S("Reminder already exists."),y(e=>e.trim()),t;let o=i?function(e,t){let a=2,r="".concat(e," (").concat(a,")");for(;t.some(e=>u(e.title)===u(r));)a+=1,r="".concat(e," (").concat(a,")");return r}(n,s):n,c={id:(0,l.uid)("rem"),title:o,body:"",tags:[],source:"Learn"===p?"BLA":"Custom",group:g,domain:p,pinned:"quick"===g,createdAt:r,updatedAt:r};return T(),a=!0,[c,...t]}),a&&y(""),a},[p,g,t,y,T,S]),I=n.useCallback((e,a)=>{t(t=>t.map(t=>t.id===e?{...t,...a,updatedAt:Date.now()}:t))},[t]),A=n.useCallback(e=>{t(t=>t.filter(t=>t.id!==e))},[t]),M=n.useCallback(()=>{N(e=>!e)},[N]),F=n.useCallback(()=>{d(e=>!e)},[d]),R="Life"===p?"neon-life":"neon-primary",L=n.useMemo(()=>o.map(e=>({key:e.key,label:e.label,badge:D[e.key]})),[D]);return n.useMemo(()=>({items:e,filtered:_,counts:D,domain:p,setDomain:f,group:g,setGroup:h,source:v,setSource:b,query:a,setQuery:r,onlyPinned:s,setOnlyPinned:d,quickAdd:x,setQuickAdd:y,quickAddError:k,clearQuickAddError:T,setQuickAddError:S,showFilters:w,setShowFilters:N,addReminder:E,updateReminder:I,removeReminder:A,toggleFilters:M,togglePinned:F,showGroups:P,neonClass:R,groupTabs:L,sourceTabs:c,groups:o}),[e,_,D,p,f,g,h,v,b,a,r,s,d,x,y,k,T,S,w,N,E,I,A,M,F,P,R,L])}();return(0,r.jsx)(d.Provider,{value:a,children:t})}function f(){let e=n.useContext(d);if(!e)throw Error("useReminders must be used within a RemindersProvider");return e}},25488:(e,t,a)=>{"use strict";a.d(t,{B_:()=>y,Hs:()=>p,IZ:()=>v,JY:()=>l,b8:()=>g,dR:()=>h,he:()=>b,hs:()=>m,pF:()=>x,x6:()=>s,xJ:()=>f,yr:()=>d});var r=a(84804);let n=/^(?:[01]\d|2[0-3]):[0-5]\d$/;function l(e){if(!e)return;let t=e.reminderId,a="string"==typeof t&&t.trim().length>0?t.trim():void 0,r=e.time,l="string"==typeof r&&n.test(r)?r:void 0,s=e.leadMinutes,i="number"==typeof s&&Number.isFinite(s)&&s>=0?Math.min(1440,Math.round(s)):void 0,o="boolean"==typeof e.enabled?!0===e.enabled:!!(a||l||void 0!==i);if(o||a||l||void 0!==i)return{enabled:o,...a?{reminderId:a}:{},...l?{time:l}:{},...void 0!==i?{leadMinutes:i}:{}}}function s(e,t){var a,r,n,l,s,i;return e===t||!!e&&!!t&&e.enabled===t.enabled&&(null!=(a=e.reminderId)?a:void 0)===(null!=(r=t.reminderId)?r:void 0)&&(null!=(n=e.time)?n:void 0)===(null!=(l=t.time)?l:void 0)&&(null!=(s=e.leadMinutes)?s:void 0)===(null!=(i=t.leadMinutes)?i:void 0)}function i(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function o(e){if(!Array.isArray(e))return[];let t=[];for(let a of e)"string"==typeof a&&t.push(a);return t}function c(e){if(!i(e))return null;let t=e.id,a=e.name,r=e.done,n=e.createdAt;if("string"!=typeof t||"string"!=typeof a||"boolean"!=typeof r||"number"!=typeof n||!Number.isFinite(n))return null;let l=e.disabled,s=e.loading;return{id:t,name:a,done:r,createdAt:n,..."boolean"==typeof l?{disabled:l}:{},..."boolean"==typeof s?{loading:s}:{}}}function u(e){if(!i(e))return null;let t=e.id,a=e.title,r=e.done,n=e.createdAt;if("string"!=typeof t||"string"!=typeof a||"boolean"!=typeof r||"number"!=typeof n||!Number.isFinite(n))return null;let s=e.projectId,c=o(e.images),u=e.reminder,d=l(i(u)?u:void 0);return{id:t,title:a,done:r,createdAt:n,..."string"==typeof s?{projectId:s}:{},images:c,...d?{reminder:d}:{}}}function d(e){if(!i(e))return{};let t={};for(let[a,r]of Object.entries(e)){let e=function(e){if(!i(e))return null;let t=e.projects,a=e.tasks,r=Array.isArray(t)?t.map(c).filter(e=>null!==e):[],n=Array.isArray(a)?a.map(u).filter(e=>null!==e):[],{tasksById:l,tasksByProject:s}=b(n),{doneCount:o,totalCount:d}=v(r,n),m=e.focus,p=e.notes,f="string"==typeof m,g="string"==typeof p;if(!r.length&&!n.length&&!f&&!g)return null;let h={projects:r,tasks:n,tasksById:l,tasksByProject:s,doneCount:o,totalCount:d};return f&&(h.focus=m),g&&(h.notes=p),h}(r);e&&(t[a]=e)}return t}let m="",p="2000-01-03";function f(e){return"string"!=typeof e?null:e===m||(0,r.E4)(e)?e:null}function g(e){let t,a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{maxAgeDays:l=365,now:s}=n,i=Math.floor(l);if(!Number.isFinite(i)||i<0)return{days:e,pruned:void 0};if(void 0===s)t=new Date;else if("string"==typeof s){var o;t=null!=(o=(0,r.E4)(s))?o:new Date(s)}else t=new Date(s);if(Number.isNaN(t.getTime()))return{days:e,pruned:void 0};let c=new Date(t.getTime());c.setDate(c.getDate()-i),c.setHours(0,0,0,0);let u=c.getTime(),d=new Date(t.getTime());d.setHours(23,59,59,999);let m=d.getTime(),p=Object.keys(e);if(!p.length)return{days:e,pruned:void 0};let f=[],g=!1,h=1/0,v=-1/0;for(let e of p){let t=(0,r.E4)(e);if(!t){f.push({iso:e,time:null});continue}let a=t.getTime();f.push({iso:e,time:a}),g=!0,a<h&&(h=a),a>v&&(v=a)}if(g&&h>=u&&v<=m)return{days:e,pruned:void 0};let b=e,x=!1;for(let{iso:t,time:r}of f)null===r||r>=u||(x||(x=!0,b={...e}),delete b[t],(null!=a?a:a=[]).push(t));return x?{days:b,pruned:a}:{days:e,pruned:void 0}}function h(){return(0,r.$$)(new Date)}function v(e,t){let a=0,r=0;for(let t of e)r+=1,t.done&&(a+=1);for(let e of t)r+=1,e.done&&(a+=1);return{doneCount:a,totalCount:r}}function b(e){let t={},a={};for(let n of e){var r;a[n.id]=n;let e=n.projectId;e&&(null!=(r=t[e])?r:t[e]=[]).push(n.id)}return{tasksById:a,tasksByProject:t}}function x(e,t){var a,r;let n=e[t];if(!n)return{projects:[],tasks:[],tasksById:{},tasksByProject:{},doneCount:0,totalCount:0};let i=n.tasks,c=!1;for(let e=0;e<i.length;e+=1){let t=i[e],a=t,r=!1,n=t.images;if(!(Array.isArray(n)&&n.every(e=>"string"==typeof e))){let e=o(n);r=!0,a={...a,images:e}}let u=l(t.reminder);if(!s(t.reminder,u))if(r=!0,u)a={...a,reminder:u};else{let e={...a};delete e.reminder,a=e}r&&(c||(c=!0,i=i.slice()),i[e]=a)}let{tasksById:u,tasksByProject:d}=b(i),m=null!=(a=n.tasksByProject)?a:{},p=null!=(r=n.tasksById)?r:{},f=!Object.prototype.hasOwnProperty.call(n,"tasksByProject")||!function(e,t){let a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(let r of a){var n;let a=null!=(n=e[r])?n:[],l=t[r];if(!l||a.length!==l.length)return!1;for(let e=0;e<a.length;e+=1)if(a[e]!==l[e])return!1}return!0}(m,d),g=!Object.prototype.hasOwnProperty.call(n,"tasksById")||!function(e,t){let a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(let r of a)if(!Object.prototype.hasOwnProperty.call(t,r)||e[r]!==t[r])return!1;return!0}(p,u),{doneCount:h,totalCount:x}=v(n.projects,i),y=n.doneCount!==h||n.totalCount!==x;return c||f||g||y?{...n,...c?{tasks:i}:{},...f?{tasksByProject:d}:{},...g?{tasksById:u}:{},doneCount:h,totalCount:x}:n}function y(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))return;let a=x(e,t);return a===e[t]?void 0:a}},26041:(e,t,a)=>{"use strict";a.d(t,{J:()=>s,cu:()=>i,tm:()=>o});let r=new Set(["Wave","Trading","Vision","Tempo","Positioning","Comms"]),n=new Set(["Blue","Red"]),l=new Set(["TOP","JUNGLE","MID","BOT","SUPPORT"]);function s(e){return"string"==typeof e&&r.has(e)}function i(e){return"string"==typeof e&&n.has(e)}function o(e){return"string"==typeof e&&l.has(e)}},26439:(e,t,a)=>{"use strict";a.d(t,{TaskRow:()=>_});var r=a(95155),n=a(12115),l=a(15239),s=a(52105),i=a(7040),o=a(11615),c=a(49412),u=a(18514),d=a(71360),m=a(18344),p=a(39849),f=a(27566),g=a(44392),h=a(50306),v=a(25505),b=a(67419),x=a(13920),y=a.n(x);let k=h.q0[6],j=h.q0[2],w=h.q0[0],N="cubic-bezier(0.16, 1, 0.3, 1)",P="cubic-bezier(0.2, 0.8, 0.2, 1)",C=[.16,1,.3,1],T=[.2,.8,.2,1],S=(e,t)=>{if("undefined"==typeof document)return t;let a=getComputedStyle(document.documentElement).getPropertyValue(e).trim();return a.length>0?a:t},D=(e,t)=>{let a=e.trim().match(/^cubic-bezier\(([^)]+)\)$/i);if(!a)return t;let r=a[1].split(",").map(e=>Number.parseFloat(e.trim())).filter(e=>Number.isFinite(e));return 4===r.length?r:t};function _(e){let{task:t,toggleTask:a,deleteTask:x,renameTask:_,selectTask:E,addImage:I,removeImage:A}=e,M=(0,v.j)(),[F,R]=n.useState(()=>"undefined"!=typeof document&&document.documentElement.classList.contains("no-animations")),[L,B]=n.useState(()=>({easeOut:N,motionEaseGlitch:P,easeOutCurve:C,motionEaseGlitchCurve:T,durationMd:.22,durationLg:.42})),O=(0,m.s)(),z=M||F,[W,H]=n.useState(!1),[q,$]=n.useState(t.title),[Y,U]=n.useState(""),K=n.useRef(null),[V,G]=n.useState(!1),[Z,X]=n.useState(null),J=Y.trim(),Q=J.length>0,ee=t.title.trim()||"Untitled task";n.useEffect(()=>{if("undefined"==typeof document)return;let e=document.documentElement,t=()=>{R(e.classList.contains("no-animations"))};if(t(),"undefined"==typeof MutationObserver)return;let a=new MutationObserver(t);return a.observe(e,{attributes:!0,attributeFilter:["class"]}),()=>{a.disconnect()}},[]),n.useEffect(()=>{let e=S("--ease-out",N),t=S("--motion-ease-glitch",P);B({easeOut:e,motionEaseGlitch:t,easeOutCurve:D(e,C),motionEaseGlitchCurve:D(t,T),durationMd:(0,h.ZI)("--motion-duration-md",220)/1e3,durationLg:(0,h.ZI)("--motion-duration-lg",420)/1e3})},[]),n.useEffect(()=>{O.set({y:0,scale:1})},[O]);let et=n.useRef(t.done);n.useEffect(()=>{if(z){O.set({y:0,scale:1}),et.current=t.done;return}if(et.current===t.done){et.current=t.done;return}let e=t.done?w:-w;O.start({y:[0,e,0],scale:t.done?[1,.98,1]:[1,1.02,1],transition:{duration:L.durationMd,ease:L.motionEaseGlitchCurve}}),et.current=t.done},[t.done,z,O,L.durationMd,L.motionEaseGlitchCurve]);let ea=n.useRef([]),er=n.useMemo(()=>{let e=ea.current,a=new Set,r=[];for(let l of t.images){let s=-1;for(let t=0;t<e.length;t+=1){var n;if(!a.has(t)&&(null==(n=e[t])?void 0:n.url)===l){s=t;break}}s>=0?(a.add(s),r.push(e[s])):r.push({url:l,id:"".concat(t.id,"-image-").concat((0,b.uid)())})}return ea.current=r,r},[t.id,t.images]),en=n.useCallback(e=>{if(!e)return"Enter an image URL.";try{let t=new URL(e);if("https:"!==t.protocol)return"Image URL must start with https."}catch(e){return"Enter a valid image URL."}return null},[]);(0,g.A)({ref:K,when:W}),n.useEffect(()=>{W||$(t.title)},[W,t.title]);let el=n.useCallback(()=>{G(!0)},[]),es=n.useCallback(e=>{let t=e.relatedTarget;t&&e.currentTarget.contains(t)||G(!1)},[]),ei=n.useCallback(e=>{e.target instanceof Element&&e.target.closest("[data-task-row-guard='true']")||E()},[E]),eo=n.useCallback(e=>{e.target===e.currentTarget&&("Enter"===e.key&&(e.preventDefault(),E()),(" "===e.key||"Spacebar"===e.key)&&e.preventDefault())},[E]),ec=n.useCallback(e=>{e.target===e.currentTarget&&(" "===e.key||"Spacebar"===e.key)&&(e.preventDefault(),E())},[E]);function eu(){let e=q.trim();if(H(!1),!e)return void $(t.title);e!==t.title&&_(e)}return(0,r.jsxs)(p.P.li,{className:"group",initial:z?void 0:{opacity:0,y:j,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{duration:z?0:L.durationLg,ease:L.easeOutCurve},children:[(0,r.jsxs)(p.P.div,{className:"relative",onFocusCapture:el,onBlurCapture:es,animate:O,initial:!1,children:[(0,r.jsx)("button",{type:"button","aria-label":"Select task ".concat(ee),onClick:ei,onKeyDown:eo,onKeyUp:ec,className:(0,f.cn)("absolute inset-0 w-full cursor-pointer rounded-card r-card-lg border transition-colors","bg-card/55 hover:bg-card/70 focus-visible:bg-card/70 active:bg-card/80","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-0","data-[focus-within=true]:ring-2 data-[focus-within=true]:ring-ring"),"data-focus-within":V?"true":void 0,children:(0,r.jsx)("span",{className:"sr-only",children:"Select task ".concat(ee)})}),(0,r.jsxs)("div",{className:(0,f.cn)("pointer-events-none relative z-[1]","[overflow:visible] grid min-h-[var(--space-7)] min-w-0 grid-cols-[auto,1fr,auto] items-center gap-[var(--space-4)] pl-[var(--space-4)] pr-[var(--space-2)] py-[var(--space-2)]"),children:[(0,r.jsx)("div",{className:"pointer-events-auto shrink-0 ml-[var(--space-1)]","data-task-row-guard":"true",onPointerDown:e=>e.stopPropagation(),children:(0,r.jsx)(c.CheckCircle,{checked:t.done,onChange:()=>{W||a()},"aria-label":"Toggle ".concat(ee," done"),size:"sm"})}),(0,r.jsx)("div",{className:"pointer-events-auto flex-1 min-w-0 px-[var(--space-1)]",children:W?(0,r.jsx)(s.Input,{name:"dc-rename-task-".concat(t.id),ref:K,value:q,onChange:e=>$(e.target.value),onBlur:eu,onKeyDown:e=>{"Enter"===e.key&&eu(),"Escape"===e.key&&(H(!1),$(t.title))},"aria-label":"Rename task ".concat(ee),"data-task-row-guard":"true"}):(0,r.jsx)("button",{type:"button",className:"task-tile__text block w-full text-left focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring rounded-card r-card-lg",onClick:e=>{e.stopPropagation(),a()},onDoubleClick:e=>{e.stopPropagation(),H(!0)},onPointerDown:e=>e.stopPropagation(),"aria-pressed":t.done,title:"Click to toggle; double-click to edit",children:(0,r.jsx)("span",{className:(0,f.cn)("truncate break-words",t.done&&"line-through-soft"),children:t.title})})}),(0,r.jsxs)("div",{className:(0,f.cn)("pointer-events-auto flex shrink-0 items-center gap-[var(--space-2)]",W?"opacity-0 pointer-events-none":"opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto group-focus-within:opacity-100 group-focus-within:pointer-events-auto"),children:[(0,r.jsx)(i.IconButton,{"aria-label":"Edit task",title:"Edit",onClick:e=>{e.stopPropagation(),H(!0)},onPointerDown:e=>e.stopPropagation(),size:"sm",iconSize:"xs",variant:"quiet",children:(0,r.jsx)(u.A,{})}),(0,r.jsx)(i.IconButton,{"aria-label":"Delete task",title:"Delete",onClick:e=>{e.stopPropagation(),x()},onPointerDown:e=>e.stopPropagation(),size:"sm",iconSize:"xs",variant:"quiet",children:(0,r.jsx)(d.A,{})})]})]})]}),t.images.length>0&&(0,r.jsx)("ul",{className:"mt-[var(--space-2)] space-y-[var(--space-2)]",children:er.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)(l.default,{src:e.url,alt:"Task image for ".concat(ee),width:k,height:k,className:(0,f.cn)(y().thumbnail,"rounded-card r-card-md object-cover")}),(0,r.jsx)(i.IconButton,{"aria-label":"Remove image",title:"Remove image",onClick:()=>A(e.url,t),size:"sm",iconSize:"xs",variant:"quiet",children:(0,r.jsx)(d.A,{})})]},e.id))}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),function(){let e=en(J);if(e)return X(e);I(J),U(""),X(null)}()},className:"mt-[var(--space-2)] flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)("label",{htmlFor:"task-image-".concat(t.id),className:"sr-only",children:"Add image URL"}),(0,r.jsx)(s.Input,{id:"task-image-".concat(t.id),type:"url",value:Y,onChange:e=>{let t=e.target.value;if(U(t),Z){let e=t.trim();if(!e)return void X(null);X(en(e))}},placeholder:"https://example.com/image.jpg",className:"flex-1","aria-invalid":Z?"true":void 0,"aria-describedby":Z?"task-image-".concat(t.id,"-error"):void 0}),(0,r.jsx)(o.Button,{type:"submit",size:"sm",disabled:!Q,className:"shrink-0",children:"Attach image"})]}),Z&&(0,r.jsx)("p",{id:"task-image-".concat(t.id,"-error"),className:"mt-[var(--space-1)] text-ui text-danger",role:"alert","aria-live":"polite",children:Z})]})}},27257:(e,t,a)=>{"use strict";let r;a.d(t,{PlannerFab:()=>ef});var n=a(95155),l=a(12115),s=a(47650),i=a(6191),o=a(29502),c=a(95740),u=a(78192),d=a(35299),m=a(91182),p=a(27566),f=a(84804);let g=/\b(?:at\s*)?(\d{1,2})(?::(\d{2}))?\s*(am|pm)?\b/,h=/^(?:create\s+)?(?:new\s+)?project[:\s]/,v={january:0,february:1,march:2,april:3,may:4,june:5,july:6,august:7,september:8,october:9,november:10,december:11},b={sunday:0,sun:0,monday:1,mon:1,tuesday:2,tue:2,tues:2,wednesday:3,wed:3,thursday:4,thu:4,thur:4,thurs:4,friday:5,fri:5,saturday:6,sat:6},x={today:0,tonight:0,tomorrow:1,"day after tomorrow":2};function y(e,t){let a=["none","low","medium","high"];return a[Math.max(a.indexOf(e),a.indexOf(t))]}function k(e,t,a){t<0||a<=0||e.push({start:t,end:t+a})}function j(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Date(e);r.setHours(0,0,0,0);let n=t-r.getDay();return(n<0||!a&&0===n)&&(n+=7),0!==n||a||(n=7),(0,f.fi)(r,n)}function w(e){var t,a,r,n,l,s,i,o,c,u,d,m,p,w,N,P,C,T,S,D,_,E,I,A,M,F,R,L,B,O,z,W,H,q,$,Y,U,K,V;let G,Z,X=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},J=(null!=e?e:"").trim(),Q=X.now?new Date(X.now):new Date;if(!J)return{intent:"task",event:{title:""},recurrence:null,confidence:"none",matched:{}};let ee=J.toLowerCase(),et=[],ea={},er="task",en="low",el=null,es=RegExp(g,"gi");for(;;){let e=es.exec(ee);if(!e)break;let n=function(e){var t;let a=Number.parseInt(null!=(t=e[1])?t:"",10);if(Number.isNaN(a)||a<0||a>23)return;let r=e[2],n=e[3],l="string"==typeof n&&n.length>0,s="string"==typeof r&&r.length>0;if(!l&&!s)return;let i=s?Number.parseInt(r,10):0;if(i<0||i>59)return;let o=a;if(n){let e=n.toLowerCase();"am"===e?12===a&&(o=0):"pm"===e&&a<12&&(o=a+12)}let c=String(o).padStart(2,"0"),u=String(i).padStart(2,"0");return"".concat(c,":").concat(u)}(e);if(n){Z=n,en=y(en,"medium"),k(et,null!=(a=e.index)?a:0,null!=(r=null==(t=e[0])?void 0:t.length)?r:0),ea.time=n;break}}for(let[e,t]of Object.entries(x)){let a=ee.indexOf(e);if(a>=0){let r=function(e,t){let a=new Date(e);return a.setHours(0,0,0,0),(0,f.fi)(a,t)}(Q,t);G=(0,f.$$)(r),en=y(en,"medium"),k(et,a,e.length),ea.date=e;break}}if(!G){let e=ee.match(/\bnext\s+(monday|tuesday|wednesday|thursday|friday|saturday|sunday)\b/);if((null==e?void 0:e.index)!==void 0){let t=b[null!=(n=e[1])?n:""];if(void 0!==t){let a=j(Q,t,!1);G=(0,f.$$)(a),k(et,e.index,null!=(s=null==(l=e[0])?void 0:l.length)?s:0),ea.date=null!=(i=e[0])?i:e[1],en=y(en,"medium")}}}if(!G){let e=ee.match(/\b(?:this|on)\s+(monday|tuesday|wednesday|thursday|friday|saturday|sunday)\b/);if((null==e?void 0:e.index)!==void 0){let t=b[null!=(o=e[1])?o:""];if(void 0!==t){let a=j(Q,t,!0);G=(0,f.$$)(a),k(et,e.index,null!=(u=null==(c=e[0])?void 0:c.length)?u:0),ea.date=null!=(d=e[0])?d:e[1],en=y(en,"medium")}}}if(!G){let e=ee.match(/\bon\s+([^]+)$/);if((null==e?void 0:e.index)!==void 0&&e[1]){let t=function(e,t){let a=e.replace(/,/g," ").trim();if(!a)return null;let[r]=a.split(/\s+(?:at|by|from|starting|around|before|after)\b/i),n=r.trim().replace(/\s+/g," "),l=n.match(/^(\d{1,2})\/(\d{1,2})(?:\/(\d{2,4}))?$/);if(l){var s,i,o;let e=Number.parseInt(null!=(s=l[1])?s:"",10)-1,a=Number.parseInt(null!=(i=l[2])?i:"",10),r=l[3];if(Number.isNaN(e)||Number.isNaN(a)||e<0)return null;let c=new Date(t),u=r?Number.parseInt(2===r.length?"20".concat(r):r,10):t.getFullYear();return(c.setFullYear(u,e,a),c.setHours(0,0,0,0),c.getMonth()!==e||c.getDate()!==a)?null:{date:c,token:null!=(o=l[0])?o:n}}let c=n.toLowerCase().split(/\s+/);if(!c.length)return null;let u=v[c[0]];if(void 0===u)return null;let d=c[1];if(!d)return null;let m=Number.parseInt(d,10);if(Number.isNaN(m)||m<=0||m>31)return null;let p=c[2],f=new Date(t),g=p?Number.parseInt(2===p.length?"20".concat(p):p,10):t.getFullYear();return(f.setFullYear(g,u,m),f.setHours(0,0,0,0),f.getMonth()!==u||f.getDate()!==m)?null:(!p&&f<t&&f.setFullYear(g+1),{date:f,token:c.slice(0,p?3:2).join(" ")})}(e[1].trim(),Q);if(t){G=(0,f.$$)(t.date);let a="on ".concat(t.token).length;k(et,e.index,a),ea.date=G,en=y(en,"high")}}}if(h.test(ee)){er="project";let e=ee.match(h);(null==e?void 0:e.index)!==void 0&&(k(et,e.index,null!=(p=null==(m=e[0])?void 0:m.length)?p:0),ea.intent="project",en=y(en,"medium"))}if("task"===er){let e=ee.match(/\bproject\s+(?:named\s+)?([\w\s]+)$/);if((null==e?void 0:e.index)!==void 0){let t=null!=(w=e[0])?w:"project";k(et,e.index,t.length),ea.intent="task"}}let ei=[],eo=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"medium";el||(el=e);let r=null==t?void 0:t.trim();r&&!ei.includes(r)&&ei.push(r),en=y(en,a)},ec=ee.match(/\bweekday(?:s)?\b/);(null==ec?void 0:ec.index)!==void 0&&(eo({frequency:"weekly",interval:1,weekdays:[1,2,3,4,5]},null!=(P=ec[0])?P:"weekdays","high"),k(et,ec.index,null!=(C=null==(N=ec[0])?void 0:N.length)?C:0));let eu=ee.match(/\bweekend(?:s)?\b/);(null==eu?void 0:eu.index)!==void 0&&(eo({frequency:"weekly",interval:1,weekdays:[0,6]},null!=(S=eu[0])?S:"weekends","high"),k(et,eu.index,null!=(D=null==(T=eu[0])?void 0:T.length)?D:0));let ed=ee.match(/\b(?:every|each)\s+([^,.]+)(?=[$\s,.])/);if((null==ed?void 0:ed.index)!==void 0&&ed[1]){let e=ed[1].trim(),t=function(e){let t=e.toLowerCase();if(t.includes("weekday"))return[1,2,3,4,5];if(t.includes("weekend"))return[0,6];let a=e.match(/(?:mon(?:day)?|tue(?:s|sday)?|wed(?:nesday)?|thu(?:rsday)?|fri(?:day)?|sat(?:urday)?|sun(?:day)?)/g);if(!a)return[];let r=new Set;for(let e of a){let t=b[e.replace(/[^a-z]/gi,"").toLowerCase()];void 0!==t&&r.add(t)}return Array.from(r).sort((e,t)=>e-t)}(e);if(t.length)eo({frequency:"weekly",interval:1,weekdays:t},null!=(_=ed[0])?_:e,"high");else{let t=e.match(/(\d+)?\s*(day|week|month|year)s?/);if(t){let a=Number.parseInt(null!=(E=t[1])?E:"1",10)||1,r=t[2];"day"===r?eo({frequency:"daily",interval:a},null!=(I=ed[0])?I:e,"high"):"week"===r?eo({frequency:"weekly",interval:a},null!=(A=ed[0])?A:e,"high"):"month"===r?eo({frequency:"monthly",interval:a},null!=(M=ed[0])?M:e,"high"):"year"===r&&eo({frequency:"yearly",interval:a},null!=(F=ed[0])?F:e,"high")}}k(et,ed.index,(null!=(R=ed[0])?R:"").length)}let em=ee.match(/\b(?:daily|every\s+day|each\s+day)\b/);if((null==em?void 0:em.index)!==void 0&&(eo({frequency:"daily",interval:1},null!=(B=em[0])?B:"daily","high"),k(et,em.index,null!=(O=null==(L=em[0])?void 0:L.length)?O:0)),!el){let e=ee.match(/\bweekly\b/);(null==e?void 0:e.index)!==void 0&&(eo({frequency:"weekly",interval:1},null!=(W=e[0])?W:"weekly"),k(et,e.index,null!=(H=null==(z=e[0])?void 0:z.length)?H:0))}if(!el){let e=ee.match(/\bmonthly\b/);(null==e?void 0:e.index)!==void 0&&(eo({frequency:"monthly",interval:1},null!=($=e[0])?$:"monthly"),k(et,e.index,null!=(Y=null==(q=e[0])?void 0:q.length)?Y:0))}if(!el){let e=ee.match(/\byearly\b/);(null==e?void 0:e.index)!==void 0&&(eo({frequency:"yearly",interval:1},null!=(K=e[0])?K:"yearly"),k(et,e.index,null!=(V=null==(U=e[0])?void 0:U.length)?V:0))}let ep=function(e,t){if(!t.length)return e.trim();let a=function(e){if(!e.length)return e;let t=[...e].sort((e,t)=>e.start-t.start),a=[],r=t[0];for(let e=1;e<t.length;e+=1){let n=t[e];n.start<=r.end?r={start:r.start,end:Math.max(r.end,n.end)}:(a.push(r),r=n)}return a.push(r),a}(t),r=0,n="";for(let t of a)r<t.start&&(n+=e.slice(r,t.start)),r=t.end;return r<e.length&&(n+=e.slice(r)),n.replace(/\s{2,}/g," ").replace(/[\s,]+$/g,"").trim()}(J,et)||J;return ea.intent||(ea.intent=er),ei.length&&(ea.recurrence=ei),G&&!ea.date&&(ea.date=G),{intent:er,event:{title:ep,...G?{startDate:G}:{},...Z?{time:Z}:{}},recurrence:el,confidence:en,matched:ea}}function N(e){let t=[];if(e.matched.intent&&t.push("project"===e.matched.intent?"Project":"Task"),e.event.time&&t.push("at ".concat(e.event.time)),e.event.startDate&&t.push("on ".concat(e.event.startDate)),e.recurrence){var a;t.push("weekly"===e.recurrence.frequency&&(null==(a=e.recurrence.weekdays)?void 0:a.length)?"weekly (".concat(e.recurrence.weekdays.join(","),")"):"".concat(e.recurrence.frequency," x").concat(e.recurrence.interval))}return t.join(" • ")}var P=a(99762),C=a(90511),T=a(80311),S=a(87358);let D=/[\u0000-\u0008\u000b\u000c\u000e-\u001f\u007f\u2028\u2029]/g,_=/[\u200b-\u200f\u202a-\u202e\u2060-\u2064\u2066-\u2069\ufeff]/gi,E=/[ \t\f\v]+/g,I=$("SAFE_MODE_RESPONSE_RESERVE",512,{min:0,integer:!0}),A=$("SAFE_MODE_TEMPERATURE_CEILING",.4,{min:0}),M=$("SAFE_MODE_MAX_TOOL_CALLS",1,{min:0,integer:!0}),F=new Set;function R(e){let t=[];for(let r of e)if("string"==typeof r||"number"==typeof r)t.push(r);else{var a;t.push(null!=(a=r.description)?a:r.toString())}return t}function L(e){return e.code===P.eqx.invalid_type&&"string"==typeof e.message&&/received undefined$/u.test(e.message)?"Required":e.message}function B(e,t){"undefined"!=typeof console&&(F.has(e)||(F.add(e),console.warn(t)))}function O(e,t,a){let r="number"==typeof t?t.toString():JSON.stringify(t);B("estimate:".concat(e,":").concat(a),"[ai.safety] Token estimator produced ".concat(a," for message index ").concat(e,'; clamping "').concat(r,'" to a safe integer budget.'))}function z(e){return 0===e.length?"<root>":e.reduce((e,t)=>"number"==typeof t?"".concat(e,"[").concat(t,"]"):0===e.length?t:"".concat(e,".").concat(t),"")}function W(e){if(0===e.length)return[];if(void 0===r){let e="undefined"!=typeof Intl?Intl:void 0,t=null==e?void 0:e.Segmenter;r="function"==typeof t?new t(void 0,{granularity:"grapheme"}):null}let t=r;return t?Array.from(t.segment(e),e=>e.segment):Array.from(e)}let H=new Set(["1","true","on","yes"]);function q(e,t,a){let r=t.trim();B("numeric:".concat(e,":").concat(a,":").concat(r),"[ai.safety] Ignoring ".concat(e,' value "').concat(r,'" (').concat(a,")."))}function $(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(void 0===S)return t;for(let t of Array.isArray(e)?e:[e]){let e=S.env[t];if("string"!=typeof e)continue;let r=e.trim();if(0===r.length){q(t,e,"empty string");continue}let n=Number(r);if(!Number.isFinite(n)){q(t,e,"non-numeric value");continue}let l=a.integer?Math.trunc(n):n;if(Number.isNaN(l)){q(t,e,"not a number");continue}if(void 0!==a.min&&l<a.min){q(t,e,"below minimum ".concat(a.min));continue}return l}return t}function Y(){return $("AI_MAX_INPUT_LENGTH",16e3,{min:1,integer:!0})}function U(e){let t=$(["AI_TOKENS_PER_CHAR","AI_TOKENS_PER_CHARACTER"],4,{min:Number.EPSILON}),a=W(e).length;return 0===a?0:Math.ceil(a/t)}function K(e,t){var a,r,n,l;let s=null!=(a=t.estimateTokens)?a:U,i=null!=(r=t.reservedForResponse)?r:0,o=Number.isFinite(i)?Math.max(Math.floor(i),0):0,c=(0,C.If)(),u=function(){if(void 0===S)return!1;let e=S.env.SAFE_MODE;if("string"!=typeof e)return!1;let t=e.trim().toLowerCase();return 0!==t.length&&H.has(t)}(),d=c&&u,m=d?Math.max(o,I):o,p=Number.isFinite(t.maxTokens)?Math.max(Math.floor(t.maxTokens),0):0,f=Math.max((d?Math.min(p,$("SAFE_MODE_TOKEN_CEILING",8e3,{min:1,integer:!0})):p)-m,0),g=[],h=0,v=0;for(let t=e.length-1;t>=0;t-=1){let a=e[t],r=(n=s(a.content),l=t,Number.isFinite(n)?n<0?(O(l,n,"a negative value"),0):(Number.isInteger(n)||O(l,n,"a fractional value"),Math.ceil(n)):(O(l,n,"a non-finite value"),0));if(a.pinned){g.push(a),h+=r;continue}if(h+r>f){v+=1;continue}g.push(a),h+=r}g.reverse();let b={messages:g,removedCount:v,totalTokens:h,availableTokens:f};return t.agent&&(0,T.V1)(t.agent,b.totalTokens),b}let V=Number.EPSILON;var G=a(87358);let Z="You are Planner, an assistant that helps people organise projects and daily tasks.\nExtract actionable planner suggestions from the user's description and keep responses concise.\nPrioritise clear wording and surface any detected dates, times, or recurring patterns.",X=new Set(["1","true","on","yes"]),J={id:"planner.assistant",label:"Planner Assistant",kind:"planner"},Q=P.Ikc({id:P.YjP(),title:P.YjP(),intent:P.KCZ([P.euz("task"),P.euz("project")]),confidence:P.KCZ([P.euz("none"),P.euz("low"),P.euz("medium"),P.euz("high")]),summary:P.YjP().nullable(),schedule:P.Ikc({date:P.YjP().optional(),time:P.YjP().optional()}).optional()}),ee=P.Ikc({sanitizedPrompt:P.YjP(),prompt:P.YjP(),summary:P.YjP().nullable(),suggestions:P.YOg(Q),safety:P.Ikc({safeMode:P.zMY(),temperature:P.aig(),toolChoice:P.Ikc({mode:P.KCZ([P.euz("auto"),P.euz("none"),P.euz("required")]),maxToolCalls:P.aig().int().nonnegative().optional()}),topP:P.aig().optional()}),tokenBudget:P.Ikc({totalTokens:P.aig().int().nonnegative(),availableTokens:P.aig().int().nonnegative(),removedCount:P.aig().int().nonnegative()})});class et extends Error{constructor(e,t){super(t),this.code=e,this.name="PlannerAssistantError"}}function ea(e,t){let a=t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");return a?"".concat(e,"-").concat(a):"".concat(e)}var er=a(98986),en=a(87358);let el=new Set(["1","true","on","yes"]),es=new Set(["0","false","off","no"]);function ei(e){if("string"!=typeof e)return null;let t=e.trim().toLowerCase();return t?!!el.has(t)||!es.has(t)&&null:null}function eo(e,t){var a,r,n;return null!=(n=null!=(r=null!=(a=ei(e))?a:ei(t))?r:ei(er.Vq))&&n}let ec=P.Ikc({prompt:P.YjP(),focusDate:P.YjP().optional(),suggestionLimit:P.aig().int().positive().max(10).optional()});async function eu(e){let t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en.env,t=eo(e.SAFE_MODE,e.NEXT_PUBLIC_SAFE_MODE),a=eo(e.NEXT_PUBLIC_SAFE_MODE,e.SAFE_MODE);return{server:t,client:a,active:t&&a}}();if(t.server!==t.client)return{ok:!1,error:"safe_mode_mismatch",message:"Planner assistant is disabled because SAFE_MODE and NEXT_PUBLIC_SAFE_MODE do not match.",safeMode:t};let a=ec.safeParse(e);if(!a.success)return{ok:!1,error:"invalid_request",message:"Invalid planner assistant request.",safeMode:t,issues:a.error.issues.map(e=>({path:e.path,message:e.message}))};try{var r;let{prompt:e,focusDate:n,suggestionLimit:l}=a.data,s=n&&null!=(r=(0,f.E4)(n))?r:void 0,i=function(e){var t,a,r,n,l,s;let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{maxLength:a=Y(),allowMarkup:r=!1}=t,n=Number.isFinite(a)?Math.max(Math.trunc(a),0):Y(),l=e.replace(/\r\n?/g,"\n").replace(D,"").replace(_,"").replace(/\n{3,}/g,"\n\n").split("\n").map(e=>e.replace(E," ").trimEnd()).join("\n").trim(),s=0===n?"":function(e,t){if(t<=0)return"";let a=W(e);return a.length<=t?e:a.slice(0,t).join("")}(l,n);return r?s:(0,p.jZ)(s)}(e.prompt);if(!i)throw new et("empty_prompt","The planner assistant requires a non-empty prompt.");let o=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,C.If)(),r=function(e){if("number"!=typeof e||!Number.isFinite(e))return .7;let t=Math.min(Math.max(e,0),2);return Number.isNaN(t)?.7:t}(t.temperature),n=function(e){if("number"!=typeof e||!Number.isFinite(e))return;let t=Math.min(Math.max(e,V),1);return Number.isNaN(t)?void 0:t}(t.topP),l=function(e){let t=(null==e?void 0:e.mode)==="auto"||(null==e?void 0:e.mode)==="none"||(null==e?void 0:e.mode)==="required"?e.mode:"auto",a=function(e){if("number"!=typeof e||!Number.isFinite(e))return;let t=Math.max(0,Math.trunc(e));return Number.isNaN(t)?void 0:t}(null==e?void 0:e.maxToolCalls);return{mode:t,...void 0!==a?{maxToolCalls:a}:{}}}(t.toolChoice),s=a?Math.min(r,A):r,i=a?Math.min(null!=(e=l.maxToolCalls)?e:M,M):l.maxToolCalls,o=a?{mode:"none"===l.mode?"none":"auto",...void 0!==i?{maxToolCalls:i}:{}}:{mode:l.mode,...void 0!==i?{maxToolCalls:i}:{}};return{temperature:s,...void 0!==n?{topP:n}:{},toolChoice:o,safeMode:a}}(),c=o.safeMode&&function(e){if("string"!=typeof e)return!1;let t=e.trim().toLowerCase();return!!t&&X.has(t)}(G.env.SAFE_MODE),u=function(e,t){var a;if("string"==typeof e){let{pinned:r,...n}=t,l=K([{content:e,pinned:r}],n),s=l.messages[0];return{content:null!=(a=null==s?void 0:s.content)?a:null,removed:void 0===s,totalTokens:l.totalTokens,availableTokens:l.availableTokens}}return K(e,t)}([{role:"system",content:Z,pinned:!0},{role:"user",content:i}],{maxTokens:null!=(a=e.maxTokens)?a:4e3,reservedForResponse:null!=(r=e.reservedForResponse)?r:512,agent:J}),d=function(e){let t=[...e].reverse().find(e=>"user"===e.role&&e.content.trim().length>0);return t?t.content.trim():""}(u.messages);if(!d)throw new et("budget_exhausted","The planner assistant could not keep the user's prompt within the token budget.");let m=function(e){let t=e.trim();if(!t)return[];let a=new Set;for(let e of(a.add(t),t.split(/\n+/).map(e=>e.replace(/^[-*•\u2022]\s*/,"").trim()).filter(e=>e.length>0)))a.add(e);return Array.from(a)}(d),f=null!=(n=e.now)?n:new Date,g=null!=(l=e.suggestionLimit)?l:c?3:5,h=Math.max(1,c?Math.min(g,3):g),v=(function(e){let t=new Set,a=[];for(let i of e){var r,n,l,s;let e=[i.intent,i.title.toLowerCase(),null!=(l=null==(r=i.schedule)?void 0:r.date)?l:"",null!=(s=null==(n=i.schedule)?void 0:n.time)?s:""].join("|");t.has(e)||(t.add(e),a.push(i))}return a})(m.slice(0,2*h).map((e,t)=>(function(e,t,a){var r,n;let l=w(e,{now:t}),s=l.event.title.trim()||e,i=N(l),o=function(e,t){if(e||t)return{...e?{date:e}:{},...t?{time:t}:{}}}(l.event.startDate,l.event.time);return{id:ea(a,"".concat(s,"-").concat(null!=(r=null==o?void 0:o.date)?r:"","-").concat(null!=(n=null==o?void 0:o.time)?n:"")),title:s,intent:l.intent,confidence:l.confidence,summary:i.length>0?i:null,...o?{schedule:o}:{}}})(e,f,t))).slice(0,h);v.length||v.push({id:ea(0,d),title:d,intent:"task",confidence:"none",summary:null});let b=null!=(s=null==(t=v[0])?void 0:t.summary)?s:null,x=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{label:r="AI response"}=a;try{let a=t.parse(e);return{success:!0,data:a}}catch(t){if(!function(e,t){if(t instanceof P.GaX){let a=t.issues.map(e=>{let t=R(e.path),a=L(e);return"".concat(z(t)," → ").concat(a)}).join("; ");B("schema:".concat(e,":").concat(a),"[ai.safety] ".concat(e," failed schema validation: ").concat(a));return}let a=t instanceof Error?"".concat(t.name,": ").concat(t.message):String(t);B("schema:".concat(e,":").concat(a),"[ai.safety] ".concat(e," validation threw: ").concat(a))}(r,t),t instanceof P.GaX)return{success:!1,error:{label:r,issues:t.issues.map(e=>{let t=R(e.path);return{path:t,pathText:z(t),message:L(e),code:e.code}}),cause:t}};let e=t instanceof Error?t.message:"Unexpected validation error";return{success:!1,error:{label:r,issues:[{path:[],pathText:z([]),message:e}],cause:t}}}}({sanitizedPrompt:i,prompt:[Z,"",d].join("\n"),summary:b,suggestions:v,safety:{...o,safeMode:c},tokenBudget:{totalTokens:u.totalTokens,availableTokens:u.availableTokens,removedCount:u.removedCount}},ee,{label:"planner assistant plan"});if(!x.success)throw new et("invalid_plan","Planner assistant produced an invalid plan.");return x.data}({prompt:e,now:s,suggestionLimit:l});return{ok:!0,plan:i,safeMode:t}}catch(e){if(e instanceof et){if("empty_prompt"===e.code)return{ok:!1,error:e.code,message:"Describe your plan before asking the assistant.",safeMode:t};if("budget_exhausted"===e.code)return{ok:!1,error:e.code,message:"Planner assistant prompt exceeded the token budget.",safeMode:t};return{ok:!1,error:e.code,message:"Planner assistant produced an invalid response.",safeMode:t}}return{ok:!1,error:"internal_error",message:e instanceof Error?e.message:"Planner assistant failed.",safeMode:t}}}var ed=a(42988);function em(e){let{open:t,onClose:a,titleId:r,descriptionId:o,summaryId:c,children:u}=e,d=l.useRef(!1),p=l.useRef(null);return(l.useEffect(()=>(d.current=!0,()=>{d.current=!1}),[]),(0,m.T)({open:t&&d.current,onClose:a,ref:p}),t&&"undefined"!=typeof document)?(0,s.createPortal)((0,n.jsxs)("div",{className:"fixed inset-0 z-50 flex items-end justify-center bg-[hsl(var(--bg)/0.85)] px-[var(--space-4)] pb-[var(--space-6)] pt-[var(--space-8)] sm:items-center sm:bg-[hsl(var(--bg)/0.8)]",children:[(0,n.jsx)("div",{role:"presentation","aria-hidden":"true",className:"absolute inset-0",onClick:a}),(0,n.jsxs)(m.b,{ref:p,role:"dialog","aria-modal":"true","aria-labelledby":r,"aria-describedby":o,"aria-details":c,className:"relative w-full max-w-[min(calc(var(--space-16)*3+var(--space-8)),calc(var(--shell-width)*0.9))] card-pad space-y-[var(--space-5)]",children:[(0,n.jsxs)(m.K0,{"aria-label":"Close creation sheet",variant:"quiet",tone:"primary",size:"sm",className:"absolute right-[var(--space-3)] top-[var(--space-3)]",onClick:a,children:[(0,n.jsx)("span",{className:"sr-only",children:"Close planner creation sheet"}),(0,n.jsx)(i.A,{className:"rotate-45"})]}),u]})]}),document.body):null}let ep=[{value:"task",label:"Task"},{value:"project",label:"Project"}];function ef(){let{focus:e,getDay:t,upsertDay:a}=(0,ed.N_)(),{createProject:r,createTask:s}=(0,ed.HK)(),[g,h]=l.useState(!1),[v,b]=l.useState("task"),[x,y]=l.useState(""),[k,j]=l.useState(""),[P,C]=l.useState(null),[T,S]=l.useState(null),[D,_]=l.useState(null),[E,I]=l.useState(null),[A,M]=l.useTransition(),F=l.useRef(null),R=l.useRef(0),L=l.useId(),B=l.useId(),O=l.useId(),z=l.useId(),W=l.useId(),H=l.useMemo(()=>{var t;return null!=(t=(0,f.E4)(e))?t:new Date},[e]),q=l.useMemo(()=>w(x,{now:H}),[H,x]),$=l.useMemo(()=>{var t;return null!=(t=q.event.startDate)?t:e},[q.event.startDate,e]),Y=t($).projects,U=t(e).projects;l.useEffect(()=>{if(!g)return;let e=window.requestAnimationFrame(()=>{var e;null==(e=F.current)||e.focus({preventScroll:!0})});return()=>window.cancelAnimationFrame(e)},[g]),l.useEffect(()=>()=>{R.current+=1},[]),l.useEffect(()=>{"project"===q.intent&&"low"!==q.confidence&&b("project")},[q.confidence,q.intent]),l.useEffect(()=>{var e,t,a,r;if("task"!==v||Y.some(e=>e.id===k)||U.some(e=>e.id===k))return;let n=null!=(r=null!=(a=null==(e=Y[0])?void 0:e.id)?a:null==(t=U[0])?void 0:t.id)?r:"";n!==k&&j(n)},[U,v,Y,k]),l.useEffect(()=>{x.trim()||(S(null),_(null),I(null),R.current+=1)},[x]),l.useEffect(()=>{g||(y(""),C(null),b("task"),S(null),_(null),I(null),R.current+=1)},[g]);let K=l.useMemo(()=>{var t;return q.recurrence?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{startDate:a,now:r,count:n=3}=t,l=function(e,t){let a=e?(0,f.E4)(e):null;return a||(t?new Date(t):new Date)}(a,r);l.setHours(0,0,0,0);let s=[];if("daily"===e.frequency){let t=Math.max(1,e.interval);for(let e=0;e<n;e+=1){let a=(0,f.fi)(l,e*t);s.push((0,f.$$)(a))}return s}if("weekly"===e.frequency){let t=Math.max(1,e.interval),a=e.weekdays&&e.weekdays.length?[...e.weekdays].sort((e,t)=>e-t):[l.getDay()],r=new Date(l),i=new Date(r),o=0,c=Math.max(7*(Math.max(1,Math.ceil(n/Math.max(1,a.length)))*t+1),7*n);for(;s.length<n&&o<c;)Math.floor(Math.floor((i.getTime()-r.getTime())/864e5)/7)%t==0&&a.includes(i.getDay())&&s.push((0,f.$$)(i)),i=(0,f.fi)(i,1),o+=1;return s}if("monthly"===e.frequency){let t=Math.max(1,e.interval);for(let e=0;e<n;e+=1){let a=function(e,t){let a=new Date(e),r=a.getDate();a.setDate(1),a.setMonth(a.getMonth()+t);let n=new Date(a.getFullYear(),a.getMonth()+1,0).getDate();return a.setDate(Math.min(r,n)),a}(l,e*t);s.push((0,f.$$)(a))}return s}if("yearly"===e.frequency){let t=Math.max(1,e.interval);for(let e=0;e<n;e+=1){let a=function(e,t){let a=new Date(e);return a.setFullYear(a.getFullYear()+t),a}(l,e*t);s.push((0,f.$$)(a))}}return s}(q.recurrence,{startDate:null!=(t=q.event.startDate)?t:e,now:H,count:3}):[]},[e,H,q.event.startDate,q.recurrence]),V=l.useMemo(()=>N(q),[q]),G=l.useCallback(()=>{h(!0)},[]),Z=l.useCallback(()=>{h(!1)},[]);l.useEffect(()=>{let e=e=>{let t=e.key.toLowerCase();(e.metaKey||e.ctrlKey)&&e.shiftKey&&"n"===t&&(e.preventDefault(),G())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[G]);let X=l.useCallback(n=>{var l,i,o;let c=(q.event.title||x).trim();if(!c)return void C("Describe what you want to plan");let u=null!=(i=null!=n?n:q.event.startDate)?i:e;if(!u)return void C("Unable to determine a target date");if("project"===v||"project"===q.intent)return void(r({iso:u,name:c})?(C(null),Z()):C("Enter a project name to continue"));let d=t(u).projects,m=d.some(e=>e.id===k)?k:null!=(o=null==(l=d[0])?void 0:l.id)?o:"";if(!m&&k){let r=t(e).projects.find(e=>e.id===k);if(r){let e=(0,ed.v_)(u,a).addProject(r.name);e&&(m=e)}}if(!m)return void C("Create a project for this day first");m!==k&&j(m);let p=s({iso:u,projectId:m,title:c});if(!p)return void C("Unable to create a task");q.event.time&&(0,ed.v_)(u,a).updateTaskReminder(p,{enabled:!0,time:q.event.time,leadMinutes:0}),C(null),Z()},[Z,r,s,e,t,x,v,q.event.startDate,q.event.time,q.event.title,q.intent,k,a]),J=l.useCallback(e=>{e.preventDefault(),X()},[X]),Q=l.useCallback(e=>{(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),X())},[X]),ee=l.useCallback(()=>{let e=x.trim();if(!e){S(null),_("Describe what you want before asking the planner assistant."),I(null);return}S(null),_(null);let t=R.current+1;R.current=t,M(async()=>{try{var a;let r=await eu({prompt:e,focusDate:$});if(t!==R.current)return;if(r.ok){I(r.safeMode),S(r.plan),_(null);return}I(r.safeMode),S(null),_(function(e,t){switch(e){case"invalid_request":return"Planner assistant request was invalid.";case"safe_mode_mismatch":return"Planner assistant is disabled until SAFE_MODE and NEXT_PUBLIC_SAFE_MODE match.";case"empty_prompt":return"Describe what you want before asking the planner assistant.";case"budget_exhausted":return"Your request is too long for the planner assistant.";default:return t}}(r.error,null!=(a=r.message)?a:"Planner assistant is unavailable."))}catch(e){if(t!==R.current)return;S(null),_(e instanceof Error?e.message:"Planner assistant request failed."),I(null)}})},[x,M,$]),et=l.useMemo(()=>Y.map(e=>({value:e.id,label:e.name})),[Y]),ea=q.recurrence&&K.length>0,er=!!(V||ea);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(m.$n,{"aria-label":"Open planner creation sheet",className:(0,p.cn)("fixed bottom-[var(--space-8)] right-[max(var(--space-3),calc((var(--viewport-width) - var(--shell-max,var(--shell-width))) / 2 + var(--space-3)))] z-50","h-[var(--space-12)] min-w-[var(--space-12)] rounded-full px-[var(--space-5)] shadow-[var(--depth-shadow-outer-strong)]"),onClick:G,variant:"default",tone:"primary",size:"lg",children:[(0,n.jsx)(i.A,{className:"[&_path]:stroke-[2.2]"}),(0,n.jsx)("span",{className:"sr-only",children:"Plan something new"})]}),(0,n.jsxs)(em,{open:g,onClose:Z,titleId:L,descriptionId:B,summaryId:O,children:[(0,n.jsxs)("div",{className:"space-y-[var(--space-2)]",children:[(0,n.jsx)("h2",{id:L,className:"text-title font-semibold tracking-[-0.01em] text-foreground",children:"Plan something new"}),(0,n.jsx)("p",{id:B,className:"text-label text-muted-foreground",children:"Describe your plan in natural language or switch to manual mode. Press Cmd/Ctrl + Shift + N to open, Cmd/Ctrl + Enter to save."})]}),(0,n.jsxs)("form",{className:"space-y-[var(--space-5)]",onSubmit:J,onKeyDown:Q,children:[(0,n.jsxs)("fieldset",{className:"space-y-[var(--space-3)]",children:[(0,n.jsx)("legend",{className:"text-label font-medium text-muted-foreground",children:"Creation mode"}),(0,n.jsx)(m.bK,{value:v,onChange:e=>b(e),ariaLabelledby:void 0,"aria-label":"Planner creation mode",className:"max-w-max",children:ep.map(e=>(0,n.jsx)(m.s$,{value:e.value,children:e.label},e.value))})]}),(0,n.jsxs)("div",{className:"space-y-[var(--space-3)]",children:[(0,n.jsx)(m.JU,{htmlFor:"".concat(L,"-textarea"),className:"text-label font-medium text-muted-foreground",children:"What are you planning?"}),(0,n.jsx)(m.TM,{id:"".concat(L,"-textarea"),ref:F,value:x,onChange:e=>y(e.target.value),placeholder:"Daily standup every weekday at 9am",resize:"resize-none",rows:4,className:"[&_.textarea]:rounded-[var(--radius-card)]",textareaClassName:"text-ui"})]}),"task"===v&&(0,n.jsxs)("div",{className:"space-y-[var(--space-3)]",children:[(0,n.jsxs)(m.JU,{htmlFor:"".concat(L,"-project"),className:"text-label font-medium text-muted-foreground",children:["Select a project for ",(0,f.$$)($)]}),(0,n.jsx)(m.l6,{id:"".concat(L,"-project"),items:et,value:k,onChange:j,placeholder:et.length?void 0:"No projects available",disabled:!et.length,size:"md"})]}),er&&(0,n.jsxs)("section",{"aria-labelledby":z,"aria-describedby":W,"aria-live":"polite",className:"space-y-[var(--space-3)]",children:[(0,n.jsxs)("div",{className:"space-y-[var(--space-1)]",children:[(0,n.jsx)("p",{id:z,className:"text-caption font-medium uppercase tracking-[0.2em] text-muted-foreground",children:"AI suggestions"}),(0,n.jsx)("p",{className:"sr-only",role:"note",children:"These planning suggestions are generated by AI."})]}),V&&(0,n.jsxs)("div",{id:O,role:"status","aria-live":"polite",className:"flex items-start gap-[var(--space-3)] rounded-[var(--radius-md)] bg-[hsl(var(--card)/0.6)] px-[var(--space-4)] py-[var(--space-3)] text-label text-muted-foreground",children:[(0,n.jsx)(o.A,{className:"mt-[var(--space-0_5)] size-[var(--space-5)]","aria-hidden":!0}),(0,n.jsxs)("div",{className:"space-y-[var(--space-1)]",children:[(0,n.jsx)("p",{className:"text-caption font-medium uppercase tracking-[0.2em] text-muted-foreground",children:"AI suggestion"}),(0,n.jsx)("p",{className:"font-medium text-foreground",children:"AI-detected details"}),(0,n.jsx)("p",{children:V})]})]}),ea&&(0,n.jsxs)("div",{role:"status","aria-live":"polite",className:"space-y-[var(--space-2)]",children:[(0,n.jsxs)("div",{className:"space-y-[var(--space-1)]",children:[(0,n.jsx)("p",{className:"text-caption font-medium uppercase tracking-[0.2em] text-muted-foreground",children:"AI suggestion"}),(0,n.jsxs)("p",{className:"flex items-center gap-[var(--space-2)] text-label font-medium text-muted-foreground",children:[(0,n.jsx)(c.A,{className:"size-[var(--space-4)]","aria-hidden":!0}),"AI upcoming occurrences"]})]}),(0,n.jsx)("div",{className:"flex flex-wrap gap-[var(--space-2)]",children:K.map(e=>(0,n.jsx)(m.$n,{type:"button",variant:"neo",size:"sm",onClick:()=>X(e),className:"rounded-full",children:e},e))})]}),(0,n.jsxs)("div",{className:"space-y-[var(--space-2)]","aria-live":"polite",children:[(0,n.jsxs)("div",{className:"flex items-center gap-[var(--space-2)] text-label font-medium text-muted-foreground",children:[(0,n.jsx)(u.A,{className:"size-[var(--space-4)]","aria-hidden":!0}),"Planner assistant"]}),(null==T?void 0:T.summary)&&(0,n.jsx)("p",{className:"text-caption text-muted-foreground",children:T.summary}),(null==T?void 0:T.suggestions.length)?(0,n.jsx)("ul",{className:"space-y-[var(--space-2)]",children:T.suggestions.map(e=>{var t,a;let r=(t=e.schedule)?t.date&&t.time?"".concat(t.date," at ").concat(t.time):t.date?t.date:t.time?t.time:null:null;return(0,n.jsxs)("li",{className:"rounded-[var(--radius-md)] border border-dashed border-muted-foreground/40 px-[var(--space-4)] py-[var(--space-3)]",children:[(0,n.jsx)("p",{className:"font-medium text-foreground",children:e.title}),(0,n.jsxs)("p",{className:"text-caption text-muted-foreground",children:["project"===e.intent?"Project":"Task"," • Confidence ","none"===(a=e.confidence)?"None":a.replace(/^(.)/,e=>e.toUpperCase()),r?" • ".concat(r):""]}),e.summary&&(0,n.jsx)("p",{className:"text-label text-muted-foreground",children:e.summary})]},e.id)})}):null,D&&(0,n.jsx)("p",{className:"text-caption text-danger",role:"alert",children:D}),((null==T?void 0:T.safety.safeMode)||(null==E?void 0:E.active))&&(0,n.jsx)("p",{className:"text-caption text-muted-foreground",children:"Safe mode is active. Suggestions are limited for additional safety."}),(0,n.jsx)(m.$n,{type:"button",variant:"neo",size:"sm",onClick:ee,disabled:A,className:"flex items-center gap-[var(--space-2)] rounded-full",children:A?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.A,{className:"size-[var(--space-4)] animate-spin","aria-hidden":!0}),(0,n.jsx)("span",{children:"Asking assistant…"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.A,{className:"size-[var(--space-4)]","aria-hidden":!0}),(0,n.jsx)("span",{children:"Ask planner assistant"})]})})]}),(0,n.jsx)("p",{id:W,className:"text-caption text-muted-foreground",role:"note",children:"Prefer manual control? Cancel closes the composer and dismisses these AI suggestions."})]}),P&&(0,n.jsx)("p",{className:"text-label text-danger",role:"alert",children:P}),(0,n.jsxs)("div",{className:"flex items-center justify-end gap-[var(--space-3)]",children:[(0,n.jsx)(m.$n,{type:"button",variant:"quiet",onClick:Z,"aria-describedby":er?W:void 0,children:"Cancel"}),(0,n.jsx)(m.$n,{type:"submit",variant:"default",tone:"primary",children:"Save to planner"})]})]})]})]})}},34467:(e,t,a)=>{"use strict";a.d(t,{useWeekData:()=>s});var r=a(12115),n=a(25488),l=a(51266);function s(e){let{days:t}=(0,l.usePlannerStore)();return r.useMemo(()=>{let a=0,r=0;return{per:e.map(e=>{let{doneCount:l,totalCount:s}=(0,n.pF)(t,e);return a+=l,r+=s,{iso:e,done:l,total:s}}),weekDone:a,weekTotal:r}},[e,t])}},34837:(e,t,a)=>{"use strict";a.d(t,{x:()=>P});var r,n,l,s,i,o,c,u=a(10161),d=a(87358);let m=u.UG.child("sentry"),p=m.child("capture"),f=(null==(r=d.env.NEXT_PUBLIC_SENTRY_DSN)?void 0:r.trim())||(null==(n=d.env.SENTRY_DSN)?void 0:n.trim())||"",g=(null==(l=d.env.NEXT_PUBLIC_SENTRY_ENVIRONMENT)?void 0:l.trim())||(null==(s=d.env.SENTRY_ENVIRONMENT)?void 0:s.trim())||"production",h=(null==(i=d.env.NEXT_PUBLIC_SENTRY_TRACES_SAMPLE_RATE)?void 0:i.trim())||(null==(o=d.env.SENTRY_TRACES_SAMPLE_RATE)?void 0:o.trim())||"",v=!!f,b=!1,x=null,y=null,k=null!=(c=function(e){if(!e)return;let t=Number.parseFloat(e);return Number.isNaN(t)?void m.warn("Invalid Sentry sample rate provided",{value:e}):Math.min(Math.max(t,0),1)}(h))?c:.1;async function j(){return v?y||(x||(x=Promise.all([a.e(4850),a.e(7141)]).then(a.bind(a,17141)).then(e=>{if(y=e,!b)try{e.init({dsn:f,environment:g,enabled:v,tracesSampleRate:k,replaysSessionSampleRate:0,replaysOnErrorSampleRate:0,profilesSampleRate:0}),b=!0}catch(e){return m.error("Failed to initialize Sentry",e),null}return y}).catch(e=>(m.error("Failed to load Sentry runtime",e),y=null,null)).finally(()=>{x=null})),x):null}async function w(e,t){if(!v)return;let a=await j();if(!a)return void m.warn("captureException skipped because Sentry is unavailable",e);try{a.captureException(e,t)}catch(t){p.error("Failed to capture exception with Sentry",t,e)}}let N=u.UG.child("error-boundary");function P(e){let{boundary:t,error:a,info:r,tags:n,extra:l}=e;N.error("Error boundary captured an exception",{boundary:t,error:a,info:r,tags:n,extra:l});let s={boundary:t,...null!=n?n:{}},i={boundary:t,...null!=l?l:{}};r&&(i.info=r),w(a,{tags:s,extra:i})}},36118:(e,t,a)=>{"use strict";a.d(t,{WeekSummary:()=>c});var r=a(95155);a(48768);var n=a(3278),l=a(57649),s=a(34467),i=a(27566),o=a(84804);function c(e){let{iso:t,variant:a="card",className:c,showLabel:u=!0,bleed:d=!1}=e,{days:m,isToday:p}=(0,l.useWeek)(t),{per:f,weekDone:g,weekTotal:h}=(0,s.useWeekData)(m),v=7===m.length?"".concat((0,o.Ez)(m[0])," — ").concat((0,o.Ez)(m[6])):"",b="Completed / Total items this week",x=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"badge__icon",children:"✅"}),(0,r.jsx)("span",{className:"tabular-nums",children:g}),"/",(0,r.jsx)("span",{className:"tabular-nums",children:h})]}),y=(0,r.jsx)("span",{className:"badge badge--sm",role:"status","aria-live":"polite",title:b,"aria-label":b,children:x}),k="inline"===a&&u?(0,r.jsxs)("div",{className:"mb-[var(--space-2)] flex items-start justify-between gap-[var(--space-2)]",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-[var(--space-2)] text-label tracking-[0.02em] text-muted-foreground",children:[(0,r.jsx)("span",{className:"uppercase font-semibold",children:"Week"}),v?(0,r.jsx)("span",{className:"font-medium",children:v}):null]}),(0,r.jsx)("span",{className:"pill pill--medium font-semibold",role:"status","aria-live":"polite","aria-label":b,title:b,children:x})]}):null,j=(0,r.jsx)("div",{className:"inline"===a?"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 xl:grid-cols-7 gap-[var(--space-2)]":"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 xl:grid-cols-7 gap-[var(--space-3)]",role:"list","aria-label":"Week days summary",children:f.map(e=>{let t=p(e.iso),n=0===e.total,l=(0,o.Ez)(e.iso),s="".concat(e.done," of ").concat(e.total," done");return(0,r.jsxs)("div",{role:"listitem",className:(0,i.cn)("ws-tile group","inline"===a?"p-[var(--space-2)] rounded-card r-card-lg":"p-[var(--space-3)] rounded-card r-card-lg",t&&"ws-tile--today",n&&"ws-tile--empty"),"data-today":t||void 0,"aria-label":"".concat(l,": ").concat(s),children:[(0,r.jsx)("div",{className:"ws-tile__date",children:l}),(0,r.jsxs)("div",{className:(0,i.cn)("ws-tile__counts","inline"===a?"text-body":"text-title"),children:[(0,r.jsx)("span",{className:"tabular-nums",children:e.done}),(0,r.jsx)("span",{className:"opacity-60",children:" / "}),(0,r.jsx)("span",{className:"tabular-nums",children:e.total})]}),t?(0,r.jsx)("span",{"aria-hidden":!0,className:"ws-rail"}):null]},e.iso)})}),w=(0,r.jsxs)("div",{className:(0,i.cn)(c,d&&"ws-bleed"),children:[k,j]});return"inline"===a?w:(0,r.jsxs)(n.SectionCard,{className:"card-neo",children:[(0,r.jsx)(n.SectionCard.Header,{className:"items-start gap-[var(--space-3)]",titleAs:"h6",titleClassName:"flex flex-col gap-[var(--space-2)]",title:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-title font-semibold tracking-tight",children:"Week Summary"}),v?(0,r.jsx)("span",{className:"text-label font-medium text-muted-foreground",children:v}):null]}),actions:y}),(0,r.jsx)(n.SectionCard.Body,{children:w})]})}},38283:(e,t,a)=>{"use strict";a.d(t,{PlannerProvider:()=>x,useDays:()=>y,useFocus:()=>k,usePlanner:()=>w,usePlannerReminders:()=>N,useSelection:()=>j});var r=a(95155);a(48768);var n=a(12115),l=a(67419),s=a(17424),i=a(84804),o=a(82707),c=a(25488),u=a(83996);function d(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function m(e){if(!e)return;if("string"==typeof e)return[e];let t=new Set;for(let a of e)"string"==typeof a&&t.add(a);return t.size?Array.from(t):void 0}let p=n.createContext(null),f=n.createContext(null),g=n.createContext(null),h=n.createContext(null),v=n.createContext(null);function b(e){let{children:t}=e,[a,r]=(0,l.ud)("planner:days",{},{decode:c.yr}),[b,x]=(0,l.ud)("planner:focus",c.hs,{decode:c.xJ}),[y,k]=(0,l.ud)("planner:selected",{}),[j,w]=(0,l.ud)("planner:view-mode","day"),[N,P]=n.useState(c.hs),[C,T]=(0,l.ud)("goals.v2",[],{decode:o.H}),[S,D]=n.useState(null),[_,E]=n.useState(null),I=n.useRef(null),A=(0,s.ZP)(),[M,F]=n.useState(!1),[R,L]=n.useState(()=>{let e={};for(let[r,n]of Object.entries(a)){var t;e[r]=null!=(t=n.tasksById)?t:{}}return e}),B=n.useRef(R),O=n.useRef(a);n.useEffect(()=>{B.current=R},[R]),n.useEffect(()=>{O.current=a},[a]),n.useEffect(()=>{let e=(0,c.dR)();P(t=>t===e?t:e),x(t=>t===c.hs||t===c.Hs?e:t)},[x]);let z=n.useCallback(()=>{F(e=>!e||e)},[]);n.useEffect(()=>{M||N!==c.hs&&z()},[M,z,N]),n.useEffect(()=>{M||b!==c.hs&&b!==c.Hs&&z()},[b,M,z]),n.useEffect(()=>()=>{I.current&&(clearTimeout(I.current),I.current=null)},[]);let W=n.useCallback(e=>{let{title:t,metric:a,notes:r,pillar:n}=e;D(null);let s=t.trim();if(!s)return D("Title required."),!1;let i=s.toLowerCase();if(C.some(e=>e.title.trim().toLowerCase()===i))return D("Goal already exists."),!1;if(C.filter(e=>!e.done).length>=o.E)return D("Cap reached. Mark something done first."),!1;let c={id:(0,l.uid)(),title:s,...n?{pillar:n}:{},metric:a.trim()||void 0,notes:r.trim()||void 0,done:!1,createdAt:Date.now()};return T(e=>[c,...e]),!0},[C,D,T]),H=n.useCallback(e=>{D(null),T(t=>{let a=0,r=!1,n=!1,l=t.map(t=>{if(t.id===e){r=!0,n=t.done;let e=!t.done;return e||(a+=1),{...t,done:e}}return t.done||(a+=1),t});return r?n&&a>o.E?(D("Cap is 3 active. Complete or delete another first."),t):l:t})},[D,T]),q=n.useCallback(e=>{D(null),T(t=>{let a=null,r=t.filter(t=>t.id!==e||(a=t,!1));return a?(E(a),I.current&&(clearTimeout(I.current),I.current=null),I.current=setTimeout(()=>{E(null),I.current=null},5e3),r):t})},[D,T]),$=n.useCallback(()=>{D(null),T(()=>[]),E(null),I.current&&(clearTimeout(I.current),I.current=null)},[T]),Y=n.useCallback((e,t)=>{let a=!1;return T(r=>{var n,l;let s=r.findIndex(t=>t.id===e);if(-1===s)return r;let i=r[s],o={...i};if(Object.prototype.hasOwnProperty.call(t,"title")){let e=t.title.trim();if(!e)return D("Title required."),r;let a=e.toLowerCase();if(r.some((e,t)=>t!==s&&e.title.trim().toLowerCase()===a))return D("Goal already exists."),r;o.title=e}if(Object.prototype.hasOwnProperty.call(t,"metric")&&(o.metric=(null==(n=t.metric)?void 0:n.trim())||void 0),Object.prototype.hasOwnProperty.call(t,"notes")&&(o.notes=(null==(l=t.notes)?void 0:l.trim())||void 0),o.title===i.title&&o.metric===i.metric&&o.notes===i.notes)return D(null),a=!0,r;D(null),a=!0;let c=[...r];return c[s]=o,c}),a},[D,T]),U=n.useCallback(()=>{_&&(T(e=>[_,...e]),E(null),I.current&&(clearTimeout(I.current),I.current=null))},[_,T]);n.useEffect(()=>{let e=!1,t=()=>{let r=new Date,n=new Date(r);return n.setDate(r.getDate()+1),n.setHours(0,0,0,0),setTimeout(()=>{(()=>{if(e)return;let t=(0,c.dR)();P(e=>(x(a=>a===c.hs||a===c.Hs||a===e?t:a),t))})(),a=t()},Math.max(0,n.getTime()-r.getTime()))},a=t();return()=>{e=!0,clearTimeout(a)}},[x,P]);let K=n.useMemo(()=>(function(e,t){let a=e,r=!1;for(let s of Object.keys(e)){var n,l;let i=e[s],o=t[s],c=null==i?void 0:i.projectId,u=null==i?void 0:i.taskId;if(!o||!c&&!u||c&&!o.projects.some(e=>e.id===c)){r||(r=!0,a={...a}),delete a[s];continue}!u||(null!=(l=null==(n=o.tasksById)?void 0:n[u])?l:o.tasks.find(e=>e.id===u))||(r||(r=!0,a={...a}),delete a[s])}return r?a:e})(y,a),[y,a]);n.useEffect(()=>{Object.is(K,y)||k(K)},[K,y,k]),n.useEffect(()=>{Object.is(a,a)||r(a)},[a,a,r]);let V=n.useCallback(e=>{var t,a;let n=O.current,l=B.current,{days:s,changed:i}=function(e){if(Array.isArray(e)){let[t,a]=e;return{days:t,changed:m(a)}}return d(e)&&Object.prototype.hasOwnProperty.call(e,"days")&&d(e.days)?{days:e.days,changed:m(e.changed)}:{days:e,changed:void 0}}("function"==typeof e?e(n):e),{days:o,pruned:u}=(0,c.b8)(s),p=o,f=!Object.is(p,s),g=new Set,h=new Set,v=new Set,b=i?new Set(i):void 0;if(i)for(let e of i)g.add(e);else for(let e of Object.keys(p))g.add(e);if(u)for(let e of u)v.add(e),g.add(e);if(!i)for(let e of Object.keys(n))Object.prototype.hasOwnProperty.call(p,e)||(v.add(e),g.add(e));for(let e of g){let a=Object.prototype.hasOwnProperty.call(n,e);if(!Object.prototype.hasOwnProperty.call(p,e)){a&&v.add(e);continue}let r=n[e],l=p[e],s=!a,i=r!==l;if(!(null!=(t=null==b?void 0:b.has(e))&&t)&&!s&&!i)continue;s&&h.add(e);let o=(0,c.B_)(p,e);o&&(f||(f=!0,p={...p}),p[e]=o)}if(!f&&Object.is(n,p)&&0===v.size&&0===g.size)return;let x=[];for(let e of g){if(!Object.prototype.hasOwnProperty.call(p,e))continue;let t=p[e];if(!t)continue;let r=null!=(a=t.tasksById)?a:{};(h.has(e)||l[e]!==r)&&x.push([e,r])}let y=v.size>0?Array.from(v):void 0;(!Object.is(n,p)||0!==x.length||y)&&(Object.is(n,p)||(O.current=p,r(p)),(0!==x.length||y)&&L(e=>{let t=e,a=!1;if(y)for(let e of y)Object.prototype.hasOwnProperty.call(t,e)&&(a||(a=!0,t={...t}),delete t[e]);if(x.length)for(let[e,r]of x)t[e]!==r&&(a||(a=!0,t={...t}),t[e]=r);return a?(B.current=t,t):e}))},[r,L]),G=n.useMemo(()=>({days:a,setDays:V,tasksById:R}),[a,V,R]),Z=n.useMemo(()=>({focus:b,setFocus:x,today:N}),[b,x,N]),X=n.useCallback(e=>{k(t=>{let a="function"==typeof e?e(t):e;return Object.is(t,a)?t:a})},[k]),J=n.useMemo(()=>({selected:K,setSelected:X}),[K,X]),Q=b===c.hs?N:b,ee=Q===c.hs?c.Hs:Q,et=n.useCallback(e=>N!==c.hs&&e===N,[N]),ea=n.useMemo(()=>{let{start:e,end:t}=(0,i.bM)(ee),a=[];for(let t=0;t<7;t+=1)a.push((0,i.$$)((0,i.fi)(e,t)));return{start:e,end:t,days:a,isToday:et}},[ee,et]),er=n.useCallback(e=>{var t,r;return null!=(r=(null!=(t=a[e])?t:(0,c.pF)(a,e)).focus)?r:""},[a]),en=n.useCallback((e,t)=>{V(a=>{var r;let n=(0,c.pF)(a,e);if((null!=(r=n.focus)?r:"")===t)return a;let l=(0,u.Z6)(n,t);return{...a,[e]:l}})},[V]),el=n.useCallback(e=>{var t,r;return null!=(r=(null!=(t=a[e])?t:(0,c.pF)(a,e)).notes)?r:""},[a]),es=n.useCallback((e,t)=>{V(a=>{var r;let n=(0,c.pF)(a,e);if((null!=(r=n.notes)?r:"")===t)return a;let l=(0,u.ym)(n,t);return{...a,[e]:l}})},[V]),ei=n.useMemo(()=>({goals:C,err:S,setErr:D,lastDeleted:_,addGoal:W,toggleDone:H,removeGoal:q,updateGoal:Y,undoRemove:U,clearGoals:$}),[C,S,D,_,W,H,q,Y,U,$]),eo=n.useMemo(()=>({iso:Q,today:N,hydrated:M,setIso:x,viewMode:j,setViewMode:w,week:ea,goals:ei,reminders:A,getFocus:er,updateFocus:en,getNote:el,updateNote:es}),[Q,N,M,x,j,w,ea,ei,A,er,en,el,es]);return n.createElement(p.Provider,{value:G},n.createElement(f.Provider,{value:Z},n.createElement(g.Provider,{value:J},n.createElement(v.Provider,{value:A},n.createElement(h.Provider,{value:eo},t)))))}function x(e){let{children:t}=e;return n.useContext(s.dZ)?(0,r.jsx)(b,{children:t}):(0,r.jsx)(s.$L,{children:(0,r.jsx)(b,{children:t})})}function y(){let e=n.useContext(p);if(!e)throw Error("PlannerProvider missing. Wrap your planner page with <PlannerProvider>.");return e}function k(){let e=n.useContext(f);if(!e)throw Error("PlannerProvider missing. Wrap your planner page with <PlannerProvider>.");return e}function j(){let e=n.useContext(g);if(!e)throw Error("PlannerProvider missing. Wrap your planner page with <PlannerProvider>.");return e}function w(){let e=n.useContext(h);if(!e)throw Error("PlannerProvider missing. Wrap your planner page with <PlannerProvider>.");return e}function N(){let e=n.useContext(v);if(!e)throw Error("PlannerProvider missing. Wrap your planner page with <PlannerProvider>.");return e}},42988:(e,t,a)=>{"use strict";a.d(t,{DU:()=>c.WeekPickerShell,HK:()=>i.usePlannerActions,N_:()=>i.usePlannerStore,Y9:()=>o.useWeekData,_2:()=>s.useWeek,aK:()=>s.useFocusDate,aP:()=>r.PlannerProvider,i7:()=>l.useDay,v_:()=>n.v_,yO:()=>r.usePlanner}),a(82192),a(93706),a(62021),a(16386),a(15892),a(81323),a(11468);var r=a(38283),n=a(83996);a(27257),a(94911),a(77656),a(8659),a(25488),a(79897),a(67284),a(94433),a(55944),a(26439),a(43397),a(72490),a(69235),a(60269);var l=a(12607);a(81393),a(48772);var s=a(57649),i=a(51266);a(9535),a(82750),a(58222);var o=a(34467);a(43244),a(80376),a(95288),a(43476),a(57833),a(77372);var c=a(45882);a(36118)},43244:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AgendaView:()=>m});var r=a(95155),n=a(12115),l=a(81464),s=a(27566),i=a(84804),o=a(57649),c=a(51266),u=a(25488),d=a(94911);function m(){let{iso:e}=(0,o.useFocusDate)(),{start:t,isToday:a}=(0,o.useWeek)(e),{days:m}=(0,c.usePlannerStore)(),p=n.useMemo(()=>{let e=[];for(let r=0;r<14;r+=1){let n=(0,i.$$)((0,i.fi)(t,r)),l=(0,u.pF)(m,n),s=l.tasks.filter(e=>!e.done),o=s.length>0?s:l.tasks;e.push({iso:n,label:(0,i.Ez)(n),done:l.doneCount,total:l.totalCount,projects:l.projects.length,tasks:o.map(e=>({id:e.id,title:e.title,done:e.done})),isToday:a(n)})}return e},[a,m,t]),f=n.useId();return(0,r.jsxs)(l.PageShell,{as:"section",grid:!0,className:"py-[var(--space-6)]",contentClassName:"gap-y-[var(--space-6)]","aria-labelledby":f,children:[(0,r.jsxs)("header",{className:"col-span-full flex flex-col gap-[var(--space-3)]",children:[(0,r.jsx)("h2",{id:f,className:"text-title font-semibold tracking-tight",children:"Agenda view"}),(0,r.jsx)("p",{className:"text-body text-muted-foreground max-w-prose",children:"Scan the next two weeks. Upcoming tasks show first; finished days still list their history so you can revisit context without leaving the agenda."})]}),(0,r.jsx)(d.PlannerIslandBoundary,{name:"planner:agenda-view:list",title:"Agenda unavailable",description:"We couldn't load the upcoming agenda. Retry to rebuild the list.",retryLabel:"Retry agenda",variant:"plain",fallbackClassName:"col-span-full space-y-[var(--space-4)]",children:(0,r.jsx)("ol",{className:"col-span-full space-y-[var(--space-4)]",children:p.map(e=>(0,r.jsx)("li",{children:(0,r.jsxs)("article",{"aria-labelledby":"".concat(e.iso,"-heading"),className:(0,s.cn)("rounded-card border border-border/40 bg-card/80 p-[var(--space-4)] shadow-sm","flex flex-col gap-[var(--space-3)]",e.isToday&&"ring-1 ring-ring/60"),children:[(0,r.jsxs)("header",{className:"flex flex-wrap items-center gap-[var(--space-3)]",children:[(0,r.jsx)("h3",{id:"".concat(e.iso,"-heading"),className:"text-ui font-semibold tracking-wide",children:e.label}),(0,r.jsxs)("span",{className:"badge badge--sm","aria-live":"polite",children:[(0,r.jsx)("span",{className:"tabular-nums",children:e.done}),(0,r.jsx)("span",{"aria-hidden":!0,className:"px-[var(--space-1)] opacity-60",children:"/"}),(0,r.jsx)("span",{className:"tabular-nums",children:e.total})]}),(0,r.jsxs)("span",{className:"text-label text-muted-foreground",children:[e.projects," projects"]})]}),e.tasks.length?(0,r.jsx)("ul",{className:"space-y-[var(--space-2)]",children:e.tasks.map(e=>(0,r.jsxs)("li",{className:(0,s.cn)("rounded-[var(--radius-md)] border border-border/30 px-[var(--space-3)] py-[var(--space-2)]","bg-card/90 text-body flex items-center gap-[var(--space-3)]",e.done&&"opacity-70 line-through"),children:[(0,r.jsx)("span",{className:(0,s.cn)("inline-flex h-[var(--space-3)] w-[var(--space-3)] items-center justify-center rounded-full border",e.done?"border-success/60 text-success":"border-muted-foreground/40 text-muted-foreground"),"aria-hidden":!0,children:e.done?"✓":"•"}),(0,r.jsx)("span",{className:"flex-1 truncate",title:e.title,children:e.title})]},e.id))}):(0,r.jsx)("p",{className:"text-label text-muted-foreground",children:"No tasks scheduled."})]})},e.iso))})})]})}},43397:(e,t,a)=>{"use strict";a.d(t,{TodayHero:()=>g});var r=a(95155),n=a(12115),l=a(91182),s=a(27566),i=a(72490),o=a(69235),c=a(60269),u=a(12607),d=a(57649),m=a(9535),p=a(82750),f=a(58222);function g(e){let{iso:t}=e,{iso:a,setIso:g,today:h}=(0,d.useFocusDate)(),v=null!=t?t:a,b=v===h;(0,n.useEffect)(()=>{t&&t!==a&&g(t)},[t,a,g]);let{projects:x,tasks:y,renameTask:k,toggleTask:j,deleteTask:w,renameProject:N,deleteProject:P,toggleProject:C}=(0,u.useDay)(v),[T,S]=(0,m.useSelectedProject)(v),[,D]=(0,m.useSelectedTask)(v),_=(0,n.useMemo)(()=>{var e;let t=x.find(e=>e.id===T);return null!=(e=null==t?void 0:t.name)?e:""},[x,T]),E=(0,n.useMemo)(()=>T?y.filter(e=>e.projectId===T):[],[y,T]),{done:I,total:A}=(0,n.useMemo)(()=>E.reduce((e,t)=>(e.total+=1,t.done&&(e.done+=1),e),{done:0,total:0}),[E]),M=_?"Tasks completed for ".concat(_):"Tasks completed",F=(0,p.useTodayHeroProjects)({iso:v,projects:x,selectedProjectId:T,setSelectedProjectId:S,renameProject:N,deleteProject:P,toggleProject:C}),R=(0,f.useTodayHeroTasks)({iso:v,scopedTasks:E,projectId:T,projectName:_,renameTask:k,deleteTask:w,toggleTask:j,setSelectedTaskId:D});return(0,r.jsxs)("section",{className:"bg-hero-soft rounded-card r-card-lg card-pad-lg anim-in",children:[(0,r.jsx)(i.TodayHeroHeader,{viewIso:v,isToday:b,onChange:g}),(0,r.jsx)(l.R5,{current:I,total:A,showPercentage:!0,className:"mb-[var(--space-4)] flex items-center gap-[var(--space-3)]",trackClassName:"w-full",percentageClassName:(0,s.cn)("text-right",l.KR),"aria-label":M}),(0,r.jsx)(o.TodayHeroProjects,{projects:x,selectedProjectId:T,projectsListId:F.projectsListId,projectName:F.projectName,editingProjectId:F.editingProjectId,editingProjectName:F.editingProjectName,showAllProjects:F.showAllProjects,visibleProjects:F.visibleProjects,hiddenProjectsCount:F.hiddenProjectsCount,shouldShowProjectToggle:F.shouldShowProjectToggle,onProjectNameChange:F.handleProjectNameChange,onProjectFormSubmit:F.handleProjectFormSubmit,onProjectSelect:F.handleProjectSelect,onProjectToggle:F.handleProjectToggle,onProjectDelete:F.handleProjectDelete,onProjectEditOpen:F.openProjectEditor,onProjectRenameChange:F.handleProjectRenameChange,onProjectRenameCommit:F.commitProjectRename,onProjectRenameCancel:F.cancelProjectRename,onToggleShowAllProjects:F.toggleShowAllProjects}),(0,r.jsx)(c.TodayHeroTasks,{projectId:T,projectName:_,tasksListId:R.tasksListId,taskInputName:R.taskInputName,visibleTasks:R.visibleTasks,totalTaskCount:R.totalTaskCount,showAllTasks:R.showAllTasks,shouldShowTaskToggle:R.shouldShowTaskToggle,editingTaskId:R.editingTaskId,editingTaskText:R.editingTaskText,taskAnnouncementText:R.taskAnnouncementText,onTaskFormSubmit:R.handleTaskFormSubmit,onTaskSelect:R.handleTaskSelect,onTaskToggle:R.handleTaskToggle,onTaskDelete:R.handleTaskDelete,onTaskEditOpen:R.openTaskEditor,onTaskRenameChange:R.handleTaskRenameChange,onTaskRenameCommit:R.commitTaskRename,onTaskRenameCancel:R.cancelTaskRename,onToggleShowAllTasks:R.toggleShowAllTasks})]})}},43476:(e,t,a)=>{"use strict";a.r(t),a.d(t,{WeekView:()=>d});var r=a(95155),n=a(12115),l=a(81464),s=a(36118),i=a(57833),o=a(93706),c=a(57649),u=a(94911);function d(){let{iso:e}=(0,c.useFocusDate)(),{days:t,isToday:a}=(0,c.useWeek)(e),d=n.useId();return(0,r.jsxs)(l.PageShell,{as:"div",grid:!0,className:"py-[var(--space-6)]",contentClassName:"gap-y-[var(--space-6)]","aria-labelledby":d,children:[(0,r.jsxs)("header",{className:"col-span-full flex flex-col gap-[var(--space-3)]",children:[(0,r.jsx)("h2",{id:d,className:"text-title font-semibold tracking-tight",children:"Week overview"}),(0,r.jsx)("p",{className:"text-body text-muted-foreground max-w-prose",children:"Review the current week at a glance. Progress cards stay interactive so updates here reflect instantly across other views."})]}),(0,r.jsxs)("div",{className:"col-span-full grid gap-[var(--space-4)] lg:grid-cols-12",children:[(0,r.jsx)("div",{className:"lg:col-span-8 space-y-[var(--space-4)]",children:(0,r.jsx)(u.PlannerIslandBoundary,{name:"planner:week-view:summary",title:"Week summary unavailable",description:"We hit an error loading the weekly summary. Retry to bring it back.",retryLabel:"Retry summary",children:(0,r.jsx)(s.WeekSummary,{iso:e})})}),(0,r.jsx)("aside",{"aria-label":"Week notes",className:"lg:col-span-4 space-y-[var(--space-4)]",children:(0,r.jsx)(u.PlannerIslandBoundary,{name:"planner:week-view:notes",title:"Notes unavailable",description:"We couldn't load your notes for the selected week. Retry to open them again.",retryLabel:"Retry notes",children:(0,r.jsx)(i.WeekNotes,{iso:e})})})]}),(0,r.jsx)(u.PlannerIslandBoundary,{name:"planner:week-view:cards",title:"Week schedule unavailable",description:"We weren't able to render the day cards. Retry to reload the schedule.",retryLabel:"Retry day cards",variant:"plain",fallbackClassName:"col-span-full grid gap-[var(--space-4)] md:grid-cols-2",children:(0,r.jsx)("div",{className:"col-span-full grid gap-[var(--space-4)] md:grid-cols-2",children:t.map(e=>(0,r.jsx)(o.DayCard,{iso:e,isToday:a(e)},e))})})]})}},44392:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(12115);function n(e){let{ref:t,when:a}=e,n=r.useRef(!1);r.useEffect(()=>{if(a&&!n.current){var e;null==(e=t.current)||e.focus()}n.current=a},[a,t])}},45882:(e,t,a)=>{"use strict";a.d(t,{WeekPickerShell:()=>u});var r=a(95155),n=a(12115),l=a(27566);let s=e=>{let{children:t}=e;return(0,r.jsx)(r.Fragment,{children:t})};s.displayName="WeekPickerShellTotals";let i=e=>{let{children:t}=e;return(0,r.jsx)(r.Fragment,{children:t})};i.displayName="WeekPickerShellChips";let o=e=>{let{children:t}=e;return(0,r.jsx)(r.Fragment,{children:t})};o.displayName="WeekPickerShellControls";let c=n.forwardRef(function(e,t){let{children:a,className:c,...u}=e,d=[],m=[],p=[],f=[];n.Children.forEach(a,e=>{if(!n.isValidElement(e)){null!=e&&f.push(e);return}return e.type===s?void d.push(e):e.type===i?void m.push(e):e.type===o?void p.push(e):void f.push(e)});let g=d.length>0||p.length>0;return(0,r.jsxs)("div",{ref:t,className:(0,l.cn)("week-picker-shell chip-shell",c),...u,children:[g?(0,r.jsxs)("div",{className:"week-picker-shell__top flex w-full flex-wrap items-center chip-gap-x chip-gap-y-tight",children:[p.length>0?(0,r.jsx)("div",{className:"week-picker-shell__controls flex flex-wrap items-center chip-gap-x-tight chip-gap-y-tight",children:p.map(e=>{var t;let a=null!=(t=e.key)?t:e.props.slotId;return(0,r.jsx)(n.Fragment,{children:e.props.children},a)})}):null,d.length>0?(0,r.jsx)("div",{className:"week-picker-shell__totals ml-auto flex flex-wrap items-center justify-end chip-gap-x chip-gap-y-tight",children:d.map(e=>{var t;let a=null!=(t=e.key)?t:e.props.slotId;return(0,r.jsx)(n.Fragment,{children:e.props.children},a)})}):null]}):null,m.map(e=>{var t;let a=null!=(t=e.key)?t:e.props.slotId;return(0,r.jsx)(n.Fragment,{children:e.props.children},a)}),f]})});c.displayName="WeekPickerShell";let u=Object.assign(c,{Totals:s,Chips:i,Controls:o})},47420:e=>{e.exports={stage:"PortraitFrame_stage__3_a7I",innerTransparent:"PortraitFrame_innerTransparent__MYnxm",stageTransparent:"PortraitFrame_stageTransparent__keBOl",rimLighting:"PortraitFrame_rimLighting__hywbJ",character:"PortraitFrame_character__VWyGN",characterBody:"PortraitFrame_characterBody__48J_q",characterHead:"PortraitFrame_characterHead__6Lbwb",characterCollar:"PortraitFrame_characterCollar__QZCLl",layerFront:"PortraitFrame_layerFront__FeXt_",layerRear:"PortraitFrame_layerRear__OZ8zb",layerDimmed:"PortraitFrame_layerDimmed__t7fzP",angel:"PortraitFrame_angel__9p4ib",angelWings:"PortraitFrame_angelWings__Hpgwr",demon:"PortraitFrame_demon__y_lmI",demonHorns:"PortraitFrame_demonHorns__JshID",poseDuoAngel:"PortraitFrame_poseDuoAngel__pnZXf",poseDuoDemon:"PortraitFrame_poseDuoDemon__aNg3w",poseAngelLeadingAngel:"PortraitFrame_poseAngelLeadingAngel__ooNwP",poseAngelLeadingDemon:"PortraitFrame_poseAngelLeadingDemon__YDuZL",poseDemonLeadingAngel:"PortraitFrame_poseDemonLeadingAngel__2mTvl",poseDemonLeadingDemon:"PortraitFrame_poseDemonLeadingDemon__mPvyN",poseBackToBackAngel:"PortraitFrame_poseBackToBackAngel__JHU_y",poseBackToBackDemon:"PortraitFrame_poseBackToBackDemon__xUwrx",stageBackToBack:"PortraitFrame_stageBackToBack__XZgxv"}},48768:()=>{},48772:(e,t,a)=>{"use strict";a.d(t,{useDayNotes:()=>s});var r=a(82192),n=a(58418),l=a(83996);let s=(0,r.createDayTextFieldHook)({selectValue:e=>e.notes,applyValue:l.ym,scheduleSavingReset:n.l})},50306:(e,t,a)=>{"use strict";a.d(t,{I6:()=>r,Ik:()=>o,ZI:()=>p,q0:()=>n,vb:()=>u});let r=["bg-border","bg-border-subtle","bg-input","bg-ring","bg-background","bg-foreground","bg-card","bg-surface","bg-surface-muted","bg-surface-hover","bg-surface-foreground","bg-surface-2","bg-surface-2-foreground","bg-panel","bg-card-hairline","bg-card-hairline-40","bg-card-hairline-45","bg-card-hairline-55","bg-card-hairline-60","bg-card-hairline-65","bg-card-hairline-70","bg-card-hairline-75","bg-card-hairline-90","bg-primary","bg-primary-foreground","bg-primary-soft","bg-accent","bg-accent-foreground","bg-accent-soft","bg-accent-overlay","bg-on-accent","bg-accent-3","bg-accent-2","bg-accent-2-foreground","bg-glow","bg-ring-muted","bg-danger","bg-danger-foreground","bg-warning","bg-warning-foreground","bg-warning-soft","bg-warning-soft-strong","bg-success","bg-success-foreground","bg-success-soft","bg-success-glow","bg-tone-top","bg-tone-jg","bg-tone-mid","bg-tone-bot","bg-tone-sup","bg-aurora-g","bg-aurora-g-light","bg-aurora-p","bg-aurora-p-light","bg-muted","bg-muted-foreground","bg-lav-deep","bg-surface-vhs","bg-surface-streak","bg-card-foreground","bg-interaction-primary-hover","bg-interaction-primary-active","bg-interaction-focus-hover","bg-interaction-focus-active","bg-interaction-focus-surfaceHover","bg-interaction-focus-surfaceActive","bg-interaction-focus-tintHover","bg-interaction-focus-tintActive","bg-interaction-accent-hover","bg-interaction-accent-active","bg-interaction-accent-surfaceHover","bg-interaction-accent-surfaceActive","bg-interaction-accent-tintHover","bg-interaction-accent-tintActive","bg-interaction-info-hover","bg-interaction-info-active","bg-interaction-info-surfaceHover","bg-interaction-info-surfaceActive","bg-interaction-info-tintHover","bg-interaction-info-tintActive","bg-interaction-danger-hover","bg-interaction-danger-active","bg-interaction-danger-surfaceHover","bg-interaction-danger-surfaceActive","bg-interaction-danger-tintHover","bg-interaction-danger-tintActive","bg-interaction-foreground-tintHover","bg-interaction-foreground-tintActive","bg-ring-contrast"],n=[4,8,12,16,24,32,48,64],l=[["xs",{diameter:n[4],stroke:n[0]}],["s",{diameter:n[5],stroke:n[0]}],["m",{diameter:n[7],stroke:n[0]}],["l",{diameter:3.5*n[7],stroke:n[0]}]],s=l.reduce((e,t)=>{let[a]=t;return e[a]={diameter:"--ring-diameter-".concat(a),stroke:"--ring-stroke-".concat(a)},e},{}),i=l.reduce((e,t)=>{let[a,{diameter:r,stroke:l}]=t;return e[a]={diameter:r,stroke:l,inset:n[2]/2},e},{}),o=(e,t)=>{var a,r,n;let l=s[e],o=i[e],c=null!=(a=null==t?void 0:t.diameter)?a:o.diameter,u=null!=(r=null==t?void 0:t.stroke)?r:o.stroke,d=null!=(n=null==t?void 0:t.inset)?n:o.inset,m=p(l.diameter,c);return{diameter:m,stroke:p(l.stroke,u),inset:p("--ring-inset-".concat(e),p("--ring-inset",d))}},c=[["sm",6],["md",8],["lg",12],["xl",16],["2xl",24],["full",9999]];c.reduce((e,t)=>{let[a,r]=t;return e[a]=r,e},{});let u=c.map(e=>{let[t]=e;return"--radius-".concat(t)}),d=(e,t)=>{if("("!==e[t])return null;let a=0;for(let r=t;r<e.length;r+=1){let n=e[r];if("("===n){a+=1;continue}if(")"===n&&0==(a-=1))return{body:e.slice(t+1,r),endIndex:r+1}}return null},m=(e,t,a)=>{let r=e.trim();if(!r)return null;let n=Number.parseFloat(r);if(Number.isFinite(n))return n;let l=r.toLowerCase();if(l.startsWith("var(")){let e=(e=>{let t=e.trim(),a=t.toLowerCase();if(!a.startsWith("var(")||!t.endsWith(")"))return null;let r=d(t,a.indexOf("("));if(!r)return null;let n=r.body,l=0,s="",i="",o=!1;for(let e=0;e<n.length;e+=1){let t=n[e];if("("===t)l+=1;else if(")"===t)l-=1;else if(","===t&&0===l&&!o){o=!0;continue}o?i+=t:s+=t}let c=s.trim();return c.startsWith("--")?{name:c,fallback:o&&i.trim()||void 0}:null})(r);if(!e)return null;let{name:n,fallback:l}=e;if(a.has(n))return null;let s=new Set(a);s.add(n);let i=t.getPropertyValue(n).trim();if(i){let e=m(i,t,s);if(null!==e)return e}return l?m(l,t,s):null}if(l.startsWith("calc(")&&r.endsWith(")")){let e=d(r,l.indexOf("("));if(!e)return null;let n=0,{body:s}=e,i="",o=s.toLowerCase();for(;n<s.length;){if(o.startsWith("var(",n)){let e=s.indexOf("(",n+3);if(-1===e)return null;let r=d(s,e);if(!r)return null;let l=m("var(".concat(r.body,")"),t,new Set(a));i+=null!==l?String(l):"0",n=r.endIndex;continue}if(o.startsWith("calc(",n)){let e=s.indexOf("(",n+4);if(-1===e)return null;let r=d(s,e);if(!r)return null;let l=m("calc(".concat(r.body,")"),t,new Set(a));i+=null!==l?String(l):"0",n=r.endIndex;continue}i+=s[n],n+=1}let c=i.replace(/(-?\d*\.?\d+(?:e[+-]?\d+)?)\s*[a-z%]+/gi,"$1").replace(/[^0-9+\-*/().\s]/g,"");if(!c.trim())return null;try{let e=Function("return ("+c+");")();return"number"==typeof e&&Number.isFinite(e)?e:null}catch(e){}}return null},p=(e,t)=>{if("undefined"==typeof document)return t;let a=getComputedStyle(document.documentElement),r=a.getPropertyValue(e).trim();if(!r)return t;let n=m(r,a,new Set([e]));return null!==n?n:t}},51266:(e,t,a)=>{"use strict";a.d(t,{usePlannerActions:()=>d,usePlannerStore:()=>u});var r=a(12115),n=a(25488),l=a(38283),s=a(83996),i=a(67419);let o="planner:projects",c="planner:tasks";function u(){let{days:e,setDays:t}=(0,l.useDays)(),{focus:a,setFocus:u,today:d}=(0,l.useFocus)(),m=a===n.hs?d:a,p=r.useRef(!1),f=r.useCallback((e,a)=>{if(void 0===a)return void t(e);let r="string"==typeof a?[a]:Array.from(a);t(t=>[e(t),r])},[t]);r.useEffect(()=>{if(p.current||!m)return;let e=(0,i.iG)(o),t=(0,i.iG)(c);if(!e&&!t){p.current=!0;return}f(a=>(function(e,t,a){var r,l;let s=null!=(r=null==a?void 0:a.projects)?r:(0,i.iG)(o),u=null!=(l=null==a?void 0:a.tasks)?l:(0,i.iG)(c);if(!s&&!u)return e;let d={...e},m=(0,n.pF)(d,t);s&&(m={...m,projects:s}),u&&(m={...m,tasks:u,...(0,n.he)(u)});let{doneCount:p,totalCount:f}=(0,n.IZ)(m.projects,m.tasks);return d[t]={...m,doneCount:p,totalCount:f},(0,i.Ab)(o),(0,i.Ab)(c),d})(a,m,{projects:e,tasks:t}),m),p.current=!0},[m,f]);let g=r.useCallback((e,t)=>{e!==n.hs&&f(a=>{let r=t((0,n.pF)(a,e));return{...a,[e]:r}},e)},[f]),h=r.useCallback(t=>(0,n.pF)(e,t),[e]),v=r.useCallback((e,t)=>{e!==n.hs&&f(a=>({...a,[e]:t}),e)},[f]),{setFocus:b,...x}=r.useMemo(()=>(0,s.v_)(m,g),[m,g]);return{days:e,focus:m,setFocus:u,day:h(m),getDay:h,setDay:v,upsertDay:g,setDayFocus:b,...x}}function d(){let{upsertDay:e}=u(),t=r.useCallback(t=>{let{iso:a,name:r,select:n}=t;if(!a)return;let l=r.trim();if(!l)return;let i=(0,s.v_)(a,e).addProject(l);if(i)return null==n||n(i),i},[e]),a=r.useCallback(t=>{let{iso:a,projectId:r,title:n,select:l}=t;if(!a||!r)return;let i=n.trim();if(!i)return;let o=(0,s.v_)(a,e).addTask(i,r);if(o)return null==l||l(o),o},[e]);return r.useMemo(()=>({createProject:t,createTask:a}),[t,a])}},51616:e=>{e.exports={heroPanel:"PlannerPage_heroPanel__35OO2",heroContent:"PlannerPage_heroContent__Tprao",heroText:"PlannerPage_heroText__2WGLB",heroPortrait:"PlannerPage_heroPortrait__2ypC0",heroEyebrow:"PlannerPage_heroEyebrow__UPjsY",heroHeading:"PlannerPage_heroHeading__3EjiV",heroSubtitle:"PlannerPage_heroSubtitle__CPmqH",heroActions:"PlannerPage_heroActions__vlEzm",heroDial:"PlannerPage_heroDial__EkP8H",heroRing:"PlannerPage_heroRing__0OBXl",heroRingReduced:"PlannerPage_heroRingReduced__SxmNN",heroRingValue:"PlannerPage_heroRingValue__4zikp",heroRingCaption:"PlannerPage_heroRingCaption__AJANE",heroSliderLabel:"PlannerPage_heroSliderLabel__2_QAL",heroSlider:"PlannerPage_heroSlider__AwdkA",heroFeedback:"PlannerPage_heroFeedback__vGMYt"}},52451:()=>{},55944:(e,t,a)=>{"use strict";a.d(t,{TaskReminderSettings:()=>h});var r=a(95155),n=a(12115),l=a(28549),s=a(53052),i=a(52105),o=a(40357),c=a(32740),u=a(91182),d=a(67419),m=a(38283);let p=[{value:"0",label:"At start"},{value:"5",label:"5 minutes before"},{value:"10",label:"10 minutes before"},{value:"15",label:"15 minutes before"},{value:"30",label:"30 minutes before"},{value:"60",label:"1 hour before"}],f=new Set(p.map(e=>Number.parseInt(e.value,10))),g="09:00";function h(e){var t,a,h,v,b,x,y,k;let{task:j,onChange:w}=e,{filtered:N,items:P}=(0,m.usePlannerReminders)(),[C,T]=(0,d.ud)("planner:reminder-default-id.v1",null),[S,D]=(0,d.ud)("planner:reminder-default-time.v1",g),[_,E]=(0,d.ud)("planner:reminder-default-lead.v1",0),I=n.useMemo(()=>(N.length>0?N:P).slice().sort((e,t)=>!!t.pinned==!!e.pinned?e.title.localeCompare(t.title):Number(t.pinned)-Number(e.pinned)).map(e=>({value:e.id,label:e.title})),[N,P]),A=null==j?void 0:j.id,M=null==j?void 0:j.reminder,F=!!(null==M?void 0:M.enabled),R=n.useId(),L=n.useId(),B=n.useRef(!0),O=n.useRef(F),z=n.useRef(!1),W=n.useRef(A),[H,q]=n.useState(F),$=null!=(v=null!=(h=null!=(a=null==M?void 0:M.reminderId)?a:C)?h:null==(t=I[0])?void 0:t.value)?v:"",Y=null!=(x=null!=(b=null==M?void 0:M.time)?b:S)?x:g,U=null!=(k=null!=(y=null==M?void 0:M.leadMinutes)?y:_)?k:0,K=n.useMemo(()=>f.has(U)?U:0,[U]),V=n.useMemo(()=>{if(!j)return"No task selected";let e=j.title.trim();return e?"Reminder for “".concat(e,"”"):"Reminder for untitled task"},[j]);n.useEffect(()=>{W.current!==A&&(W.current=A,B.current=!0,q(F),O.current=F)},[F,A]),n.useEffect(()=>{var e;if(!F){if(z.current){z.current=!1,O.current=F;return}O.current?q(e=>(B.current=e,!1)):q(!1),O.current=F;return}let t=null==(e=B.current)||e;B.current=t,q(t),O.current=F},[F]),n.useEffect(()=>{var e;if(!j||!F||0===I.length||$&&I.some(e=>e.value===$))return;let t=null==(e=I[0])?void 0:e.value;t&&(w({reminderId:t}),T(t))},[I,F,w,$,T,j]),n.useEffect(()=>{!j||!F||f.has(U)||(w({leadMinutes:0}),E(0))},[F,U,w,E,j]);let G=n.useCallback(e=>{var t,a,r,n,l,s,i,o,c;if(!j)return;let u=null!=(n=null!=(r=null!=(a=null==M?void 0:M.reminderId)?a:$)?r:null==(t=I[0])?void 0:t.value)?n:"",d=null!=(s=null!=(l=null==M?void 0:M.time)?l:Y)?s:g,m=null!=(o=null!=(i=null==M?void 0:M.leadMinutes)?i:K)?o:0;if("Right"!==e){B.current=H,z.current=!0,q(!1),w({enabled:!1,...u?{reminderId:u}:{},...d?{time:d}:{},leadMinutes:m});return}let p=null==(c=B.current)||c;B.current=p,q(p),w({enabled:!0,...u?{reminderId:u}:{},...d?{time:d}:{},leadMinutes:m}),u&&T(u),d&&D(d),E(m)},[j,null==M?void 0:M.reminderId,null==M?void 0:M.time,null==M?void 0:M.leadMinutes,$,Y,K,I,w,T,D,E,H]),Z=n.useCallback(()=>{F&&q(e=>{let t=!e;return B.current=t,t})},[F]),X=n.useCallback(e=>{j&&(w({reminderId:e||void 0}),e&&T(e))},[w,T,j]),J=n.useCallback(e=>{j&&(w({time:e||void 0}),e&&D(e))},[w,D,j]),Q=n.useCallback(e=>{if(!j)return;let t=Number.parseInt(e,10),a=Number.isFinite(t)&&f.has(t)?t:0;w({leadMinutes:a}),E(a)},[w,E,j]),ee=0===I.length;return(0,r.jsxs)(l.b,{className:"col-span-full card-pad space-y-[var(--space-4)]",children:[(0,r.jsxs)("header",{className:"flex flex-col gap-[var(--space-1)]",children:[(0,r.jsx)("h3",{className:"text-title-sm font-semibold",children:"Task reminders"}),(0,r.jsx)("p",{className:"text-ui text-muted-foreground",children:V})]}),j?ee?(0,r.jsx)("p",{className:"text-ui text-muted-foreground",children:"Add reminders in Goals → Reminders to make them available here."}):(0,r.jsxs)("div",{className:"grid gap-[var(--space-4)] md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-[var(--space-2)]",children:[(0,r.jsx)("span",{className:"text-ui font-medium",children:"Reminder state"}),(0,r.jsx)(c.Toggle,{leftLabel:"Off",rightLabel:"On",value:F?"Right":"Left",onChange:G,disabled:!j,className:"w-full"}),(0,r.jsx)("p",{className:"text-caption text-muted-foreground",children:"Enable reminders to adjust templates, send time, and lead time."})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-[var(--space-2)]",children:[(0,r.jsxs)("button",{type:"button",id:R,className:"inline-flex w-full items-center justify-between rounded-[var(--control-radius)] border border-border bg-card px-[var(--space-3)] py-[var(--space-2)] text-left text-ui font-medium transition hover:bg-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-60","aria-controls":L,"aria-expanded":F&&H,"aria-disabled":!F,onClick:Z,disabled:!F,children:[(0,r.jsx)("span",{children:"Reminder options"}),(0,r.jsx)("span",{className:"text-caption text-muted-foreground",children:H?"Hide":"Show"})]}),(0,r.jsxs)("div",{id:L,role:"region","aria-labelledby":R,hidden:!F||!H,className:"grid gap-[var(--space-3)] md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-[var(--space-2)]",children:[(0,r.jsx)(s.Label,{htmlFor:"reminder-select-".concat(j.id),children:"Reminder"}),(0,r.jsx)(u.Cq,{id:"reminder-select-".concat(j.id),items:I,value:$,onChange:X,placeholder:"Choose reminder",ariaLabel:"Select reminder template",disabled:!F,size:"md"})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-[var(--space-2)]",children:[(0,r.jsx)(s.Label,{htmlFor:"reminder-time-".concat(j.id),children:"Time"}),(0,r.jsx)(i.Input,{id:"reminder-time-".concat(j.id),type:"time",step:60,value:Y,onChange:e=>J(e.target.value),disabled:!F})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-[var(--space-2)]",children:[(0,r.jsx)(s.Label,{htmlFor:"reminder-lead-".concat(j.id),children:"Lead time"}),(0,r.jsx)(o.Select,{variant:"native",id:"reminder-lead-".concat(j.id),items:p,value:String(K),onChange:Q,disabled:!F})]})]})]})]}):(0,r.jsx)("p",{className:"text-ui text-muted-foreground",children:"Select a task to attach a reminder."})]})}},57649:(e,t,a)=>{"use strict";a.d(t,{useFocusDate:()=>s,useWeek:()=>i});var r=a(12115),n=a(84804),l=a(38283);function s(){let{iso:e,setIso:t,today:a,hydrated:r}=(0,l.usePlanner)();return{iso:e,setIso:t,today:a,hydrated:r}}function i(e){let{week:t,iso:a,today:s}=(0,l.usePlanner)();return r.useMemo(()=>{let r=null!=e?e:a;if(r===a)return t;let{start:l,end:i}=(0,n.bM)(r),o=[];for(let e=0;e<7;e+=1)o.push((0,n.$$)((0,n.fi)(l,e)));return{start:l,end:i,days:o,isToday:e=>e===s}},[e,a,s,t])}},57833:(e,t,a)=>{"use strict";a.d(t,{WeekNotes:()=>o});var r=a(95155);a(48768);var n=a(12115),l=a(3278),s=a(4069),i=a(48772);function o(e){let{iso:t}=e,{value:a,setValue:o,saving:c,isDirty:u,lastSavedRef:d,commit:m}=(0,i.useDayNotes)(t),p=n.useMemo(()=>"notes-".concat(t,"-header"),[t]);return(0,r.jsxs)(l.SectionCard,{className:"card-neo-soft",children:[(0,r.jsx)(l.SectionCard.Header,{id:p,title:"Day notes",titleAs:"h6",titleClassName:"text-title font-semibold tracking-tight"}),(0,r.jsxs)(l.SectionCard.Body,{children:[(0,r.jsx)(s.Textarea,{placeholder:"Jot down anything related to this day…",value:a,onChange:e=>o(e.target.value),name:"notes-".concat(t),"aria-labelledby":p,"aria-label":"Day notes",resize:"resize-y",textareaClassName:"min-h-[calc(var(--space-8)*3_-_var(--space-3))] leading-relaxed",onBlur:m}),(0,r.jsx)("div",{className:"mt-[var(--space-2)] text-label text-muted-foreground","aria-live":"polite",children:c?"Saving…":u?"Unsaved changes":d.current?"All changes saved":"No notes yet"})]})]})}},58222:(e,t,a)=>{"use strict";a.d(t,{useTodayHeroTasks:()=>l});var r=a(12115),n=a(51266);function l(e){let{iso:t,scopedTasks:a,projectId:l,projectName:s,renameTask:i,deleteTask:o,toggleTask:c,setSelectedTaskId:u}=e,[d,m]=(0,r.useState)(!1),[p,f]=(0,r.useState)(null),[g,h]=(0,r.useState)(""),[v,b]=(0,r.useState)({text:"",toggleMarker:!1}),{createTask:x}=(0,n.usePlannerActions)(),y=(0,r.useRef)(null),k=(0,r.useRef)(new Map),j=(0,r.useMemo)(()=>"today-hero-task-list-".concat(l||"none"),[l]),w=(0,r.useMemo)(()=>"new-task-".concat(l||"none"),[l]),N=a.length,P=d&&N>12,C=(0,r.useMemo)(()=>P?a:a.slice(0,12),[a,P]),T=N>12,S=(0,r.useCallback)(e=>{var a;if(!l)return void e.preventDefault();e.preventDefault();let r=e.currentTarget.elements.namedItem(w),n=(null!=(a=null==r?void 0:r.value)?a:"").trim();if(!n){r&&(r.value="");return}x({iso:t,projectId:l,title:n,select:u})&&r&&(r.value="")},[x,t,l,u,w]),D=(0,r.useCallback)(e=>{u(e)},[u]),_=(0,r.useCallback)(e=>{c(e),u(e)},[u,c]),E=(0,r.useCallback)(e=>{o(e),u(""),p===e&&(f(null),h(""))},[o,p,u]),I=(0,r.useCallback)((e,t,a)=>{h(t),f(e),(null==a?void 0:a.select)&&u(e)},[u]),A=(0,r.useCallback)(e=>{h(e)},[]),M=(0,r.useCallback)((e,t)=>{i(e,g.trim()||t),f(null)},[g,i]),F=(0,r.useCallback)(()=>{f(null)},[]),R=(0,r.useCallback)(()=>{if(!T)return void m(!1);m(e=>!e)},[T]);return(0,r.useEffect)(()=>{m(!1)},[l]),(0,r.useEffect)(()=>{d&&N<=12&&m(!1)},[d,N]),(0,r.useEffect)(()=>{p&&!a.some(e=>e.id===p)&&(f(null),h(""))},[p,a]),(0,r.useEffect)(()=>{if(!l){y.current=null,k.current=new Map,b(e=>e.text?{text:"",toggleMarker:e.toggleMarker}:e);return}let e=new Map(a.map(e=>[e.id,{title:e.title,done:e.done}]));if(y.current!==l){y.current=l,k.current=e,b(e=>e.text?{text:"",toggleMarker:e.toggleMarker}:e);return}let t=k.current,r=null,n=s?' in project "'.concat(s,'"'):"";for(let[a,l]of e)if(!t.has(a)){r='Task "'.concat(l.title,'" added').concat(n,".");break}if(!r){for(let[a,l]of t)if(!e.has(a)){r='Task "'.concat(l.title,'" removed').concat(n,".");break}}if(!r)for(let[a,l]of e){let e=t.get(a);if(e){if(e.title!==l.title){r='Task "'.concat(e.title,'" renamed to "').concat(l.title,'"').concat(n,".");break}if(e.done!==l.done){r=l.done?'Task "'.concat(l.title,'" marked complete').concat(n,"."):'Task "'.concat(l.title,'" marked incomplete').concat(n,".");break}}}r&&b(e=>({text:"".concat(r).concat(e.toggleMarker?"":"​"),toggleMarker:!e.toggleMarker})),k.current=e},[l,s,a]),{tasksListId:j,taskInputName:w,visibleTasks:C,totalTaskCount:N,showAllTasks:P,shouldShowTaskToggle:T,editingTaskId:p,editingTaskText:g,taskAnnouncementText:v.text,handleTaskFormSubmit:S,handleTaskSelect:D,handleTaskToggle:_,handleTaskDelete:E,openTaskEditor:I,handleTaskRenameChange:A,commitTaskRename:M,cancelTaskRename:F,toggleShowAllTasks:R}}},58418:(e,t,a)=>{"use strict";function r(e){if("function"==typeof queueMicrotask)return void queueMicrotask(e);setTimeout(e,0)}a.d(t,{l:()=>r})},60269:(e,t,a)=>{"use strict";a.d(t,{TodayHeroTasks:()=>d});var r=a(95155),n=a(18514),l=a(71360),s=a(27566),i=a(11615),o=a(7040),c=a(52105),u=a(49412);function d(e){let{projectId:t,projectName:a,tasksListId:d,taskInputName:m,visibleTasks:p,totalTaskCount:f,showAllTasks:g,shouldShowTaskToggle:h,editingTaskId:v,editingTaskText:b,taskAnnouncementText:x,onTaskFormSubmit:y,onTaskSelect:k,onTaskToggle:j,onTaskDelete:w,onTaskEditOpen:N,onTaskRenameChange:P,onTaskRenameCommit:C,onTaskRenameCancel:T,onToggleShowAllTasks:S}=e;return t?(0,r.jsxs)("div",{className:"mt-[var(--space-4)] space-y-[var(--space-4)]",children:[(0,r.jsx)("form",{onSubmit:y,children:(0,r.jsx)(c.Input,{name:m,placeholder:'> task for "'.concat(a||"Project",'"'),"aria-label":"New task",className:"w-full"})}),(0,r.jsx)("div",{"aria-live":"polite",className:"sr-only",children:x}),0===f?(0,r.jsx)("div",{className:"tasks-placeholder",children:"No tasks yet."}):(0,r.jsxs)("div",{className:"space-y-[var(--space-2)]",children:[(0,r.jsx)("ul",{id:d,className:"space-y-[var(--space-2)]",role:"list","aria-label":"Tasks",children:p.map(e=>{let t=v===e.id;return(0,r.jsxs)("li",{className:"group relative",role:"listitem",children:[(0,r.jsx)("button",{type:"button","aria-label":"Select task ".concat(e.title),onClick:t=>{t.defaultPrevented||t.target instanceof Element&&t.target.closest("[data-task-option-guard='true']")||t.target===t.currentTarget&&k(e.id)},onKeyDown:t=>{t.defaultPrevented||t.currentTarget===t.target&&("Enter"===t.key||" "===t.key||"Spacebar"===t.key)&&(t.preventDefault(),k(e.id))},className:(0,s.cn)("task-tile absolute inset-0 w-full rounded-card r-card-lg border transition-colors","border-border bg-card/55 hover:bg-card/70 focus-visible:bg-card/70 active:bg-card/80","group-hover:bg-card/70 group-active:bg-card/80 group-focus-within:bg-card/70","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-0","group-focus-within:ring-2 group-focus-within:ring-ring group-focus-within:ring-offset-0"),children:(0,r.jsx)("span",{className:"sr-only",children:"Select task ".concat(e.title)})}),(0,r.jsxs)("div",{className:(0,s.cn)("pointer-events-none relative z-[1] flex w-full items-center justify-between","rounded-card r-card-lg px-[var(--space-3)] py-[var(--space-2)]"),children:[(0,r.jsxs)("div",{className:"pointer-events-none flex items-center gap-[var(--space-3)]",children:[(0,r.jsx)("div",{className:"pointer-events-auto","data-task-option-guard":"true",onPointerDown:e=>e.stopPropagation(),children:(0,r.jsx)(u.CheckCircle,{checked:e.done,onChange:()=>{j(e.id)},size:"sm"})}),t?(0,r.jsx)(c.Input,{name:"rename-task-".concat(e.id),autoFocus:!0,value:b,onChange:e=>P(e.target.value),onKeyDown:t=>{"Enter"===t.key&&C(e.id,e.title),"Escape"===t.key&&T()},onBlur:()=>{C(e.id,e.title)},onPointerDown:e=>e.stopPropagation(),className:"pointer-events-auto","aria-label":"Rename task ".concat(e.title),"data-task-option-guard":"true"}):(0,r.jsx)("button",{type:"button",className:(0,s.cn)("task-tile__text pointer-events-auto",e.done&&"line-through-soft"),onClick:t=>{t.stopPropagation(),N(e.id,e.title)},onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),t.stopPropagation(),N(e.id,e.title))},onPointerDown:e=>e.stopPropagation(),"aria-label":"Edit task ".concat(e.title),title:"Edit task",children:e.title})]}),(0,r.jsxs)("div",{className:(0,s.cn)("flex items-center gap-[var(--space-2)]",t?"opacity-0 pointer-events-none":"opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto group-focus-within:opacity-100 group-focus-within:pointer-events-auto"),children:[(0,r.jsx)(o.IconButton,{"aria-label":"Edit task ".concat(e.title),title:"Edit",onClick:t=>{t.stopPropagation(),N(e.id,e.title,{select:!0})},onPointerDown:e=>e.stopPropagation(),size:"sm",variant:"quiet",iconSize:"xs",children:(0,r.jsx)(n.A,{})}),(0,r.jsx)(o.IconButton,{"aria-label":"Remove task",title:"Remove",onClick:t=>{t.stopPropagation(),w(e.id)},onPointerDown:e=>e.stopPropagation(),size:"sm",variant:"quiet",iconSize:"xs",children:(0,r.jsx)(l.A,{})})]})]})]},e.id)})}),h&&(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(i.Button,{size:"sm",variant:"quiet",onClick:S,"aria-expanded":g,"aria-controls":d,children:g?"Show less":"Show more"})})]})]}):(0,r.jsx)("div",{className:"mt-[var(--space-4)] text-ui font-medium text-muted-foreground",children:"Select a project to add and view tasks."})}},60815:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(95155),n=a(12115),l=a(50306),s=a(79264);function i(e){let{pct:t,size:a}=e,i=n.useId(),o=n.useMemo(()=>"ring-noise-".concat(i),[i]),c="string"==typeof a?a:"m",u=n.useMemo(()=>(0,l.Ik)(c),[c]),d="number"==typeof a?a:u.diameter,m=u.stroke,p=Math.max(d/2-u.inset,0),f=2*Math.PI*p;return(0,r.jsxs)("svg",{className:"h-full w-full rotate-[-90deg]",viewBox:"0 0 ".concat(d," ").concat(d),"aria-hidden":"true",focusable:"false",children:[(0,r.jsx)("defs",{children:(0,r.jsx)(s.A,{id:o})}),(0,r.jsx)("circle",{cx:d/2,cy:d/2,r:p,stroke:"currentColor",strokeWidth:m,className:"text-foreground/20",fill:"none"}),(0,r.jsx)("circle",{cx:d/2,cy:d/2,r:p,stroke:"currentColor",strokeWidth:m,strokeLinecap:"round",strokeDasharray:f,strokeDashoffset:f-t/100*f,className:"text-accent shadow-ring motion-safe:animate-pulse [--ring:var(--accent)]",filter:"url(#".concat(o,")"),fill:"none"})]})}},62021:(e,t,a)=>{"use strict";a.d(t,{DayCardHeader:()=>i});var r=a(95155),n=a(12115),l=a(84804),s=a(50641);function i(e){let{iso:t,projectCount:a,doneCount:i,totalCount:o}=e,c=n.useMemo(()=>(0,l.XS)(t),[t]),u=n.useMemo(()=>"// ".concat(c),[c]),d=0===o?0:Math.round(i/o*100);return(0,r.jsxs)("div",{className:"col-span-1 lg:col-span-3 flex items-center gap-[var(--space-3)] min-w-0",children:[(0,r.jsx)("span",{className:"glitch glitch-label text-ui font-semibold tracking-wide shrink-0","data-text":u,children:u}),(0,r.jsx)("div",{className:"flex-1 min-w-0",children:(0,r.jsx)(s.GlitchProgress,{current:i,total:o,"aria-label":"Completed items for ".concat(c)})}),(0,r.jsxs)("div",{className:"shrink-0 flex items-baseline gap-[var(--space-3)] text-label text-muted-foreground",children:[(0,r.jsxs)("span",{className:"tabular-nums font-medium text-foreground",children:[d,"%"]}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"\xb7"}),(0,r.jsxs)("span",{className:"whitespace-nowrap",children:[(0,r.jsx)("span",{className:"tabular-nums",children:a})," projects"]}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"\xb7"}),(0,r.jsxs)("span",{className:"whitespace-nowrap",children:[(0,r.jsx)("span",{className:"tabular-nums",children:i})," /"," ",(0,r.jsx)("span",{className:"tabular-nums",children:o})," items"]})]})]})}},64637:(e,t,a)=>{"use strict";a.d(t,{f:()=>u});var r=a(95155),n=a(12115),l=a(74007),s=a(27566),i=a(47420),o=a.n(i);let c={duo:{label:"Angel and demon busts sharing a circular portrait frame",angel:{className:(0,s.cn)(o().poseDuoAngel,o().layerFront),description:"Luminous angel bust facing forward with wings framing the left edge of the frame."},demon:{className:(0,s.cn)(o().poseDuoDemon,o().layerRear),description:"Violet demon bust leaning inward with curved horns catching the rim lighting on the right."}},"angel-leading":{label:"Angel steps forward while the demon softens into the rim light",angel:{className:(0,s.cn)(o().poseAngelLeadingAngel,o().layerFront),description:"Angel bust leading the frame with wings swept wide and haloed highlights toward the viewer."},demon:{className:(0,s.cn)(o().poseAngelLeadingDemon,o().layerRear,o().layerDimmed),description:"Demon bust recessed behind the angel, horns still outlined by the accent glow."}},"demon-leading":{label:"Demon steps into focus while the angel supports from behind",angel:{className:(0,s.cn)(o().poseDemonLeadingAngel,o().layerRear,o().layerDimmed),description:"Angel bust easing back with wings diffused while keeping the left rim illuminated."},demon:{className:(0,s.cn)(o().poseDemonLeadingDemon,o().layerFront),description:"Demon bust leading the pose with forward-set horns and a saturated rim highlight."}},"back-to-back":{label:"Angel and demon posed back to back with crossed silhouettes",stageClassName:o().stageBackToBack,angel:{className:(0,s.cn)(o().poseBackToBackAngel,o().layerFront),description:"Angel bust glancing over the shoulder with wings fanning outward across the left rim."},demon:{className:(0,s.cn)(o().poseBackToBackDemon,o().layerFront),description:"Demon bust rotated outward with horns arcing above the right edge of the frame."}}};function u(e){let{pose:t="duo",transparentBackground:a=!1,className:i}=e,u=c[t],d=n.useId(),m=n.useId(),p=n.useId();return(0,r.jsxs)(l.X,{as:"figure",frame:!0,size:"lg",role:"img","aria-labelledby":"".concat(d," ").concat(m," ").concat(p),className:i,innerClassName:(0,s.cn)("flex h-full w-full items-center justify-center",a&&o().innerTransparent),before:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{id:d,className:"sr-only",children:u.label}),(0,r.jsx)("span",{id:m,className:"sr-only",children:u.angel.description}),(0,r.jsx)("span",{id:p,className:"sr-only",children:u.demon.description})]}),children:[(0,r.jsx)("span",{"aria-hidden":!0,className:o().rimLighting}),(0,r.jsxs)("div",{"aria-hidden":!0,className:(0,s.cn)(o().stage,u.stageClassName,a&&o().stageTransparent),children:[(0,r.jsxs)("div",{className:(0,s.cn)(o().character,o().angel,u.angel.className),children:[(0,r.jsx)("span",{"aria-hidden":!0,className:o().angelWings}),(0,r.jsx)("span",{"aria-hidden":!0,className:o().characterBody}),(0,r.jsx)("span",{"aria-hidden":!0,className:o().characterCollar}),(0,r.jsx)("span",{"aria-hidden":!0,className:o().characterHead})]}),(0,r.jsxs)("div",{className:(0,s.cn)(o().character,o().demon,u.demon.className),children:[(0,r.jsx)("span",{"aria-hidden":!0,className:o().demonHorns}),(0,r.jsx)("span",{"aria-hidden":!0,className:o().characterBody}),(0,r.jsx)("span",{"aria-hidden":!0,className:o().characterCollar}),(0,r.jsx)("span",{"aria-hidden":!0,className:o().characterHead})]})]})]})}},67284:(e,t,a)=>{"use strict";a.d(t,{ScrollTopFloatingButton:()=>o});var r=a(95155),n=a(12115),l=a(7040),s=a(20562),i=a(25505);function o(e){let{watchRef:t,forceVisible:a=!1}=e,[o,c]=n.useState(!1),u=(0,i.j)(),[d,m]=n.useState(()=>t.current),p=t.current,f="IntersectionObserver"in window;return(n.useEffect(()=>{p!==d&&m(null!=p?p:null)},[p,d]),n.useEffect(()=>{if(!f)return void c(!0);if(!d)return;let e=new IntersectionObserver(e=>{e.forEach(e=>c(!e.isIntersecting))});return e.observe(d),()=>{e.unobserve(d),e.disconnect()}},[f,d]),o||a)?(0,r.jsx)(l.IconButton,{"aria-label":"Scroll to top",onClick:()=>{window.scrollTo({top:0,behavior:u?"auto":"smooth"})},className:"fixed bottom-[var(--space-8)] right-[max(var(--space-2),calc((var(--viewport-width) - var(--shell-max, var(--shell-width))) / 2 + var(--space-2)))] z-50",children:(0,r.jsx)(s.A,{})}):null}},69235:(e,t,a)=>{"use strict";a.d(t,{TodayHeroProjects:()=>m});var r=a(95155),n=a(18514),l=a(71360),s=a(27566),i=a(53052),o=a(11615),c=a(7040),u=a(52105),d=a(49412);function m(e){let{projects:t,selectedProjectId:a,projectsListId:m,projectName:p,editingProjectId:f,editingProjectName:g,showAllProjects:h,visibleProjects:v,hiddenProjectsCount:b,shouldShowProjectToggle:x,onProjectNameChange:y,onProjectFormSubmit:k,onProjectSelect:j,onProjectToggle:w,onProjectDelete:N,onProjectEditOpen:P,onProjectRenameChange:C,onProjectRenameCommit:T,onProjectRenameCancel:S,onToggleShowAllProjects:D}=e,_="".concat(m,"-new-project"),E="".concat(m,"-new-project-help"),I=v.some(e=>e.id===a)?"".concat(m,"-option-").concat(a):void 0;return(0,r.jsxs)("div",{className:"mt-[var(--space-4)] space-y-[var(--space-4)]",children:[(0,r.jsxs)("form",{onSubmit:k,className:"grid gap-[var(--space-2)]",children:[(0,r.jsx)(i.Label,{htmlFor:_,className:"mb-0",children:"New project"}),(0,r.jsxs)("div",{className:"flex flex-col gap-[var(--space-2)] sm:flex-row sm:items-center sm:gap-[var(--space-3)]",children:[(0,r.jsx)(u.Input,{id:_,name:"new-project",placeholder:"> new project…",value:p,onChange:e=>y(e.target.value),className:"w-full sm:flex-1","aria-describedby":E}),(0,r.jsx)(o.Button,{type:"submit",size:"sm",variant:"default",className:"w-full sm:w-auto sm:shrink-0",disabled:0===p.trim().length,children:"Add"})]}),(0,r.jsx)("div",{id:E,className:"text-label font-medium text-foreground",children:"Press Enter or Add to glitch this project into today."})]}),t.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("ul",{id:m,className:"space-y-[var(--space-2)]",role:"listbox","aria-label":"Projects","aria-activedescendant":I,children:[v.map(e=>{let t=f===e.id,i=a===e.id,o="".concat(m,"-option-").concat(e.id);return(0,r.jsx)("li",{role:"presentation",children:(0,r.jsxs)("div",{className:(0,s.cn)("group flex select-none items-center justify-between rounded-card r-card-lg border px-[var(--space-3)] py-[var(--space-2)] text-ui font-medium transition","border-border bg-card/55 hover:bg-card/70 focus-visible:bg-card/70 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",i&&"ring-1 ring-ring"),tabIndex:0,role:"option",id:o,"aria-selected":i,"aria-disabled":t,onClick:a=>{!(a.target instanceof Element&&a.target.closest("[data-project-option-guard='true']"))&&(t||j(e.id))},onKeyDown:a=>{a.target===a.currentTarget&&!t&&["Enter"," ","Space","Spacebar"].includes(a.key)&&(a.preventDefault(),j(e.id))},title:t?"Editing…":i?"Selected":"Click to select",children:[t?(0,r.jsx)(u.Input,{name:"rename-project-".concat(e.id),autoFocus:!0,value:g,onChange:e=>C(e.target.value),onKeyDown:t=>{"Enter"===t.key&&T(e.id,e.name),"Escape"===t.key&&S()},onBlur:()=>{T(e.id,e.name)},"aria-label":"Rename project ".concat(e.name),"data-project-option-guard":"true"}):(0,r.jsxs)("div",{className:"flex min-w-0 items-center gap-[var(--space-3)]",children:[(0,r.jsx)("span",{className:"shrink-0","data-project-option-guard":"true",children:(0,r.jsx)(d.CheckCircle,{size:"sm",checked:e.done,onChange:()=>w(e.id),"aria-label":"Toggle completion for ".concat(e.name)})}),(0,r.jsx)("span",{className:(0,s.cn)("truncate",e.done&&"line-through-soft text-muted-foreground"),children:e.name})]}),(0,r.jsxs)("div",{className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)(c.IconButton,{"aria-label":"Edit project ".concat(e.name),title:"Edit",onClick:t=>{t.stopPropagation(),P(e.id,e.name)},size:"sm",variant:"quiet",iconSize:"xs",children:(0,r.jsx)(n.A,{})}),(0,r.jsx)(c.IconButton,{"aria-label":"Remove project ".concat(e.name),title:"Remove",onClick:t=>{t.stopPropagation(),N(e.id)},size:"sm",variant:"quiet",iconSize:"xs",children:(0,r.jsx)(l.A,{})})]})]})},e.id)}),b>0&&(0,r.jsxs)("li",{className:"pr-[var(--space-1)] text-right text-label font-medium tracking-[0.02em] opacity-70",children:["+ ",b," more…"]})]}),x&&(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(o.Button,{size:"sm",variant:"quiet",onClick:D,"aria-expanded":h,"aria-controls":m,children:h?"Show less":"Show more"})})]})]})}},71687:(e,t,a)=>{"use strict";a.d(t,{K:()=>l});var r=a(12115),n=a(34837);class l extends r.Component{static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){let{name:a}=this.props;(0,n.x)({boundary:a,error:e,info:{componentStack:t.componentStack}})}render(){let{children:e,renderFallback:t}=this.props,{error:a,resetKey:n}=this.state;return a?t?t({error:a,reset:this.handleReset}):null:r.createElement(r.Fragment,{key:n},e)}constructor(...e){super(...e),this.state={error:null,resetKey:0},this.handleReset=()=>{this.setState(e=>({error:null,resetKey:e.resetKey+1}))}}}},72490:(e,t,a)=>{"use strict";a.d(t,{TodayHeroHeader:()=>o});var r=a(95155),n=a(12115),l=a(16485),s=a(84804),i=a(7040);function o(e){let{viewIso:t,isToday:a,onChange:o}=e,c=(0,n.useMemo)(()=>(0,s.$$)(),[]),u=(0,n.useRef)(null),d=(0,n.useCallback)(()=>{var e;let t=u.current;if(null==t?void 0:t.showPicker)return void t.showPicker();null==(e=u.current)||e.focus()},[]),m=(0,n.useCallback)(e=>{o(e.target.value)},[o]),p=a?"Today":t,f=t||c;return(0,r.jsxs)("div",{className:"mb-[var(--space-4)] flex flex-col gap-[var(--space-2)] md:flex-row md:items-center md:justify-between",children:[(0,r.jsx)("div",{className:"flex items-center gap-[var(--space-3)]",children:(0,r.jsx)("h2",{className:"glitch text-title font-semibold tracking-[-0.01em]","data-text":p,children:p})}),(0,r.jsxs)("div",{className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)("input",{ref:u,type:"date",value:f,onChange:m,"aria-label":"Change focused date",className:"sr-only"}),(0,r.jsx)(i.IconButton,{"aria-label":"Open calendar",title:t,onClick:d,size:"md",variant:"quiet",iconSize:"md",children:(0,r.jsx)(l.A,{})})]})]})}},77372:(e,t,a)=>{"use strict";a.d(t,{WeekPicker:()=>k});var r=a(95155),n=a(12115),l=a(72839),s=a(11615),i=a(57649),o=a(34467),c=a(25505),u=a(98297),d=a(90368),m=a(27937),p=a(84804),f=a(27566),g=a(45882);let h=new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short"}),v=new Intl.DateTimeFormat(void 0,{weekday:"short",month:"short",day:"2-digit"}),b=new Intl.DateTimeFormat(void 0,{weekday:"long",month:"long",day:"numeric"}),x="[--chip-surface-rest:hsl(var(--card))]",y=n.forwardRef(function(e,t){let{iso:a,selected:l,today:s,done:i,total:o,onClick:c,onDoubleClick:u,onNavigate:d,onFocus:m,tabIndex:g}=e,h=n.useMemo(()=>(e=>{let t=(0,p.E4)(e);return t?v.format(t):e})(a),[a]),y=n.useMemo(()=>(e=>{let t=(0,p.E4)(e);return t?b.format(t):e})(a),[a]),k=n.useMemo(()=>{if(o<=0)return 0;let e=i/o;return!Number.isFinite(e)||e<=0?0:e>=1?1:e},[i,o]),{surface:j,text:w}=n.useMemo(()=>0===o?{surface:x,text:"text-muted-foreground"}:k>=2/3?{surface:"[--chip-surface-rest:hsl(var(--success) / 0.2)]",text:"text-foreground"}:k>=1/3?{surface:"[--chip-surface-rest:hsl(var(--accent-3) / 0.2)]",text:"text-foreground"}:{surface:"[--chip-surface-rest:hsl(var(--accent-3) / 0.3)]",text:"text-foreground"},[k,o]),N=n.useId(),P=n.useId(),C=l?"Press Enter again or double-click to jump.":"Press Enter to select.",T="".concat(P," ").concat(N);return(0,r.jsxs)("button",{type:"button",role:"option",ref:t,onClick:()=>c(a),onDoubleClick:()=>u(a),onKeyDown:e=>{if("Enter"===e.key&&l){e.preventDefault(),e.stopPropagation(),u(a);return}if("ArrowLeft"===e.key){e.preventDefault(),d("prev");return}if("ArrowRight"===e.key){e.preventDefault(),d("next");return}if("Home"===e.key){e.preventDefault(),d("first");return}"End"===e.key&&(e.preventDefault(),d("last"))},onFocus:m,tabIndex:g,"aria-selected":l,"aria-label":"Select ".concat(y),"aria-describedby":T,title:l?"Press Enter again or double-click to jump":"Click or press Enter to focus",className:(0,f.cn)("chip chip-token relative flex-none w-[--chip-width] rounded-card r-card-lg border text-left transition snap-start chip-surface chip-border chip-ring","focus-visible:outline-none focus-visible:ring focus-visible:ring-offset-0 focus-visible:[--tw-ring-width:var(--ring-size-2)] focus-visible:[--tw-ring-color:var(--ring-accent)]","data-[focus-visible]:outline-none data-[focus-visible]:ring data-[focus-visible]:ring-offset-0 data-[focus-visible]:[--tw-ring-width:var(--ring-size-2)] data-[focus-visible]:[--tw-ring-color:var(--ring-accent)]",j,s&&"chip--today",l?"chip--active border-dashed":void 0),"data-today":s||void 0,"data-active":l||void 0,children:[(0,r.jsxs)("div",{className:(0,f.cn)("chip__date",w,s&&j===x?"text-accent-3":void 0),"data-text":h,children:[(0,r.jsx)("span",{"aria-hidden":"true",children:h}),(0,r.jsx)("span",{className:"sr-only","data-chip-label":"full",children:y})]}),(0,r.jsxs)("div",{id:P,className:"chip__counts text-foreground",children:[(0,r.jsx)("span",{className:"tabular-nums",children:i}),(0,r.jsxs)("span",{className:"text-foreground/70",children:[" / ",o]})]}),(0,r.jsx)("span",{id:N,className:"sr-only","aria-live":"polite","aria-atomic":"true",children:C}),(0,r.jsx)("span",{"aria-hidden":!0,className:"chip__scan"}),(0,r.jsx)("span",{"aria-hidden":!0,className:"chip__edge"})]})});function k(){let{iso:e,setIso:t,today:a}=(0,i.useFocusDate)(),{start:f,end:v,days:x}=(0,i.useWeek)(e),k="".concat(h.format(f)," — ").concat(h.format(v)),{per:j,weekDone:w,weekTotal:N}=(0,o.useWeekData)(x),P=(0,c.j)(),C="".concat(b.format(f)," to ").concat(b.format(v)),T=n.useRef([]),S=n.useCallback(()=>{let t=x.indexOf(e);return -1!==t?t:x.length>0?0:-1},[x,e]),[D,_]=n.useState(()=>{let e=S();return -1===e?0:e});n.useEffect(()=>{let e=S();-1!==e&&_(t=>t===e?t:e)},[S]),n.useEffect(()=>{T.current.length=x.length},[x.length]);let E=n.useCallback(a=>{if(a<0||a>=x.length)return;let r=x[a];r&&(r!==e&&t(r),_(a),window.requestAnimationFrame(()=>{var e;null==(e=T.current[a])||e.focus({preventScroll:!0})}))},[x,e,t]),I=n.useCallback((e,t)=>{if(0===x.length)return;let a=e;switch(t){case"prev":a=Math.max(0,e-1);break;case"next":a=Math.min(x.length-1,e+1);break;case"first":a=0;break;case"last":a=x.length-1}a!==e&&E(a)},[x,E]),[A,M]=n.useState(!1);n.useEffect(()=>{let e=null,t=()=>{null===e&&(e=window.requestAnimationFrame(()=>{e=null;let t=window.scrollY<=4;M(e=>!t&&e)}))};return window.addEventListener("scroll",t,{passive:!0}),()=>{window.removeEventListener("scroll",t),null!==e&&window.cancelAnimationFrame(e)}},[]);let F=n.useCallback(a=>{a!==e&&t(a)},[e,t]),R=n.useCallback(e=>{if(t(e),"undefined"==typeof document)return;let a=document.getElementById("day-".concat(e));if(!(a instanceof HTMLElement))return;let r=P?"auto":"smooth";a.scrollIntoView({behavior:r,block:"start",inline:"nearest"}),a.focus({preventScroll:!0}),M(!0)},[P,t]),L=n.useCallback(()=>{var e;let t=P?"auto":"smooth";if(window.scrollTo({top:0,behavior:t}),"undefined"==typeof document)return;let a=null!=(e=document.getElementById("planner-header"))?e:document.getElementById("main-content");a instanceof HTMLElement&&window.requestAnimationFrame(()=>{a.focus({preventScroll:!0})})},[P]),B=n.useCallback(()=>{t((0,p.$$)((0,p.fi)(f,-7)))},[t,f]),O=n.useCallback(()=>{t((0,p.$$)((0,p.fi)(f,7)))},[t,f]),z=n.useCallback(()=>{t(a)},[t,a]),W=e===a,H=A?(0,r.jsxs)(s.Button,{variant:"default",size:"sm","aria-label":"Jump to top",onClick:L,title:"Jump to top",className:"px-[var(--space-4)]",children:[(0,r.jsx)(u.A,{}),(0,r.jsx)("span",{children:"Top"})]}):void 0;return(0,r.jsx)(l.lq,{heading:k,subtitle:C,actions:H,rail:!0,sticky:!0,dividerTint:"primary",children:(0,r.jsxs)(g.WeekPickerShell,{children:[(0,r.jsx)(g.WeekPickerShell.Controls,{slotId:"week-controls",children:(0,r.jsxs)("div",{role:"group","aria-label":"Week navigation",className:"flex flex-wrap items-center chip-gap-x-tight chip-gap-y-tight",children:[(0,r.jsxs)(s.Button,{variant:"quiet",size:"sm","aria-label":"Go to previous week",onClick:B,children:[(0,r.jsx)(d.A,{}),(0,r.jsx)("span",{children:"Prev"})]}),(0,r.jsx)(s.Button,{size:"sm","aria-label":"Jump to today",onClick:z,disabled:W,children:"Today"}),(0,r.jsxs)(s.Button,{variant:"quiet",size:"sm","aria-label":"Go to next week",onClick:O,children:[(0,r.jsx)("span",{children:"Next"}),(0,r.jsx)(m.A,{})]})]})}),(0,r.jsxs)(g.WeekPickerShell.Totals,{slotId:"week-range",children:[(0,r.jsxs)("span",{className:"sr-only","aria-live":"polite",children:["Week range ",C]}),(0,r.jsxs)("span",{className:"inline-flex items-baseline chip-gap-x-tight text-ui text-muted-foreground",children:[(0,r.jsx)("span",{children:"Total tasks:"}),(0,r.jsxs)("span",{className:"font-medium tabular-nums text-foreground",children:[w," / ",N]})]})]}),(0,r.jsx)(g.WeekPickerShell.Chips,{slotId:"week-days",children:(0,r.jsx)("div",{role:"listbox","aria-label":"Select a focus day between ".concat(C),className:"flex flex-nowrap chip-gap-x overflow-x-auto snap-x snap-mandatory lg:flex-wrap lg:chip-gap-y lg:overflow-visible lg:[scroll-snap-type:none]",children:x.map((t,n)=>{var l,s,i,o;return(0,r.jsx)(y,{iso:t,selected:t===e,today:t===a,done:null!=(i=null==(l=j[n])?void 0:l.done)?i:0,total:null!=(o=null==(s=j[n])?void 0:s.total)?o:0,onClick:F,onDoubleClick:R,onNavigate:e=>I(n,e),onFocus:()=>_(n),tabIndex:D===n?0:-1,ref:e=>{T.current[n]=e}},t)})})})]})})}},77656:(e,t,a)=>{"use strict";a.d(t,{PlannerListPanel:()=>s});var r=a(95155);a(12115);var n=a(27566);a(52451);let l={minHTasks:"planner-viewport--minHTasks",maxHTasks:"planner-viewport--maxHTasks",maxHProjects:"planner-viewport--maxHProjects"};function s(e){let{renderComposer:t,renderEmpty:a,renderList:s,isEmpty:i,className:o,viewportClassName:c,viewportInsetClassName:u="card-pad",viewportSize:d,viewportProps:m}=e,{className:p,...f}=null!=m?m:{},g=(Array.isArray(d)?d:d?[d]:[]).map(e=>l[e]),h=null==t?void 0:t(),v=i?a():s();return(0,r.jsxs)("div",{className:(0,n.cn)("flex min-w-0 flex-col gap-[var(--space-3)]",o),children:[h,(0,r.jsx)("div",{...f,className:(0,n.cn)("planner-viewport w-full overflow-y-auto",u,p,c,g),children:v})]})}},79264:(e,t,a)=>{"use strict";a.d(t,{A:()=>x});var r=a(95155),n=a(12115);let l={gradientNoiseOpacity:"0.1"};var s=a(90511);let i=/-?\d*\.?\d+(?:e[+-]?\d+)?/gi,o=Number.parseFloat(l.gradientNoiseOpacity),c=Number.isFinite(o)?o:.1,u=Object.freeze([0,1]),d=(e,t,a)=>Math.min(Math.max(e,t),a),m=e=>{if(!e)return[];let t=e.match(i);return t?t.map(e=>Number.parseFloat(e)).filter(e=>Number.isFinite(e)):[]},p=e=>{let[t]=m(e);return"number"==typeof t?t:null},f=e=>{if("undefined"==typeof document)return"";let{documentElement:t}=document;return t?getComputedStyle(t).getPropertyValue(e).trim():""},g=()=>{let e=(e=>{let t=p(e);return null===t?c:d(t,0,1)})(f("--gradient-noise-opacity"));return{slope:e,table:(e=>{let t=m(e).map(e=>d(e,0,1));return 0===t.length?[...u]:t})(f("--gradient-noise-table")),stdDeviation:(e=>{let t=p(e);return null===t?0:d(t,0,64)})(f("--gradient-noise-std-deviation"))}};var h=a(28727);let v=l.gradientNoiseOpacity,b="var(--gradient-noise-opacity, ".concat(v||"0.1",")");function x(e){let{id:t}=e,a=(0,h.Fe)(),l=null==a?void 0:a[0].variant,i=null==a?void 0:a[0].bg,[o,c]=n.useState(g);n.useEffect(()=>{if(!s.hT)return;let e=g();c(t=>t.slope===e.slope&&t.stdDeviation===e.stdDeviation&&t.table.length===e.table.length&&t.table.every((t,a)=>t===e.table[a])?t:e)},[l,i]);let u=s.hT?o.slope:b;return(0,r.jsxs)("filter",{id:t,x:"-15%",y:"-15%",width:"130%",height:"130%",filterUnits:"objectBoundingBox",colorInterpolationFilters:"sRGB",children:[(0,r.jsx)("feTurbulence",{type:"fractalNoise",baseFrequency:"1.1",numOctaves:"3",seed:"4",result:"noise"}),(0,r.jsx)("feColorMatrix",{in:"noise",type:"saturate",values:"0",result:"monoNoise"}),(0,r.jsx)("feComponentTransfer",{in:"monoNoise",result:"noiseAlpha",children:(0,r.jsx)("feFuncA",{type:"linear",slope:u})}),(0,r.jsx)("feBlend",{in:"SourceGraphic",in2:"noiseAlpha",mode:"soft-light"})]})}},79897:(e,t,a)=>{"use strict";a.d(t,{ProjectList:()=>f});var r=a(95155),n=a(12115),l=a(53052),s=a(52105),i=a(7040),o=a(49412),c=a(18514),u=a(71360),d=a(27566),m=a(81323),p=a(77656);function f(e){let{projects:t,selectedProjectId:a,setSelectedProjectId:f,setSelectedTaskId:g,toggleProject:h,renameProject:v,deleteProject:b,createProject:x}=e,y=n.useId(),[k,j]=n.useState(null),[w,N]=n.useState(""),[P,C]=n.useState(""),T=n.useRef(new Map),S=t.length>3,D=t.length>1,_=0===t.length,E=n.useCallback((e,t)=>{t?T.current.set(e,t):T.current.delete(e)},[]),I=n.useCallback(e=>{let t=T.current.get(e);null==t||t.focus()},[]),A=n.useCallback(()=>{x(P)&&C("")},[x,P]),M=n.useCallback((e,t)=>{let a=w.trim()||t;v(e,a),N(a),j(null)},[w,v,j,N]);n.useEffect(()=>{if(!k)return;let e=t.find(e=>e.id===k);e&&(e.disabled||e.loading)&&(j(null),N(e.name))},[k,t,j,N]);let F=n.useCallback((e,a)=>r=>{if((" "===r.key||"Enter"===r.key)&&(r.preventDefault(),f(a.id)),D&&("ArrowDown"===r.key||"ArrowRight"===r.key)){r.preventDefault();let a=(e+1)%t.length,n=t[a].id;f(n),I(n)}if(D&&("ArrowUp"===r.key||"ArrowLeft"===r.key)){r.preventDefault();let a=(e-1+t.length)%t.length,n=t[a].id;f(n),I(n)}},[I,D,t,f]);return(0,r.jsx)(p.PlannerListPanel,{className:"gap-[var(--space-2)]",renderComposer:()=>(0,r.jsxs)("form",{className:"grid gap-[var(--space-2)]",onSubmit:e=>{e.preventDefault(),A()},children:[(0,r.jsx)(l.Label,{htmlFor:y,className:"mb-0",children:"New project"}),(0,r.jsx)(s.Input,{id:y,className:"w-full",placeholder:"> new project…",value:P,onChange:e=>C(e.target.value)})]}),isEmpty:_,renderEmpty:()=>(0,r.jsx)("ul",{className:"w-full space-y-[var(--space-2)]","aria-label":"Projects",children:(0,r.jsx)("li",{className:"w-full",children:(0,r.jsx)(m.k,{text:"No projects yet.",tone:"muted",variant:"rotate"})})}),renderList:()=>(0,r.jsx)("ul",{className:"w-full space-y-[var(--space-2)]",role:"radiogroup","aria-label":"Projects",children:t.map((e,t)=>{let n=e.id===a,l=k===e.id,m=!!e.disabled,p=!!e.loading,v=m||p,x=v||l,y=F(t,e),P=e.name.trim()||"Untitled project";return(0,r.jsx)("li",{className:"w-full",children:(0,r.jsxs)("div",{role:"radio",tabIndex:v?-1:n?0:-1,"aria-checked":n,"aria-label":P,"aria-disabled":v||void 0,"data-disabled":m?"true":void 0,"data-loading":p?"true":void 0,ref:t=>E(e.id,t),onKeyDown:x?void 0:y,onClick:t=>{!(t.target instanceof Element&&t.target.closest("[data-project-row-guard='true']"))&&(x||n||(g(""),f(e.id)))},className:(0,d.cn)("proj-card group relative [overflow:visible] w-full text-left rounded-card r-card-lg border pl-[var(--space-4)] pr-[var(--space-2)] py-[var(--space-2)]","bg-card/55 hover:bg-card/70 transition","grid min-h-[var(--space-7)] grid-cols-[auto,1fr,auto] items-center gap-[var(--space-4)]","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",n&&"proj-card--active ring-1 ring-ring"),children:[(0,r.jsx)("span",{className:"shrink-0","data-project-row-guard":"true",children:(0,r.jsx)(o.CheckCircle,{checked:!!e.done,onChange:()=>h(e.id),disabled:v,"aria-label":"Toggle ".concat(P," complete"),size:"sm"})}),l?(0,r.jsx)(s.Input,{name:"rename-project-".concat(e.id),autoFocus:!0,value:w,onChange:e=>N(e.target.value),onKeyDown:t=>{if("Enter"===t.key){if(v){j(null),N(e.name);return}M(e.id,e.name)}"Escape"===t.key&&(j(null),N(e.name))},onBlur:()=>{if(v){j(null),N(e.name);return}M(e.id,e.name)},disabled:v,"aria-label":"Rename project ".concat(e.name),"data-project-row-guard":"true"}):(0,r.jsx)("span",{className:"proj-card__title truncate font-medium",children:e.name||"Untitled"}),(0,r.jsxs)("div",{className:"ml-auto flex items-center gap-[var(--space-2)] opacity-0 transition-opacity group-hover:opacity-100 group-focus-within:opacity-100",children:[(0,r.jsx)(i.IconButton,{"aria-label":"Edit project",title:"Edit",onClick:t=>{t.preventDefault(),t.stopPropagation(),j(e.id),N(e.name)},size:"sm",iconSize:"xs",variant:"quiet",disabled:v,children:(0,r.jsx)(c.A,{})}),(0,r.jsx)(i.IconButton,{"aria-label":"Delete project",title:"Delete",onClick:t=>{t.preventDefault(),t.stopPropagation();let r=a===e.id;b(e.id),r&&f("")},size:"sm",iconSize:"xs",variant:"quiet",disabled:v,children:(0,r.jsx)(u.A,{})})]})]})},e.id)})}),viewportClassName:(0,d.cn)(S?void 0:"overflow-visible"),viewportSize:S?"maxHProjects":void 0})}},80311:(e,t,a)=>{"use strict";a.d(t,{V1:()=>s});let r=new Map,n=0;function l(e){if("string"!=typeof e)return;let t=e.trim();return t.length>0?t:void 0}function s(e,t){var a,s,i;let o=function(e){let t=l(e.id),a=l(e.label),r=l(e.kind);return{id:null!=t?t:"",...void 0!==a?{label:a}:{},...void 0!==r?{kind:r}:{}}}(e);if(0===o.id.length)return;let c=function(e){if("number"!=typeof e||!Number.isFinite(e)||e<0)return null;let t=Math.round(e);return t>0?t:0}(t);if(null===c)return;let u=r.get(o.id),d=null!=(a=null==u?void 0:u.tokens)?a:0;if(0===c){u&&(s=o.id,r.delete(s),(n-=d)<0&&(n=0));return}let m=(i=null==u?void 0:u.metadata,{id:o.id,...(null==i?void 0:i.label)?{label:i.label}:{},...(null==i?void 0:i.kind)?{kind:i.kind}:{},...void 0!==o.label?{label:o.label}:{},...void 0!==o.kind?{kind:o.kind}:{}});r.set(o.id,{metadata:m,tokens:c}),(n+=c-d)<0&&(n=0)}},80376:(e,t,a)=>{"use strict";a.r(t),a.d(t,{DayView:()=>p});var r=a(95155),n=a(12115),l=a(81464),s=a(43397),i=a(57833),o=a(15892),c=a(27257),u=a(57649),d=a(94911);let m="planner:scroll-position";function p(){let{iso:e,today:t}=(0,u.useFocusDate)(),{days:a}=(0,u.useWeek)(e);n.useEffect(()=>{let e=sessionStorage.getItem(m);if(e){let t=Number.parseInt(e,10);Number.isNaN(t)||window.scrollTo({top:t})}let t=0,a=()=>{t||(t=window.requestAnimationFrame(()=>{t=0,sessionStorage.setItem(m,Math.round(window.scrollY).toString())}))},r=()=>{sessionStorage.setItem(m,Math.round(window.scrollY).toString())};return window.addEventListener("scroll",a,{passive:!0}),window.addEventListener("pagehide",r),()=>{window.removeEventListener("scroll",a),window.removeEventListener("pagehide",r),t&&window.cancelAnimationFrame(t),sessionStorage.setItem(m,Math.round(window.scrollY).toString())}},[]);let p=n.useMemo(()=>a.map(e=>({iso:e,isToday:e===t})),[a,t]),f=n.useRef(null);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.PageShell,{as:"div",grid:!0,className:"py-[var(--space-6)]",contentClassName:"gap-y-[var(--space-6)]",children:[(0,r.jsxs)("div",{role:"group","aria-label":"Today and weekly panels",className:"".concat(l.layoutGridClassName," col-span-full lg:grid-cols-12"),children:[(0,r.jsx)("div",{className:"col-span-full lg:col-span-8",ref:f,children:(0,r.jsx)(d.PlannerIslandBoundary,{name:"planner:day-view:today-hero",title:"Today's planner unavailable",description:"We hit an error loading today's focus view. Retry to restore the hero section.",retryLabel:"Retry focus view",children:(0,r.jsx)(s.TodayHero,{iso:e})})}),(0,r.jsx)("aside",{"aria-label":"Day notes",className:"col-span-full space-y-[var(--space-6)] lg:col-span-4 lg:sticky lg:top-[var(--header-stack)]",children:(0,r.jsx)(d.PlannerIslandBoundary,{name:"planner:day-view:notes",title:"Notes unavailable",description:"We ran into an error loading your notes for this day. Retry to reopen the editor.",retryLabel:"Retry notes",children:(0,r.jsx)(i.WeekNotes,{iso:e})})})]}),(0,r.jsx)(d.PlannerIslandBoundary,{name:"planner:day-view:list",title:"Day list unavailable",description:"We couldn't render the week overview. Retry to reload the day rows.",retryLabel:"Retry day list",variant:"plain",fallbackClassName:"col-span-full flex flex-col gap-[var(--space-4)]",children:(0,r.jsx)("ul",{"aria-label":"Week days (Monday to Sunday)",className:"col-span-full flex flex-col gap-[var(--space-4)]",children:p.map(e=>(0,r.jsx)(o.$,{iso:e.iso,isToday:e.isToday},e.iso))})})]}),(0,r.jsx)(c.PlannerFab,{})]})}},81323:(e,t,a)=>{"use strict";a.d(t,{k:()=>o});var r=a(95155),n=a(12115),l=a(27566);let s={id:"static",text:"Nothing queued yet."},i=[{id:"echo",text:"Awaiting planner echo…"},{id:"buffer",text:"Buffering next step…"},{id:"ghost",text:"Ghost row awaiting sync…"}];function o(e){let{text:t,tone:a="default",variant:o="default"}=e,c=n.useId(),u=n.useMemo(()=>t?{id:"custom",text:t}:"rotate"===o?i[Array.from(c).reduce((e,t)=>e+t.charCodeAt(0),0)%i.length]:s,[c,t,o]),d=n.useMemo(()=>{if("rotate"===o)return i[(Array.from(c).reduce((e,t)=>e+7*t.charCodeAt(0),0)+1)%i.length]},[c,o]),m="rotate"===o,p=(0,l.cn)("font-medium","muted"===a?"text-muted-foreground":"text-foreground");return(0,r.jsxs)("div",{className:(0,l.cn)("tasks-placeholder text-label","muted"===a?"text-muted-foreground":void 0),"data-placeholder-tone":a,"data-placeholder-variant":o,"data-placeholder-layer":u.id,"data-placeholder-size":m?"compact":void 0,children:[(0,r.jsx)("span",{className:p,"data-placeholder-primary":!0,children:u.text}),m&&d?(0,r.jsx)("span",{"aria-hidden":"true",className:"text-ui text-muted-foreground","data-placeholder-descriptor":!0,"data-placeholder-layer-secondary":d.id,children:d.text}):null]})}},81393:(e,t,a)=>{"use strict";a.d(t,{useDayFocus:()=>s});var r=a(82192),n=a(58418),l=a(83996);let s=(0,r.createDayTextFieldHook)({selectValue:e=>e.focus,applyValue:l.Z6,scheduleSavingReset:n.l})},82192:(e,t,a)=>{"use strict";a.d(t,{createDayTextFieldHook:()=>s});var r=a(12115),n=a(58418),l=a(51266);function s(e){let{selectValue:t,applyValue:a,scheduleSavingReset:s=n.l}=e;return function(e){var n;let{getDay:i,upsertDay:o}=(0,l.usePlannerStore)(),c=null!=(n=t(i(e)))?n:"",u=r.useCallback(t=>{o(e,e=>a(e,t))},[e,o]),[d,m]=r.useState(()=>c),[p,f]=r.useState(!1),g=r.useRef(!0),h=r.useRef(s);h.current=s;let v=r.useRef(c.trim()),b=r.useMemo(()=>d.trim(),[d]),x=b!==v.current,y=r.useCallback(()=>{if(x){f(!0);try{u(b),v.current=b}finally{h.current(()=>{g.current&&f(!1)})}}},[u,x,b]);return r.useEffect(()=>{m(c),v.current=c.trim()},[e,c]),r.useEffect(()=>()=>{g.current=!1},[]),{value:d,setValue:m,saving:p,isDirty:x,lastSavedRef:v,commit:y}}}},82707:(e,t,a)=>{"use strict";a.d(t,{E:()=>n,H:()=>l});var r=a(26041);let n=3;function l(e){if(!Array.isArray(e))return null;let t=[];for(let a of e){let e=function(e){if(!("object"==typeof e&&null!==e&&!Array.isArray(e)))return null;let t=e.id,a=e.title,n=e.done,l=e.createdAt;if("string"!=typeof t||"string"!=typeof a||"boolean"!=typeof n||"number"!=typeof l||!Number.isFinite(l))return null;let s={id:t,title:a,done:n,createdAt:l},i=e.pillar;(0,r.J)(i)&&(s.pillar=i);let o=e.metric;"string"==typeof o&&(s.metric=o);let c=e.notes;return"string"==typeof c&&(s.notes=c),s}(a);e&&t.push(e)}return t}},82750:(e,t,a)=>{"use strict";a.d(t,{useTodayHeroProjects:()=>l});var r=a(12115),n=a(51266);function l(e){let{iso:t,projects:a,selectedProjectId:l,setSelectedProjectId:s,renameProject:i,deleteProject:o,toggleProject:c}=e,[u,d]=(0,r.useState)(""),[m,p]=(0,r.useState)(null),[f,g]=(0,r.useState)(""),[h,v]=(0,r.useState)(!1),{createProject:b}=(0,n.usePlannerActions)(),x=(0,r.useMemo)(()=>h?a:a.slice(0,12),[a,h]),y=(0,r.useMemo)(()=>Math.max(a.length-x.length,0),[a.length,x.length]),k=a.length>12,j=(0,r.useCallback)(e=>{d(e)},[]),w=(0,r.useCallback)(e=>{e.preventDefault(),b({iso:t,name:u,select:s})&&d("")},[b,t,u,s]),N=(0,r.useCallback)(e=>{s(e)},[s]),P=(0,r.useCallback)(e=>{c(e)},[c]),C=(0,r.useCallback)(e=>{o(e),l===e&&s(""),m===e&&(p(null),g(""))},[o,m,l,s]),T=(0,r.useCallback)((e,t)=>{p(e),g(t)},[]),S=(0,r.useCallback)(e=>{g(e)},[]),D=(0,r.useCallback)((e,t)=>{i(e,f.trim()||t),p(null)},[f,i]),_=(0,r.useCallback)(()=>{p(null)},[]),E=(0,r.useCallback)(()=>{v(e=>!e)},[]);return(0,r.useEffect)(()=>{h&&a.length<=12&&v(!1)},[a.length,h]),(0,r.useEffect)(()=>{l&&!h&&!(a.length<=12)&&(a.slice(0,12).some(e=>e.id===l)||v(!0))},[a,l,h]),(0,r.useEffect)(()=>{m&&(a.some(e=>e.id===m)||(p(null),g("")))},[m,a]),{projectsListId:"today-hero-project-list",projectName:u,editingProjectId:m,editingProjectName:f,showAllProjects:h,visibleProjects:x,hiddenProjectsCount:y,shouldShowProjectToggle:k,handleProjectNameChange:j,handleProjectFormSubmit:w,handleProjectSelect:N,handleProjectToggle:P,handleProjectDelete:C,openProjectEditor:T,handleProjectRenameChange:S,commitProjectRename:D,cancelProjectRename:_,toggleShowAllProjects:E}}},83996:(e,t,a)=>{"use strict";a.d(t,{Z6:()=>s,v_:()=>i,ym:()=>l});var r=a(67419),n=a(16386);function l(e,t){return{...e,notes:t}}function s(e,t){return{...e,focus:t}}function i(e,t){return{addProject:a=>{let l=a.trim();if(!l)return;let s=(0,r.uid)("proj");return t(e,e=>(0,n.By)(e,s,l)),s},renameProject:(a,r)=>t(e,e=>(0,n.oB)(e,a,r)),toggleProject:a=>t(e,e=>(0,n.wE)(e,a)),removeProject:a=>t(e,e=>(0,n.oE)(e,a)),addTask:(a,l)=>{let s=a.trim();if(!s)return;let i=(0,r.uid)("task");return t(e,e=>(0,n.XZ)(e,i,s,l)),i},renameTask:(a,r)=>t(e,e=>(0,n.AI)(e,a,r)),toggleTask:a=>t(e,e=>(0,n.ei)(e,a)),removeTask:a=>t(e,e=>(0,n.u0)(e,a)),addTaskImage:(a,r)=>t(e,e=>(0,n.mr)(e,a,r)),removeTaskImage:(a,r,l)=>t(e,e=>(0,n.Vo)(e,a,r,l)),updateTaskReminder:(a,r)=>t(e,e=>(0,n.DQ)(e,a,r)),setNotes:a=>t(e,e=>l(e,a)),setFocus:a=>t(e,e=>s(e,a))}}},84804:(e,t,a)=>{"use strict";a.d(t,{$$:()=>x,E4:()=>p,Ez:()=>f,Md:()=>b,XS:()=>g,XV:()=>n,_7:()=>k,bM:()=>j,fi:()=>y,tj:()=>w,ts:()=>h,wg:()=>v});var r=a(27566);let n=new Intl.DateTimeFormat(r.ne,{month:"numeric",day:"numeric",year:"numeric"}),l=new Intl.DateTimeFormat(r.ne,{day:"2-digit",month:"short"}),s=new Intl.DateTimeFormat(r.ne,{month:"long",day:"numeric"}),i=new Intl.DateTimeFormat(r.ne,{month:"long"}),o=new Intl.DateTimeFormat(r.ne,{day:"numeric"}),c=new Intl.DateTimeFormat(r.ne,{weekday:"long"}),u=new Intl.DateTimeFormat(r.ne,{month:"short"}),d=new Intl.DateTimeFormat(r.ne,{day:"2-digit"});function m(e){return/^\d{4}-\d{2}-\d{2}$/.test(e)}function p(e){if(!m(e))return null;let[t,a,r]=e.split("-").map(e=>parseInt(e,10)),n=new Date(t,a-1,r,0,0,0,0);return Number.isFinite(n.getTime())&&n.getFullYear()===t&&n.getMonth()===a-1&&n.getDate()===r?n:null}function f(e){let t=p(e);return t?l.format(t):e}function g(e){let t=p(e);if(!t)return e;let a=c.format(t).toLocaleUpperCase(r.ne),n=u.format(t).toLocaleUpperCase(r.ne),l=d.format(t);return"".concat(a,"_").concat(n," :: ").concat(l)}function h(e){if("number"==typeof e)return e;if(e instanceof Date)return+e;if("string"==typeof e){let t=Date.parse(e);return Number.isNaN(t)?0:t}return 0}function v(e){let{unit:t="seconds",padMinutes:a=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Number.isFinite(e)?e:0,n=Math.max(0,"milliseconds"===t?Math.floor(r/1e3):Math.floor(r)),l=Math.floor(n/60),s=a?String(l).padStart(2,"0"):String(l),i=String(n%60).padStart(2,"0");return"".concat(s,":").concat(i)}function b(e){let{unit:t="seconds"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.trim().match(/^(\d{1,3})\s*:\s*([0-5]?\d)$/);if(!a)return null;let r=60*Number(a[1])+Number(a[2]);return"milliseconds"===t?1e3*r:r}function x(e){let t=function(e){let t;if(e instanceof Date)t=new Date(e);else if("number"==typeof e)t=new Date(e);else if("string"==typeof e){let a=m(e)?p(e):null;t=null!=a?a:new Date(e)}else t=new Date;return Number.isFinite(t.getTime())||(t=new Date),t}(e),a=t.getFullYear(),r="".concat(t.getMonth()+1).padStart(2,"0"),n="".concat(t.getDate()).padStart(2,"0");return"".concat(a,"-").concat(r,"-").concat(n)}function y(e,t){let a=new Date(e);return a.setDate(a.getDate()+t),a}function k(e){let t=new Date(e),a=t.getDay();return t.setHours(0,0,0,0),y(t,-((a+6)%7))}function j(e){var t;let a=null!=(t=p(e))?t:new Date;return{start:k(a),end:function(e){let t=y(k(e),6);return t.setHours(23,59,59,999),t}(a)}}function w(e,t){if("function"==typeof s.formatRange)try{return"Week of ".concat(s.formatRange(e,t))}catch(e){}if(e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()){let a=i.format(e),r=o.format(e),n=o.format(t);return"Week of ".concat(a," ").concat(r," – ").concat(n)}let a=s.format(e),r=s.format(t);return"Week of ".concat(a," – ").concat(r)}},93706:(e,t,a)=>{"use strict";a.r(t),a.d(t,{DayCard:()=>p});var r=a(95155);a(48768);var n=a(12115),l=a(9535),s=a(12607),i=a(27566),o=a(62021),c=a(79897),u=a(94433),d=a(51266),m=a(55944);function p(e){let{iso:t,isToday:a}=e,{projects:p,renameProject:f,deleteProject:g,toggleProject:h,tasksById:v,tasksByProject:b,renameTask:x,toggleTask:y,deleteTask:k,addTaskImage:j,removeTaskImage:w,doneCount:N,totalCount:P,updateTaskReminder:C}=(0,s.useDay)(t),[T,S]=(0,l.useSelectedProject)(t),[D,_]=(0,l.useSelectedTask)(t),{createProject:E,createTask:I}=(0,d.usePlannerActions)(),A=D?v[D]:void 0,M=n.useCallback(e=>E({iso:t,name:e,select:S}),[E,t,S]),F=n.useCallback(e=>I({iso:t,projectId:T,title:e,select:_}),[I,t,T,_]),R=n.useCallback(e=>{D&&C(D,e)},[D,C]);return(0,r.jsxs)("section",{className:(0,i.cn)("daycard relative overflow-hidden card-neo-soft rounded-card r-card-lg border card-pad","grid gap-[var(--space-4)] lg:gap-[var(--space-6)]","grid-cols-1 lg:grid-cols-12",a&&"ring-1 ring-ring/65 title-glow","before:pointer-events-none before:absolute before:inset-x-[var(--space-4)] before:top-0 before:h-px before:bg-gradient-to-r","before:from-transparent before:via-ring/45 before:to-transparent","after:pointer-events-none after:absolute after:-inset-px after:[border-radius:var(--radius-card)] after:bg-[radial-gradient(60%_40%_at_100%_0%,hsl(var(--ring)/.12),transparent_60%)]"),"aria-label":"Planner for ".concat(t),children:[(0,r.jsx)("div",{className:"col-span-1 lg:col-span-12",children:(0,r.jsx)(o.DayCardHeader,{iso:t,projectCount:p.length,doneCount:N,totalCount:P})}),(0,r.jsx)("div",{className:"col-span-1 lg:col-span-3",children:(0,r.jsx)(c.ProjectList,{projects:p,selectedProjectId:T,setSelectedProjectId:S,setSelectedTaskId:_,toggleProject:h,renameProject:f,deleteProject:g,createProject:M})}),T&&(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)("div",{className:"hidden lg:block lg:col-span-1 w-px mx-auto bg-card-hairline-90 rounded-full self-stretch","aria-hidden":!0}),(0,r.jsx)("div",{className:"col-span-1 lg:col-span-8",children:(0,r.jsx)(u.TaskList,{tasksById:v,tasksByProject:b,selectedProjectId:T,selectedTaskId:D,createTask:F,renameTask:x,toggleTask:y,deleteTask:k,addTaskImage:j,removeTaskImage:(e,t,a)=>w(e,t,a),setSelectedTaskId:_})})]}),(0,r.jsx)("div",{className:"col-span-full",children:(0,r.jsx)(m.TaskReminderSettings,{task:A,onChange:R})})]})}},94433:(e,t,a)=>{"use strict";a.d(t,{TaskList:()=>u});var r=a(95155),n=a(12115),l=a(53052),s=a(52105),i=a(81323),o=a(77656),c=a(26439);function u(e){let{tasksById:t,tasksByProject:a,selectedProjectId:u,selectedTaskId:d,createTask:m,renameTask:p,toggleTask:f,deleteTask:g,addTaskImage:h,removeTaskImage:v,setSelectedTaskId:b}=e,[x,y]=n.useState(""),k=n.useId(),j=n.useMemo(()=>{var e;return u?(null!=(e=a[u])?e:[]).map(e=>t[e]).filter(e=>!!e):[]},[u,a,t]),w=!!u,N=!w||0===j.length,P=n.useCallback(e=>{e.preventDefault(),m(x)&&y("")},[m,x]);return(0,r.jsx)(o.PlannerListPanel,{renderComposer:w?()=>(0,r.jsxs)("form",{onSubmit:P,className:"grid gap-[var(--space-2)]",children:[(0,r.jsx)(l.Label,{htmlFor:k,className:"mb-0",children:"New task"}),(0,r.jsx)(s.Input,{id:k,className:"w-full",placeholder:"> add task…",value:x,onChange:e=>y(e.target.value)})]}):void 0,isEmpty:N,renderEmpty:()=>(0,r.jsx)(i.k,{text:w?"No tasks yet":"Select a project to view tasks",tone:w?"default":"muted",variant:w?"rotate":"default"}),renderList:()=>(0,r.jsx)("ul",{className:"space-y-[var(--space-2)]","aria-label":"Tasks",children:j.map(e=>(0,r.jsx)(c.TaskRow,{task:e,toggleTask:()=>{f(e.id),b(e.id)},deleteTask:()=>{g(e.id),d===e.id&&b("")},renameTask:t=>p(e.id,t),selectTask:()=>b(e.id),addImage:t=>h(e.id,t),removeImage:(t,a)=>v(e.id,t,a)},e.id))}),viewportSize:["minHTasks","maxHTasks"]})}},94911:(e,t,a)=>{"use strict";a.d(t,{PlannerIslandBoundary:()=>u});var r=a(95155),n=a(12115),l=a(71687),s=a(91182),i=a(27566),o=a(96335);function c(e){let{name:t,title:a,description:l,retryLabel:c,variant:u,className:d,error:m,onRetry:p}=e;return(n.useEffect(()=>{var e,a;(0,o.g)({island:t,digest:null!=(e=m.digest)?e:null,message:null!=(a=m.message)?a:null})},[m.digest,m.message,t]),"plain"===u)?(0,r.jsxs)("div",{role:"alert","aria-live":"assertive",className:(0,i.cn)("rounded-card border border-border/40 bg-card/80 p-[var(--space-4)] shadow-xs","space-y-[var(--space-2)]",d),children:[(0,r.jsx)("p",{className:"text-label font-semibold text-foreground",children:a}),(0,r.jsx)("p",{className:"text-body text-muted-foreground",children:l}),(0,r.jsx)("div",{children:(0,r.jsx)(s.$n,{size:"sm",variant:"default",onClick:p,children:c})})]}):(0,r.jsx)(s.iv,{role:"alert","aria-live":"assertive",className:d,children:(0,r.jsxs)(s.iv.Body,{className:"space-y-[var(--space-2)]",children:[(0,r.jsx)("p",{className:"text-label font-semibold text-foreground",children:a}),(0,r.jsx)("p",{className:"text-body text-muted-foreground",children:l}),(0,r.jsx)("div",{children:(0,r.jsx)(s.$n,{size:"sm",variant:"default",onClick:p,children:c})})]})})}function u(e){let{name:t,title:a,description:n,retryLabel:s="Retry",variant:i="card",fallbackClassName:o,children:u}=e;return(0,r.jsx)(l.K,{name:t,renderFallback:e=>{let{error:l,reset:u}=e;return(0,r.jsx)(c,{name:t,title:a,description:n,retryLabel:s,variant:i,className:o,error:l,onRetry:u})},children:u})}},95288:(e,t,a)=>{"use strict";a.r(t),a.d(t,{MonthView:()=>m});var r=a(95155),n=a(12115),l=a(81464),s=a(27566),i=a(84804),o=a(57649),c=a(51266),u=a(25488);let d=new Intl.DateTimeFormat(s.ne,{weekday:"short"});function m(){let{iso:e}=(0,o.useFocusDate)(),{days:t}=(0,c.usePlannerStore)(),a=n.useMemo(()=>{var t;return null!=(t=(0,i.E4)(e))?t:new Date},[e]),m=a.getMonth(),p=n.useMemo(()=>{let e=new Date(a.getFullYear(),a.getMonth(),1),t=(0,i._7)(e),r=[],n=t;for(let e=0;e<6;e+=1){let e=[];for(let t=0;t<7;t+=1)e.push((0,i.$$)(n)),n=(0,i.fi)(n,1);r.push(e)}return r},[a]),f=n.useId(),g=n.useMemo(()=>{let e=(0,i._7)(new Date);return Array.from({length:7},(t,a)=>d.format((0,i.fi)(e,a)))},[]);return(0,r.jsxs)(l.PageShell,{as:"section",grid:!0,className:"py-[var(--space-6)]",contentClassName:"gap-y-[var(--space-6)]","aria-labelledby":f,children:[(0,r.jsxs)("header",{className:"col-span-full flex flex-col gap-[var(--space-3)]",children:[(0,r.jsx)("h2",{id:f,className:"text-title font-semibold tracking-tight",children:"Month planner"}),(0,r.jsx)("p",{className:"text-body text-muted-foreground max-w-prose",children:"Preview six weeks around the focused date. Counts pull directly from your planner data, so edits elsewhere remain visible when you switch back."})]}),(0,r.jsx)("div",{className:"col-span-full overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full border-separate border-spacing-[var(--space-1)] sm:border-spacing-[var(--space-2)] text-body",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:g.map(e=>(0,r.jsx)("th",{scope:"col",className:"px-[var(--space-2)] py-[var(--space-2)] text-left text-label font-semibold text-muted-foreground",children:e},e))})}),(0,r.jsx)("tbody",{children:p.map(e=>(0,r.jsx)("tr",{children:e.map(e=>{var a;let n=null!=(a=(0,i.E4)(e))?a:new Date(e),l=(0,u.pF)(t,e),o=n.getMonth()===m;return(0,r.jsx)("td",{className:"align-top px-[var(--space-2)] py-[var(--space-2)]",children:(0,r.jsxs)("div",{className:(0,s.cn)("rounded-card border border-border/40 bg-card/70 p-[var(--space-2)] shadow-xs","flex flex-col gap-[var(--space-2)]",o?"text-foreground":"text-muted-foreground/70"),children:[(0,r.jsxs)("div",{className:"flex items-baseline justify-between gap-[var(--space-2)]",children:[(0,r.jsx)("span",{className:"text-label font-semibold uppercase tracking-[0.08em]",children:n.getDate()}),(0,r.jsxs)("span",{className:"text-micro text-muted-foreground tabular-nums",children:[l.doneCount,"/",l.totalCount]})]}),l.projects.length?(0,r.jsxs)("p",{className:"text-micro text-muted-foreground/80",children:[l.projects.length," projects \xb7 ",l.tasks.length," tasks"]}):(0,r.jsx)("p",{className:"text-micro text-muted-foreground/60",children:"No plans yet"})]})},e)})},e.join("-")))})]})})]})}}}]);
//# sourceMappingURL=3792-7abb4859385392e1.js.map