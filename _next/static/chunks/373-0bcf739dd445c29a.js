(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[373],{8659:(e,t,a)=>{"use strict";a.d(t,{default:()=>k});var r=a(95155);a(48768);var n=a(12115),s=a(43397),l=a(57833),o=a(15892),i=a(67284),c=a(57649),u=a(38283),d=a(77372),p=a(24625),f=a(81464),m=a(11615),g=a(90368),v=a(27937),h=a(10383),b=a(84804);function j(){let{iso:e,today:t,setIso:a}=(0,c.useFocusDate)(),{start:u,end:j,days:k}=(0,c.useWeek)(e),x=n.useMemo(()=>(0,b.tj)(u,j),[u,j]),y=n.useMemo(()=>k.map(e=>({iso:e,isToday:e===t})),[k,t]),w=n.useCallback(()=>{a((0,b.$$)((0,b.fi)(u,-7)))},[a,u]),N=n.useCallback(()=>{a((0,b.$$)((0,b.fi)(u,7)))},[a,u]),P=n.useCallback(()=>{a(t)},[a,t]),C=n.useRef(null),T=(0,r.jsxs)("div",{className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsxs)(m.default,{variant:"ghost",size:"sm","aria-label":"Previous week",onClick:w,children:[(0,r.jsx)(g.A,{}),(0,r.jsx)("span",{children:"Prev"})]}),(0,r.jsx)(m.default,{size:"sm","aria-label":"Jump to today",onClick:P,children:"Today"}),(0,r.jsxs)(m.default,{variant:"ghost",size:"sm","aria-label":"Next week",onClick:N,children:[(0,r.jsx)("span",{children:"Next"}),(0,r.jsx)(v.A,{})]})]});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.default,{as:"header",className:"py-[var(--space-6)]",children:(0,r.jsx)(p.zY,{contentClassName:"space-y-[var(--space-2)]",header:{id:"planner-header",tabIndex:-1,eyebrow:"Planner",heading:"Planner for Today",subtitle:"Plan your week",icon:(0,r.jsx)(h.A,{className:"opacity-80"}),right:T,sticky:!1},hero:{frame:!1,sticky:!1,rail:!1,padding:"none",barClassName:"hidden",className:"planner-header__hero",heading:(0,r.jsx)("span",{className:"sr-only",children:"Week picker"}),children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.default,{}),(0,r.jsx)("div",{"aria-live":"polite",className:"sr-only",children:x})]})}})}),(0,r.jsxs)(f.default,{as:"main",className:"py-[var(--space-6)] space-y-[var(--space-6)]","aria-labelledby":"planner-header",children:[(0,r.jsxs)("section",{"aria-label":"Today and weekly panels",className:"grid grid-cols-1 gap-[var(--space-6)] lg:grid-cols-12",children:[(0,r.jsx)("div",{className:"lg:col-span-8",ref:C,children:(0,r.jsx)(s.default,{iso:e})}),(0,r.jsx)("aside",{"aria-label":"Week notes",className:"lg:col-span-4 space-y-[var(--space-6)] lg:sticky lg:top-[var(--header-stack)]",children:(0,r.jsx)(l.default,{iso:e})})]}),(0,r.jsx)("ul",{"aria-label":"Week days (Monday to Sunday)",className:"flex flex-col gap-[var(--space-4)]",children:y.map(e=>(0,r.jsx)(o.A,{iso:e.iso,isToday:e.isToday},e.iso))})]}),(0,r.jsx)(i.default,{watchRef:C})]})}function k(){return(0,r.jsx)(u.PlannerProvider,{children:(0,r.jsx)(j,{})})}},9535:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useSelectedProject:()=>c,useSelectedTask:()=>d,useSelectionState:()=>l});var r=a(12115),n=a(38283);let s={};function l(e,t){let{getCurrentId:a,produceSelection:s}=t,{selected:l,setSelected:o}=(0,n.useSelection)();return[a(l[e]),r.useCallback(t=>{o(a=>{let r=a[e],n=s(t,r);return r&&r.projectId===n.projectId&&r.taskId===n.taskId?a:{...a,[e]:n}})},[e,s,o])]}let o=e=>{var t;return null!=(t=null==e?void 0:e.projectId)?t:""},i=e=>e?{projectId:e}:{};function c(e){var t;let{days:a}=(0,n.useDays)(),s=l(e,{getCurrentId:o,produceSelection:i}),[c,u]=s,d=null==(t=a[e])?void 0:t.projects;return r.useEffect(()=>{c&&((null==d?void 0:d.some(e=>e.id===c))||u(""))},[d,c,u]),s}let u=e=>{var t;return null!=(t=null==e?void 0:e.taskId)?t:""};function d(e){var t;let{days:a,tasksById:o}=(0,n.useDays)(),i=null!=(t=o[e])?t:s,c=a[e];return l(e,{getCurrentId:u,produceSelection:r.useCallback(e=>{var t,a,r;if(!e)return{};let n=null!=(r=null!=(a=i[e])?a:null==c||null==(t=c.tasksById)?void 0:t[e])?r:null==c?void 0:c.tasks.find(t=>t.id===e);return{taskId:e,projectId:null==n?void 0:n.projectId}},[i,c])})}},11468:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var r=a(95155);a(48768);var n=a(12115),s=a(3278),l=a(52105),o=a(11615),i=a(81393);function c(e){let{iso:t}=e,{value:a,setValue:c,saving:u,isDirty:d,lastSavedRef:p,commit:f}=(0,i.useDayFocus)(t),m=n.useMemo(()=>"focus-".concat(t,"-header"),[t]);return(0,r.jsxs)(s.default,{className:"card-neo-soft",children:[(0,r.jsx)(s.default.Header,{id:m,title:"Daily Focus"}),(0,r.jsxs)(s.default.Body,{children:[(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),f()},className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)(l.default,{placeholder:"What’s the one thing today?",value:a,onChange:e=>c(e.target.value),onBlur:f,name:"focus-".concat(t),autoComplete:"off",className:"flex-1","aria-labelledby":m}),(0,r.jsx)(o.default,{type:"submit",variant:"primary",size:"sm",disabled:!d||u,"aria-disabled":!d||u,children:u?"Saving…":"Save"})]}),(0,r.jsx)("div",{className:"mt-[var(--space-2)] text-label text-muted-foreground","aria-live":"polite",children:u?"Saving changes…":d?"Unsaved changes":p.current?"All changes saved":"No focus set yet"})]})]})}},12607:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useDay:()=>o});var r=a(12115),n=a(25488),s=a(83996),l=a(51266);function o(e){let{days:t,upsertDay:a}=(0,l.usePlannerStore)(),o=r.useMemo(()=>(0,n.pF)(t,e),[t,e]),i=o.tasks,c=o.tasksById,u=o.tasksByProject,d=r.useMemo(()=>(0,s.v_)(e,a),[e,a]),p=o.doneCount,f=o.totalCount;return{projects:o.projects,tasks:i,tasksById:c,tasksByProject:u,addProject:d.addProject,renameProject:d.renameProject,deleteProject:d.removeProject,toggleProject:d.toggleProject,addTask:d.addTask,renameTask:d.renameTask,deleteTask:d.removeTask,toggleTask:d.toggleTask,addTaskImage:d.addTaskImage,removeTaskImage:d.removeTaskImage,doneCount:p,totalCount:f}}},15892:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var r=a(95155),n=a(12115),s=a(93706);let l=n.memo(function(e){let{iso:t,isToday:a}=e;return(0,r.jsx)("li",{id:"day-".concat(t),"aria-label":"Day ".concat(t).concat(a?" (Today)":""),className:"w-full scroll-m-[calc(var(--space-8)+var(--space-6))] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",tabIndex:-1,children:(0,r.jsx)(s.default,{iso:t,isToday:a})})},(e,t)=>e.iso===t.iso&&e.isToday===t.isToday)},16386:(e,t,a)=>{"use strict";a.d(t,{AI:()=>u,By:()=>s,Vo:()=>m,XZ:()=>c,ei:()=>d,mr:()=>f,oB:()=>l,oE:()=>i,u0:()=>p,wE:()=>o});var r=a(25488);function n(e){var t,a,n,s,l,o;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=null!=(t=i.projects)?t:e.projects,u=Object.prototype.hasOwnProperty.call(i,"tasks"),d=u&&null!=(a=i.tasks)?a:e.tasks,p=null!=(n=e.tasksById)?n:{},f=null!=(s=e.tasksByProject)?s:{};if(u){let e=(0,r.he)(d);p=e.tasksById,f=e.tasksByProject}else Object.prototype.hasOwnProperty.call(i,"tasksById")&&(p=null!=(l=i.tasksById)?l:{}),Object.prototype.hasOwnProperty.call(i,"tasksByProject")&&(f=null!=(o=i.tasksByProject)?o:{});let{doneCount:m,totalCount:g}=(0,r.IZ)(c,d);return{...e,...i,projects:c,tasks:d,tasksById:p,tasksByProject:f,doneCount:m,totalCount:g}}function s(e,t,a){let r=a.trim();if(!r)return e;let s=Date.now(),l=[...e.projects,{id:t,name:r,done:!1,createdAt:s}];return n(e,{projects:l})}function l(e,t,a){let r=a.trim();return r?n(e,{projects:e.projects.map(e=>e.id===t?{...e,name:r}:e)}):e}function o(e,t){var a,r;let s=null!=(r=null==(a=e.projects.find(e=>e.id===t))?void 0:a.done)&&r,l=e.projects.map(e=>e.id===t?{...e,done:!s}:e),o=e.tasks.map(e=>e.projectId===t?{...e,done:!s}:e);return n(e,{projects:l,tasks:o})}function i(e,t){return n(e,{projects:e.projects.filter(e=>e.id!==t),tasks:e.tasks.filter(e=>e.projectId!==t)})}function c(e,t,a,r){let s=a.trim();if(!s)return e;let l=Date.now(),o=[...e.tasks,{id:t,title:s,done:!1,projectId:r,createdAt:l,images:[]}];return n(e,{tasks:o})}function u(e,t,a){let r=a.trim();return r?n(e,{tasks:e.tasks.map(e=>e.id===t?{...e,title:r}:e)}):e}function d(e,t){return n(e,{tasks:e.tasks.map(e=>e.id===t?{...e,done:!e.done}:e)})}function p(e,t){return n(e,{tasks:e.tasks.filter(e=>e.id!==t)})}function f(e,t,a){let r=a.trim();return r?n(e,{tasks:e.tasks.map(e=>e.id===t?{...e,images:[...e.images,r]}:e)}):e}function m(e,t,a,r){return n(e,{tasks:e.tasks.map(e=>{if(e.id!==t)return e;let n=void 0!==r&&e.images[r]===a?r:e.images.indexOf(a);if(n<0)return e;let s=e.images.slice();return s.splice(n,1),{...e,images:s}})})}},25488:(e,t,a)=>{"use strict";a.d(t,{B_:()=>v,IZ:()=>f,b8:()=>d,dR:()=>p,he:()=>m,hs:()=>c,pF:()=>g,xJ:()=>u,yr:()=>i});var r=a(84804);function n(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function s(e){if(!Array.isArray(e))return[];let t=[];for(let a of e)"string"==typeof a&&t.push(a);return t}function l(e){if(!n(e))return null;let t=e.id,a=e.name,r=e.done,s=e.createdAt;if("string"!=typeof t||"string"!=typeof a||"boolean"!=typeof r||"number"!=typeof s||!Number.isFinite(s))return null;let l=e.disabled,o=e.loading;return{id:t,name:a,done:r,createdAt:s,..."boolean"==typeof l?{disabled:l}:{},..."boolean"==typeof o?{loading:o}:{}}}function o(e){if(!n(e))return null;let t=e.id,a=e.title,r=e.done,l=e.createdAt;if("string"!=typeof t||"string"!=typeof a||"boolean"!=typeof r||"number"!=typeof l||!Number.isFinite(l))return null;let o=e.projectId,i=s(e.images);return{id:t,title:a,done:r,createdAt:l,..."string"==typeof o?{projectId:o}:{},images:i}}function i(e){if(!n(e))return{};let t={};for(let[a,r]of Object.entries(e)){let e=function(e){if(!n(e))return null;let t=e.projects,a=e.tasks,r=Array.isArray(t)?t.map(l).filter(e=>null!==e):[],s=Array.isArray(a)?a.map(o).filter(e=>null!==e):[],{tasksById:i,tasksByProject:c}=m(s),{doneCount:u,totalCount:d}=f(r,s),p=e.focus,g=e.notes,v="string"==typeof p,h="string"==typeof g;if(!r.length&&!s.length&&!v&&!h)return null;let b={projects:r,tasks:s,tasksById:i,tasksByProject:c,doneCount:u,totalCount:d};return v&&(b.focus=p),h&&(b.notes=g),b}(r);e&&(t[a]=e)}return t}let c="";function u(e){return"string"!=typeof e?null:e===c||(0,r.E4)(e)?e:null}function d(e){let t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{maxAgeDays:n=365,now:s}=a,l=Math.floor(n);if(!Number.isFinite(l)||l<0)return e;if(void 0===s)t=new Date;else if("string"==typeof s){var o;t=null!=(o=(0,r.E4)(s))?o:new Date(s)}else t=new Date(s);if(Number.isNaN(t.getTime()))return e;let i=new Date(t.getTime());i.setDate(i.getDate()-l),i.setHours(0,0,0,0);let c=i.getTime(),u=new Date(t.getTime());u.setHours(23,59,59,999);let d=u.getTime(),p=Object.keys(e);if(!p.length)return e;let f=[],m=!1,g=1/0,v=-1/0;for(let e of p){let t=(0,r.E4)(e);if(!t){f.push({iso:e,time:null});continue}let a=t.getTime();f.push({iso:e,time:a}),m=!0,a<g&&(g=a),a>v&&(v=a)}if(m&&g>=c&&v<=d)return e;let h=e,b=!1;for(let{iso:t,time:a}of f)null===a||a>=c||(b||(b=!0,h={...e}),delete h[t]);return b?h:e}function p(){return(0,r.$$)(new Date)}function f(e,t){let a=0,r=0;for(let t of e)r+=1,t.done&&(a+=1);for(let e of t)r+=1,e.done&&(a+=1);return{doneCount:a,totalCount:r}}function m(e){let t={},a={};for(let n of e){var r;a[n.id]=n;let e=n.projectId;e&&(null!=(r=t[e])?r:t[e]=[]).push(n.id)}return{tasksById:a,tasksByProject:t}}function g(e,t){var a,r;let n=e[t];if(!n)return{projects:[],tasks:[],tasksById:{},tasksByProject:{},doneCount:0,totalCount:0};let l=n.tasks,o=!1;for(let e=0;e<l.length;e+=1){let t=l[e],a=t.images;if(Array.isArray(a)&&a.every(e=>"string"==typeof e))continue;let r=s(a);o||(o=!0,l=l.slice()),l[e]={...t,images:r}}let{tasksById:i,tasksByProject:c}=m(l),u=null!=(a=n.tasksByProject)?a:{},d=null!=(r=n.tasksById)?r:{},p=!Object.prototype.hasOwnProperty.call(n,"tasksByProject")||!function(e,t){let a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(let r of a){var n;let a=null!=(n=e[r])?n:[],s=t[r];if(!s||a.length!==s.length)return!1;for(let e=0;e<a.length;e+=1)if(a[e]!==s[e])return!1}return!0}(u,c),g=!Object.prototype.hasOwnProperty.call(n,"tasksById")||!function(e,t){let a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(let r of a)if(!Object.prototype.hasOwnProperty.call(t,r)||e[r]!==t[r])return!1;return!0}(d,i),{doneCount:v,totalCount:h}=f(n.projects,l),b=n.doneCount!==v||n.totalCount!==h;return o||p||g||b?{...n,...o?{tasks:l}:{},...p?{tasksByProject:c}:{},...g?{tasksById:i}:{},doneCount:v,totalCount:h}:n}function v(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))return;let a=g(e,t);return a===e[t]?void 0:a}},26439:(e,t,a)=>{"use strict";a.d(t,{default:()=>v});var r=a(95155),n=a(12115),s=a(15239),l=a(52105),o=a(58363),i=a(11615),c=a(49412),u=a(18514),d=a(71360),p=a(64269),f=a(44392);let m=a(50306).q0[6],g="var(--space-".concat(7,")");function v(e){let{task:t,toggleTask:a,deleteTask:v,renameTask:h,selectTask:b,addImage:j,removeImage:k}=e,[x,y]=n.useState(!1),[w,N]=n.useState(t.title),[P,C]=n.useState(""),T=n.useRef(null),[S,D]=n.useState(!1),[I,E]=n.useState(null),A=P.trim(),F=A.length>0,M=t.title.trim()||"Untitled task",R=n.useCallback(e=>{if(!e)return"Enter an image URL.";try{let t=new URL(e);if("https:"!==t.protocol)return"Image URL must start with https."}catch(e){return"Enter a valid image URL."}return null},[]);(0,f.A)({ref:T,when:x}),n.useEffect(()=>{x||N(t.title)},[x,t.title]);let O=n.useCallback(()=>{D(!0)},[]),B=n.useCallback(e=>{let t=e.relatedTarget;t&&e.currentTarget.contains(t)||D(!1)},[]),z=n.useCallback(()=>{b()},[b]),_=n.useCallback(e=>{e.target===e.currentTarget&&("Enter"===e.key&&(e.preventDefault(),b()),(" "===e.key||"Spacebar"===e.key)&&e.preventDefault())},[b]),H=n.useCallback(e=>{e.target===e.currentTarget&&(" "===e.key||"Spacebar"===e.key)&&(e.preventDefault(),b())},[b]);function W(){let e=w.trim();if(y(!1),!e)return void N(t.title);e!==t.title&&h(e)}return(0,r.jsxs)("li",{className:"group",children:[(0,r.jsxs)("div",{className:"relative",onFocusCapture:O,onBlurCapture:B,children:[(0,r.jsx)("button",{type:"button","aria-label":"Select task ".concat(M),onClick:z,onKeyDown:_,onKeyUp:H,className:(0,p.cn)("absolute inset-0 w-full cursor-pointer rounded-card r-card-lg border transition-colors","bg-card/55 hover:bg-card/70 focus-visible:bg-card/70 active:bg-card/80","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-0","data-[focus-within=true]:ring-2 data-[focus-within=true]:ring-ring"),"data-focus-within":S?"true":void 0,children:(0,r.jsx)("span",{className:"sr-only",children:"Select task ".concat(M)})}),(0,r.jsxs)("div",{className:(0,p.cn)("pointer-events-none relative z-[1]","[overflow:visible] grid min-h-[var(--space-7)] min-w-0 grid-cols-[auto,1fr,auto] items-center gap-[var(--space-4)] pl-[var(--space-4)] pr-[var(--space-2)] py-[var(--space-2)]"),children:[(0,r.jsx)("div",{className:"pointer-events-auto shrink-0 ml-[var(--space-1)]",onClick:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),children:(0,r.jsx)(c.default,{checked:t.done,onChange:()=>{x||a()},"aria-label":"Toggle ".concat(M," done"),size:"sm"})}),(0,r.jsx)("div",{className:"pointer-events-auto flex-1 min-w-0 px-[var(--space-1)]",children:x?(0,r.jsx)(l.default,{name:"dc-rename-task-".concat(t.id),ref:T,value:w,onChange:e=>N(e.target.value),onBlur:W,onKeyDown:e=>{"Enter"===e.key&&W(),"Escape"===e.key&&(y(!1),N(t.title))},"aria-label":"Rename task ".concat(M)}):(0,r.jsx)("button",{type:"button",className:"task-tile__text block w-full text-left focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring rounded-card r-card-lg",onClick:e=>{e.stopPropagation(),a()},onDoubleClick:e=>{e.stopPropagation(),y(!0)},onPointerDown:e=>e.stopPropagation(),"aria-pressed":t.done,title:"Click to toggle; double-click to edit",children:(0,r.jsx)("span",{className:(0,p.cn)("truncate break-words",t.done&&"line-through-soft"),children:t.title})})}),(0,r.jsxs)("div",{className:(0,p.cn)("pointer-events-auto flex shrink-0 items-center gap-[var(--space-2)]",x?"opacity-0 pointer-events-none":"opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto group-focus-within:opacity-100 group-focus-within:pointer-events-auto"),children:[(0,r.jsx)(o.default,{"aria-label":"Edit task",title:"Edit",onClick:e=>{e.stopPropagation(),y(!0)},onPointerDown:e=>e.stopPropagation(),size:"sm",iconSize:"xs",variant:"ghost",children:(0,r.jsx)(u.A,{})}),(0,r.jsx)(o.default,{"aria-label":"Delete task",title:"Delete",onClick:e=>{e.stopPropagation(),v()},onPointerDown:e=>e.stopPropagation(),size:"sm",iconSize:"xs",variant:"ghost",children:(0,r.jsx)(d.A,{})})]})]})]}),t.images.length>0&&(0,r.jsx)("ul",{className:"mt-[var(--space-2)] space-y-[var(--space-2)]",children:t.images.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)(s.default,{src:e,alt:"Task image for ".concat(M),width:m,height:m,className:"rounded-card r-card-md object-cover",style:{maxHeight:g,height:g,width:g}}),(0,r.jsx)(o.default,{"aria-label":"Remove image",title:"Remove image",onClick:()=>k(e,t),size:"sm",iconSize:"xs",variant:"ghost",children:(0,r.jsx)(d.A,{})})]},"".concat(e,"-").concat(t)))}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),function(){let e=R(A);if(e)return E(e);j(A),C(""),E(null)}()},className:"mt-[var(--space-2)] flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)("label",{htmlFor:"task-image-".concat(t.id),className:"sr-only",children:"Add image URL"}),(0,r.jsx)(l.default,{id:"task-image-".concat(t.id),type:"url",value:P,onChange:e=>{let t=e.target.value;if(C(t),I){let e=t.trim();if(!e)return void E(null);E(R(e))}},placeholder:"https://example.com/image.jpg",className:"flex-1","aria-invalid":I?"true":void 0,"aria-describedby":I?"task-image-".concat(t.id,"-error"):void 0}),(0,r.jsx)(i.default,{type:"submit",size:"sm",disabled:!F,className:"shrink-0",children:"Attach image"})]}),I&&(0,r.jsx)("p",{id:"task-image-".concat(t.id,"-error"),className:"mt-[var(--space-1)] text-ui text-danger",role:"alert","aria-live":"polite",children:I})]})}},34467:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useWeekData:()=>l});var r=a(12115),n=a(25488),s=a(51266);function l(e){let{days:t}=(0,s.usePlannerStore)();return r.useMemo(()=>{let a=0,r=0;return{per:e.map(e=>{let{doneCount:s,totalCount:l}=(0,n.pF)(t,e);return a+=s,r+=l,{iso:e,done:s,total:l}}),weekDone:a,weekTotal:r}},[e,t])}},36118:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var r=a(95155);a(48768);var n=a(3278),s=a(57649),l=a(34467),o=a(64269),i=a(84804);function c(e){let{iso:t,variant:a="card",className:c,showLabel:u=!0,bleed:d=!1}=e,{days:p,isToday:f}=(0,s.useWeek)(t),{per:m,weekDone:g,weekTotal:v}=(0,l.useWeekData)(p),h=7===p.length?"".concat((0,i.Ez)(p[0])," — ").concat((0,i.Ez)(p[6])):"",b="inline"===a?u?(0,r.jsxs)("div",{className:"mb-[var(--space-2)] flex items-center justify-between gap-[var(--space-2)] text-label font-medium tracking-[0.02em] text-muted-foreground",children:[(0,r.jsxs)("div",{className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)("span",{className:"uppercase tracking-[0.02em]",children:"Week"}),(0,r.jsx)("span",{"aria-hidden":!0,children:"•"}),(0,r.jsx)("span",{children:h})]}),(0,r.jsxs)("span",{className:"pill pill--medium font-semibold",children:[(0,r.jsx)("span",{className:"tabular-nums",children:g}),"/",(0,r.jsx)("span",{className:"tabular-nums",children:v})]})]}):null:(0,r.jsxs)("div",{className:"mb-[var(--space-3)] flex items-center gap-[var(--space-3)]",children:[(0,r.jsx)("div",{className:"text-ui font-medium text-muted-foreground",children:h}),(0,r.jsxs)("span",{className:"ml-auto badge badge--sm",role:"status","aria-live":"polite",title:"Completed / Total items this week",children:[(0,r.jsx)("span",{className:"badge__icon",children:"✅"}),(0,r.jsx)("span",{className:"tabular-nums",children:g}),"/",(0,r.jsx)("span",{className:"tabular-nums",children:v})]})]}),j=(0,r.jsx)("div",{className:"inline"===a?"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 xl:grid-cols-7 gap-[var(--space-2)]":"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 xl:grid-cols-7 gap-[var(--space-3)]",role:"list","aria-label":"Week days summary",children:m.map(e=>{let t=f(e.iso),n=0===e.total,s=(0,i.Ez)(e.iso),l="".concat(e.done," of ").concat(e.total," done");return(0,r.jsxs)("div",{role:"listitem",className:(0,o.cn)("ws-tile group","inline"===a?"p-[var(--space-2)] rounded-card r-card-lg":"p-[var(--space-3)] rounded-card r-card-lg",t&&"ws-tile--today",n&&"ws-tile--empty"),"data-today":t||void 0,"aria-label":"".concat(s,": ").concat(l),children:[(0,r.jsx)("div",{className:"ws-tile__date",children:s}),(0,r.jsxs)("div",{className:(0,o.cn)("ws-tile__counts","inline"===a?"text-body":"text-title"),children:[(0,r.jsx)("span",{className:"tabular-nums",children:e.done}),(0,r.jsx)("span",{className:"opacity-60",children:" / "}),(0,r.jsx)("span",{className:"tabular-nums",children:e.total})]}),t?(0,r.jsx)("span",{"aria-hidden":!0,className:"ws-rail"}):null]},e.iso)})}),k=(0,r.jsxs)("div",{className:(0,o.cn)(c,d&&"ws-bleed"),children:[b,j]});return"inline"===a?k:(0,r.jsxs)(n.default,{className:"card-neo",children:[(0,r.jsx)(n.default.Header,{title:"Week Summary"}),(0,r.jsx)(n.default.Body,{children:k})]})}},38283:(e,t,a)=>{"use strict";a.r(t),a.d(t,{PlannerProvider:()=>d,useDays:()=>p,useFocus:()=>f,useSelection:()=>m}),a(48768);var r=a(12115),n=a(67419),s=a(25488);function l(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function o(e){if(!e)return;if("string"==typeof e)return[e];let t=new Set;for(let a of e)"string"==typeof a&&t.add(a);return t.size?Array.from(t):void 0}let i=r.createContext(null),c=r.createContext(null),u=r.createContext(null);function d(e){let{children:t}=e,[a,d]=(0,n.usePersistentState)("planner:days",{},{decode:s.yr}),[p,f]=(0,n.usePersistentState)("planner:focus",s.hs,{decode:s.xJ}),[m,g]=(0,n.usePersistentState)("planner:selected",{}),[v,h]=r.useState(()=>(0,s.dR)()),[b,j]=r.useState(()=>{let e={};for(let[r,n]of Object.entries(a)){var t;e[r]=null!=(t=n.tasksById)?t:{}}return e}),k=r.useRef(b);r.useEffect(()=>{k.current=b},[b]),r.useEffect(()=>{p===s.hs&&f(e=>e===s.hs?(0,s.dR)():e)},[p,f]),r.useEffect(()=>{let e=!1,t=()=>{let r=new Date,n=new Date(r);return n.setDate(r.getDate()+1),n.setHours(0,0,0,0),setTimeout(()=>{(()=>{if(e)return;let t=(0,s.dR)();h(e=>(f(a=>a===s.hs||a===e?t:a),t))})(),a=t()},Math.max(0,n.getTime()-r.getTime()))},a=t();return()=>{e=!0,clearTimeout(a)}},[f,h]);let x=r.useMemo(()=>(function(e,t){let a=e,r=!1;for(let l of Object.keys(e)){var n,s;let o=e[l],i=t[l],c=null==o?void 0:o.projectId,u=null==o?void 0:o.taskId;if(!i||!c&&!u||c&&!i.projects.some(e=>e.id===c)){r||(r=!0,a={...a}),delete a[l];continue}!u||(null!=(s=null==(n=i.tasksById)?void 0:n[u])?s:i.tasks.find(e=>e.id===u))||(r||(r=!0,a={...a}),delete a[l])}return r?a:e})(m,a),[m,a]);r.useEffect(()=>{Object.is(x,m)||g(x)},[x,m,g]),r.useEffect(()=>{Object.is(a,a)||d(a)},[a,a,d]);let y=r.useCallback(e=>{var t,a;let r,n,i=k.current;d(t=>{r=void 0,n=void 0;let{days:a,changed:c}=function(e){if(Array.isArray(e)){let[t,a]=e;return{days:t,changed:o(a)}}return l(e)&&Object.prototype.hasOwnProperty.call(e,"days")&&l(e.days)?{days:e.days,changed:o(e.changed)}:{days:e,changed:void 0}}("function"==typeof e?e(t):e),u=(0,s.b8)(a),d=!Object.is(u,a),p=void 0===c?Object.keys(u):c.filter(e=>Object.prototype.hasOwnProperty.call(u,e));for(let e of p){if(t[e]===u[e])continue;let a=(0,s.B_)(u,e);a&&(d||(d=!0,u={...u}),u[e]=a)}if(!d&&Object.is(t,u))return t;let f=new Set(p);for(let e of Object.keys(u))Object.prototype.hasOwnProperty.call(i,e)||f.add(e);let m=[];for(let e of f){var g;let t=u[e];if(!t)continue;let a=null!=(g=t.tasksById)?g:{};i[e]!==a&&m.push([e,a])}let v=[];for(let e of Object.keys(i))Object.prototype.hasOwnProperty.call(u,e)||v.push(e);return r=m.length?m:void 0,n=v.length?v:void 0,u}),((null!=(t=null==r?void 0:r.length)?t:0)!==0||(null!=(a=null==n?void 0:n.length)?a:0)!==0)&&j(e=>{let t=e,a=!1;if(n)for(let e of n)Object.prototype.hasOwnProperty.call(t,e)&&(a||(a=!0,t={...t}),delete t[e]);if(r)for(let[e,n]of r)t[e]!==n&&(a||(a=!0,t={...t}),t[e]=n);return a?(k.current=t,t):e})},[d]),w=r.useMemo(()=>({days:a,setDays:y,tasksById:b}),[a,y,b]),N=r.useMemo(()=>({focus:p,setFocus:f,today:v}),[p,f,v]),P=r.useCallback(e=>{g(t=>{let a="function"==typeof e?e(t):e;return Object.is(t,a)?t:a})},[g]),C=r.useMemo(()=>({selected:x,setSelected:P}),[x,P]);return r.createElement(i.Provider,{value:w},r.createElement(c.Provider,{value:N},r.createElement(u.Provider,{value:C},t)))}function p(){let e=r.useContext(i);if(!e)throw Error("PlannerProvider missing. Wrap your planner page with <PlannerProvider>.");return e}function f(){let e=r.useContext(c);if(!e)throw Error("PlannerProvider missing. Wrap your planner page with <PlannerProvider>.");return e}function m(){let e=r.useContext(u);if(!e)throw Error("PlannerProvider missing. Wrap your planner page with <PlannerProvider>.");return e}},43397:(e,t,a)=>{"use strict";a.d(t,{default:()=>m});var r=a(95155),n=a(12115),s=a(50641),l=a(72490),o=a(69235),i=a(60269),c=a(12607),u=a(57649),d=a(9535),p=a(82750),f=a(58222);function m(e){let{iso:t}=e,{iso:a,setIso:m,today:g}=(0,u.useFocusDate)(),v=null!=t?t:a,h=v===g;(0,n.useEffect)(()=>{t&&t!==a&&m(t)},[t,a,m]);let{projects:b,tasks:j,renameTask:k,toggleTask:x,deleteTask:y,renameProject:w,deleteProject:N,toggleProject:P}=(0,c.useDay)(v),[C,T]=(0,d.useSelectedProject)(v),[,S]=(0,d.useSelectedTask)(v),D=(0,n.useMemo)(()=>{var e;let t=b.find(e=>e.id===C);return null!=(e=null==t?void 0:t.name)?e:""},[b,C]),I=(0,n.useMemo)(()=>C?j.filter(e=>e.projectId===C):[],[j,C]),{done:E,total:A}=(0,n.useMemo)(()=>I.reduce((e,t)=>(e.total+=1,t.done&&(e.done+=1),e),{done:0,total:0}),[I]),F=D?"Tasks completed for ".concat(D):"Tasks completed",M=(0,p.useTodayHeroProjects)({iso:v,projects:b,selectedProjectId:C,setSelectedProjectId:T,renameProject:w,deleteProject:N,toggleProject:P}),R=(0,f.useTodayHeroTasks)({iso:v,scopedTasks:I,projectId:C,projectName:D,renameTask:k,deleteTask:y,toggleTask:x,setSelectedTaskId:S});return(0,r.jsxs)("section",{className:"bg-hero-soft rounded-card r-card-lg card-pad-lg anim-in",children:[(0,r.jsx)(l.default,{viewIso:v,isToday:h,onChange:m}),(0,r.jsx)(s.default,{current:E,total:A,showPercentage:!0,className:"mb-[var(--space-4)] flex items-center gap-[var(--space-3)]",trackClassName:"w-full",percentageClassName:"glitch-percent w-[var(--space-7)] text-right text-ui font-medium","aria-label":F}),(0,r.jsx)(o.default,{projects:b,selectedProjectId:C,projectsListId:M.projectsListId,projectName:M.projectName,editingProjectId:M.editingProjectId,editingProjectName:M.editingProjectName,showAllProjects:M.showAllProjects,visibleProjects:M.visibleProjects,hiddenProjectsCount:M.hiddenProjectsCount,shouldShowProjectToggle:M.shouldShowProjectToggle,onProjectNameChange:M.handleProjectNameChange,onProjectFormSubmit:M.handleProjectFormSubmit,onProjectSelect:M.handleProjectSelect,onProjectToggle:M.handleProjectToggle,onProjectDelete:M.handleProjectDelete,onProjectEditOpen:M.openProjectEditor,onProjectRenameChange:M.handleProjectRenameChange,onProjectRenameCommit:M.commitProjectRename,onProjectRenameCancel:M.cancelProjectRename,onToggleShowAllProjects:M.toggleShowAllProjects}),(0,r.jsx)(i.default,{projectId:C,projectName:D,tasksListId:R.tasksListId,taskInputName:R.taskInputName,visibleTasks:R.visibleTasks,totalTaskCount:R.totalTaskCount,showAllTasks:R.showAllTasks,shouldShowTaskToggle:R.shouldShowTaskToggle,editingTaskId:R.editingTaskId,editingTaskText:R.editingTaskText,taskAnnouncementText:R.taskAnnouncementText,onTaskFormSubmit:R.handleTaskFormSubmit,onTaskSelect:R.handleTaskSelect,onTaskToggle:R.handleTaskToggle,onTaskDelete:R.handleTaskDelete,onTaskEditOpen:R.openTaskEditor,onTaskRenameChange:R.handleTaskRenameChange,onTaskRenameCommit:R.commitTaskRename,onTaskRenameCancel:R.cancelTaskRename,onToggleShowAllTasks:R.toggleShowAllTasks})]})}},44392:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(12115);function n(e){let{ref:t,when:a}=e,n=r.useRef(!1);r.useEffect(()=>{if(a&&!n.current){var e;null==(e=t.current)||e.focus()}n.current=a},[a,t])}},45882:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var r=a(95155),n=a(12115),s=a(64269);let l=e=>{let{children:t}=e;return(0,r.jsx)(r.Fragment,{children:t})};l.displayName="WeekPickerShellTotals";let o=e=>{let{children:t}=e;return(0,r.jsx)(r.Fragment,{children:t})};o.displayName="WeekPickerShellChips";let i=n.forwardRef(function(e,t){let{children:a,className:i,...c}=e,u=[],d=[],p=[];return n.Children.forEach(a,e=>{if(!n.isValidElement(e)){null!=e&&p.push(e);return}return e.type===l?void u.push(e):e.type===o?void d.push(e):void p.push(e)}),(0,r.jsxs)("div",{ref:t,className:(0,s.cn)("week-picker-shell grid flex-1 min-w-0 w-full gap-[var(--space-3)] rounded-card r-card-lg border border-border/45 bg-card/70 p-[var(--space-3)] shadow-neo-soft","md:gap-[var(--space-4)] md:p-[var(--space-4)]",i),...c,children:[u.length>0?(0,r.jsx)("div",{className:"week-picker-shell__totals flex flex-wrap items-center justify-end gap-[var(--space-3)]",children:u.map((e,t)=>{var a;return(0,r.jsx)(n.Fragment,{children:e.props.children},null!=(a=e.key)?a:t)})}):null,d.map((e,t)=>{var a;return(0,r.jsx)(n.Fragment,{children:e.props.children},null!=(a=e.key)?a:t)}),p]})});i.displayName="WeekPickerShell";let c=Object.assign(i,{Totals:l,Chips:o})},48768:()=>{},48772:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useDayNotes:()=>l});var r=a(82192),n=a(58418),s=a(83996);let l=(0,r.createDayTextFieldHook)({selectValue:e=>e.notes,applyValue:s.ym,scheduleSavingReset:n.l})},50306:(e,t,a)=>{"use strict";a.d(t,{I6:()=>r,q0:()=>n,vb:()=>l});let r=["bg-border","bg-input","bg-ring","bg-background","bg-foreground","bg-card","bg-surface","bg-surface-foreground","bg-surface-2","bg-surface-2-foreground","bg-panel","bg-card-hairline","bg-primary","bg-primary-foreground","bg-primary-soft","bg-accent","bg-accent-foreground","bg-accent-soft","bg-accent-3","bg-accent-2","bg-accent-2-foreground","bg-glow","bg-ring-muted","bg-danger","bg-danger-foreground","bg-warning","bg-warning-soft","bg-warning-soft-strong","bg-success","bg-success-soft","bg-success-glow","bg-aurora-g","bg-aurora-g-light","bg-aurora-p","bg-aurora-p-light","bg-muted","bg-muted-foreground","bg-lav-deep","bg-surface-vhs","bg-surface-streak","bg-card-foreground","bg-interaction-primary-hover","bg-interaction-primary-active","bg-interaction-focus-hover","bg-interaction-focus-active","bg-interaction-focus-surfaceHover","bg-interaction-focus-surfaceActive","bg-interaction-focus-tintHover","bg-interaction-focus-tintActive","bg-interaction-accent-hover","bg-interaction-accent-active","bg-interaction-accent-surfaceHover","bg-interaction-accent-surfaceActive","bg-interaction-accent-tintHover","bg-interaction-accent-tintActive","bg-interaction-info-hover","bg-interaction-info-active","bg-interaction-info-surfaceHover","bg-interaction-info-surfaceActive","bg-interaction-info-tintHover","bg-interaction-info-tintActive","bg-interaction-danger-hover","bg-interaction-danger-active","bg-interaction-danger-surfaceHover","bg-interaction-danger-surfaceActive","bg-interaction-danger-tintHover","bg-interaction-danger-tintActive","bg-interaction-foreground-tintHover","bg-interaction-foreground-tintActive"],n=[4,8,12,16,24,32,48,64],s=[["md",8],["lg",12],["xl",16],["2xl",24],["full",9999]];s.reduce((e,t)=>{let[a,r]=t;return e[a]=r,e},{});let l=s.map(e=>{let[t]=e;return"--radius-".concat(t)});s.reduce((e,t)=>{let[a,r]=t;return e["--radius-".concat(a)]="".concat(r,"px"),e},{})},51266:(e,t,a)=>{"use strict";a.r(t),a.d(t,{usePlannerActions:()=>p,usePlannerStore:()=>d});var r=a(12115),n=a(25488),s=a(38283),l=a(83996),o=a(67419);let i="planner:projects",c="planner:tasks",u=!1;function d(){let{days:e,setDays:t}=(0,s.useDays)(),{focus:a,setFocus:d,today:p}=(0,s.useFocus)(),f=a===n.hs?p:a,m=r.useCallback((e,a)=>{if(void 0===a)return void t(e);let r="string"==typeof a?[a]:Array.from(a);t(t=>[e(t),r])},[t]);r.useEffect(()=>{if(!u){if(!f)return;let e=(0,o.iG)(i),t=(0,o.iG)(c);if(!e&&!t){u=!0;return}m(a=>(function(e,t,a){var r,s;if(u)return e;let l=null!=(r=null==a?void 0:a.projects)?r:(0,o.iG)(i),d=null!=(s=null==a?void 0:a.tasks)?s:(0,o.iG)(c);if(!l&&!d)return u=!0,e;let p={...e},f=(0,n.pF)(p,t);l&&(f={...f,projects:l}),d&&(f={...f,tasks:d,...(0,n.he)(d)});let{doneCount:m,totalCount:g}=(0,n.IZ)(f.projects,f.tasks);return p[t]={...f,doneCount:m,totalCount:g},(0,o.Ab)(i),(0,o.Ab)(c),u=!0,p})(a,f,{projects:e,tasks:t}),f)}},[f,m]);let g=r.useCallback((e,t)=>{m(a=>{let r=t((0,n.pF)(a,e));return{...a,[e]:r}},e)},[m]),v=r.useCallback(t=>(0,n.pF)(e,t),[e]),h=r.useCallback((e,t)=>{m(a=>({...a,[e]:t}),e)},[m]),{setFocus:b,...j}=r.useMemo(()=>(0,l.v_)(f,g),[f,g]);return{days:e,focus:f,setFocus:d,day:v(f),getDay:v,setDay:h,upsertDay:g,setDayFocus:b,...j}}function p(){let{upsertDay:e}=d(),t=r.useCallback(t=>{let{iso:a,name:r,select:n}=t;if(!a)return;let s=r.trim();if(!s)return;let o=(0,l.v_)(a,e).addProject(s);return null==n||n(o),o},[e]),a=r.useCallback(t=>{let{iso:a,projectId:r,title:n,select:s}=t;if(!a||!r)return;let o=n.trim();if(!o)return;let i=(0,l.v_)(a,e).addTask(o,r);return null==s||s(i),i},[e]);return r.useMemo(()=>({createProject:t,createTask:a}),[t,a])}},57649:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useFocusDate:()=>o,useWeek:()=>i});var r=a(12115),n=a(84804),s=a(38283),l=a(25488);function o(){let{focus:e,setFocus:t,today:a}=(0,s.useFocus)();return{iso:e===l.hs?a:e,setIso:t,today:a}}function i(e){let{today:t}=(0,s.useFocus)();return r.useMemo(()=>{let{start:a,end:r}=(0,n.bM)(e),s=[];for(let e=0;e<7;e++)s.push((0,n.$$)((0,n.fi)(a,e)));return{start:a,end:r,days:s,isToday:e=>e===t}},[e,t])}},57833:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var r=a(95155);a(48768);var n=a(12115),s=a(3278),l=a(4069),o=a(48772);function i(e){let{iso:t}=e,{value:a,setValue:i,saving:c,isDirty:u,lastSavedRef:d,commit:p}=(0,o.useDayNotes)(t),f=n.useMemo(()=>"notes-".concat(t,"-header"),[t]);return(0,r.jsxs)(s.default,{className:"card-neo-soft",children:[(0,r.jsx)(s.default.Header,{id:f,title:"Notes"}),(0,r.jsxs)(s.default.Body,{children:[(0,r.jsx)(l.default,{placeholder:"Jot down anything related to this day…",value:a,onChange:e=>i(e.target.value),name:"notes-".concat(t),"aria-labelledby":f,"aria-label":"Notes",resize:"resize-y",textareaClassName:"min-h-[calc(var(--space-8)*3_-_var(--space-3))] leading-relaxed",onBlur:p}),(0,r.jsx)("div",{className:"mt-[var(--space-2)] text-label text-muted-foreground","aria-live":"polite",children:c?"Saving…":u?"Unsaved changes":d.current?"All changes saved":"No notes yet"})]})]})}},58222:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useTodayHeroTasks:()=>s});var r=a(12115),n=a(51266);function s(e){let{iso:t,scopedTasks:a,projectId:s,projectName:l,renameTask:o,deleteTask:i,toggleTask:c,setSelectedTaskId:u}=e,[d,p]=(0,r.useState)(!1),[f,m]=(0,r.useState)(null),[g,v]=(0,r.useState)(""),[h,b]=(0,r.useState)({text:"",toggleMarker:!1}),{createTask:j}=(0,n.usePlannerActions)(),k=(0,r.useRef)(null),x=(0,r.useRef)(new Map),y=(0,r.useMemo)(()=>"today-hero-task-list-".concat(s||"none"),[s]),w=(0,r.useMemo)(()=>"new-task-".concat(s||"none"),[s]),N=a.length,P=(0,r.useMemo)(()=>d?a:a.slice(0,12),[a,d]),C=N>12,T=(0,r.useCallback)(e=>{var a;if(!s)return void e.preventDefault();e.preventDefault();let r=e.currentTarget.elements.namedItem(w);j({iso:t,projectId:s,title:null!=(a=null==r?void 0:r.value)?a:"",select:u})&&r&&(r.value="")},[j,t,s,u,w]),S=(0,r.useCallback)(e=>{u(e)},[u]),D=(0,r.useCallback)(e=>{c(e),u(e)},[u,c]),I=(0,r.useCallback)(e=>{i(e),u(""),f===e&&(m(null),v(""))},[i,f,u]),E=(0,r.useCallback)((e,t,a)=>{v(t),m(e),(null==a?void 0:a.select)&&u(e)},[u]),A=(0,r.useCallback)(e=>{v(e)},[]),F=(0,r.useCallback)((e,t)=>{o(e,g.trim()||t),m(null)},[g,o]),M=(0,r.useCallback)(()=>{m(null)},[]),R=(0,r.useCallback)(()=>{p(e=>!e)},[]);return(0,r.useEffect)(()=>{p(!1)},[s]),(0,r.useEffect)(()=>{d&&N<=12&&p(!1)},[d,N]),(0,r.useEffect)(()=>{f&&!a.some(e=>e.id===f)&&(m(null),v(""))},[f,a]),(0,r.useEffect)(()=>{if(!s){k.current=null,x.current=new Map,b(e=>e.text?{text:"",toggleMarker:e.toggleMarker}:e);return}let e=new Map(a.map(e=>[e.id,{title:e.title,done:e.done}]));if(k.current!==s){k.current=s,x.current=e,b(e=>e.text?{text:"",toggleMarker:e.toggleMarker}:e);return}let t=x.current,r=null,n=l?' in project "'.concat(l,'"'):"";for(let[a,s]of e)if(!t.has(a)){r='Task "'.concat(s.title,'" added').concat(n,".");break}if(!r){for(let[a,s]of t)if(!e.has(a)){r='Task "'.concat(s.title,'" removed').concat(n,".");break}}if(!r)for(let[a,s]of e){let e=t.get(a);if(e){if(e.title!==s.title){r='Task "'.concat(e.title,'" renamed to "').concat(s.title,'"').concat(n,".");break}if(e.done!==s.done){r=s.done?'Task "'.concat(s.title,'" marked complete').concat(n,"."):'Task "'.concat(s.title,'" marked incomplete').concat(n,".");break}}}r&&b(e=>({text:"".concat(r).concat(e.toggleMarker?"":"​"),toggleMarker:!e.toggleMarker})),x.current=e},[s,l,a]),{tasksListId:y,taskInputName:w,visibleTasks:P,totalTaskCount:N,showAllTasks:d,shouldShowTaskToggle:C,editingTaskId:f,editingTaskText:g,taskAnnouncementText:h.text,handleTaskFormSubmit:T,handleTaskSelect:S,handleTaskToggle:D,handleTaskDelete:I,openTaskEditor:E,handleTaskRenameChange:A,commitTaskRename:F,cancelTaskRename:M,toggleShowAllTasks:R}}},58418:(e,t,a)=>{"use strict";function r(e){if("function"==typeof queueMicrotask)return void queueMicrotask(e);setTimeout(e,0)}a.d(t,{l:()=>r})},60269:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(95155),n=a(18514),s=a(71360),l=a(64269),o=a(11615),i=a(58363),c=a(52105),u=a(49412);function d(e){let{projectId:t,projectName:a,tasksListId:d,taskInputName:p,visibleTasks:f,totalTaskCount:m,showAllTasks:g,shouldShowTaskToggle:v,editingTaskId:h,editingTaskText:b,taskAnnouncementText:j,onTaskFormSubmit:k,onTaskSelect:x,onTaskToggle:y,onTaskDelete:w,onTaskEditOpen:N,onTaskRenameChange:P,onTaskRenameCommit:C,onTaskRenameCancel:T,onToggleShowAllTasks:S}=e;return t?(0,r.jsxs)("div",{className:"mt-[var(--space-4)] space-y-[var(--space-4)]",children:[(0,r.jsx)("form",{onSubmit:k,children:(0,r.jsx)(c.default,{name:p,placeholder:'> task for "'.concat(a||"Project",'"'),"aria-label":"New task",className:"w-full"})}),(0,r.jsx)("div",{"aria-live":"polite",className:"sr-only",children:j}),0===m?(0,r.jsx)("div",{className:"tasks-placeholder",children:"No tasks yet."}):(0,r.jsxs)("div",{className:"space-y-[var(--space-2)]",children:[(0,r.jsx)("ul",{id:d,className:"space-y-[var(--space-2)]",role:"list","aria-label":"Tasks",children:f.map(e=>{let t=h===e.id;return(0,r.jsxs)("li",{className:"group relative",role:"listitem",children:[(0,r.jsx)("button",{type:"button","aria-label":"Select task ".concat(e.title),onClick:t=>{t.defaultPrevented||t.target===t.currentTarget&&x(e.id)},onKeyDown:t=>{t.defaultPrevented||t.currentTarget===t.target&&("Enter"===t.key||" "===t.key||"Spacebar"===t.key)&&(t.preventDefault(),x(e.id))},className:(0,l.cn)("task-tile absolute inset-0 w-full rounded-card r-card-lg border transition-colors","border-border bg-card/55 hover:bg-card/70 focus-visible:bg-card/70 active:bg-card/80","group-hover:bg-card/70 group-active:bg-card/80 group-focus-within:bg-card/70","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-0","group-focus-within:ring-2 group-focus-within:ring-ring group-focus-within:ring-offset-0"),children:(0,r.jsx)("span",{className:"sr-only",children:"Select task ".concat(e.title)})}),(0,r.jsxs)("div",{className:(0,l.cn)("pointer-events-none relative z-[1] flex w-full items-center justify-between","rounded-card r-card-lg px-[var(--space-3)] py-[var(--space-2)]"),children:[(0,r.jsxs)("div",{className:"pointer-events-none flex items-center gap-[var(--space-3)]",children:[(0,r.jsx)("div",{className:"pointer-events-auto",onClick:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),children:(0,r.jsx)(u.default,{checked:e.done,onChange:()=>{y(e.id)},size:"sm"})}),t?(0,r.jsx)(c.default,{name:"rename-task-".concat(e.id),autoFocus:!0,value:b,onChange:e=>P(e.target.value),onKeyDown:t=>{"Enter"===t.key&&C(e.id,e.title),"Escape"===t.key&&T()},onBlur:()=>{C(e.id,e.title)},onClick:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),className:"pointer-events-auto","aria-label":"Rename task ".concat(e.title)}):(0,r.jsx)("button",{type:"button",className:(0,l.cn)("task-tile__text pointer-events-auto",e.done&&"line-through-soft"),onClick:t=>{t.stopPropagation(),N(e.id,e.title)},onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),t.stopPropagation(),N(e.id,e.title))},onPointerDown:e=>e.stopPropagation(),"aria-label":"Edit task ".concat(e.title),title:"Edit task",children:e.title})]}),(0,r.jsxs)("div",{className:(0,l.cn)("flex items-center gap-[var(--space-2)]",t?"opacity-0 pointer-events-none":"opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto group-focus-within:opacity-100 group-focus-within:pointer-events-auto"),children:[(0,r.jsx)(i.default,{"aria-label":"Edit task ".concat(e.title),title:"Edit",onClick:t=>{t.stopPropagation(),N(e.id,e.title,{select:!0})},onPointerDown:e=>e.stopPropagation(),size:"sm",variant:"ghost",iconSize:"xs",children:(0,r.jsx)(n.A,{})}),(0,r.jsx)(i.default,{"aria-label":"Remove task",title:"Remove",onClick:t=>{t.stopPropagation(),w(e.id)},onPointerDown:e=>e.stopPropagation(),size:"sm",variant:"ghost",iconSize:"xs",children:(0,r.jsx)(s.A,{})})]})]})]},e.id)})}),v&&(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(o.default,{size:"sm",variant:"ghost",onClick:S,"aria-expanded":g,"aria-controls":d,children:g?"Show less":"Show more"})})]})]}):(0,r.jsx)("div",{className:"mt-[var(--space-4)] text-ui font-medium text-muted-foreground",children:"Select a project to add and view tasks."})}},62021:(e,t,a)=>{"use strict";a.d(t,{default:()=>o});var r=a(95155),n=a(12115),s=a(84804),l=a(50641);function o(e){let{iso:t,projectCount:a,doneCount:o,totalCount:i}=e,c=n.useMemo(()=>(0,s.XS)(t),[t]),u=n.useMemo(()=>"// ".concat(c),[c]),d=0===i?0:Math.round(o/i*100);return(0,r.jsxs)("div",{className:"col-span-1 lg:col-span-3 flex items-center gap-[var(--space-3)] min-w-0",children:[(0,r.jsx)("span",{className:"glitch glitch-label text-ui font-semibold tracking-wide shrink-0","data-text":u,children:u}),(0,r.jsx)("div",{className:"flex-1 min-w-0",children:(0,r.jsx)(l.default,{current:o,total:i,"aria-label":"Completed items for ".concat(c)})}),(0,r.jsxs)("div",{className:"shrink-0 flex items-baseline gap-[var(--space-3)] text-label text-muted-foreground",children:[(0,r.jsxs)("span",{className:"tabular-nums font-medium text-foreground",children:[d,"%"]}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"\xb7"}),(0,r.jsxs)("span",{className:"whitespace-nowrap",children:[(0,r.jsx)("span",{className:"tabular-nums",children:a})," projects"]}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"\xb7"}),(0,r.jsxs)("span",{className:"whitespace-nowrap",children:[(0,r.jsx)("span",{className:"tabular-nums",children:o})," /"," ",(0,r.jsx)("span",{className:"tabular-nums",children:i})," items"]})]})]})}},67284:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var r=a(95155),n=a(12115),s=a(58363),l=a(20562),o=a(25505);function i(e){let{watchRef:t,forceVisible:a=!1}=e,[i,c]=n.useState(!1),u=(0,o.j)(),[d,p]=n.useState(()=>t.current),f="IntersectionObserver"in window;return(n.useEffect(()=>{if(t.current!==d){var e;p(null!=(e=t.current)?e:null)}},[t,d]),n.useEffect(()=>{if(!f)return void c(!0);if(!d)return;let e=new IntersectionObserver(e=>{e.forEach(e=>c(!e.isIntersecting))});return e.observe(d),()=>{e.unobserve(d),e.disconnect()}},[f,d]),i||a)?(0,r.jsx)(s.default,{"aria-label":"Scroll to top",onClick:()=>{window.scrollTo({top:0,behavior:u?"auto":"smooth"})},className:"fixed bottom-[var(--space-8)] right-[max(var(--space-2),calc((var(--viewport-width) - var(--shell-max, var(--shell-width))) / 2 + var(--space-2)))] z-50",children:(0,r.jsx)(l.A,{})}):null}},69235:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var r=a(95155),n=a(18514),s=a(71360),l=a(64269),o=a(53052),i=a(11615),c=a(58363),u=a(52105),d=a(49412);function p(e){let{projects:t,selectedProjectId:a,projectsListId:p,projectName:f,editingProjectId:m,editingProjectName:g,showAllProjects:v,visibleProjects:h,hiddenProjectsCount:b,shouldShowProjectToggle:j,onProjectNameChange:k,onProjectFormSubmit:x,onProjectSelect:y,onProjectToggle:w,onProjectDelete:N,onProjectEditOpen:P,onProjectRenameChange:C,onProjectRenameCommit:T,onProjectRenameCancel:S,onToggleShowAllProjects:D}=e,I="".concat(p,"-new-project"),E=h.some(e=>e.id===a)?"".concat(p,"-option-").concat(a):void 0;return(0,r.jsxs)("div",{className:"mt-[var(--space-4)] space-y-[var(--space-4)]",children:[(0,r.jsxs)("form",{onSubmit:x,className:"grid gap-[var(--space-2)]",children:[(0,r.jsx)(o.default,{htmlFor:I,className:"mb-0",children:"New project"}),(0,r.jsx)(u.default,{id:I,name:"new-project",placeholder:"> new project…",value:f,onChange:e=>k(e.target.value),className:"w-full"})]}),t.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("ul",{id:p,className:"space-y-[var(--space-2)]",role:"listbox","aria-label":"Projects","aria-activedescendant":E,children:[h.map(e=>{let t=m===e.id,o=a===e.id,i="".concat(p,"-option-").concat(e.id);return(0,r.jsx)("li",{role:"presentation",children:(0,r.jsxs)("div",{className:(0,l.cn)("group flex select-none items-center justify-between rounded-card r-card-lg border px-[var(--space-3)] py-[var(--space-2)] text-ui font-medium transition","border-border bg-card/55 hover:bg-card/70 focus-visible:bg-card/70 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",o&&"ring-1 ring-ring"),tabIndex:0,role:"option",id:i,"aria-selected":o,"aria-disabled":t,onClick:()=>{t||y(e.id)},onKeyDown:a=>{a.target===a.currentTarget&&!t&&["Enter"," ","Space","Spacebar"].includes(a.key)&&(a.preventDefault(),y(e.id))},title:t?"Editing…":o?"Selected":"Click to select",children:[t?(0,r.jsx)(u.default,{name:"rename-project-".concat(e.id),autoFocus:!0,value:g,onChange:e=>C(e.target.value),onKeyDown:t=>{"Enter"===t.key&&T(e.id,e.name),"Escape"===t.key&&S()},onBlur:()=>{T(e.id,e.name)},"aria-label":"Rename project ".concat(e.name),onClick:e=>e.stopPropagation()}):(0,r.jsxs)("div",{className:"flex min-w-0 items-center gap-[var(--space-3)]",children:[(0,r.jsx)("span",{className:"shrink-0",onMouseDown:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),children:(0,r.jsx)(d.default,{size:"sm",checked:e.done,onChange:()=>w(e.id),"aria-label":"Toggle completion for ".concat(e.name)})}),(0,r.jsx)("span",{className:(0,l.cn)("truncate",e.done&&"line-through-soft text-muted-foreground"),children:e.name})]}),(0,r.jsxs)("div",{className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)(c.default,{"aria-label":"Edit project ".concat(e.name),title:"Edit",onClick:t=>{t.stopPropagation(),P(e.id,e.name)},size:"sm",variant:"ghost",iconSize:"xs",children:(0,r.jsx)(n.A,{})}),(0,r.jsx)(c.default,{"aria-label":"Remove project ".concat(e.name),title:"Remove",onClick:t=>{t.stopPropagation(),N(e.id)},size:"sm",variant:"ghost",iconSize:"xs",children:(0,r.jsx)(s.A,{})})]})]})},e.id)}),b>0&&(0,r.jsxs)("li",{className:"pr-[var(--space-1)] text-right text-label font-medium tracking-[0.02em] opacity-70",children:["+ ",b," more…"]})]}),j&&(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(i.default,{size:"sm",variant:"ghost",onClick:D,"aria-expanded":v,"aria-controls":p,children:v?"Show less":"Show more"})})]})]})}},72490:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var r=a(95155),n=a(12115),s=a(16485),l=a(84804),o=a(58363);function i(e){let{viewIso:t,isToday:a,onChange:i}=e,c=(0,n.useMemo)(()=>(0,l.$$)(),[]),u=(0,n.useRef)(null),d=(0,n.useCallback)(()=>{var e;let t=u.current;if(null==t?void 0:t.showPicker)return void t.showPicker();null==(e=u.current)||e.focus()},[]),p=(0,n.useCallback)(e=>{i(e.target.value)},[i]),f=a?"Today":t,m=t||c;return(0,r.jsxs)("div",{className:"mb-[var(--space-4)] flex flex-col gap-[var(--space-2)] md:flex-row md:items-center md:justify-between",children:[(0,r.jsx)("div",{className:"flex items-center gap-[var(--space-3)]",children:(0,r.jsx)("h2",{className:"glitch text-title font-semibold tracking-[-0.01em]","data-text":f,children:f})}),(0,r.jsxs)("div",{className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)("input",{ref:u,type:"date",value:m,onChange:p,"aria-label":"Change focused date",className:"sr-only"}),(0,r.jsx)(o.default,{"aria-label":"Open calendar",title:t,onClick:d,size:"md",variant:"ghost",iconSize:"md",children:(0,r.jsx)(s.A,{})})]})]})}},77372:(e,t,a)=>{"use strict";a.d(t,{default:()=>b});var r=a(95155),n=a(12115),s=a(72839),l=a(11615),o=a(57649),i=a(34467),c=a(25505),u=a(98297),d=a(84804),p=a(64269),f=a(45882);let m=new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short"}),g=new Intl.DateTimeFormat(void 0,{weekday:"short",month:"short",day:"2-digit"}),v=new Intl.DateTimeFormat(void 0,{weekday:"long",month:"long",day:"numeric"}),h=n.forwardRef(function(e,t){let{iso:a,selected:s,today:l,done:o,total:i,onClick:c,onDoubleClick:u,onNavigate:f,onFocus:m,tabIndex:h}=e,b=n.useMemo(()=>(e=>{let t=(0,d.E4)(e);return t?g.format(t):e})(a),[a]),j=n.useMemo(()=>(e=>{let t=(0,d.E4)(e);return t?v.format(t):e})(a),[a]),k=n.useMemo(()=>{if(i<=0)return 0;let e=o/i;return!Number.isFinite(e)||e<=0?0:e>=1?1:e},[o,i]),{tint:x,text:y}=n.useMemo(()=>0===i?{tint:"bg-card",text:"text-muted-foreground"}:k>=2/3?{tint:"bg-success-soft",text:"text-foreground"}:k>=1/3?{tint:"bg-accent-3/20",text:"text-foreground"}:{tint:"bg-accent-3/30",text:"text-foreground"},[k,i]),w=n.useId(),N=n.useId(),P=s?"Press Enter again or double-click to jump.":"Press Enter to select.",C="".concat(N," ").concat(w);return(0,r.jsxs)("button",{type:"button",role:"option",ref:t,onClick:()=>c(a),onDoubleClick:()=>u(a),onKeyDown:e=>{if("Enter"===e.key&&s){e.preventDefault(),e.stopPropagation(),u(a);return}if("ArrowLeft"===e.key){e.preventDefault(),f("prev");return}if("ArrowRight"===e.key){e.preventDefault(),f("next");return}if("Home"===e.key){e.preventDefault(),f("first");return}"End"===e.key&&(e.preventDefault(),f("last"))},onFocus:m,tabIndex:h,"aria-selected":s,"aria-label":"Select ".concat(j),"aria-describedby":C,title:s?"Press Enter again or double-click to jump":"Click or press Enter to focus",className:(0,p.cn)("chip relative flex-none w-[--chip-width] rounded-card r-card-lg border text-left px-[var(--space-3)] py-[var(--space-2)] transition snap-start","border-card-hairline",x,"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring","active:border-primary/60 active:bg-card/85",l&&"chip--today",s?"border-dashed border-primary/75":"hover:border-primary/40"),"data-today":l||void 0,"data-active":s||void 0,children:[(0,r.jsxs)("div",{className:(0,p.cn)("chip__date",y,l&&"bg-card"===x?"text-accent-3":void 0),"data-text":b,children:[(0,r.jsx)("span",{"aria-hidden":"true",children:b}),(0,r.jsx)("span",{className:"sr-only","data-chip-label":"full",children:j})]}),(0,r.jsxs)("div",{id:N,className:"chip__counts text-foreground",children:[(0,r.jsx)("span",{className:"tabular-nums",children:o}),(0,r.jsxs)("span",{className:"text-foreground/70",children:[" / ",i]})]}),(0,r.jsx)("span",{id:w,className:"sr-only","aria-live":"polite","aria-atomic":"true",children:P}),(0,r.jsx)("span",{"aria-hidden":!0,className:"chip__scan"}),(0,r.jsx)("span",{"aria-hidden":!0,className:"chip__edge"})]})});function b(){let{iso:e,setIso:t,today:a}=(0,o.useFocusDate)(),{start:p,end:g,days:v}=(0,o.useWeek)(e),b="".concat(m.format(p)," — ").concat(m.format(g)),j="".concat(m.format(p)," → ").concat(m.format(g)),k=(0,d.$$)(p),x=(0,d.$$)(g),{per:y,weekDone:w,weekTotal:N}=(0,i.useWeekData)(v),P=(0,c.j)(),C=n.useRef([]),T=n.useCallback(()=>{let t=v.indexOf(e);return -1!==t?t:v.length>0?0:-1},[v,e]),[S,D]=n.useState(()=>{let e=T();return -1===e?0:e});n.useEffect(()=>{let e=T();-1!==e&&D(t=>t===e?t:e)},[T]),n.useEffect(()=>{C.current.length=v.length},[v.length]);let I=n.useCallback(a=>{if(a<0||a>=v.length)return;let r=v[a];r&&(r!==e&&t(r),D(a),window.requestAnimationFrame(()=>{var e;null==(e=C.current[a])||e.focus({preventScroll:!0})}))},[v,e,t]),E=n.useCallback((e,t)=>{if(0===v.length)return;let a=e;switch(t){case"prev":a=Math.max(0,e-1);break;case"next":a=Math.min(v.length-1,e+1);break;case"first":a=0;break;case"last":a=v.length-1}a!==e&&I(a)},[v,I]),[A,F]=n.useState(!1);n.useEffect(()=>{let e=null,t=()=>{null===e&&(e=window.requestAnimationFrame(()=>{e=null;let t=window.scrollY<=4;F(e=>!t&&e)}))};return window.addEventListener("scroll",t,{passive:!0}),()=>{window.removeEventListener("scroll",t),null!==e&&window.cancelAnimationFrame(e)}},[]);let M=e=>t(e),R=e=>{t(e);let a=document.getElementById("day-".concat(e));a&&(a.scrollIntoView({behavior:P?"auto":"smooth",block:"start",inline:"nearest"}),a.focus({preventScroll:!0}),F(!0))},O=A?(0,r.jsxs)(l.default,{variant:"primary",size:"sm","aria-label":"Jump to top",onClick:()=>{{var e;window.scrollTo({top:0,behavior:P?"auto":"smooth"});let t=null!=(e=document.getElementById("planner-header"))?e:document.getElementById("main-content");t instanceof HTMLElement&&window.requestAnimationFrame(()=>{t.focus({preventScroll:!0})})}},title:"Jump to top",className:"px-[var(--space-4)]",children:[(0,r.jsx)(u.A,{}),(0,r.jsx)("span",{children:"Top"})]}):void 0;return(0,r.jsx)(s.Ay,{heading:b,subtitle:"".concat(k," → ").concat(x),actions:O,rail:!0,sticky:!0,dividerTint:"primary",children:(0,r.jsxs)(f.default,{children:[(0,r.jsxs)(f.default.Totals,{children:[(0,r.jsxs)("span",{className:"sr-only","aria-live":"polite",children:["Week range ",j]}),(0,r.jsxs)("span",{className:"inline-flex items-baseline gap-[var(--space-1)] text-ui text-muted-foreground",children:[(0,r.jsx)("span",{children:"Total tasks:"}),(0,r.jsxs)("span",{className:"font-medium tabular-nums text-foreground",children:[w," / ",N]})]})]}),(0,r.jsx)(f.default.Chips,{children:(0,r.jsx)("div",{role:"listbox","aria-label":"Select a focus day between ".concat(j),className:"flex flex-nowrap gap-[var(--space-3)] overflow-x-auto snap-x snap-mandatory lg:flex-wrap lg:gap-y-[var(--space-3)] lg:overflow-visible lg:[scroll-snap-type:none]",children:v.map((t,n)=>{var s,l,o,i;return(0,r.jsx)(h,{iso:t,selected:t===e,today:t===a,done:null!=(o=null==(s=y[n])?void 0:s.done)?o:0,total:null!=(i=null==(l=y[n])?void 0:l.total)?i:0,onClick:M,onDoubleClick:R,onNavigate:e=>E(n,e),onFocus:()=>D(n),tabIndex:S===n?0:-1,ref:e=>{C.current[n]=e}},t)})})})]})})}},77656:(e,t,a)=>{"use strict";a.d(t,{default:()=>s});var r=a(95155);a(12115);var n=a(64269);function s(e){let{renderComposer:t,renderEmpty:a,renderList:s,isEmpty:l,className:o,viewportClassName:i,viewportStyle:c,viewportProps:u}=e,{className:d,style:p,...f}=null!=u?u:{},m=null==t?void 0:t(),g=l?a():s();return(0,r.jsxs)("div",{className:(0,n.cn)("flex min-w-0 flex-col gap-[var(--space-3)]",o),children:[m,(0,r.jsx)("div",{...f,className:(0,n.cn)("w-full overflow-y-auto px-[var(--space-2)] py-[var(--space-2)]",d,i),style:{...p,...c},children:g})]})}},79897:(e,t,a)=>{"use strict";a.d(t,{default:()=>m});var r=a(95155),n=a(12115),s=a(53052),l=a(52105),o=a(58363),i=a(49412),c=a(18514),u=a(71360),d=a(64269),p=a(81323),f=a(77656);function m(e){let{projects:t,selectedProjectId:a,setSelectedProjectId:m,setSelectedTaskId:g,toggleProject:v,renameProject:h,deleteProject:b,createProject:j}=e,k=n.useId(),[x,y]=n.useState(null),[w,N]=n.useState(""),[P,C]=n.useState(""),T=n.useRef(new Map),S=t.length>3,D=t.length>1,I=0===t.length,E=n.useCallback((e,t)=>{t?T.current.set(e,t):T.current.delete(e)},[]),A=n.useCallback(e=>{let t=T.current.get(e);null==t||t.focus()},[]),F=n.useCallback(()=>{j(P)&&C("")},[j,P]),M=n.useCallback((e,t)=>{let a=w.trim()||t;h(e,a),N(a),y(null)},[w,h,y,N]);n.useEffect(()=>{if(!x)return;let e=t.find(e=>e.id===x);e&&(e.disabled||e.loading)&&(y(null),N(e.name))},[x,t,y,N]);let R=n.useCallback((e,a)=>r=>{if((" "===r.key||"Enter"===r.key)&&(r.preventDefault(),m(a.id)),D&&("ArrowDown"===r.key||"ArrowRight"===r.key)){r.preventDefault();let a=(e+1)%t.length,n=t[a].id;m(n),A(n)}if(D&&("ArrowUp"===r.key||"ArrowLeft"===r.key)){r.preventDefault();let a=(e-1+t.length)%t.length,n=t[a].id;m(n),A(n)}},[A,D,t,m]);return(0,r.jsx)(f.default,{className:"gap-[var(--space-2)]",renderComposer:()=>(0,r.jsxs)("form",{className:"grid gap-[var(--space-2)]",onSubmit:e=>{e.preventDefault(),F()},children:[(0,r.jsx)(s.default,{htmlFor:k,className:"mb-0",children:"New project"}),(0,r.jsx)(l.default,{id:k,className:"w-full",placeholder:"> new project…",value:P,onChange:e=>C(e.target.value)})]}),isEmpty:I,renderEmpty:()=>(0,r.jsx)("ul",{className:"w-full space-y-[var(--space-2)] py-[var(--space-2)]","aria-label":"Projects",children:(0,r.jsx)("li",{className:"w-full",children:(0,r.jsx)(p.A,{text:"No projects yet."})})}),renderList:()=>(0,r.jsx)("ul",{className:"w-full space-y-[var(--space-2)] py-[var(--space-2)]",role:"radiogroup","aria-label":"Projects",children:t.map((e,t)=>{let n=e.id===a,s=x===e.id,p=!!e.disabled,f=!!e.loading,h=p||f,j=h||s,k=R(t,e),P=e.name.trim()||"Untitled project";return(0,r.jsx)("li",{className:"w-full",children:(0,r.jsxs)("div",{role:"radio",tabIndex:h?-1:n?0:-1,"aria-checked":n,"aria-label":P,"aria-disabled":h||void 0,"data-disabled":p?"true":void 0,"data-loading":f?"true":void 0,ref:t=>E(e.id,t),onKeyDown:j?void 0:k,onClick:()=>{j||n||(g(""),m(e.id))},className:(0,d.cn)("proj-card group relative [overflow:visible] w-full text-left rounded-card r-card-lg border pl-[var(--space-4)] pr-[var(--space-2)] py-[var(--space-2)]","bg-card/55 hover:bg-card/70 transition","grid min-h-[var(--space-7)] grid-cols-[auto,1fr,auto] items-center gap-[var(--space-4)]","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",n&&"proj-card--active ring-1 ring-ring"),children:[(0,r.jsx)("span",{className:"shrink-0",onMouseDown:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),children:(0,r.jsx)(i.default,{checked:!!e.done,onChange:()=>v(e.id),disabled:h,"aria-label":"Toggle ".concat(P," complete"),size:"sm"})}),s?(0,r.jsx)(l.default,{name:"rename-project-".concat(e.id),autoFocus:!0,value:w,onChange:e=>N(e.target.value),onKeyDown:t=>{if("Enter"===t.key){if(h){y(null),N(e.name);return}M(e.id,e.name)}"Escape"===t.key&&(y(null),N(e.name))},onBlur:()=>{if(h){y(null),N(e.name);return}M(e.id,e.name)},disabled:h,"aria-label":"Rename project ".concat(e.name)}):(0,r.jsx)("span",{className:"proj-card__title truncate font-medium",children:e.name||"Untitled"}),(0,r.jsxs)("div",{className:"ml-auto flex items-center gap-[var(--space-2)] opacity-0 transition-opacity group-hover:opacity-100 group-focus-within:opacity-100",children:[(0,r.jsx)(o.default,{"aria-label":"Edit project",title:"Edit",onClick:t=>{t.preventDefault(),t.stopPropagation(),y(e.id),N(e.name)},size:"sm",iconSize:"xs",variant:"ghost",disabled:h,children:(0,r.jsx)(c.A,{})}),(0,r.jsx)(o.default,{"aria-label":"Delete project",title:"Delete",onClick:t=>{t.preventDefault(),t.stopPropagation();let r=a===e.id;b(e.id),r&&m("")},size:"sm",iconSize:"xs",variant:"ghost",disabled:h,children:(0,r.jsx)(u.A,{})})]})]})},e.id)})}),viewportClassName:(0,d.cn)("px-0 w-full py-0",S?void 0:"overflow-visible"),viewportStyle:S?{maxHeight:"calc(var(--space-8) * 4 + var(--space-1))"}:void 0})}},81323:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(95155);function n(e){let{text:t}=e;return(0,r.jsx)("div",{className:"tasks-placeholder text-label",children:t})}a(12115)},81393:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useDayFocus:()=>l});var r=a(82192),n=a(58418),s=a(83996);let l=(0,r.createDayTextFieldHook)({selectValue:e=>e.focus,applyValue:s.Z6,scheduleSavingReset:n.l})},82192:(e,t,a)=>{"use strict";a.r(t),a.d(t,{createDayTextFieldHook:()=>l});var r=a(12115),n=a(58418),s=a(51266);function l(e){let{selectValue:t,applyValue:a,scheduleSavingReset:l=n.l}=e;return function(e){var n;let{getDay:o,upsertDay:i}=(0,s.usePlannerStore)(),c=null!=(n=t(o(e)))?n:"",u=r.useCallback(t=>{i(e,e=>a(e,t))},[e,i]),[d,p]=r.useState(()=>c),[f,m]=r.useState(!1),g=r.useRef(c.trim()),v=r.useMemo(()=>d.trim(),[d]),h=v!==g.current,b=r.useCallback(()=>{if(h){m(!0);try{u(v),g.current=v}finally{l(()=>{m(!1)})}}},[u,h,v]);return r.useEffect(()=>{p(c),g.current=c.trim()},[e,c]),{value:d,setValue:p,saving:f,isDirty:h,lastSavedRef:g,commit:b}}}},82750:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useTodayHeroProjects:()=>s});var r=a(12115),n=a(51266);function s(e){let{iso:t,projects:a,selectedProjectId:s,setSelectedProjectId:l,renameProject:o,deleteProject:i,toggleProject:c}=e,[u,d]=(0,r.useState)(""),[p,f]=(0,r.useState)(null),[m,g]=(0,r.useState)(""),[v,h]=(0,r.useState)(!1),{createProject:b}=(0,n.usePlannerActions)(),j=(0,r.useMemo)(()=>v?a:a.slice(0,12),[a,v]),k=(0,r.useMemo)(()=>Math.max(a.length-j.length,0),[a.length,j.length]),x=a.length>12,y=(0,r.useCallback)(e=>{d(e)},[]),w=(0,r.useCallback)(e=>{e.preventDefault(),b({iso:t,name:u,select:l})&&d("")},[b,t,u,l]),N=(0,r.useCallback)(e=>{l(e)},[l]),P=(0,r.useCallback)(e=>{c(e)},[c]),C=(0,r.useCallback)(e=>{i(e),s===e&&l(""),p===e&&(f(null),g(""))},[i,p,s,l]),T=(0,r.useCallback)((e,t)=>{f(e),g(t)},[]),S=(0,r.useCallback)(e=>{g(e)},[]),D=(0,r.useCallback)((e,t)=>{o(e,m.trim()||t),f(null)},[m,o]),I=(0,r.useCallback)(()=>{f(null)},[]),E=(0,r.useCallback)(()=>{h(e=>!e)},[]);return(0,r.useEffect)(()=>{v&&a.length<=12&&h(!1)},[a.length,v]),(0,r.useEffect)(()=>{s&&!v&&!(a.length<=12)&&(a.slice(0,12).some(e=>e.id===s)||h(!0))},[a,s,v]),(0,r.useEffect)(()=>{p&&(a.some(e=>e.id===p)||(f(null),g("")))},[p,a]),{projectsListId:"today-hero-project-list",projectName:u,editingProjectId:p,editingProjectName:m,showAllProjects:v,visibleProjects:j,hiddenProjectsCount:k,shouldShowProjectToggle:x,handleProjectNameChange:y,handleProjectFormSubmit:w,handleProjectSelect:N,handleProjectToggle:P,handleProjectDelete:C,openProjectEditor:T,handleProjectRenameChange:S,commitProjectRename:D,cancelProjectRename:I,toggleShowAllProjects:E}}},83996:(e,t,a)=>{"use strict";a.d(t,{Z6:()=>l,v_:()=>o,ym:()=>s});var r=a(67419),n=a(16386);function s(e,t){return{...e,notes:t}}function l(e,t){return{...e,focus:t}}function o(e,t){return{addProject:a=>{let s=(0,r.uid)("proj");return t(e,e=>(0,n.By)(e,s,a)),s},renameProject:(a,r)=>t(e,e=>(0,n.oB)(e,a,r)),toggleProject:a=>t(e,e=>(0,n.wE)(e,a)),removeProject:a=>t(e,e=>(0,n.oE)(e,a)),addTask:(a,s)=>{let l=(0,r.uid)("task");return t(e,e=>(0,n.XZ)(e,l,a,s)),l},renameTask:(a,r)=>t(e,e=>(0,n.AI)(e,a,r)),toggleTask:a=>t(e,e=>(0,n.ei)(e,a)),removeTask:a=>t(e,e=>(0,n.u0)(e,a)),addTaskImage:(a,r)=>t(e,e=>(0,n.mr)(e,a,r)),removeTaskImage:(a,r,s)=>t(e,e=>(0,n.Vo)(e,a,r,s)),setNotes:a=>t(e,e=>s(e,a)),setFocus:a=>t(e,e=>l(e,a))}}},84804:(e,t,a)=>{"use strict";a.d(t,{$$:()=>j,E4:()=>f,Ez:()=>m,Md:()=>b,XS:()=>g,XV:()=>n,bM:()=>y,fi:()=>k,tj:()=>w,ts:()=>v,wg:()=>h});var r=a(64269);let n=new Intl.DateTimeFormat(r.ne,{month:"numeric",day:"numeric",year:"numeric"}),s=new Intl.DateTimeFormat(r.ne,{day:"2-digit",month:"short"}),l=new Intl.DateTimeFormat(r.ne,{month:"long",day:"numeric"}),o=new Intl.DateTimeFormat(r.ne,{month:"long"}),i=new Intl.DateTimeFormat(r.ne,{day:"numeric"}),c=new Intl.DateTimeFormat(r.ne,{weekday:"long"}),u=new Intl.DateTimeFormat(r.ne,{month:"short"}),d=new Intl.DateTimeFormat(r.ne,{day:"2-digit"});function p(e){return/^\d{4}-\d{2}-\d{2}$/.test(e)}function f(e){if(!p(e))return null;let[t,a,r]=e.split("-").map(e=>parseInt(e,10)),n=new Date(t,a-1,r,0,0,0,0);return Number.isFinite(n.getTime())&&n.getFullYear()===t&&n.getMonth()===a-1&&n.getDate()===r?n:null}function m(e){let t=f(e);return t?s.format(t):e}function g(e){let t=f(e);if(!t)return e;let a=c.format(t).toLocaleUpperCase(r.ne),n=u.format(t).toLocaleUpperCase(r.ne),s=d.format(t);return"".concat(a,"_").concat(n," :: ").concat(s)}function v(e){if("number"==typeof e)return e;if(e instanceof Date)return+e;if("string"==typeof e){let t=Date.parse(e);return Number.isNaN(t)?0:t}return 0}function h(e){let{unit:t="seconds",padMinutes:a=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Number.isFinite(e)?e:0,n=Math.max(0,"milliseconds"===t?Math.floor(r/1e3):Math.floor(r)),s=Math.floor(n/60),l=a?String(s).padStart(2,"0"):String(s),o=String(n%60).padStart(2,"0");return"".concat(l,":").concat(o)}function b(e){let{unit:t="seconds"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.trim().match(/^(\d{1,3})\s*:\s*([0-5]?\d)$/);if(!a)return null;let r=60*Number(a[1])+Number(a[2]);return"milliseconds"===t?1e3*r:r}function j(e){let t=function(e){let t;if(e instanceof Date)t=new Date(e);else if("number"==typeof e)t=new Date(e);else if("string"==typeof e){let a=p(e)?f(e):null;t=null!=a?a:new Date(e)}else t=new Date;return Number.isFinite(t.getTime())||(t=new Date),t}(e),a=t.getFullYear(),r="".concat(t.getMonth()+1).padStart(2,"0"),n="".concat(t.getDate()).padStart(2,"0");return"".concat(a,"-").concat(r,"-").concat(n)}function k(e,t){let a=new Date(e);return a.setDate(a.getDate()+t),a}function x(e){let t=new Date(e),a=t.getDay();return t.setHours(0,0,0,0),k(t,-((a+6)%7))}function y(e){var t;let a=null!=(t=f(e))?t:new Date;return{start:x(a),end:function(e){let t=k(x(e),6);return t.setHours(23,59,59,999),t}(a)}}function w(e,t){if("function"==typeof l.formatRange)try{return"Week of ".concat(l.formatRange(e,t))}catch(e){}if(e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()){let a=o.format(e),r=i.format(e),n=i.format(t);return"Week of ".concat(a," ").concat(r," – ").concat(n)}let a=l.format(e),r=l.format(t);return"Week of ".concat(a," – ").concat(r)}},93706:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var r=a(95155);a(48768);var n=a(12115),s=a(9535),l=a(12607),o=a(64269),i=a(62021),c=a(79897),u=a(94433),d=a(51266);function p(e){let{iso:t,isToday:a}=e,{projects:p,renameProject:f,deleteProject:m,toggleProject:g,tasksById:v,tasksByProject:h,renameTask:b,toggleTask:j,deleteTask:k,addTaskImage:x,removeTaskImage:y,doneCount:w,totalCount:N}=(0,l.useDay)(t),[P,C]=(0,s.useSelectedProject)(t),[,T]=(0,s.useSelectedTask)(t),{createProject:S,createTask:D}=(0,d.usePlannerActions)(),I=n.useCallback(e=>S({iso:t,name:e,select:C}),[S,t,C]),E=n.useCallback(e=>D({iso:t,projectId:P,title:e,select:T}),[D,t,P,T]);return(0,r.jsxs)("section",{className:(0,o.cn)("daycard relative overflow-hidden card-neo-soft rounded-card r-card-lg border card-pad","grid gap-[var(--space-4)] lg:gap-[var(--space-6)]","grid-cols-1 lg:grid-cols-12",a&&"ring-1 ring-ring/65 title-glow","before:pointer-events-none before:absolute before:inset-x-[var(--space-4)] before:top-0 before:h-px before:bg-gradient-to-r","before:from-transparent before:via-ring/45 before:to-transparent","after:pointer-events-none after:absolute after:-inset-px after:[border-radius:var(--radius-card)] after:bg-[radial-gradient(60%_40%_at_100%_0%,hsl(var(--ring)/.12),transparent_60%)]"),"aria-label":"Planner for ".concat(t),children:[(0,r.jsx)("div",{className:"col-span-1 lg:col-span-12",children:(0,r.jsx)(i.default,{iso:t,projectCount:p.length,doneCount:w,totalCount:N})}),(0,r.jsx)("div",{className:"col-span-1 lg:col-span-3",children:(0,r.jsx)(c.default,{projects:p,selectedProjectId:P,setSelectedProjectId:C,setSelectedTaskId:T,toggleProject:g,renameProject:f,deleteProject:m,createProject:I})}),P&&(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)("div",{className:"hidden lg:block lg:col-span-1 w-px mx-auto bg-card-hairline/90 rounded-full self-stretch","aria-hidden":!0}),(0,r.jsx)("div",{className:"col-span-1 lg:col-span-8",children:(0,r.jsx)(u.default,{tasksById:v,tasksByProject:h,selectedProjectId:P,createTask:E,renameTask:b,toggleTask:j,deleteTask:k,addTaskImage:x,removeTaskImage:(e,t,a)=>y(e,t,a),setSelectedTaskId:T})})]})]})}},94433:(e,t,a)=>{"use strict";a.d(t,{default:()=>u});var r=a(95155),n=a(12115),s=a(53052),l=a(52105),o=a(81323),i=a(77656),c=a(26439);function u(e){let{tasksById:t,tasksByProject:a,selectedProjectId:u,createTask:d,renameTask:p,toggleTask:f,deleteTask:m,addTaskImage:g,removeTaskImage:v,setSelectedTaskId:h}=e,[b,j]=n.useState(""),k=n.useId(),x=n.useMemo(()=>{var e;return u?(null!=(e=a[u])?e:[]).map(e=>t[e]).filter(e=>!!e):[]},[u,a,t]),y=!!u,w=!y||0===x.length,N=n.useCallback(e=>{e.preventDefault(),d(b)&&j("")},[d,b]);return(0,r.jsx)(i.default,{renderComposer:y?()=>(0,r.jsxs)("form",{onSubmit:N,className:"grid gap-[var(--space-2)]",children:[(0,r.jsx)(s.default,{htmlFor:k,className:"mb-0",children:"New task"}),(0,r.jsx)(l.default,{id:k,className:"w-full",placeholder:"> add task…",value:b,onChange:e=>j(e.target.value)})]}):void 0,isEmpty:w,renderEmpty:()=>(0,r.jsx)(o.A,{text:y?"No tasks yet":"Select a project to view tasks"}),renderList:()=>(0,r.jsx)("ul",{className:"space-y-[var(--space-2)] [&>li:first-child]:mt-[var(--space-2)] [&>li:last-child]:mb-[var(--space-2)]","aria-label":"Tasks",children:x.map(e=>(0,r.jsx)(c.default,{task:e,toggleTask:()=>{f(e.id),h(e.id)},deleteTask:()=>{m(e.id),h("")},renameTask:t=>p(e.id,t),selectTask:()=>h(e.id),addImage:t=>g(e.id,t),removeImage:(t,a)=>v(e.id,t,a)},e.id))}),viewportClassName:"min-h-[calc(var(--space-8)*2)] max-h-[calc(var(--space-8)*5)]"})}}}]);