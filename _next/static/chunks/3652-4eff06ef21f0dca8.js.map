{"version":3,"file":"static/chunks/3652-4eff06ef21f0dca8.js","mappings":"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AKI,UAAU,CAACD,GACrBD,EAAIzQ,KAAK4Q,IAAI,CAACH,EAAG,WAEnB,OAAOzQ,KAAK6Q,GAAG,CAACJ,GAAKzQ,KAAKtB,GAAG,CAAC,EAAG8R,EACnC,CAGO,SAAS5P,EAAUhD,CAAa,SAIrC,GAAa,EAAU,CAAP,KAAekT,EAAAA,CAAKA,CAAEpQ,IAAK,aAAc,EACrD9C,GAAS,EAAU,CAAE4C,KAAMuQ,EAAAA,CAAGA,CAAErQ,IAAK,cAAe,EACpD9C,GAAS,EAAU,CAAP,KAAeoT,EAAAA,CAAMA,CAAEtQ,IAAK,cAAe,EACpD,CAAEF,KAAMyQ,EAAAA,CAAKA,CAAEvQ,IAAK,iBAAkB,CAC/C,CAGO,IAAMb,EAAwC,CACnD,EAAG,CACD,+BACA,wBACA,kCACA,qCACA,oBACD,CACD,EAAG,CACD,yCACA,gCACA,uBACA,qBACA,0BACD,CACD,EAAG,CACD,yBACA,6BACA,6BACA,uBACA,gCACD,CACD,EAAG,CACD,gCACA,wBACA,8BACA,2BACA,mBACD,CACD,EAAG,CACD,oBACA,sBACA,gBACA,oBACA,uBACD,CACD,EAAG,CACD,gBACA,wBACA,4BACA,2BACA,yBACD,CACD,EAAG,CACD,oBACA,iBACA,4BACA,qBACA,oBACD,CACD,EAAG,CACD,2BACA,uBACA,uBACA,4BACA,sBACD,CACD,EAAG,CACD,sBACA,uBACA,yBACA,+BACA,sBACD,CACD,EAAG,CACD,sBACA,qBACA,uBACA,uBACA,yBACD,CACD,GAAI,CACF,oBACA,0BACA,0BACA,+BACA,uBACD,EACD,EAGmD,CACnD,EAAG,CACD,wBACA,wBACA,wBACA,uBACA,yBACA,uBACA,0BACA,uBACA,uBACA,8BACD,CACD,EAAG,CACD,uBACA,sBACA,sBACA,kBACA,sBACA,oBACA,oBACA,oBACA,wBACA,0BACD,CACD,EAAG,CACD,oBACA,uBACA,sBACA,gBACA,kBACA,qBACA,2BACA,qBACA,2BACA,iBACD,CACD,EAAG,CACD,oBACA,iBACA,2BACA,sBACA,qBACA,4BACA,oBACA,0BACA,0BACA,0BAC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","sources":["webpack://_N_E/./src/components/reviews/ReviewEditor.tsx","webpack://_N_E/./src/components/reviews/ReviewSummary.tsx","webpack://_N_E/./src/components/reviews/ReviewSummaryNotes.tsx","webpack://_N_E/./src/components/reviews/ReviewListItem.tsx","webpack://_N_E/./src/components/reviews/TimestampMarkers.tsx","webpack://_N_E/./src/components/reviews/PillarsSelector.tsx","webpack://_N_E/./src/components/reviews/ReviewSummaryScore.tsx","webpack://_N_E/./src/components/reviews/ReviewPage.tsx","webpack://_N_E/./src/components/reviews/index.ts","webpack://_N_E/./src/components/reviews/ScoreMeter.tsx","webpack://_N_E/./src/components/reviews/ReviewSummaryTimestamps.tsx","webpack://_N_E/./src/components/reviews/ReviewSummaryPillars.tsx","webpack://_N_E/./src/components/lists/GenericList.tsx","webpack://_N_E/./src/components/reviews/ReviewSliderTrack.tsx","webpack://_N_E/./src/components/reviews/reviewData.ts","webpack://_N_E/./src/components/reviews/ResultScoreSection.tsx","webpack://_N_E/./src/components/reviews/useReviewFilter.ts","webpack://_N_E/./src/components/reviews/NeonPillarChip.module.css","webpack://_N_E/./src/components/reviews/NeonIcon.tsx","webpack://_N_E/./src/components/reviews/ReviewsPage.tsx","webpack://_N_E/./src/components/reviews/RoleSelector.tsx","webpack://_N_E/./src/components/reviews/ReviewPanel.tsx","webpack://_N_E/./src/components/reviews/ReviewList.tsx","webpack://_N_E/./src/components/reviews/useReviews.ts","webpack://_N_E/./src/components/reviews/LaneOpponentForm.tsx","webpack://_N_E/./src/components/reviews/SectionLabel.tsx","webpack://_N_E/./src/components/reviews/ReviewSurface.tsx","webpack://_N_E/./src/components/reviews/ReviewSliderTrack.module.css","webpack://_N_E/./src/components/reviews/reviewSearch.ts"],"sourcesContent":["\"use client\";\n\n// Full Review Editor with icon-only header actions and RoleSelector rail control.\nimport { RoleSelector } from \"@/components/reviews\";\nimport { SectionLabel } from \"@/components/reviews/SectionLabel\";\nimport { SectionCard } from \"@/components/ui/layout/SectionCard\";\nimport { NeonIcon } from \"@/components/reviews/NeonIcon\";\nimport { ReviewSurface } from \"./ReviewSurface\";\nimport { ReviewSliderTrack } from \"./ReviewSliderTrack\";\n\nimport * as React from \"react\";\nimport type { Review, Role } from \"@/lib/types\";\nimport { Badge } from \"@/components/ui/primitives/Badge\";\nimport { Textarea } from \"@/components/ui/primitives/Textarea\";\nimport { IconButton } from \"@/components/ui/primitives/IconButton\";\nimport { TagInput } from \"@/components/ui/primitives/TagInput\";\nimport { Trash2, Check } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { usePersistentState } from \"@/lib/db\";\nimport {\n  LAST_ROLE_KEY,\n  FOCUS_POOLS,\n  pickIndex,\n} from \"@/components/reviews/reviewData\";\n\nimport { LaneOpponentFormHandle, LaneOpponentForm } from \"./LaneOpponentForm\";\nimport {\n  ResultScoreSectionHandle, ResultScoreSection } from \"./ResultScoreSection\";\nimport { PillarsSelectorHandle, PillarsSelector } from \"./PillarsSelector\";\nimport { TimestampMarkersHandle, TimestampMarkers } from \"./TimestampMarkers\";\n\ntype ReviewEditorProps = {\n  review: Review;\n  onChangeNotes?: (value: string) => void;\n  onChangeTags?: (values: string[]) => void;\n  onRename?: (title: string) => void;\n  onChangeMeta?: (partial: Partial<Review>) => void;\n  onDone?: () => void;\n  onDelete?: () => void;\n  className?: string;\n};\n\nexport function ReviewEditor({\n  review,\n  onChangeNotes,\n  onChangeTags,\n  onRename,\n  onChangeMeta,\n  onDone,\n  onDelete,\n  className = \"\",\n}: ReviewEditorProps) {\n  const [notes, setNotes] = React.useState(review.notes ?? \"\");\n  const [tags, setTags] = React.useState<string[]>(\n    Array.isArray(review.tags) ? review.tags : [],\n  );\n\n  const rootRef = React.useRef<HTMLElement>(null);\n  const laneFormRef = React.useRef<LaneOpponentFormHandle>(null);\n  const resultScoreRef = React.useRef<ResultScoreSectionHandle>(null);\n  const pillarsRef = React.useRef<PillarsSelectorHandle>(null);\n  const timestampsRef = React.useRef<TimestampMarkersHandle>(null);\n  const focusRangeRef = React.useRef<HTMLInputElement>(null);\n  const laneLabelId = React.useId();\n  const tagsLabelId = React.useId();\n  const notesLabelId = React.useId();\n\n  const [lastRole, setLastRole] = usePersistentState<Role>(\n    LAST_ROLE_KEY,\n    \"MID\",\n  );\n  const [role, setRole] = React.useState<Role>(\n    review.role ?? lastRole ?? \"MID\",\n  );\n  const [focusOn, setFocusOn] = React.useState<boolean>(\n    Boolean(review.focusOn),\n  );\n  const [focus, setFocus] = React.useState<number>(\n    Number.isFinite(review.focus ?? NaN) ? Number(review.focus) : 5,\n  );\n\n  React.useEffect(() => {\n    setNotes(review.notes ?? \"\");\n  }, [review.id, review.notes]);\n\n  React.useEffect(() => {\n    setTags(Array.isArray(review.tags) ? review.tags : []);\n  }, [review.id, review.tags]);\n\n  React.useEffect(() => {\n    const r = review.role ?? lastRole ?? \"MID\";\n    setRole(r);\n    if (review.role == null) {\n      onChangeMeta?.({ role: r });\n    }\n  }, [lastRole, onChangeMeta, review.id, review.role]);\n\n  React.useEffect(() => {\n    setFocusOn(Boolean(review.focusOn));\n    setFocus(Number.isFinite(review.focus ?? NaN) ? Number(review.focus) : 5);\n  }, [review.focus, review.focusOn, review.id]);\n\n  const commitMeta = (partial: Partial<Review>) => onChangeMeta?.(partial);\n  const commitNotes = () => onChangeNotes?.(notes);\n\n  function saveAll() {\n    laneFormRef.current?.save();\n    resultScoreRef.current?.save();\n    pillarsRef.current?.save();\n    timestampsRef.current?.save();\n    commitNotes();\n    onChangeTags?.(tags);\n  }\n\n  const saveAllRef = React.useRef(saveAll);\n  saveAllRef.current = saveAll;\n\n  React.useEffect(() => {\n    function handlePointerDown(e: PointerEvent) {\n      if (!rootRef.current) return;\n      if (!rootRef.current.contains(e.target as Node)) {\n        saveAllRef.current();\n        onDone?.();\n      }\n    }\n    document.addEventListener(\"pointerdown\", handlePointerDown);\n    return () => document.removeEventListener(\"pointerdown\", handlePointerDown);\n  }, [onDone]);\n\n  const handleChangeTags = React.useCallback(\n    (next: string[]) => {\n      setTags(next);\n      onChangeTags?.(next);\n    },\n    [onChangeTags],\n  );\n\n  const focusMsgIndex = pickIndex(\n    String(review.id ?? \"seed-focus\") + String(focus),\n    10,\n  );\n  const focusMsg = (FOCUS_POOLS[focus] ?? FOCUS_POOLS[5])[focusMsgIndex % 10];\n\n  function selectRole(v: Role) {\n    setRole(v);\n    setLastRole(v);\n    commitMeta({ role: v });\n  }\n\n  return (\n    <SectionCard\n      ref={rootRef}\n      variant=\"plain\"\n      className={cn(\"transition-none shadow-none\", className)}\n    >\n      <div className=\"section-h sticky\">\n        <div className=\"grid w-full grid-cols-[1fr_auto] items-center gap-[var(--space-4)]\">\n          <div className=\"min-w-0\">\n            <div className=\"mb-[var(--space-2)]\">\n              <SectionLabel id={laneLabelId}>Lane</SectionLabel>\n              <RoleSelector\n                value={role}\n                onChange={selectRole}\n                ariaLabelledby={laneLabelId}\n              />\n            </div>\n\n            <LaneOpponentForm\n              ref={laneFormRef}\n              lane={review.lane ?? review.title ?? \"\"}\n              opponent={review.opponent ?? \"\"}\n              commitMeta={commitMeta}\n              onRename={onRename}\n              onOpponentEnter={() => resultScoreRef.current?.focusResult()}\n            />\n          </div>\n\n          <div className=\"ml-[var(--space-2)] flex shrink-0 items-center justify-end gap-[var(--space-2)] self-start\">\n            {onDelete ? (\n              <IconButton\n                aria-label=\"Delete review\"\n                title=\"Delete review\"\n                size=\"lg\"\n                iconSize=\"md\"\n                variant=\"quiet\"\n                onClick={onDelete}\n              >\n                <Trash2 />\n              </IconButton>\n            ) : null}\n\n            {onDone ? (\n              <IconButton\n                aria-label=\"Done\"\n                title=\"Save and close\"\n                size=\"lg\"\n                iconSize=\"md\"\n                variant=\"quiet\"\n                onClick={() => {\n                  saveAll();\n                  onDone?.();\n                }}\n              >\n                <Check />\n              </IconButton>\n            ) : null}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"section-b ds-card-pad space-y-[var(--space-6)]\">\n        <ResultScoreSection\n          ref={resultScoreRef}\n          result={review.result ?? \"Win\"}\n          score={\n            Number.isFinite(review.score ?? NaN) ? Number(review.score) : 5\n          }\n          commitMeta={commitMeta}\n          onScoreEnter={() => timestampsRef.current?.focusTime()}\n        />\n\n        {/* Focus */}\n        <div>\n          <div className=\"flex items-center gap-[var(--space-3)]\">\n            <IconButton\n              aria-label={focusOn ? \"Brain light on\" : \"Brain light off\"}\n              title={focusOn ? \"Brain light on\" : \"Brain light off\"}\n              aria-pressed={focusOn}\n              size=\"xl\"\n              variant=\"quiet\"\n              tone=\"primary\"\n              onClick={() => {\n                const v = !focusOn;\n                setFocusOn(v);\n                commitMeta({ focusOn: v });\n                if (v) focusRangeRef.current?.focus();\n              }}\n            >\n              <NeonIcon kind=\"brain\" on={focusOn} size=\"xl\" />\n            </IconButton>\n          </div>\n\n          {focusOn && (\n            <>\n              <ReviewSurface\n                className=\"mt-[var(--space-3)] group relative h-[var(--space-7)]\"\n                padding=\"inline\"\n                focusWithin\n              >\n                <input\n                  ref={focusRangeRef}\n                  type=\"range\"\n                  min={0}\n                  max={10}\n                  step={1}\n                  value={focus}\n                  onChange={(e) => {\n                    const v = Number(e.target.value);\n                    setFocus(v);\n                    commitMeta({ focus: v });\n                  }}\n                  className=\"absolute inset-0 z-10 cursor-pointer rounded-card r-card-lg opacity-0 [appearance:none]\"\n                  aria-label=\"Focus from 0 to 10\"\n                />\n                <ReviewSliderTrack\n                  value={focus}\n                  tone=\"focus\"\n                  variant=\"input\"\n                />\n              </ReviewSurface>\n              <div className=\"mt-[var(--space-1)] flex items-center gap-[var(--space-2)] text-ui text-muted-foreground\">\n                <Badge as=\"span\" size=\"md\" className=\"font-mono tabular-nums text-ui\">\n                  {focus}/10\n                </Badge>\n                <span>{focusMsg}</span>\n              </div>\n            </>\n          )}\n        </div>\n\n        <PillarsSelector\n          ref={pillarsRef}\n          pillars={Array.isArray(review.pillars) ? review.pillars : []}\n          commitMeta={commitMeta}\n        />\n\n        <TimestampMarkers\n          ref={timestampsRef}\n          markers={Array.isArray(review.markers) ? review.markers : []}\n          commitMeta={commitMeta}\n        />\n\n        {/* Tags */}\n        <div>\n          <SectionLabel id={tagsLabelId}>Tags</SectionLabel>\n          <TagInput\n            className=\"mt-[var(--space-1)]\"\n            value={tags}\n            onChange={handleChangeTags}\n            placeholder=\"Add tag and press Enter\"\n            ariaLabelledby={tagsLabelId}\n            helper=\"Press Enter to add a tag; click a tag to remove it.\"\n          />\n        </div>\n\n        {/* Notes */}\n        <div>\n          <SectionLabel id={notesLabelId}>Notes</SectionLabel>\n          <Textarea\n            value={notes}\n            onChange={(e) => setNotes(e.target.value)}\n            onBlur={commitNotes}\n            placeholder=\"Key moments, mistakes to fix, drills to run\"\n            className=\"rounded-[var(--control-radius)]\"\n            resize=\"resize-y\"\n            textareaClassName=\"min-h-[calc(var(--space-8)*3_-_var(--space-3))] leading-relaxed\"\n            aria-labelledby={notesLabelId}\n          />\n        </div>\n      </div>\n    </SectionCard>\n  );\n}\n","\"use client\";\n\nimport * as React from \"react\";\nimport type { Review, Role, ReviewMarker, Pillar } from \"@/lib/types\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  SCORE_POOLS,\n  FOCUS_POOLS,\n  ROLE_OPTIONS,\n  pickIndex,\n  scoreIcon,\n} from \"@/components/reviews/reviewData\";\nimport { Hero } from \"@/components/ui\";\nimport { IconButton } from \"@/components/ui/primitives/IconButton\";\nimport { Pencil } from \"lucide-react\";\nimport { SectionCard } from \"@/components/ui/layout/SectionCard\";\nimport { ReviewSummaryScore } from \"@/components/reviews/ReviewSummaryScore\";\nimport { ReviewSummaryPillars } from \"@/components/reviews/ReviewSummaryPillars\";\nimport { ReviewSummaryTimestamps } from \"@/components/reviews/ReviewSummaryTimestamps\";\nimport { ReviewSummaryNotes } from \"@/components/reviews/ReviewSummaryNotes\";\n\ntype Props = {\n  review: Review;\n  onEdit?: () => void;\n  className?: string;\n};\n\nexport function ReviewSummary({ review, onEdit, className }: Props) {\n  const role: Role | undefined = review.role as Role | undefined;\n  const result: \"Win\" | \"Loss\" | undefined = review.result;\n  const score = Number.isFinite(review.score) ? Number(review.score) : 5;\n  const normalizedScore = Math.max(0, Math.min(10, Math.round(score)));\n  const focusOn = Boolean(review.focusOn);\n  const focus = Number.isFinite(review.focus) ? Number(review.focus) : 5;\n  const normalizedFocus = Math.max(0, Math.min(10, Math.round(focus)));\n  const markers: ReviewMarker[] = Array.isArray(review.markers) ? review.markers : [];\n  const laneTitle = review.lane ?? review.title ?? \"\";\n\n  const scorePool = SCORE_POOLS[normalizedScore] ?? SCORE_POOLS[5];\n  const msgIndex = pickIndex(\n    String(review.id ?? \"seed\") + normalizedScore,\n    scorePool.length,\n  );\n  const msg = scorePool[msgIndex % scorePool.length];\n  const { Icon: ScoreIcon, cls: scoreIconCls } = scoreIcon(normalizedScore);\n\n  const focusPool = FOCUS_POOLS[normalizedFocus] ?? FOCUS_POOLS[5];\n  const focusMsgIndex = pickIndex(\n    String(review.id ?? \"seed-focus\") + normalizedFocus,\n    focusPool.length,\n  );\n  const focusMsg = focusPool[focusMsgIndex % focusPool.length];\n\n  const roleOption = ROLE_OPTIONS.find((r) => r.value === role);\n  const RoleIcon = roleOption?.Icon;\n  const roleLabel = roleOption?.label;\n\n  const resultBadge = result && (\n    <span\n      className={cn(\n        \"inline-flex h-[var(--control-h-md)] items-center rounded-card r-card-lg border px-[var(--space-3)] text-ui font-medium\",\n        \"border-border bg-card\",\n        result === \"Win\"\n          ? \"shadow-[0_0_0_var(--hairline-w)_hsl(var(--ring)/.35)_inset] [background-image:var(--review-result-win-gradient)]\"\n          : \"[background-image:var(--review-result-loss-gradient)]\",\n      )}\n      aria-label={`Result: ${result}`}\n      title={`Result: ${result}`}\n    >\n      {result}\n    </span>\n  );\n\n  const metaRow = roleLabel || resultBadge;\n  const headerActions = onEdit ? (\n    <IconButton\n      variant=\"quiet\"\n      size=\"md\"\n      aria-label=\"Edit review\"\n      title=\"Edit review\"\n      onClick={onEdit}\n    >\n      <Pencil className=\"h-[var(--icon-size-sm)] w-[var(--icon-size-sm)]\" />\n    </IconButton>\n  ) : null;\n\n  return (\n    <SectionCard\n      variant=\"plain\"\n      className={cn(\"transition-none shadow-none\", className)}\n    >\n      <Hero\n        variant=\"panel\"\n        as=\"header\"\n        className=\"section-h sticky\"\n        title={laneTitle || \"Untitled review\"}\n        subtitle={roleLabel}\n        headingLevel={2}\n        actions={headerActions}\n        accent=\"accent\"\n      >\n        {metaRow ? (\n          <div className=\"flex flex-wrap items-center gap-[var(--space-2)]\">\n            {roleLabel ? (\n              <span\n                className={cn(\n                  \"inline-flex h-[var(--control-h-md)] items-center gap-[var(--space-2)] rounded-card r-card-lg border border-border\",\n                  \"bg-card px-[var(--space-3)] text-ui font-medium\",\n                )}\n                title={roleLabel}\n              >\n                {RoleIcon ? (\n                  <RoleIcon className=\"h-[var(--icon-size-sm)] w-[var(--icon-size-sm)]\" />\n                ) : null}\n                {roleLabel}\n              </span>\n            ) : null}\n            {resultBadge}\n          </div>\n        ) : null}\n      </Hero>\n      <ReviewSummaryScore\n        score={score}\n        msg={msg}\n        ScoreIcon={ScoreIcon}\n        scoreIconCls={scoreIconCls}\n        focusOn={focusOn}\n        focus={focus}\n        focusMsg={focusMsg}\n      />\n      <ReviewSummaryPillars pillars={review.pillars as Pillar[]} />\n      <ReviewSummaryTimestamps markers={markers} />\n      {review.notes ? <ReviewSummaryNotes notes={review.notes} /> : null}\n    </SectionCard>\n  );\n}\n\n","import * as React from \"react\";\nimport { SectionLabel } from \"@/components/reviews/SectionLabel\";\nimport { ReviewSurface } from \"./ReviewSurface\";\n\nexport type ReviewSummaryNotesProps = {\n  notes: string;\n};\n\nexport function ReviewSummaryNotes({ notes }: ReviewSummaryNotesProps) {\n  return (\n    <div>\n      <SectionLabel>Notes</SectionLabel>\n      <ReviewSurface padding=\"md\" tone=\"muted\">\n        <div className=\"text-ui leading-6 text-foreground/70\">{notes}</div>\n      </ReviewSurface>\n    </div>\n  );\n}\n","// src/components/reviews/ReviewListItem.tsx\n\"use client\";\n\nimport * as React from \"react\";\nimport { Button, Card } from \"@/components/ui\";\nimport { Badge } from \"@/components/ui/primitives/Badge\";\nimport type { Review } from \"@/lib/types\";\nimport { LOCALE, cn } from \"@/lib/utils\";\n\nconst statusDotBase =\n  \"h-[var(--space-2)] w-[var(--space-2)] rounded-full ring-2\";\nconst statusDotWin = \"bg-success ring-success\";\nconst statusDotLoss = \"bg-danger ring-danger\";\nconst statusDotDefault = \"bg-muted-foreground ring-muted-foreground\";\nconst statusDotPulse =\n  \"motion-safe:animate-[pulse_2s_ease-in-out_infinite] motion-reduce:animate-none\";\nconst statusDotBlink =\n  \"motion-safe:animate-[blink_1s_steps(2)_infinite] motion-reduce:animate-none\";\n\nconst itemLoading = cn(\n  \"flex flex-col gap-[var(--space-3)] rounded-card r-card-lg border border-border/35 bg-card/70 p-[var(--space-4)]\",\n  \"motion-safe:animate-pulse motion-reduce:animate-none\",\n);\n\nconst loadingLine = \"h-[var(--space-3)] rounded-card bg-muted\";\n\nconst scoreBadge = cn(\n  \"px-[var(--space-2)] py-[var(--space-1)] rounded-full text-ui leading-none font-medium\",\n  \"text-accent-2-foreground ring-1 ring-[theme('colors.interaction.info.surfaceActive')] bg-accent-2\",\n  \"hover:ring-[theme('colors.interaction.info.surfaceHover')]\",\n  \"focus-visible:ring-[theme('colors.interaction.info.surfaceHover')]\",\n  \"active:ring-[theme('colors.interaction.info.surfaceActive')]\",\n);\n\ntype ReviewListItemBaseProps = {\n  review?: Review;\n  selected?: boolean;\n  loading?: boolean;\n  disabled?: boolean;\n  className?: string;\n  onSelect?: () => void;\n  onRename?: (nextTitle: string) => void;\n  onDelete?: () => void;\n};\n\nexport type ReviewListItemProps = ReviewListItemBaseProps &\n  Omit<React.HTMLAttributes<HTMLDivElement>, keyof ReviewListItemBaseProps>;\n\nconst MAX_SUMMARY_LENGTH = 160;\n\nconst ReviewListItemInner = (\n  {\n    review,\n    selected = false,\n    loading = false,\n    className,\n    disabled = false,\n    onSelect,\n    onRename,\n    onDelete,\n    ...rest\n  }: ReviewListItemProps,\n  ref: React.ForwardedRef<HTMLDivElement>,\n) => {\n  const title = review?.title?.trim() || \"Untitled Review\";\n  const untitled = !review?.title?.trim();\n  const matchup = review?.matchup?.trim() || \"\";\n  const score = review?.score;\n  const role = review?.role;\n  const result = review?.result;\n\n  const side = review?.side ? `${review.side} side` : null;\n  const opponent = review?.opponent?.trim()\n    ? `vs ${review.opponent.trim()}`\n    : null;\n  const lane = review?.lane?.trim() || null;\n  const contextParts = [side, opponent, lane].filter(Boolean);\n  const contextLabel = contextParts.join(\"  \");\n\n  const createdAtLabel = React.useMemo(() => {\n    if (!review?.createdAt) return \"\";\n    const date = new Date(review.createdAt);\n    if (Number.isNaN(date.getTime())) return \"\";\n    try {\n      return date.toLocaleDateString(LOCALE, {\n        year: \"numeric\",\n        month: \"short\",\n        day: \"numeric\",\n      });\n    } catch {\n      return date.toLocaleDateString();\n    }\n  }, [review?.createdAt]);\n\n  const summary = React.useMemo(() => {\n    const raw = review?.notes?.trim();\n    if (!raw) return \"\";\n    const normalized = raw.replace(/\\s+/g, \" \").trim();\n    if (normalized.length <= MAX_SUMMARY_LENGTH) {\n      return normalized;\n    }\n    return `${normalized.slice(0, MAX_SUMMARY_LENGTH).trimEnd()}`;\n  }, [review?.notes]);\n\n  const handleSelect = React.useCallback<React.MouseEventHandler<HTMLDivElement>>(\n    (event) => {\n      if (disabled) return;\n      if (event.defaultPrevented) return;\n      if (event.target instanceof HTMLElement) {\n        if (event.target.closest(\"[data-review-item-action='true']\")) {\n          return;\n        }\n      }\n      onSelect?.();\n    },\n    [disabled, onSelect],\n  );\n\n  const handleKeyDown = React.useCallback<React.KeyboardEventHandler<HTMLDivElement>>(\n    (event) => {\n      if (disabled) return;\n      if (event.defaultPrevented) return;\n      if (event.currentTarget !== event.target) return;\n      if (event.key === \"Enter\" || event.key === \" \" || event.key === \"Spacebar\") {\n        event.preventDefault();\n        onSelect?.();\n      }\n    },\n    [disabled, onSelect],\n  );\n\n  const handleRename = React.useCallback(() => {\n    if (disabled) return;\n    if (!onRename || !review) return;\n    const nextTitle = window.prompt(\"Rename review\", title);\n    if (nextTitle === null) return;\n    onRename(nextTitle);\n  }, [disabled, onRename, review, title]);\n\n  if (loading) {\n    return (\n      <div data-scope=\"reviews\" className={itemLoading}>\n        <div\n          className={cn(loadingLine, \"w-3/5 mb-[var(--space-3)]\")}\n        />\n        <div className={cn(loadingLine, \"w-2/5\")} />\n      </div>\n    );\n  }\n\n  const cardClassName = cn(\n    \"group relative flex flex-col gap-[var(--space-3)] transition-colors\",\n    \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-0\",\n    !disabled &&\n      \"cursor-pointer hover:bg-card/75 active:bg-card/85 focus-visible:bg-card/80\",\n    disabled && \"opacity-disabled\",\n    selected &&\n      \"bg-[theme('colors.interaction.accent.tintActive')] ring-2 ring-[theme('colors.interaction.accent.surfaceActive')]\",\n    className,\n  );\n\n  return (\n    <Card\n      ref={ref}\n      data-scope=\"reviews\"\n      tabIndex={disabled ? -1 : 0}\n      role=\"button\"\n      aria-label={`Open review: ${title}`}\n      aria-current={selected ? \"true\" : undefined}\n      aria-disabled={disabled || undefined}\n      data-disabled={disabled ? \"true\" : undefined}\n      data-selected={selected ? \"true\" : undefined}\n      depth={selected ? \"raised\" : \"base\"}\n      className={cardClassName}\n      onClick={handleSelect}\n      onKeyDown={handleKeyDown}\n      {...rest}\n    >\n      <div className=\"flex items-start justify-between gap-[var(--space-3)]\">\n        <div className=\"flex flex-col gap-[var(--space-1)]\">\n          <span\n            className={cn(\n              \"text-body font-medium text-card-foreground\",\n              untitled && \"text-muted-foreground/80\",\n            )}\n            aria-label={untitled ? \"Untitled Review\" : undefined}\n          >\n            {title}\n          </span>\n          <div className=\"flex flex-wrap items-center gap-x-[var(--space-2)] gap-y-[var(--space-1)] text-label text-muted-foreground\">\n            {createdAtLabel ? <span>{createdAtLabel}</span> : null}\n            {contextLabel ? <span>{contextLabel}</span> : null}\n            {matchup ? <span>{matchup}</span> : null}\n          </div>\n        </div>\n        {typeof score === \"number\" ? (\n          <span\n            className={scoreBadge}\n            aria-label={`Rating ${score} out of 10`}\n          >\n            {score}/10\n          </span>\n        ) : null}\n      </div>\n\n      <div className=\"flex flex-wrap items-center gap-[var(--space-2)] text-label text-muted-foreground\">\n        <span\n          aria-hidden\n          className={cn(\n            statusDotBase,\n            statusDotBlink,\n            result === \"Win\"\n              ? statusDotWin\n              : result === \"Loss\"\n                ? statusDotLoss\n                : statusDotDefault,\n            review?.status === \"new\" && statusDotPulse,\n          )}\n        />\n        {result ? (\n          <span className=\"font-medium text-card-foreground\">{result}</span>\n        ) : null}\n        {role ? (\n          <Badge\n            size=\"sm\"\n            tone=\"neutral\"\n            className=\"px-[var(--space-1)]\"\n          >\n            {role}\n          </Badge>\n        ) : null}\n      </div>\n\n      {summary ? (\n        <p className=\"line-clamp-3 text-ui text-muted-foreground\">{summary}</p>\n      ) : null}\n\n      {(onRename || onDelete) && (\n        <div className=\"flex items-center justify-end gap-[var(--space-2)]\" data-review-item-action=\"true\">\n          {onRename ? (\n            <Button\n              type=\"button\"\n              size=\"sm\"\n              variant=\"quiet\"\n              disabled={disabled}\n              onClick={(event: React.MouseEvent<HTMLButtonElement>) => {\n                event.stopPropagation();\n                handleRename();\n              }}\n            >\n              Edit\n            </Button>\n          ) : null}\n          {onDelete ? (\n            <Button\n              type=\"button\"\n              size=\"sm\"\n              variant=\"quiet\"\n              tone=\"danger\"\n              disabled={disabled}\n              onClick={(event: React.MouseEvent<HTMLButtonElement>) => {\n                event.stopPropagation();\n                onDelete();\n              }}\n            >\n              Delete\n            </Button>\n          ) : null}\n        </div>\n      )}\n    </Card>\n  );\n};\n\nexport const ReviewListItem = React.forwardRef<HTMLDivElement, ReviewListItemProps>(\n  ReviewListItemInner,\n);\n\nReviewListItem.displayName = \"ReviewListItem\";\n","\"use client\";\n\nimport * as React from \"react\";\nimport { SectionLabel } from \"@/components/reviews/SectionLabel\";\nimport { NeonIcon } from \"@/components/reviews/NeonIcon\";\nimport { Input } from \"@/components/ui/primitives/Input\";\nimport { IconButton } from \"@/components/ui/primitives/IconButton\";\nimport { Badge } from \"@/components/ui/primitives/Badge\";\nimport { Plus, FileText, Trash2 } from \"lucide-react\";\nimport { uid, usePersistentState } from \"@/lib/db\";\nimport { formatMmSs, parseMmSs } from \"@/lib/date\";\nimport type { Review, ReviewMarker } from \"@/lib/types\";\nimport {\n  LAST_MARKER_MODE_KEY,\n  LAST_MARKER_TIME_KEY,\n} from \"@/components/reviews/reviewData\";\nimport { ReviewSurface } from \"./ReviewSurface\";\n\nexport type TimestampMarkersHandle = {\n  save: () => void;\n  focusTime: () => void;\n};\n\ntype TimestampMarkersProps = {\n  markers?: ReviewMarker[];\n  commitMeta: (patch: Partial<Review>) => void;\n};\n\nfunction normalizeMarker(m: unknown): ReviewMarker {\n  const obj = m as Record<string, unknown>;\n  const id = typeof obj.id === \"string\" ? obj.id : uid(\"mark\");\n  const seconds =\n    typeof obj.seconds === \"number\"\n      ? obj.seconds\n      : typeof obj.time === \"string\"\n      ? parseMmSs(obj.time) ?? 0\n      : 0;\n  const time =\n    typeof obj.time === \"string\" ? obj.time : formatMmSs(seconds);\n  const note = typeof obj.note === \"string\" ? obj.note : \"\";\n  const noteOnly = Boolean(obj.noteOnly);\n  return { id, seconds, time, note, noteOnly };\n}\n\nfunction TimestampMarkers(\n  { markers: markers0 = [], commitMeta }: TimestampMarkersProps,\n  ref: React.Ref<TimestampMarkersHandle>,\n) {\n  const [lastMarkerMode, setLastMarkerMode] = usePersistentState<boolean>(\n    LAST_MARKER_MODE_KEY,\n    true,\n  );\n  const [lastMarkerTime, setLastMarkerTime] = usePersistentState<string>(\n    LAST_MARKER_TIME_KEY,\n    \"\",\n  );\n\n  const [markers, setMarkers] = React.useState<ReviewMarker[]>(\n    Array.isArray(markers0) ? markers0.map(normalizeMarker) : [],\n  );\n  const [useTimestamp, setUseTimestamp] = React.useState(lastMarkerMode);\n  const [tTime, setTTime] = React.useState(lastMarkerTime);\n  const [tNote, setTNote] = React.useState(\"\");\n\n  React.useEffect(() => {\n    setMarkers(Array.isArray(markers0) ? markers0.map(normalizeMarker) : []);\n  }, [markers0]);\n\n  const timeRef = React.useRef<HTMLInputElement>(null);\n  const noteRef = React.useRef<HTMLInputElement>(null);\n\n  const parsedTime = parseMmSs(tTime);\n  const timeError = useTimestamp && parsedTime === null;\n  const canAddMarker =\n    (useTimestamp ? parsedTime !== null : true) && tNote.trim().length > 0;\n\n  const sortedMarkers = React.useMemo(\n    () => [...markers].sort((a, b) => a.seconds - b.seconds),\n    [markers],\n  );\n\n  const addMarker = React.useCallback(() => {\n    const s = useTimestamp ? parsedTime : 0;\n    const safeS = s === null ? 0 : s;\n    const m: ReviewMarker = {\n      id: uid(\"mark\"),\n      time: useTimestamp ? tTime.trim() || \"00:00\" : \"00:00\",\n      seconds: safeS,\n      note: tNote.trim(),\n      noteOnly: !useTimestamp,\n    };\n    const next = [...markers, m];\n    setMarkers(next);\n    commitMeta({ markers: next });\n    setTTime(\"\");\n    setTNote(\"\");\n    (useTimestamp ? timeRef : noteRef).current?.focus();\n  }, [useTimestamp, parsedTime, tTime, tNote, markers, commitMeta]);\n\n  const removeMarker = React.useCallback(\n    (id: string) => {\n      const next = markers.filter((m) => m.id !== id);\n      setMarkers(next);\n      commitMeta({ markers: next });\n    },\n    [markers, commitMeta],\n  );\n\n  const save = React.useCallback(() => {\n    commitMeta({ markers });\n  }, [markers, commitMeta]);\n\n  React.useImperativeHandle(\n    ref,\n    () => ({\n      save,\n      focusTime: () => timeRef.current?.focus(),\n    }),\n    [save],\n  );\n\n  return (\n    <div>\n      <SectionLabel>Timestamps</SectionLabel>\n      <div className=\"mt-[var(--space-1)] flex items-center gap-[var(--space-2)]\">\n        <IconButton\n          aria-label=\"Use timestamp\"\n          title=\"Timestamp mode\"\n          aria-pressed={useTimestamp}\n          size=\"xl\"\n          variant=\"quiet\"\n          tone=\"primary\"\n          onClick={() => {\n            setUseTimestamp(true);\n            setLastMarkerMode(true);\n            setTTime(lastMarkerTime);\n          }}\n        >\n          <NeonIcon kind=\"clock\" on={useTimestamp} size=\"xl\" />\n        </IconButton>\n\n        <IconButton\n          aria-label=\"Use note only\"\n          title=\"Note-only mode\"\n          aria-pressed={!useTimestamp}\n          size=\"xl\"\n          variant=\"quiet\"\n          tone=\"accent\"\n          onClick={() => {\n            setUseTimestamp(false);\n            setLastMarkerMode(false);\n          }}\n        >\n          <NeonIcon kind=\"file\" on={!useTimestamp} size=\"xl\" />\n        </IconButton>\n      </div>\n\n      <div className=\"mt-[var(--space-3)] grid gap-[var(--space-2)]\">\n        <div className=\"grid grid-cols-[auto_1fr_auto] items-center gap-[var(--space-2)]\">\n          {useTimestamp ? (\n            <Input\n              ref={timeRef}\n              name=\"timestamp-time\"\n              value={tTime}\n              onChange={(e) => {\n                setTTime(e.target.value);\n                setLastMarkerTime(e.target.value);\n              }}\n              placeholder=\"00:00\"\n              className=\"text-center font-mono tabular-nums min-w-[calc(5ch+var(--space-5)+(var(--space-1)*4/5))] max-w-[calc(5ch+var(--space-5)+(var(--space-1)*4/5))]\"\n              aria-label=\"Timestamp time in mm:ss\"\n              inputMode=\"numeric\"\n              pattern=\"^[0-9]?\\d:[0-5]\\d$\"\n              aria-invalid={timeError ? \"true\" : undefined}\n              aria-describedby={timeError ? \"tTime-error\" : undefined}\n              onKeyDown={(e) => {\n                if (e.key === \"Enter\" && canAddMarker) {\n                  e.preventDefault();\n                  addMarker();\n                }\n              }}\n            />\n          ) : (\n            <Badge\n              as=\"span\"\n              size=\"md\"\n              className=\"min-w-[var(--space-8)] justify-center text-ui\"\n            >\n              <FileText aria-hidden className=\"icon-xs opacity-80\" />\n            </Badge>\n          )}\n\n          <Input\n            ref={noteRef}\n            name=\"timestamp-note\"\n            value={tNote}\n            onChange={(e) => setTNote(e.target.value)}\n            placeholder=\"Quick note\"\n            className=\"flex-1\"\n            onKeyDown={(e) => {\n              if (e.key === \"Enter\" && canAddMarker) {\n                e.preventDefault();\n                addMarker();\n              }\n            }}\n            aria-label=\"Timestamp note\"\n          />\n\n          <IconButton\n            aria-label=\"Add timestamp\"\n            title={canAddMarker ? \"Add timestamp\" : \"Enter details\"}\n            size=\"md\"\n            iconSize=\"sm\"\n            variant=\"default\"\n            disabled={!canAddMarker}\n            onClick={addMarker}\n          >\n            <Plus />\n          </IconButton>\n        </div>\n        {timeError && (\n          <p id=\"tTime-error\" className=\"mt-[var(--space-1)] text-ui text-danger\">\n            Enter time as mm:ss\n          </p>\n        )}\n\n        {sortedMarkers.length === 0 ? (\n          <div className=\"mt-[var(--space-2)] text-ui text-muted-foreground\">No timestamps yet.</div>\n        ) : (\n          <ul className=\"mt-[var(--space-3)] space-y-[var(--space-2)]\">\n            {sortedMarkers.map((m) => (\n              <ReviewSurface\n                as=\"li\"\n                key={m.id}\n                padding=\"sm\"\n                className=\"grid grid-cols-[auto_1fr_auto] items-center gap-[var(--space-2)]\"\n              >\n                {m.noteOnly ? (\n                  <Badge\n                    as=\"span\"\n                    size=\"md\"\n                    className=\"min-w-[var(--space-8)] justify-center text-ui\"\n                  >\n                    <FileText aria-hidden className=\"icon-xs opacity-80\" />\n                  </Badge>\n                ) : (\n                  <Badge\n                    as=\"span\"\n                    size=\"md\"\n                    className=\"min-w-[var(--space-8)] justify-center font-mono tabular-nums text-ui\"\n                  >\n                    {m.time}\n                  </Badge>\n                )}\n\n                <span className=\"truncate text-ui\">{m.note}</span>\n                <IconButton\n                  aria-label=\"Delete timestamp\"\n                  title=\"Delete timestamp\"\n                  size=\"sm\"\n                  iconSize=\"sm\"\n                  variant=\"quiet\"\n                  onClick={() => removeMarker(m.id)}\n                >\n                  <Trash2 />\n                </IconButton>\n              </ReviewSurface>\n            ))}\n          </ul>\n        )}\n      </div>\n    </div>\n  );\n}\n\nconst TimestampMarkersComponent = React.forwardRef<\n  TimestampMarkersHandle,\n  TimestampMarkersProps\n>(TimestampMarkers)\n\nTimestampMarkersComponent.displayName = \"TimestampMarkers\"\n\nexport { TimestampMarkersComponent as TimestampMarkers }\n","\"use client\";\n\nimport * as React from \"react\";\nimport { SectionLabel } from \"@/components/reviews/SectionLabel\";\nimport { PillarBadge } from \"@/components/ui/league/pillars/PillarBadge\";\nimport { ALL_PILLARS } from \"@/components/reviews/reviewData\";\nimport { cn } from \"@/lib/utils\";\nimport type { Pillar, Review } from \"@/lib/types\";\nimport styles from \"./NeonPillarChip.module.css\";\n\nexport type PillarsSelectorHandle = {\n  save: () => void;\n};\n\ntype PillarsSelectorProps = {\n  pillars?: Pillar[];\n  commitMeta: (patch: Partial<Review>) => void;\n};\n\nfunction NeonPillarChip({\n  active,\n  children,\n}: {\n  active: boolean;\n  children: React.ReactNode;\n}) {\n  const prev = React.useRef(active);\n  const [phase, setPhase] = React.useState<\n    \"steady-on\" | \"ignite\" | \"off\" | \"powerdown\"\n  >(active ? \"steady-on\" : \"off\");\n\n  React.useEffect(() => {\n    if (active !== prev.current) {\n      if (active) {\n        setPhase(\"ignite\");\n        const t = setTimeout(() => setPhase(\"steady-on\"), 620);\n        prev.current = active;\n        return () => clearTimeout(t);\n      } else {\n        setPhase(\"powerdown\");\n        const t = setTimeout(() => setPhase(\"off\"), 360);\n        prev.current = active;\n        return () => clearTimeout(t);\n      }\n    }\n    prev.current = active;\n  }, [active]);\n\n  const lit = phase === \"ignite\" || phase === \"steady-on\";\n\n  return (\n    <span\n      className={cn(\"relative inline-flex\", styles.root)}\n      data-lit={lit ? \"true\" : undefined}\n      data-phase={phase}\n    >\n      <span\n        className={cn(\n          \"pointer-events-none absolute inset-0 rounded-card r-card-lg\",\n          styles.layer,\n          styles.aura,\n        )}\n        aria-hidden\n      />\n      <span\n        className={cn(\n          \"pointer-events-none absolute inset-0 rounded-card r-card-lg\",\n          styles.layer,\n          styles.neon,\n        )}\n        aria-hidden\n      />\n      {children}\n    </span>\n  );\n}\n\nfunction PillarsSelector(\n  { pillars: pillars0 = [], commitMeta }: PillarsSelectorProps,\n  ref: React.Ref<PillarsSelectorHandle>,\n) {\n  const [pillars, setPillars] = React.useState<Pillar[]>(pillars0);\n\n  React.useEffect(() => {\n    setPillars(Array.isArray(pillars0) ? [...pillars0] : []);\n  }, [pillars0]);\n\n  const togglePillar = React.useCallback(\n    (p: Pillar) => {\n      setPillars((prev) => {\n        const has = prev.includes(p);\n        const next = has ? prev.filter((x) => x !== p) : prev.concat(p);\n        commitMeta({ pillars: next });\n        return next;\n      });\n    },\n    [commitMeta],\n  );\n\n  const save = React.useCallback(() => {\n    commitMeta({ pillars });\n  }, [pillars, commitMeta]);\n\n  React.useImperativeHandle(ref, () => ({ save }), [save]);\n\n  function onIconKey(e: React.KeyboardEvent, handler: () => void) {\n    if (e.key === \" \" || e.key === \"Enter\") {\n      e.preventDefault();\n      handler();\n    }\n  }\n\n  return (\n    <div>\n      <SectionLabel>Pillars</SectionLabel>\n      <div className=\"flex flex-wrap gap-[var(--space-2)]\">\n        {ALL_PILLARS.map((p) => {\n          const active = pillars.includes(p);\n          return (\n            <button\n              key={p}\n              type=\"button\"\n              onClick={() => togglePillar(p)}\n              onKeyDown={(e) => onIconKey(e, () => togglePillar(p))}\n              aria-pressed={active}\n              className=\"rounded-[var(--radius-2xl)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring\"\n              title={active ? `${p} selected` : `Select ${p}`}\n            >\n              <NeonPillarChip active={active}>\n                <PillarBadge pillar={p} size=\"md\" active={active} as=\"span\" />\n              </NeonPillarChip>\n            </button>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nconst PillarsSelectorComponent = React.forwardRef<\n  PillarsSelectorHandle,\n  PillarsSelectorProps\n>(PillarsSelector)\n\nPillarsSelectorComponent.displayName = \"PillarsSelector\"\n\nexport { PillarsSelectorComponent as PillarsSelector }\n","import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { NeonIcon } from \"@/components/reviews/NeonIcon\";\nimport { ScoreMeter } from \"./ScoreMeter\";\n\nexport type ReviewSummaryScoreProps = {\n  score: number;\n  msg: string;\n  ScoreIcon: React.ComponentType<{ className?: string }>;\n  scoreIconCls?: string;\n  focusOn?: boolean;\n  focus?: number;\n  focusMsg?: string;\n};\n\nexport function ReviewSummaryScore({\n  score,\n  msg,\n  ScoreIcon,\n  scoreIconCls,\n  focusOn,\n  focus,\n  focusMsg,\n}: ReviewSummaryScoreProps) {\n  return (\n    <div>\n      <ScoreMeter\n        label=\"Score\"\n        value={score}\n        tone=\"score\"\n        trackProps={{ className: \"px-[var(--space-3)]\" }}\n        detail={\n          <>\n            <ScoreIcon\n              className={cn(\"h-[var(--space-4)] w-[var(--space-4)]\", scoreIconCls)}\n            />\n            <span>{msg}</span>\n          </>\n        }\n      />\n      {focusOn && typeof focus === \"number\" && focusMsg && (\n        <div className=\"mt-[var(--space-4)] space-y-[var(--space-2)]\">\n          <div className=\"mb-[var(--space-2)] flex items-center gap-[var(--space-2)]\" aria-label=\"Focus\">\n            <NeonIcon kind=\"brain\" on={true} size=\"xl\" staticGlow />\n            <div className=\"h-[var(--hairline-w)] flex-1 bg-gradient-to-r from-foreground/20 via-foreground/5 to-transparent\" />\n          </div>\n          <ScoreMeter\n            value={focus}\n            tone=\"focus\"\n            trackProps={{ className: \"px-[var(--space-3)]\" }}\n            detail={<span>{focusMsg}</span>}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n","\"use client\";\n\r\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport type { Review } from \"@/lib/types\";\nimport { uid } from \"@/lib/db\";\nimport { ReviewsPage } from \"./ReviewsPage\";\nimport { primeReviewSearch } from \"./reviewSearch\";\nimport { useReviews } from \"./useReviews\";\n\r\n/**\r\n * ReviewPage  container with local-first persistence.\n * Hydration-safe: usePersistentState returns initial value on first render, then loads.\n*/\nexport function ReviewPage() {\n  const { reviews, setReviews, isHydrated } = useReviews();\n  const [selectedId, setSelectedId] = useState<string | null>(null);\n\n  // After local DB hydration, select the first review if none is chosen\n  useEffect(() => {\n    if (!selectedId && reviews.length > 0) {\n      setSelectedId(reviews[0].id);\n    }\n  }, [reviews, selectedId]);\n\n  // Auto-heal selection if the selected review gets deleted or doesn't exist yet\n  useEffect(() => {\n    if (selectedId && !reviews.some(r => r.id === selectedId)) {\n      setSelectedId(reviews[0]?.id ?? null);\n    }\r\n  }, [reviews, selectedId]);\r\n\r\n  const onCreate = useCallback(() => {\r\n    const now = Date.now();\r\n    const fresh: Review = {\n      id: uid(\"rev\"),\n      title: \"Untitled Review\",\n      opponent: \"\",\n      lane: \"\",\n      side: \"Blue\",\n      patch: \"\",\n      duration: \"\",\n      matchup: \"\",\n      tags: [],\n      pillars: [],\r\n      markers: [],        // required by type\r\n      notes: \"\",\n      createdAt: now,\n    };\n    primeReviewSearch(fresh);\n    setReviews(prev => [fresh, ...prev]);\n    setSelectedId(fresh.id);\r\n  }, [setReviews]);\r\n\r\n  const onSelect = useCallback((id: string) => setSelectedId(id), []);\r\n\r\n  const patchById = useCallback((id: string, patch: Partial<Review>) => {\n    setReviews(prev =>\n      prev.map(r => (r.id === id ? primeReviewSearch({ ...r, ...patch }) : r)),\n    );\n  }, [setReviews]);\n\r\n  const onRename = useCallback((id: string, nextTitle: string) => {\r\n    patchById(id, { title: (nextTitle || \"\").trim() || \"Untitled Review\" });\r\n  }, [patchById]);\r\n\r\n  const onDelete = useCallback((id: string) => {\r\n    setReviews(prev => prev.filter(r => r.id !== id));\r\n    setSelectedId(prev => (prev === id ? null : prev));\r\n  }, [setReviews]);\r\n\r\n  const onChangeNotes = useCallback((id: string, nextNotes: string) => {\r\n    patchById(id, { notes: nextNotes });\r\n  }, [patchById]);\r\n\r\n  const onChangeTags = useCallback((id: string, nextTags: string[]) => {\r\n    patchById(id, { tags: nextTags });\r\n  }, [patchById]);\r\n\r\n  const onChangeMeta = useCallback((id: string, patch: Partial<Review>) => {\r\n    patchById(id, patch);\r\n  }, [patchById]);\r\n\r\n  const safeSelectedId = useMemo(\r\n    () => (reviews.some(r => r.id === selectedId) ? selectedId : null),\r\n    [reviews, selectedId]\r\n  );\r\n\r\n  return (\n    <ReviewsPage\n      reviews={reviews}\n      loading={!isHydrated}\n      selectedId={safeSelectedId}\n      onSelect={onSelect}\r\n      onCreate={onCreate}\r\n      onRename={onRename}\r\n      onDelete={onDelete}\r\n      onChangeNotes={onChangeNotes}\r\n      onChangeTags={onChangeTags}\r\n      onChangeMeta={onChangeMeta}\r\n    />\r\n  );\n}\n","// src/components/reviews/index.ts\nexport { ReviewPage as ReviewPage } from \"./ReviewPage\";\nexport { ReviewsPage as ReviewsPage } from \"./ReviewsPage\";\nexport { ReviewEditor as ReviewEditor } from \"./ReviewEditor\";\nexport { ReviewList as ReviewList } from \"./ReviewList\";\nexport { ReviewListItem as ReviewListItem } from \"./ReviewListItem\";\nexport { ReviewSummary as ReviewSummary } from \"./ReviewSummary\";\nexport { ReviewSummaryScore as ReviewSummaryScore } from \"./ReviewSummaryScore\";\nexport { ReviewSummaryPillars as ReviewSummaryPillars } from \"./ReviewSummaryPillars\";\nexport { ReviewSummaryTimestamps as ReviewSummaryTimestamps } from \"./ReviewSummaryTimestamps\";\nexport { ReviewSummaryNotes as ReviewSummaryNotes } from \"./ReviewSummaryNotes\";\nexport { RoleSelector as RoleSelector } from \"./RoleSelector\";\nexport { ReviewPanel as ReviewPanel } from \"./ReviewPanel\";\nexport { NeonIcon as NeonIcon } from \"./NeonIcon\";\nexport { useReviewFilter } from \"./useReviewFilter\";\nexport { LaneOpponentForm as LaneOpponentForm } from \"./LaneOpponentForm\";\nexport { ResultScoreSection as ResultScoreSection } from \"./ResultScoreSection\";\nexport { PillarsSelector as PillarsSelector } from \"./PillarsSelector\";\nexport { TimestampMarkers as TimestampMarkers } from \"./TimestampMarkers\";\nexport { ReviewSurface as ReviewSurface } from \"./ReviewSurface\";\nexport { ReviewSliderTrack as ReviewSliderTrack } from \"./ReviewSliderTrack\";\nexport { ScoreMeter as ScoreMeter } from \"./ScoreMeter\";\nexport { useReviews } from \"./useReviews\";\n","import * as React from \"react\";\nimport { SectionLabel } from \"@/components/reviews/SectionLabel\";\nimport { cn } from \"@/lib/utils\";\nimport { type ReviewSurfaceProps, ReviewSurface } from \"./ReviewSurface\";\nimport {\n  type ReviewSliderTone,\n  type ReviewSliderVariant, ReviewSliderTrack } from \"./ReviewSliderTrack\";\n\nconst formatDefaultValue = (value: number) => `${value}/10`;\n\nexport type ScoreMeterProps = {\n  value: number;\n  label?: string;\n  tone?: ReviewSliderTone;\n  variant?: ReviewSliderVariant;\n  detail?: React.ReactNode;\n  control?: React.ReactNode;\n  className?: string;\n  surfaceProps?: Omit<ReviewSurfaceProps<\"div\">, \"children\">;\n  trackProps?: Omit<\n    React.ComponentPropsWithoutRef<typeof ReviewSliderTrack>,\n    \"value\" | \"tone\" | \"variant\"\n  >;\n  valueFormatter?: (value: number) => React.ReactNode;\n};\n\nconst isElementWithProps = (\n  node: React.ReactNode,\n): node is React.ReactElement<Record<string, unknown>> =>\n  React.isValidElement(node);\n\nexport function ScoreMeter({\n  value,\n  label,\n  tone = \"score\",\n  variant = \"display\",\n  detail,\n  control,\n  className,\n  surfaceProps,\n  trackProps,\n  valueFormatter,\n}: ScoreMeterProps) {\n  const {\n    className: surfaceClassName,\n    padding = \"inline\",\n    ...surfaceRest\n  } = surfaceProps ?? {};\n  const { className: trackClassName, ...trackRest } = trackProps ?? {};\n  const formatValue = valueFormatter ?? formatDefaultValue;\n  const isInteractive = variant === \"input\";\n\n  const labelId = React.useId();\n  let labelledControl: React.ReactNode = control;\n\n  if (label && isElementWithProps(control)) {\n    const existing = control.props[\"aria-labelledby\"];\n    const merged = [\n      typeof existing === \"string\" ? existing : undefined,\n      labelId,\n    ]\n      .filter(Boolean)\n      .join(\" \");\n\n    labelledControl = React.cloneElement(control, {\n      \"aria-labelledby\": merged,\n    } as Record<string, unknown>);\n  }\n\n  return (\n    <div className={className}>\n      {label ? <SectionLabel id={labelId}>{label}</SectionLabel> : null}\n      <ReviewSurface\n        padding={padding}\n        {...surfaceRest}\n        className={cn(\n          \"relative h-[var(--space-7)]\",\n          isInteractive && \"group\",\n          surfaceClassName,\n        )}\n      >\n        {labelledControl}\n        <ReviewSliderTrack\n          value={value}\n          tone={tone}\n          variant={variant}\n          {...trackRest}\n          className={cn(trackClassName)}\n        />\n      </ReviewSurface>\n      <div className=\"mt-[var(--space-1)] flex items-center gap-[var(--space-2)] text-ui text-muted-foreground\">\n        <span className=\"pill h-[var(--space-5)] px-[var(--space-2)] text-ui\">\n          {formatValue(value)}\n        </span>\n        {detail}\n      </div>\n    </div>\n  );\n}\n","import * as React from \"react\";\nimport type { ReviewMarker } from \"@/lib/types\";\nimport { NeonIcon } from \"@/components/reviews/NeonIcon\";\nimport { ReviewSurface } from \"./ReviewSurface\";\nimport { FileText } from \"lucide-react\";\n\nexport type ReviewSummaryTimestampsProps = {\n  markers: ReviewMarker[];\n};\n\nexport function ReviewSummaryTimestamps({\n  markers,\n}: ReviewSummaryTimestampsProps) {\n  const { sortedMarkers, hasTimed, hasNoteOnly } = React.useMemo(\n    (): {\n      sortedMarkers: ReviewMarker[];\n      hasTimed: boolean;\n      hasNoteOnly: boolean;\n    } => {\n      if (markers.length === 0) {\n        return {\n          sortedMarkers: [],\n          hasTimed: false,\n          hasNoteOnly: false,\n        };\n      }\n\n      let hasTimedMarker = false;\n      for (const marker of markers) {\n        if (!marker.noteOnly) {\n          hasTimedMarker = true;\n          break;\n        }\n      }\n\n      const sorted =\n        markers.length > 1\n          ? [...markers].sort((a, b) => a.seconds - b.seconds)\n          : [...markers];\n\n      return {\n        sortedMarkers: sorted,\n        hasTimed: hasTimedMarker,\n        hasNoteOnly: !hasTimedMarker,\n      };\n    },\n    [markers],\n  );\n\n  return (\n    <div>\n      <div className=\"mb-[var(--space-2)] flex items-center gap-[var(--space-2)]\" aria-label=\"Timestamps\">\n        <NeonIcon kind=\"clock\" on={!!hasTimed} size=\"xl\" staticGlow />\n        <NeonIcon kind=\"file\" on={!!hasNoteOnly} size=\"xl\" staticGlow />\n        <div className=\"h-[var(--hairline-w)] flex-1 bg-gradient-to-r from-foreground/20 via-foreground/5 to-transparent\" />\n      </div>\n      {!sortedMarkers.length ? (\n        <div className=\"text-ui text-muted-foreground\">No timestamps yet.</div>\n      ) : (\n        <ul className=\"space-y-[var(--space-2)]\">\n          {sortedMarkers.map((m) => (\n              <ReviewSurface\n                as=\"li\"\n                key={m.id}\n                padding=\"sm\"\n                className=\"grid grid-cols-[auto_1fr] items-center gap-[var(--space-2)]\"\n              >\n                {m.noteOnly ? (\n                  <span\n                    className=\"pill flex h-[var(--space-6)] w-[calc(var(--space-6)+var(--space-2))] items-center justify-center px-0\"\n                    title=\"Note\"\n                    aria-label=\"Note\"\n                  >\n                    <FileText aria-hidden className=\"icon-xs opacity-80\" />\n                  </span>\n                ) : (\n                  <span className=\"pill h-[var(--space-6)] px-[var(--space-3)] text-ui font-mono tabular-nums leading-none\">\n                    {m.time ?? \"00:00\"}\n                  </span>\n                )}\n                <span className=\"truncate text-ui\">{m.note || \"\"}</span>\n              </ReviewSurface>\n            ))}\n        </ul>\n      )}\n    </div>\n  );\n}\n","import * as React from \"react\";\nimport type { Pillar } from \"@/lib/types\";\nimport { SectionLabel } from \"@/components/reviews/SectionLabel\";\nimport { PillarBadge } from \"@/components/ui/league/pillars/PillarBadge\";\n\nfunction StaticNeonWrap({ children }: { children: React.ReactNode }) {\n  return (\n    <span className=\"relative inline-flex\">\n      <span\n        aria-hidden\n        className=\"pointer-events-none absolute inset-0 rounded-card r-card-lg bg-gradient-to-r from-accent to-primary opacity-40 blur\"\n      />\n      <span\n        aria-hidden\n        className=\"pointer-events-none absolute inset-0 rounded-card r-card-lg ring-1 ring-ring/35\"\n      />\n      <span className=\"relative z-10\">{children}</span>\n    </span>\n  );\n}\n\nexport type ReviewSummaryPillarsProps = {\n  pillars?: Pillar[];\n};\n\nexport function ReviewSummaryPillars({\n  pillars,\n}: ReviewSummaryPillarsProps) {\n  return (\n    <div>\n      <SectionLabel>Pillars</SectionLabel>\n      {Array.isArray(pillars) && pillars.length > 0 ? (\n        <div className=\"flex flex-wrap gap-[var(--space-2)]\">\n          {pillars.map((p) => (\n            <StaticNeonWrap key={p}>\n              <PillarBadge pillar={p} size=\"md\" active />\n            </StaticNeonWrap>\n          ))}\n        </div>\n      ) : (\n        <div className=\"text-ui text-muted-foreground\">\n          No pillars selected.\n        </div>\n      )}\n    </div>\n  );\n}\n","\"use client\";\n\nimport * as React from \"react\";\nimport { Ghost } from \"lucide-react\";\n\nimport { Badge } from \"@/components/ui\";\nimport type { BadgeProps } from \"@/components/ui\";\nimport { cn } from \"@/lib/utils\";\n\nexport interface GenericListStatus {\n  label: React.ReactNode;\n  tone?: BadgeProps[\"tone\"];\n}\n\nexport interface GenericListEmptyState {\n  title: React.ReactNode;\n  description?: React.ReactNode;\n  action?: React.ReactNode;\n}\n\nexport interface GenericListItemContext {\n  index: number;\n  statusBadge: React.ReactNode | null;\n}\n\nexport interface GenericListProps<T> {\n  items: readonly T[];\n  renderItem: (item: T, context: GenericListItemContext) => React.ReactNode;\n  getKey?: (item: T, index: number) => React.Key;\n  getStatus?: (item: T) => GenericListStatus | null | undefined;\n  emptyState?: GenericListEmptyState;\n  className?: string;\n  listClassName?: string;\n  itemClassName?: string;\n  testId?: string;\n}\n\nconst DEFAULT_EMPTY: GenericListEmptyState = {\n  title: \"Nothing here yet\",\n  description: \"Add an item to get started.\",\n};\n\nexport function GenericList<T>({\n  items,\n  renderItem,\n  getKey,\n  getStatus,\n  emptyState,\n  className,\n  listClassName,\n  itemClassName,\n  testId,\n}: GenericListProps<T>) {\n  if (!items.length) {\n    const { title, description, action } = emptyState ?? DEFAULT_EMPTY;\n    return (\n      <div\n        className={cn(\n          \"relative isolate flex flex-col items-center justify-center gap-[var(--space-3)] overflow-hidden\",\n          \"rounded-[var(--control-radius-lg)] border border-card-hairline/60 bg-card/60 p-[var(--space-6)] text-center\",\n          \"text-ui text-muted-foreground glitch-card\",\n          className,\n        )}\n        aria-live=\"polite\"\n        data-testid={testId}\n      >\n        <span\n          aria-hidden\n          className=\"glitch-anim inline-flex items-center justify-center rounded-full border border-border/40 bg-card/70 p-[var(--space-3)] text-muted-foreground motion-reduce:animate-none\"\n          data-text=\"\"\n        >\n          <Ghost aria-hidden className=\"size-[var(--space-5)]\" />\n        </span>\n        <div className=\"space-y-[var(--space-1)]\">\n          <p className=\"text-card-foreground\">{title}</p>\n          {description ? <p>{description}</p> : null}\n        </div>\n        {action}\n      </div>\n    );\n  }\n\n  return (\n    <div className={className} data-testid={testId}>\n      <ul className={cn(\"m-0 list-none p-0\", listClassName)}>\n        {items.map((item, index) => {\n          const key = getKey ? getKey(item, index) : index;\n          const statusInfo = getStatus?.(item);\n          const statusBadge = statusInfo ? (\n            <Badge tone={statusInfo.tone ?? \"neutral\"} size=\"sm\">\n              {statusInfo.label}\n            </Badge>\n          ) : null;\n\n          return (\n            <li key={key} className={cn(\"list-none\", itemClassName)}>\n              {renderItem(item, { index, statusBadge })}\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n}\n","import { cn } from \"@/lib/utils\";\nimport * as React from \"react\";\n\nimport styles from \"./ReviewSliderTrack.module.css\";\n\nexport type ReviewSliderTone = \"score\" | \"focus\";\nexport type ReviewSliderVariant = \"input\" | \"display\";\n\ntype ReviewSliderTrackProps = {\n  value: number;\n  tone?: ReviewSliderTone;\n  variant?: ReviewSliderVariant;\n  className?: string;\n  trackClassName?: string;\n  fillClassName?: string;\n  knobClassName?: string;\n  glitch?: boolean;\n};\n\nconst toneTokenClassNames: Record<ReviewSliderTone, string> = {\n  score:\n    \"[--slider-fill-tint:hsl(var(--accent-1)/0.35)] [--slider-fill-tint-hover:hsl(var(--accent-1)/0.45)] [--slider-fill-tint-active:hsl(var(--accent-1)/0.55)] [--slider-focus-ring:var(--ring-contrast)] [--slider-knob-hover-surface:hsl(var(--accent-1)/0.28)] [--slider-knob-active-surface:hsl(var(--accent-1)/0.36)] [--slider-knob-focus-ring:var(--ring-contrast)]\",\n  focus:\n    \"[--slider-fill-tint:hsl(var(--focus)/0.35)] [--slider-fill-tint-hover:hsl(var(--focus)/0.45)] [--slider-fill-tint-active:hsl(var(--focus)/0.55)] [--slider-focus-ring:var(--ring-contrast)] [--slider-knob-hover-surface:hsl(var(--focus)/0.3)] [--slider-knob-active-surface:hsl(var(--focus)/0.4)] [--slider-knob-focus-ring:var(--ring-contrast)]\",\n};\n\nconst knobSizeByVariant: Record<ReviewSliderVariant, string> = {\n  display: \"h-[calc(var(--space-4)+var(--space-1))] w-[calc(var(--space-4)+var(--space-1))] -translate-x-1/2\",\n  input:\n    \"h-[calc(var(--space-4)+var(--space-1))] w-[calc(var(--space-4)+var(--space-1))]\",\n};\n\nconst ReviewSliderTrack = ({\n  value,\n  tone = \"score\",\n  variant = \"input\",\n  className,\n  trackClassName,\n  fillClassName,\n  knobClassName,\n  glitch = false,\n}: ReviewSliderTrackProps) => {\n  const clamped = Math.round(Math.min(10, Math.max(0, value)));\n  const isInteractive = variant === \"input\";\n\n  return (\n    <div\n      className={cn(\n        \"group/slider absolute left-[var(--space-4)] right-[var(--space-4)] top-1/2 -translate-y-1/2\",\n        \"[--slider-fill-background:var(--edge-iris)]\",\n        glitch && styles.glitch,\n        toneTokenClassNames[tone],\n        styles.root,\n        className,\n      )}\n      data-tone={tone}\n      data-variant={variant}\n      data-value={clamped}\n      data-glitch={glitch ? \"true\" : undefined}\n    >\n      <div\n        className={cn(\n          \"relative h-[var(--space-2)] w-full overflow-hidden rounded-full bg-muted shadow-[var(--slider-track-shadow)]\",\n          \"before:pointer-events-none before:absolute before:inset-0 before:rounded-full before:bg-[var(--card-overlay-scanlines)] before:opacity-0 before:transition-opacity before:duration-motion-sm before:ease-out\",\n          isInteractive\n            ? \"group-hover/slider:before:opacity-70 group-active/slider:before:opacity-90 group-focus-visible/slider:before:opacity-80\"\n            : undefined,\n          trackClassName,\n        )}\n      >\n        <div\n          className={cn(\n            \"absolute left-0 top-0 h-[var(--space-2)] rounded-full [background:var(--slider-fill-background)] shadow-[var(--slider-fill-shadow)]\",\n            \"after:pointer-events-none after:absolute after:inset-0 after:rounded-full after:bg-[--slider-fill-tint] after:opacity-80 after:transition-colors after:duration-motion-sm after:ease-out\",\n            variant === \"display\" ? \"progress-fill\" : undefined,\n            styles.fill,\n            isInteractive &&\n              cn(\n                \"ring-1 ring-transparent transition-[box-shadow,opacity] duration-motion-sm ease-out\",\n                \"group-hover/slider:[--slider-fill-shadow:var(--slider-fill-shadow-hover)] group-active/slider:[--slider-fill-shadow:var(--slider-fill-shadow-active)]\",\n                \"group-hover/slider:after:bg-[--slider-fill-tint-hover] group-active/slider:after:bg-[--slider-fill-tint-active]\",\n                \"group-focus-visible/slider:ring-[var(--slider-focus-ring)]\",\n              ),\n            fillClassName,\n          )}\n        />\n        <div\n          className={cn(\n            \"absolute top-1/2 -translate-y-1/2 rounded-full border border-border bg-card shadow-[var(--slider-knob-shadow)]\",\n            knobSizeByVariant[variant],\n            styles.knob,\n            isInteractive &&\n              cn(\n                \"transition-[background-color,border-color,box-shadow] duration-motion-sm ease-out\",\n                \"group-hover/slider:bg-[--slider-knob-hover-surface] group-active/slider:bg-[--slider-knob-active-surface] group-hover/slider:border-transparent group-active/slider:border-transparent\",\n                \"group-hover/slider:[--slider-knob-shadow:var(--slider-knob-shadow-hover)] group-active/slider:[--slider-knob-shadow:var(--slider-knob-shadow-active)]\",\n                \"group-focus-visible/slider:ring-2 group-focus-visible/slider:ring-[var(--slider-knob-focus-ring)] group-focus-visible/slider:shadow-[var(--slider-knob-shadow-active)]\",\n              ),\n            knobClassName,\n          )}\n        />\n      </div>\n    </div>\n  );\n};\nexport { ReviewSliderTrack };\n","import type { ComponentType } from \"react\";\nimport type { Pillar, Role } from \"@/lib/types\";\nimport {\r\n  Flag,\r\n  MapPin,\r\n  Target,\r\n  Crosshair,\r\n  Shield,\r\n  Skull,\r\n  Meh,\r\n  Smile,\r\n  Trophy,\r\n} from \"lucide-react\";\r\n\r\n/** Persisted key for role memory */\nexport const LAST_ROLE_KEY = \"last_role\";\n\n/** Persisted keys for timestamp preferences */\nexport const LAST_MARKER_MODE_KEY = \"last_marker_mode\";\nexport const LAST_MARKER_TIME_KEY = \"last_marker_time\";\n\r\n/** Lane/pillar enums used in UI */\nexport const ALL_PILLARS: Pillar[] = [\n  \"Wave\",\r\n  \"Trading\",\r\n  \"Vision\",\r\n  \"Tempo\",\r\n  \"Positioning\",\r\n  \"Comms\",\r\n];\r\n\r\n/** Lane/role options shown as segmented buttons in the editor */\r\nexport const ROLE_OPTIONS: Array<{\n  value: Role;\n  label: string;\n  Icon: ComponentType<{ className?: string }>;\n}> = [\n  { value: \"TOP\", label: \"Top\", Icon: Flag },\n  { value: \"JUNGLE\", label: \"Jungle\", Icon: MapPin },\n  { value: \"MID\", label: \"Mid\", Icon: Target },\n  { value: \"BOT\", label: \"Bot\", Icon: Crosshair },\n  { value: \"SUPPORT\", label: \"Support\", Icon: Shield },\n];\n\r\n/** Deterministic index selector (cheap string hash) */\r\nexport function pickIndex(seed: string, modulo: number): number {\r\n  let h = 2166136261 >>> 0;\r\n  for (let i = 0; i < seed.length; i++) {\r\n    h ^= seed.charCodeAt(i);\r\n    h = Math.imul(h, 16777619);\r\n  }\r\n  return Math.abs(h) % Math.max(1, modulo);\r\n}\r\n\r\n/** Icon + color class for a score bucket */\r\nexport function scoreIcon(score: number): {\n  Icon: ComponentType<{ className?: string }>;\n  cls: string;\n} {\n  if (score <= 3) return { Icon: Skull, cls: \"text-danger\" };\n  if (score <= 6) return { Icon: Meh, cls: \"text-warning\" };\n  if (score >= 9) return { Icon: Trophy, cls: \"text-success\" };\n  return { Icon: Smile, cls: \"text-success/80\" };\n}\n\r\n/** Short quips for performance score 0..10 (5 per tier) */\r\nexport const SCORE_POOLS: Record<number, string[]> = {\r\n  0: [\r\n    \"The minions deserved better.\",\r\n    \"Gameplay was a rumor.\",\r\n    \"Clicked everything but enemies.\",\r\n    \"Ward diff, player diff, life diff.\",\r\n    \"Report the mouse.\",\r\n  ],\r\n  1: [\r\n    \"Bot stood for Accidentally Donated CS.\",\n    \"Bought items, forgot purpose.\",\r\n    \"Reinvented throwing.\",\r\n    \"Hands on cooldown.\",\r\n    \"Tutorial island energy.\",\r\n  ],\r\n  2: [\r\n    \"Bronze with ambitions.\",\r\n    \"Lane? Optional curriculum.\",\r\n    \"You dodged responsibility.\",\r\n    \"Macro via astrology.\",\r\n    \"Teamfight interpretive dance.\",\r\n  ],\r\n  3: [\r\n    \"A for effort, C- for results.\",\r\n    \"Mechanics doing jazz.\",\r\n    \"Outplayed by minions twice.\",\r\n    \"You pinged, then prayed.\",\r\n    \"Drafted regrets.\",\r\n  ],\r\n  4: [\r\n    \"Almost warmed up.\",\r\n    \"Half-commit legend.\",\r\n    \"Vision? Soon.\",\r\n    \"Clicks had ideas.\",\r\n    \"Tempo decided later.\",\r\n  ],\r\n  5: [\r\n    \"Fine is fine.\",\r\n    \"Macro microwave-safe.\",\r\n    \"Minimap every other beat.\",\r\n    \"You and wave negotiated.\",\r\n    \"Serviceable decisions.\",\r\n  ],\r\n  6: [\r\n    \"Solid lane brain.\",\r\n    \"Reads landing.\",\r\n    \"Cooldowns mostly tracked.\",\r\n    \"Pressure was real.\",\r\n    \"No tilt tax paid.\",\r\n  ],\r\n  7: [\r\n    \"Calm hands, sharp reads.\",\r\n    \"Plates with purpose.\",\r\n    \"Camera was a weapon.\",\r\n    \"Punished habits on sight.\",\r\n    \"Macro had receipts.\",\r\n  ],\r\n  8: [\r\n    \"Gamer zen detected.\",\r\n    \"Tempo conductor arc.\",\r\n    \"You were the pressure.\",\r\n    \"Plays predicted Twitch chat.\",\r\n    \"Crisp fundamentals.\",\r\n  ],\r\n  9: [\r\n    \"Hyperlocked menace.\",\r\n    \"Three moves ahead.\",\r\n    \"Teamfight librarian.\",\r\n    \"Objective whisperer.\",\r\n    \"Clean, clinical, cold.\",\r\n  ],\r\n  10: [\r\n    \"Coach took notes.\",\r\n    \"Patch notes feared you.\",\r\n    \"Main-character episode.\",\r\n    \"Fourth monitor: sixth sense.\",\r\n    \"Perfection speedrun.\",\r\n  ],\r\n};\r\n\r\n/** Meme pools for FOCUS rating 0..10 (10 per tier) */\r\nexport const FOCUS_POOLS: Record<number, string[]> = {\r\n  0: [\r\n    \"Alt-tabbed to Narnia.\",\r\n    \"Monitor was a mirror.\",\r\n    \"Clicked grass for CS.\",\r\n    \"AFK but spiritually.\",\r\n    \"Pinged, then vanished.\",\r\n    \"Brain.exe not found.\",\r\n    \"Eyes open, mind closed.\",\r\n    \"Full spectator mode.\",\r\n    \"AFK farming excuses.\",\r\n    \"Controller unplugged vibes.\",\r\n  ],\r\n  1: [\r\n    \"Goldfish memory arc.\",\r\n    \"UI: on. Brain: off.\",\r\n    \"Pressed S to think.\",\r\n    \"Coffee said no.\",\r\n    \"Mini-map lore only.\",\r\n    \"Mind on cooldown.\",\r\n    \"Focus DLC locked.\",\r\n    \"Alt-tab speedrun.\",\r\n    \"Micro naps mid-fight.\",\r\n    \"Tunnel vision tutorial.\",\r\n  ],\r\n  2: [\r\n    \"Half-baked reads.\",\r\n    \"Right-click regrets.\",\r\n    \"Macro by horoscope.\",\r\n    \"Hovering IRL.\",\r\n    \"Lane? Optional.\",\r\n    \"Notifications won.\",\r\n    \"Pinged danger for vibes.\",\r\n    \"Daydream jungling.\",\r\n    \"Cait traps for dcor.\",\r\n    \"Focus at 144p.\",\r\n  ],\r\n  3: [\r\n    \"Almost warmed up.\",\r\n    \"Focus in beta.\",\r\n    \"Dodged one skill. Pride.\",\r\n    \"Cursor sightseeing.\",\r\n    \"Minions juked you.\",\r\n    \"Reading chat like gospel.\",\r\n    \"Brain ping 200ms.\",\r\n    \"Micro went macro wrong.\",\r\n    \"Side questing mid-lane.\",\r\n    \"Alt key main character.\",\r\n  ],\r\n  4: [\r\n    \"Some thoughts detected.\",\r\n    \"Map glanced, not seen.\",\r\n    \"Skillshots negotiated.\",\r\n    \"Clicked intentions, not targets.\",\r\n    \"Focus: trial version.\",\r\n    \"Decision cache missed.\",\r\n    \"Macro-ish.\",\r\n    \"Half-commit legend.\",\r\n    \"Drafting excuses.\",\r\n    \"Ping roulette winner.\",\r\n  ],\r\n  5: [\r\n    \"Baseline gamer focus.\",\r\n    \"Eyes on lane, mostly.\",\r\n    \"Okay reads, okay clicks.\",\r\n    \"Focus medium rare.\",\r\n    \"Mini-map every other beat.\",\r\n    \"Solid bronze halo.\",\r\n    \"Mid fight TED talk.\",\r\n    \"Microwave meal macro.\",\r\n    \"You and wave had a chat.\",\r\n    \"Cursor behaved sometimes.\",\r\n  ],\r\n  6: [\r\n    \"Dialing in.\",\r\n    \"Reads landing.\",\r\n    \"Third eye buffering.\",\r\n    \"Good timers, better patience.\",\r\n    \"Focus with flavor.\",\r\n    \"Map pings with purpose.\",\r\n    \"Respectable clarity.\",\r\n    \"CS and thoughts aligned.\",\r\n    \"Cooldown tracking-ish.\",\r\n    \"Pretty clean lane brain.\",\r\n  ],\r\n  7: [\r\n    \"Locked but humane.\",\r\n    \"Reads ahead of time.\",\r\n    \"Map sense online.\",\r\n    \"No doomscrolling micro.\",\r\n    \"Camera was a weapon.\",\r\n    \"Win-ready focus.\",\r\n    \"Plate math in head.\",\r\n    \"You saw the turn.\",\r\n    \"Jukes with intent.\",\r\n    \"Calm hands, sharp clicks.\",\r\n  ],\r\n  8: [\r\n    \"Gamer zen achieved.\",\r\n    \"Plays predicted chat.\",\r\n    \"Minimap whisperer.\",\r\n    \"Cooldown librarian.\",\r\n    \"Focus speedrun PB.\",\r\n    \"Macro clairvoyance.\",\r\n    \"Pressure chefs kiss.\",\r\n    \"No tilt tax today.\",\r\n    \"Reads wrote themselves.\",\r\n    \"Mechanics obeyed brain.\",\r\n  ],\r\n  9: [\r\n    \"Hyperlocked menace.\",\r\n    \"Saw three plays ahead.\",\r\n    \"Mini-map was your HUD.\",\r\n    \"Eyes like ward bots.\",\r\n    \"Tempo conductor.\",\r\n    \"Punished everything.\",\r\n    \"You were the macro.\",\r\n    \"Frame-perfect habits.\",\r\n    \"Clutch tax refunded.\",\r\n    \"Clicked with prophecy.\",\r\n  ],\r\n  10: [\r\n    \"Main-character focus.\",\r\n    \"E-sports cam ready.\",\r\n    \"Chess while others drew circles.\",\r\n    \"Third eye 4K HDR.\",\r\n    \"Perfect tempo pilgrim.\",\r\n    \"Predicted the patch notes.\",\r\n    \"You were the objective.\",\r\n    \"Focus over 9000.\",\r\n    \"Reads so crisp they hurt.\",\r\n    \"Coach took notes.\",\r\n  ],\r\n};\r\n","\"use client\";\n\nimport * as React from \"react\";\nimport { SectionLabel } from \"@/components/reviews/SectionLabel\";\nimport { cn } from \"@/lib/utils\";\nimport type { Review } from \"@/lib/types\";\nimport { SCORE_POOLS, pickIndex, scoreIcon } from \"@/components/reviews/reviewData\";\nimport { RangeSlider as ScoreSlider } from \"@/components/ui/primitives/RangeSlider\";\nimport { Toggle as ToggleButton } from \"@/components/ui/toggles/Toggle\";\n\nexport type ResultScoreSectionHandle = {\n  save: () => void;\n  focusResult: () => void;\n};\n\ntype Result = \"Win\" | \"Loss\";\n\ntype ResultScoreSectionProps = {\n  result?: Result;\n  score?: number;\n  commitMeta: (patch: Partial<Review>) => void;\n  onScoreEnter?: () => void;\n};\n\nfunction ResultScoreSection(\n  {\n    result: result0 = \"Win\",\n    score: score0 = 5,\n    commitMeta,\n    onScoreEnter,\n  }: ResultScoreSectionProps,\n  ref: React.Ref<ResultScoreSectionHandle>,\n) {\n  const [result, setResult] = React.useState<Result>(result0);\n  const [score, setScore] = React.useState<number>(score0);\n  const resultRef = React.useRef<HTMLButtonElement>(null);\n  const scoreRangeRef = React.useRef<HTMLInputElement>(null);\n  const resultLabelId = React.useId();\n  const scoreLabelId = React.useId();\n\n  React.useEffect(() => {\n    setResult(result0);\n  }, [result0]);\n\n  React.useEffect(() => {\n    setScore(score0);\n  }, [score0]);\n\n  const save = React.useCallback(() => {\n    commitMeta({ result, score });\n  }, [result, score, commitMeta]);\n\n  React.useImperativeHandle(\n    ref,\n    () => ({\n      save,\n      focusResult: () => resultRef.current?.focus(),\n    }),\n    [save],\n  );\n\n  const msgIndex = pickIndex(String(score), 5);\n  const pool = SCORE_POOLS[score] ?? SCORE_POOLS[5];\n  const msg = pool[msgIndex];\n  const { Icon: ScoreIcon, cls: scoreIconCls } = scoreIcon(score);\n  return (\n    <>\n      <div>\n        <SectionLabel id={resultLabelId}>Result</SectionLabel>\n        <ToggleButton\n          ref={resultRef}\n          ariaLabelledBy={resultLabelId}\n          leftLabel=\"Win\"\n          rightLabel=\"Loss\"\n          value={result === \"Win\" ? \"Left\" : \"Right\"}\n          onChange={(value) => {\n            const next = value === \"Left\" ? \"Win\" : \"Loss\";\n            setResult(next);\n            commitMeta({ result: next });\n          }}\n          onKeyDown={(e) => {\n            if (e.key === \"Enter\") {\n              scoreRangeRef.current?.focus();\n            }\n          }}\n          className=\"w-full max-w-[calc(var(--space-8)*4)]\"\n          aria-label=\"Toggle Win or Loss\"\n        />\n      </div>\n\n      <div className=\"space-y-[var(--space-2)]\">\n        <SectionLabel id={scoreLabelId}>Score</SectionLabel>\n        <ScoreSlider\n          ref={scoreRangeRef}\n          min={0}\n          max={10}\n          step={1}\n          value={score}\n          aria-labelledby={scoreLabelId}\n          aria-label=\"Score from 0 to 10\"\n          controlClassName=\"rounded-card r-card-lg\"\n          trackClassName=\"cursor-pointer\"\n          onChange={(e) => {\n            const v = Number(e.target.value);\n            setScore(v);\n            commitMeta({ score: v });\n          }}\n          onKeyDown={(e) => {\n            if (e.key === \"Enter\") {\n              e.preventDefault();\n              onScoreEnter?.();\n            }\n          }}\n        />\n        <div className=\"flex items-center gap-[var(--space-2)] text-ui text-muted-foreground\" aria-live=\"polite\">\n          <ScoreIcon className={cn(\"h-[var(--space-4)] w-[var(--space-4)]\", scoreIconCls)} />\n          <span>{msg}</span>\n        </div>\n      </div>\n    </>\n  );\n}\n\nconst ResultScoreSectionComponent = React.forwardRef<\n  ResultScoreSectionHandle,\n  ResultScoreSectionProps\n>(ResultScoreSection)\n\nResultScoreSectionComponent.displayName = \"ResultScoreSection\"\n\nexport { ResultScoreSectionComponent as ResultScoreSection }\n","\"use client\";\n\nimport { useMemo } from \"react\";\nimport type { Review } from \"@/lib/types\";\nimport { ts } from \"@/lib/date\";\nimport { getSearchBlob } from \"./reviewSearch\";\n\nexport type SortKey = \"newest\" | \"oldest\" | \"title\";\n\nexport function useReviewFilter(\n  base: Review[],\n  q: string,\n  sort: SortKey,\n): Review[] {\n  return useMemo(() => {\n    const needle = q.trim().toLowerCase();\n    const list =\n      needle.length === 0\n        ? [...base]\n        : base.filter((r) => getSearchBlob(r).includes(needle));\n\n    if (sort === \"newest\")\n      list.sort((a, b) => ts(b?.createdAt) - ts(a?.createdAt));\n    if (sort === \"oldest\")\n      list.sort((a, b) => ts(a?.createdAt) - ts(b?.createdAt));\n    if (sort === \"title\")\n      list.sort((a, b) =>\n        (a?.title || \"\").localeCompare(b?.title || \"\", undefined, {\n          sensitivity: \"base\",\n        }),\n      );\n\n    return list;\n  }, [base, q, sort]);\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"NeonPillarChip_root__X7m60\",\"layer\":\"NeonPillarChip_layer__lDu_N\",\"aura\":\"NeonPillarChip_aura__ci_7v\",\"neon\":\"NeonPillarChip_neon__DkQal\",\"neonPillarPulse\":\"NeonPillarChip_neonPillarPulse__eQmk8\"};","\"use client\";\n\nimport * as React from \"react\";\nimport { Clock, FileText, Brain } from \"lucide-react\";\nimport { NeonIcon as UIToggleNeonIcon } from \"@/components/ui\";\n\ntype Props = {\n  kind: \"clock\" | \"file\" | \"brain\";\n  on: boolean;\n  size?: \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\" | \"2xl\";\n  className?: string;\n  title?: string;\n  staticGlow?: boolean;\n};\n\nexport function NeonIcon({\n  kind,\n  on,\n  size: sizeProp = \"md\",\n  className,\n  title,\n  staticGlow = false,\n}: Props) {\n  const Icon = kind === \"clock\" ? Clock : kind === \"brain\" ? Brain : FileText;\n  const colorVar =\n    kind === \"clock\" ? \"--accent-1\" : kind === \"brain\" ? \"--primary\" : \"--ring\";\n\n  return (\n    <UIToggleNeonIcon\n      key={staticGlow ? `${kind}-${on}` : undefined}\n      icon={Icon}\n      on={on}\n      size={sizeProp}\n      colorVar={colorVar}\n      className={className}\n      title={title}\n    />\n  );\n}\n","\"use client\";\n\nimport * as React from \"react\";\nimport Image from \"next/image\";\nimport { useSearchParams } from \"next/navigation\";\nimport type { Review } from \"@/lib/types\";\nimport { cn } from \"@/lib/utils\";\nimport { useReviewFilter } from \"@/components/reviews\";\nimport { ReviewList } from \"./ReviewList\";\nimport { ReviewEditor } from \"./ReviewEditor\";\nimport { ReviewSummary } from \"./ReviewSummary\";\nimport { ReviewPanel } from \"./ReviewPanel\";\nimport { BookOpen, Ghost, Plus } from \"lucide-react\";\n\nimport {\n  Button,\n  Card,\n  CardContent,\n  CardDescription,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n  Hero,\n  PageShell,\n  Select,\n  TabBar,\n  Skeleton,\n  AIErrorCard,\n} from \"@/components/ui\";\n\ntype SortKey = \"newest\" | \"oldest\" | \"title\";\ntype DetailMode = \"summary\" | \"edit\";\n\nexport type ReviewsPageProps = {\n  reviews: Review[] | null | undefined;\n  loading?: boolean;\n  error?: Error | string | null;\n  onRetry?: (() => void) | null;\n  selectedId: string | null;\n  onSelect: (id: string) => void;\n  onCreate: () => void;\n  onRename: (id: string, nextTitle: string) => void;\n  onDelete?: (id: string) => void;\n  onChangeNotes?: (id: string, nextNotes: string) => void;\n  onChangeTags?: (id: string, nextTags: string[]) => void;\n  onChangeMeta?: (id: string, partial: Partial<Review>) => void;\n};\n\nexport function ReviewsPage({\n  reviews,\n  loading,\n  error = null,\n  onRetry = null,\n  selectedId,\n  onSelect,\n  onCreate,\n  onRename,\n  onDelete,\n  onChangeNotes,\n  onChangeTags,\n  onChangeMeta,\n}: ReviewsPageProps) {\n  const searchParams = useSearchParams();\n  const [q, setQ] = React.useState(\"\");\n  const [sort, setSort] = React.useState<SortKey>(\"newest\");\n  const [detailMode, setDetailMode] = React.useState<DetailMode>(\"summary\");\n  const [intentApplied, setIntentApplied] = React.useState(false);\n\n  const isLoading = (loading ?? (typeof reviews === \"undefined\")) === true;\n  const errorMessage = React.useMemo(() => {\n    if (error instanceof Error) {\n      const message = error.message?.trim();\n      if (message?.length) return message;\n    }\n    if (typeof error === \"string\") {\n      const trimmed = error.trim();\n      if (trimmed.length > 0) return trimmed;\n    }\n    if (error && typeof error !== \"object\") {\n      return String(error);\n    }\n    if (reviews === null) {\n      return \"We couldnt load your reviews.\";\n    }\n    return null;\n  }, [error, reviews]);\n  const isErrored = Boolean(errorMessage);\n  const allowInteractions = !isLoading && !isErrored;\n\n  const commitCreateReview = React.useCallback(() => {\n    setQ(\"\");\n    setSort(\"newest\");\n    setDetailMode(\"edit\");\n    onCreate();\n  }, [onCreate]);\n\n  const tryCreateReview = React.useCallback(() => {\n    if (!allowInteractions) return false;\n    commitCreateReview();\n    return true;\n  }, [allowInteractions, commitCreateReview]);\n\n  const intentParam = searchParams?.get(\"intent\") ?? null;\n  React.useEffect(() => {\n    if (intentParam === \"create-review\") {\n      if (!intentApplied) {\n        const created = tryCreateReview();\n        if (created) {\n          setIntentApplied(true);\n        }\n      }\n      return;\n    }\n    if (intentApplied) {\n      setIntentApplied(false);\n    }\n  }, [intentParam, intentApplied, tryCreateReview]);\n\n  const base = React.useMemo<Review[]>(\n    () => (Array.isArray(reviews) ? reviews : []),\n    [reviews],\n  );\n\n  const filtered = useReviewFilter(base, q, sort);\n  const totalCount = base.length;\n  const listReviews = allowInteractions ? filtered : [];\n  const filteredCount = allowInteractions ? filtered.length : 0;\n  const hasReviews = allowInteractions && totalCount > 0;\n\n  const active = React.useMemo(\n    () => {\n      if (!allowInteractions) return null;\n      return base.find((r) => r.id === selectedId) ?? null;\n    },\n    [allowInteractions, base, selectedId],\n  );\n  const panelClass = \"mx-auto\";\n  const detailBaseId = active ? `review-${active.id}` : \"review-detail\";\n  const heroHeadingId = React.useId();\n  const sortLabelId = React.useId();\n  const emptySearchDescriptionId = React.useId();\n  const emptySearchTooltipId = React.useId();\n  const sortItems = React.useMemo(\n    () => [\n      { value: \"newest\", label: \"Newest\" },\n      { value: \"oldest\", label: \"Oldest\" },\n      { value: \"title\", label: \"Title\" },\n    ],\n    [],\n  );\n\n  const shouldShowEmptySearchHelper = allowInteractions && totalCount === 0;\n  const [isSearchTooltipOpen, setIsSearchTooltipOpen] = React.useState(false);\n\n  const closeSearchTooltip = React.useCallback(() => {\n    setIsSearchTooltipOpen(false);\n  }, []);\n\n  const openSearchTooltip = React.useCallback(() => {\n    if (!shouldShowEmptySearchHelper) return;\n    setIsSearchTooltipOpen(true);\n  }, [shouldShowEmptySearchHelper]);\n\n  const handleSearchFocus = React.useCallback<\n    React.FocusEventHandler<HTMLInputElement>\n  >(() => {\n    openSearchTooltip();\n  }, [openSearchTooltip]);\n\n  const handleSearchBlur = React.useCallback<\n    React.FocusEventHandler<HTMLInputElement>\n  >(() => {\n    closeSearchTooltip();\n  }, [closeSearchTooltip]);\n\n  const handleSearchMouseEnter = React.useCallback<\n    React.MouseEventHandler<HTMLInputElement>\n  >(() => {\n    openSearchTooltip();\n  }, [openSearchTooltip]);\n\n  const handleSearchMouseLeave = React.useCallback<\n    React.MouseEventHandler<HTMLInputElement>\n  >((event) => {\n      const target = event.currentTarget;\n      if (target instanceof HTMLElement && target === document.activeElement) {\n        return;\n      }\n      closeSearchTooltip();\n    },\n    [closeSearchTooltip],\n  );\n\n  const handleSearchKeyDown = React.useCallback(\n    (event: React.KeyboardEvent<HTMLInputElement>) => {\n      if (event.key === \"Escape\" || event.key === \"Esc\") {\n        closeSearchTooltip();\n      }\n    },\n    [closeSearchTooltip],\n  );\n\n  React.useEffect(() => {\n    if (!shouldShowEmptySearchHelper) {\n      setIsSearchTooltipOpen(false);\n      return undefined;\n    }\n\n    if (!isSearchTooltipOpen) {\n      return undefined;\n    }\n\n    const handleWindowKeyDown = (event: KeyboardEvent) => {\n      if (event.key === \"Escape\" || event.key === \"Esc\") {\n        closeSearchTooltip();\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleWindowKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleWindowKeyDown);\n  }, [shouldShowEmptySearchHelper, isSearchTooltipOpen, closeSearchTooltip]);\n\n  const heroSearchLabel = isLoading\n    ? \"Search reviews (temporarily unavailable)\"\n    : isErrored\n      ? \"Search reviews (temporarily unavailable)\"\n      : !hasReviews\n        ? \"Search reviews (add a review to start searching)\"\n        : \"Search reviews\";\n  const heroSearchDescription = React.useMemo(() => {\n    const ids: string[] = [];\n    if (shouldShowEmptySearchHelper) {\n      ids.push(emptySearchTooltipId);\n    }\n    if (!hasReviews) {\n      ids.push(emptySearchDescriptionId);\n    }\n    return ids.length > 0 ? ids.join(\" \") : undefined;\n  }, [shouldShowEmptySearchHelper, emptySearchTooltipId, hasReviews, emptySearchDescriptionId]);\n  const heroSearchDisabled = !allowInteractions;\n  const heroSearchTooltip = shouldShowEmptySearchHelper ? (\n    <div\n      id={emptySearchTooltipId}\n      role=\"tooltip\"\n      className={cn(\n        \"pointer-events-none absolute left-1/2 top-full z-20 w-max max-w-[min(22rem,calc(100vw-var(--space-6)))] -translate-x-1/2\",\n        \"rounded-[var(--radius-lg)] border border-card-hairline bg-[hsl(var(--surface-2))] px-[var(--space-3)] py-[var(--space-2)]\",\n        \"text-label font-medium text-foreground shadow-depth-soft\",\n        \"transition-[opacity,transform] duration-motion-sm ease-out motion-reduce:transition-none motion-reduce:transform-none\",\n        isSearchTooltipOpen\n          ? \"opacity-100 translate-y-[var(--space-2)]\"\n          : \"pointer-events-none opacity-0 -translate-y-[var(--space-1)]\",\n      )}\n      aria-hidden={isSearchTooltipOpen ? undefined : \"true\"}\n    >\n      <span className=\"block text-balance text-center leading-tight\">\n        Add a review to search.\n      </span>\n    </div>\n  ) : null;\n\n  return (\n    <>\n      <PageShell\n        as=\"header\"\n        grid\n        aria-labelledby={heroHeadingId}\n        className=\"py-[var(--space-6)]\"\n      >\n        <Hero\n          as=\"section\"\n          className=\"col-span-full md:col-span-12\"\n          topClassName=\"top-[var(--header-stack)]\"\n          title={<span id={heroHeadingId}>Reviews</span>}\n          subtitle=\"Capture and learn from your past sprints.\"\n          glitch=\"default\"\n          frame\n          icon={<BookOpen className=\"opacity-80\" />}\n          search={\n          {\n            value: q,\n            onValueChange: setQ,\n            placeholder: \"Search reviews...\",\n            \"aria-label\": heroSearchLabel,\n            \"aria-describedby\": heroSearchDescription,\n            height: \"lg\",\n            debounceMs: 300,\n            variant: \"sunken\",\n            loading: isLoading,\n            disabled: heroSearchDisabled,\n            className: shouldShowEmptySearchHelper\n              ? \"relative\"\n              : undefined,\n            right: heroSearchTooltip ?? undefined,\n            onFocus: shouldShowEmptySearchHelper ? handleSearchFocus : undefined,\n            onBlur: shouldShowEmptySearchHelper ? handleSearchBlur : undefined,\n            onMouseEnter: shouldShowEmptySearchHelper\n              ? handleSearchMouseEnter\n              : undefined,\n            onMouseLeave: shouldShowEmptySearchHelper\n              ? handleSearchMouseLeave\n              : undefined,\n            onKeyDown: shouldShowEmptySearchHelper ? handleSearchKeyDown : undefined,\n          }\n          }\n          actions={\n            <Button\n              type=\"button\"\n              variant=\"default\"\n              size=\"md\"\n              className={cn(\"btn-glitch\", \"whitespace-nowrap\")}\n              onClick={commitCreateReview}\n              disabled={!allowInteractions}\n            >\n              <Plus />\n              <span>New review</span>\n            </Button>\n          }\n          illustration={\n            <Image\n              src=\"/images/agnes.svg\"\n              alt=\"Agnes watching over review browsing\"\n              fill\n              sizes=\"(min-width: 1280px) 38vw, (min-width: 768px) 56vw, 100vw\"\n              priority={false}\n              className=\"object-contain object-right md:object-center\"\n            />\n          }\n        />\n      </PageShell>\n\n      <PageShell\n        as=\"main\"\n        id=\"page-main\"\n        tabIndex={-1}\n        grid\n        className=\"py-[var(--space-6)]\"\n        contentClassName=\"gap-y-[var(--space-6)]\"\n        aria-labelledby={heroHeadingId}\n      >\n        <div className=\"col-span-full\">\n          {isLoading ? (\n            <div className=\"flex flex-col gap-[var(--space-3)] sm:gap-[var(--space-4)] md:flex-row md:items-end md:justify-end\">\n              <Skeleton\n                ariaHidden={false}\n                role=\"status\"\n                aria-label=\"Loading sort control\"\n                className=\"h-[var(--control-h-lg)] w-full md:w-[16rem]\"\n                radius=\"md\"\n              />\n            </div>\n          ) : isErrored ? (\n            <div className=\"space-y-[var(--space-3)]\">\n              <div className=\"flex flex-col gap-[var(--space-3)] sm:gap-[var(--space-4)] md:flex-row md:items-end md:justify-end\">\n                <div\n                  className=\"flex w-full flex-col gap-[var(--space-1)] text-left md:w-[16rem]\"\n                  aria-labelledby={sortLabelId}\n                >\n                  <span\n                    id={sortLabelId}\n                    className=\"text-ui font-medium text-muted-foreground\"\n                  >\n                    Sort\n                  </span>\n                  <Select\n                    variant=\"animated\"\n                    label=\"Sort reviews\"\n                    hideLabel\n                    value={sort}\n                    onChange={(v) => setSort(v as SortKey)}\n                    items={sortItems}\n                    className=\"w-full\"\n                    size=\"lg\"\n                    disabled\n                  />\n                </div>\n              </div>\n              <div className=\"flex flex-wrap items-center gap-[var(--space-2)]\">\n                <Button\n                  type=\"button\"\n                  variant=\"default\"\n                  size=\"md\"\n                  className={cn(\"btn-glitch\", \"whitespace-nowrap\")}\n                  onClick={onRetry ?? undefined}\n                  disabled={!onRetry}\n                >\n                  Retry sync\n                </Button>\n                <p className=\"text-ui text-danger\" role=\"alert\">\n                  {errorMessage ?? \"We couldnt load your reviews. Retry to continue.\"}\n                </p>\n              </div>\n            </div>\n          ) : hasReviews ? (\n            <div className=\"flex flex-col gap-[var(--space-3)] sm:gap-[var(--space-4)] md:flex-row md:items-end md:justify-end\">\n              <div\n                className=\"flex w-full flex-col gap-[var(--space-1)] text-left md:w-[16rem]\"\n                aria-labelledby={sortLabelId}\n              >\n                <span\n                  id={sortLabelId}\n                  className=\"text-ui font-medium text-muted-foreground\"\n                >\n                  Sort\n                </span>\n                <Select\n                  variant=\"animated\"\n                  label=\"Sort reviews\"\n                  hideLabel\n                  value={sort}\n                  onChange={(v) => setSort(v as SortKey)}\n                  items={sortItems}\n                  className=\"w-full\"\n                  size=\"lg\"\n                />\n              </div>\n            </div>\n          ) : (\n            <div className=\"space-y-[var(--space-2)]\">\n              <p\n                id={emptySearchDescriptionId}\n                className=\"text-ui text-muted-foreground\"\n              >\n                Once you publish your first review, smart filters, tagging, and matchup search become available.\n              </p>\n            </div>\n          )}\n        </div>\n        <div\n          className={cn(\n            \"col-span-full\",\n            \"grid grid-cols-1 items-start gap-[var(--space-4)] sm:gap-[var(--space-6)] lg:gap-[var(--space-8)] md:grid-cols-6 lg:grid-cols-12\",\n          )}\n        >\n          <nav\n            aria-label=\"Review list\"\n            className=\"md:col-span-2 lg:col-span-4\"\n          >\n              <ReviewList\n                reviews={listReviews}\n                selectedId={selectedId}\n                loading={isLoading}\n                error={errorMessage}\n                onRetry={isErrored ? onRetry : null}\n                onSelect={\n                  allowInteractions\n                    ? (id) => {\n                        setDetailMode(\"summary\");\n                        onSelect(id);\n                      }\n                    : undefined\n                }\n                onRename={allowInteractions ? onRename : undefined}\n                onDelete={allowInteractions ? onDelete : undefined}\n                className=\"h-auto overflow-auto p-[var(--space-2)] md:h-[var(--content-viewport-height)]\"\n                header={\n                  allowInteractions && filteredCount > 0\n                    ? `${filteredCount} shown`\n                    : undefined\n                }\n                hasAnyReviews={allowInteractions && totalCount > 0}\n                onCreate={allowInteractions ? commitCreateReview : undefined}\n                hoverRing\n              />\n          </nav>\n          <div className=\"md:col-span-4 lg:col-span-8\">\n            {isLoading ? (\n              <ReviewPanel\n                aria-busy=\"true\"\n                className={cn(panelClass, \"space-y-[var(--space-4)]\")}\n              >\n                <div className=\"space-y-[var(--space-2)]\">\n                  <Skeleton\n                    ariaHidden={false}\n                    role=\"status\"\n                    aria-label=\"Loading review summary\"\n                    className=\"h-[var(--space-6)] w-2/3\"\n                    radius=\"sm\"\n                  />\n                  <Skeleton className=\"w-3/4\" />\n                </div>\n                <div className=\"grid gap-[var(--space-3)] sm:grid-cols-[var(--space-12)_1fr]\">\n                  <Skeleton\n                    ariaHidden={false}\n                    role=\"status\"\n                    aria-label=\"Loading review avatar\"\n                    className=\"h-[var(--space-12)] w-[var(--space-12)]\"\n                    radius=\"full\"\n                  />\n                  <div className=\"space-y-[var(--space-2)]\">\n                    <Skeleton className=\"w-2/3\" />\n                    <Skeleton className=\"w-3/4\" />\n                    <Skeleton className=\"w-full\" />\n                  </div>\n                </div>\n                <Skeleton\n                  ariaHidden={false}\n                  role=\"status\"\n                  aria-label=\"Loading review actions\"\n                  className=\"h-[var(--space-10)] w-full\"\n                  radius=\"sm\"\n                />\n              </ReviewPanel>\n            ) : isErrored ? (\n              <ReviewPanel aria-live=\"polite\" className={panelClass}>\n                <AIErrorCard\n                  title=\"Review detail unavailable\"\n                  description={errorMessage ?? \"We couldnt load your review details.\"}\n                  hint=\"Retry the sync to continue editing or summarizing your matches.\"\n                  retryLabel=\"Retry sync\"\n                  onRetry={onRetry ?? undefined}\n                  className=\"w-full border-none bg-transparent p-0 shadow-none\"\n                />\n              </ReviewPanel>\n            ) : !hasReviews ? (\n              <Card\n                role=\"status\"\n                aria-live=\"polite\"\n                className={cn(\n                  panelClass,\n                  \"relative isolate overflow-hidden border-none bg-[hsl(var(--surface-2))] text-left shadow-neo\",\n                )}\n                depth=\"raised\"\n              >\n                <span\n                  aria-hidden\n                  className=\"pointer-events-none absolute inset-0 -z-10 bg-gradient-to-br from-[color-mix(in_srgb,hsl(var(--surface-2))_70%,hsl(var(--primary-2))_15%)] via-[hsl(var(--surface-2))] to-[color-mix(in_srgb,hsl(var(--surface-2))_70%,hsl(var(--primary-3))_20%)]\"\n                />\n                <div className=\"grid items-center gap-[var(--space-4)] md:grid-cols-[1.2fr_auto]\">\n                  <div className=\"space-y-[var(--space-3)]\">\n                    <CardHeader className=\"space-y-[var(--space-2)] p-0\">\n                      <CardTitle className=\"text-balance\">Capture your first review</CardTitle>\n                      <CardDescription className=\"text-pretty\">\n                        Agnes has a fresh page ready. Log your latest match to unlock summaries, tagging, and focus tracking.\n                      </CardDescription>\n                    </CardHeader>\n                    <CardContent className=\"p-0\">\n                      <div className=\"flex flex-wrap items-center gap-[var(--space-2)] text-muted-foreground\">\n                        <span className=\"rounded-full bg-[hsl(var(--surface-3))] px-[var(--space-2)] py-[var(--space-1)] text-label font-medium text-foreground\">\n                          Guidance\n                        </span>\n                        <span className=\"text-ui\">\n                          Capture notes to see AI summaries and track what to improve next time.\n                        </span>\n                      </div>\n                    </CardContent>\n                    <CardFooter className=\"flex flex-wrap gap-[var(--space-2)] p-0\">\n                      <Button\n                        type=\"button\"\n                        variant=\"default\"\n                        size=\"md\"\n                        className=\"btn-glitch\"\n                        onClick={commitCreateReview}\n                        disabled={!allowInteractions}\n                      >\n                        Capture first review\n                      </Button>\n                    </CardFooter>\n                  </div>\n                  <div className=\"relative mx-auto h-[min(16rem,40vw)] w-full max-w-[18rem]\">\n                    <Image\n                      src=\"/images/agnes-writing-notes.svg\"\n                      alt=\"Agnes writing review notes\"\n                      fill\n                      sizes=\"(min-width: 1024px) 18rem, 60vw\"\n                      className=\"object-contain\"\n                      priority={false}\n                    />\n                  </div>\n                </div>\n              </Card>\n            ) : !active ? (\n              <ReviewPanel\n                aria-live=\"polite\"\n                className={cn(\n                  panelClass,\n                  \"relative flex flex-col items-center justify-center gap-[var(--space-3)] overflow-hidden\",\n                  \"text-center text-ui text-muted-foreground\",\n                )}\n              >\n                <span\n                  aria-hidden\n                  className=\"glitch-rail pointer-events-none absolute inset-y-[var(--space-2)] left-1/2 hidden w-[var(--spacing-1)] -translate-x-1/2 rounded-full opacity-80 mix-blend-screen sm:block\"\n                />\n                <span\n                  aria-hidden\n                  data-text=\"\"\n                  className=\"glitch-anim inline-flex items-center justify-center rounded-full border border-border/40 bg-card/70 p-[var(--space-3)] text-muted-foreground motion-reduce:animate-none\"\n                >\n                  <Ghost\n                    aria-hidden\n                    focusable=\"false\"\n                    className=\"size-[var(--space-6)]\"\n                  />\n                </span>\n                <div className=\"space-y-[var(--space-1)]\">\n                  <p className=\"text-card-foreground\">Select a review from the list to see its summary.</p>\n                  <p>Use New review to document another match when you&rsquo;re ready.</p>\n                </div>\n              </ReviewPanel>\n            ) : (\n              <div className=\"space-y-[var(--space-4)]\">\n                <TabBar<DetailMode>\n                  items={[\n                    { key: \"summary\", label: \"Summary\" },\n                    { key: \"edit\", label: \"Edit\" },\n                  ]}\n                  value={detailMode}\n                  onValueChange={setDetailMode}\n                  ariaLabel=\"Review detail mode\"\n                  idBase={detailBaseId}\n                />\n                <div\n                  id={`${detailBaseId}-summary-panel`}\n                  role=\"tabpanel\"\n                  aria-labelledby={`${detailBaseId}-summary-tab`}\n                  hidden={detailMode !== \"summary\"}\n                  tabIndex={detailMode === \"summary\" ? 0 : -1}\n                >\n                  {detailMode === \"summary\" ? (\n                    <ReviewPanel className={panelClass}>\n                      <ReviewSummary\n                        key={`summary-${active.id}`}\n                        review={active}\n                        onEdit={() => setDetailMode(\"edit\")}\n                      />\n                    </ReviewPanel>\n                  ) : null}\n                </div>\n                <div\n                  id={`${detailBaseId}-edit-panel`}\n                  role=\"tabpanel\"\n                  aria-labelledby={`${detailBaseId}-edit-tab`}\n                  hidden={detailMode !== \"edit\"}\n                  tabIndex={detailMode === \"edit\" ? 0 : -1}\n                >\n                  {detailMode === \"edit\" ? (\n                    <ReviewPanel className={panelClass}>\n                      <ReviewEditor\n                        key={`editor-${active.id}`}\n                        review={active}\n                        onChangeNotes={(value: string) =>\n                          onChangeNotes?.(active.id, value)\n                        }\n                        onChangeTags={(values: string[]) =>\n                          onChangeTags?.(active.id, values)\n                        }\n                        onRename={(title: string) =>\n                          onRename(active.id, title)\n                        }\n                        onChangeMeta={(partial: Partial<Review>) =>\n                          onChangeMeta?.(active.id, partial)\n                        }\n                        onDone={() => setDetailMode(\"summary\")}\n                        onDelete={\n                          onDelete ? () => onDelete(active.id) : undefined\n                        }\n                      />\n                    </ReviewPanel>\n                  ) : null}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </PageShell>\n    </>\n  );\n}\n","\"use client\";\n\nimport * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { ROLE_OPTIONS } from \"@/components/reviews/reviewData\";\nimport { TabBar } from \"@/components/ui\";\nimport type { Role } from \"@/lib/types\";\n\ntype Props = {\n  value: Role;\n  onChange: (v: Role) => void;\n  className?: string;\n  ariaLabelledby?: string;\n};\n\n/**\n * Segmented control for role selection.\n * Uses glitch-styled segmented buttons with sliding indicator.\n */\nexport function RoleSelector({\n  value,\n  onChange,\n  className,\n  ariaLabelledby,\n}: Props) {\n  const count = ROLE_OPTIONS.length;\n  const activeIdx = Math.max(\n    0,\n    ROLE_OPTIONS.findIndex((r) => r.value === value),\n  );\n  const liveRef = React.useRef<HTMLSpanElement>(null);\n\n  React.useEffect(() => {\n    const { label } = ROLE_OPTIONS[activeIdx] ?? {};\n    if (label && liveRef.current) {\n      liveRef.current.textContent = `${label}, selected, ${activeIdx + 1} of ${count}`;\n    }\n  }, [activeIdx, count]);\n\n  return (\n    <div className={cn(\"w-full\", className)}>\n      <span aria-live=\"polite\" className=\"sr-only\" ref={liveRef} />\n\n      <TabBar<Role>\n        items={ROLE_OPTIONS.map(({ value: v, Icon, label }) => ({\n          key: v,\n          label,\n          icon: <Icon className=\"size-[var(--icon-size-sm)]\" />,\n          className: \"flex-1\",\n        }))}\n        value={value}\n        onValueChange={(next) => onChange(next as Role)}\n        ariaLabel=\"Select lane/role\"\n        ariaLabelledBy={ariaLabelledby}\n        variant=\"neo\"\n        size=\"sm\"\n        className=\"w-full\"\n        tablistClassName=\"w-full\"\n        linkPanels={false}\n      />\n    </div>\n  );\n}\n","import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nimport { Card, cardSurfaceClassName } from \"@/components/ui\";\n\nexport function ReviewPanel({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <Card\n      glitch\n      depth=\"raised\"\n      className={cn(cardSurfaceClassName, \"w-full max-w-full\", className)}\n      {...props}\n    />\n  );\n}\n","// src/components/reviews/ReviewList.tsx\n\"use client\";\n\nimport * as React from \"react\";\nimport type { Review } from \"@/lib/types\";\nimport { cn } from \"@/lib/utils\";\nimport { ReviewListItem } from \"./ReviewListItem\";\nimport { Button, Skeleton, AIErrorCard, Card } from \"@/components/ui\";\nimport { GenericList } from \"@/components/lists/GenericList\";\nimport { BookOpen } from \"lucide-react\";\nimport { SmallAgnesNoxiImage } from \"@/components/planner\";\n\nconst PAGE_SIZE = 40;\nconst REVIEW_SCROLL_STORAGE_KEY = \"planner:reviews:list-scroll\";\nconst REVIEW_AUTOLOAD_STORAGE_KEY = \"planner:reviews:auto-load\";\n\nfunction readSessionStorage(key: string): string | null {\n  if (typeof window === \"undefined\") return null;\n  try {\n    return window.sessionStorage.getItem(key);\n  } catch {\n    return null;\n  }\n}\n\nfunction writeSessionStorage(key: string, value: string) {\n  if (typeof window === \"undefined\") return;\n  try {\n    window.sessionStorage.setItem(key, value);\n  } catch {\n    // ignore write errors (e.g. storage disabled)\n  }\n}\n\nfunction readBooleanPreference(key: string, fallback: boolean) {\n  const stored = readSessionStorage(key);\n  if (stored === null) return fallback;\n  if (stored === \"true\") return true;\n  if (stored === \"false\") return false;\n  return fallback;\n}\n\nexport type ReviewListProps = {\n  reviews: Review[];\n  selectedId: string | null;\n  onSelect?: (id: string) => void;\n  className?: string;\n  header?: React.ReactNode;\n  hoverRing?: boolean;\n  loading?: boolean;\n  error?: Error | string | null;\n  onRetry?: (() => void) | null;\n  hasAnyReviews?: boolean;\n  onCreate?: () => void;\n  onRename?: (id: string, nextTitle: string) => void;\n  onDelete?: (id: string) => void;\n};\n\nexport function ReviewList({\n  reviews,\n  selectedId,\n  onSelect,\n  className,\n  header,\n  hoverRing = false,\n  loading = false,\n  error = null,\n  onRetry = null,\n  hasAnyReviews = false,\n  onCreate,\n  onRename,\n  onDelete,\n}: ReviewListProps) {\n  const count = reviews.length;\n  const isLoading = Boolean(loading);\n  const errorMessage = React.useMemo(() => {\n    if (!error) return null;\n    if (error instanceof Error) {\n      const message = error.message?.trim();\n      return message?.length ? message : \"\";\n    }\n    if (typeof error === \"string\") {\n      const trimmed = error.trim();\n      return trimmed.length > 0 ? trimmed : \"\";\n    }\n    return String(error);\n  }, [error]);\n  const isErrored = Boolean(errorMessage);\n  const [visibleCount, setVisibleCount] = React.useState(() =>\n    Math.min(PAGE_SIZE, reviews.length),\n  );\n  const firstPageSignature = React.useMemo(\n    () =>\n      reviews\n        .slice(0, PAGE_SIZE)\n        .map((review) => review.id)\n        .join(\"|\"),\n    [reviews],\n  );\n  const previousSignatureRef = React.useRef(firstPageSignature);\n  const [autoLoadEnabled, setAutoLoadEnabled] = React.useState(true);\n  const scrollContainerRef = React.useRef<HTMLElement | null>(null);\n  const sentinelRef = React.useRef<HTMLDivElement | null>(null);\n  const autoLoadLockRef = React.useRef(false);\n  const restoredRef = React.useRef(false);\n\n  React.useEffect(() => {\n    const stored = readBooleanPreference(REVIEW_AUTOLOAD_STORAGE_KEY, true);\n    setAutoLoadEnabled((prev) => (prev === stored ? prev : stored));\n  }, []);\n\n  React.useEffect(() => {\n    const baselineVisible = Math.min(PAGE_SIZE, reviews.length);\n    const previousSignature = previousSignatureRef.current;\n    previousSignatureRef.current = firstPageSignature;\n\n    setVisibleCount((prev) => {\n      if (previousSignature !== firstPageSignature) {\n        return prev === baselineVisible ? prev : baselineVisible;\n      }\n      const clamped = Math.min(prev, reviews.length);\n      return clamped === prev ? prev : clamped;\n    });\n  }, [firstPageSignature, reviews.length]);\n\n  const visibleReviews = React.useMemo(\n    () => reviews.slice(0, visibleCount),\n    [reviews, visibleCount],\n  );\n\n  const hasMore = visibleReviews.length < count;\n  const shouldShowSummary = count > PAGE_SIZE;\n  const progressRatio = count === 0 ? 0 : visibleReviews.length / count;\n  const progressPercent = Math.min(100, Math.round(progressRatio * 100));\n\n  const summaryLabel = React.useMemo(() => {\n    if (!shouldShowSummary) return \"\";\n    if (hasMore) {\n      return `Showing ${visibleReviews.length} of ${count}`;\n    }\n    return `Showing all ${count}`;\n  }, [count, hasMore, shouldShowSummary, visibleReviews.length]);\n\n  const handleLoadMore = React.useCallback(() => {\n    setVisibleCount((prev) => Math.min(count, prev + PAGE_SIZE));\n  }, [count]);\n\n  const handleToggleAutoLoad = React.useCallback(() => {\n    setAutoLoadEnabled((prev) => {\n      const next = !prev;\n      writeSessionStorage(REVIEW_AUTOLOAD_STORAGE_KEY, String(next));\n      return next;\n    });\n  }, []);\n\n  React.useEffect(() => {\n    if (typeof window === \"undefined\") return undefined;\n    const container = scrollContainerRef.current;\n    if (!container) return undefined;\n\n    const stored = readSessionStorage(REVIEW_SCROLL_STORAGE_KEY);\n    if (!restoredRef.current && stored) {\n      const parsed = Number.parseInt(stored, 10);\n      if (!Number.isNaN(parsed)) {\n        container.scrollTop = parsed;\n      }\n    }\n    restoredRef.current = true;\n\n    let frame = 0;\n    const handleScroll = () => {\n      if (frame) return;\n      frame = window.requestAnimationFrame(() => {\n        frame = 0;\n        writeSessionStorage(\n          REVIEW_SCROLL_STORAGE_KEY,\n          Math.round(container.scrollTop).toString(),\n        );\n      });\n    };\n\n    const handlePageHide = () => {\n      writeSessionStorage(\n        REVIEW_SCROLL_STORAGE_KEY,\n        Math.round(container.scrollTop).toString(),\n      );\n    };\n\n    container.addEventListener(\"scroll\", handleScroll, { passive: true });\n    window.addEventListener(\"pagehide\", handlePageHide);\n\n    return () => {\n      container.removeEventListener(\"scroll\", handleScroll);\n      window.removeEventListener(\"pagehide\", handlePageHide);\n      if (frame) {\n        window.cancelAnimationFrame(frame);\n      }\n      writeSessionStorage(\n        REVIEW_SCROLL_STORAGE_KEY,\n        Math.round(container.scrollTop).toString(),\n      );\n    };\n  }, [visibleReviews.length]);\n\n  React.useEffect(() => {\n    autoLoadLockRef.current = false;\n  }, [visibleReviews.length]);\n\n  React.useEffect(() => {\n    if (typeof window === \"undefined\") return undefined;\n    if (!autoLoadEnabled) return undefined;\n    if (!hasMore) return undefined;\n    const container = scrollContainerRef.current;\n    const sentinel = sentinelRef.current;\n    if (!container || !sentinel) return undefined;\n    if (!(\"IntersectionObserver\" in window)) return undefined;\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting && !autoLoadLockRef.current) {\n            autoLoadLockRef.current = true;\n            handleLoadMore();\n          }\n        });\n      },\n      {\n        root: container,\n        rootMargin: \"25% 0px\",\n      },\n    );\n\n    observer.observe(sentinel);\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [autoLoadEnabled, handleLoadMore, hasMore, visibleReviews.length]);\n\n  const interactiveRingClass =\n    hoverRing &&\n    \"hover:ring-2 hover:ring-[var(--theme-ring,var(--focus))] focus-within:ring-2 focus-within:ring-[var(--theme-ring,var(--focus))]\";\n\n  const containerClass = cn(\n    \"w-full mx-auto rounded-card r-card-lg border border-border/35 bg-card/60 text-card-foreground shadow-outline-subtle\",\n    \"ds-card-pad backdrop-blur-sm transition-colors transition-shadow duration-motion-md\",\n    interactiveRingClass,\n    className,\n  );\n\n  const emptyContainerClass = cn(\n    \"w-full mx-auto rounded-card r-card-lg text-card-foreground\",\n    \"ds-card-pad backdrop-blur-sm transition-colors transition-shadow duration-motion-md\",\n    \"relative isolate overflow-hidden glitch-card\",\n    interactiveRingClass,\n    className,\n  );\n\n  const headerNode = header ? (\n    <header className=\"mb-[var(--space-2)] text-ui text-muted-foreground\">\n      {header}\n    </header>\n  ) : null;\n\n  if (isLoading) {\n    return (\n      <section\n        data-scope=\"reviews\"\n        data-state=\"loading\"\n        className={containerClass}\n        aria-busy=\"true\"\n      >\n        {headerNode}\n        <ul className=\"flex flex-col gap-[var(--space-3)]\" aria-hidden>\n          {Array.from({ length: 6 }).map((_, index) => (\n            <li key={`loading-${index}`}>\n              <div className=\"space-y-[var(--space-2)] rounded-card border border-border/35 bg-card/65 p-[var(--space-3)] shadow-outline-subtle\">\n                <Skeleton\n                  ariaHidden={false}\n                  role=\"status\"\n                  aria-label=\"Loading review title\"\n                  className=\"h-[var(--space-4)] w-2/3\"\n                  radius=\"sm\"\n                />\n                <Skeleton className=\"w-3/4\" />\n              </div>\n            </li>\n          ))}\n        </ul>\n        <Skeleton\n          ariaHidden={false}\n          role=\"status\"\n          aria-label=\"Preparing review actions\"\n          className=\"mt-[var(--space-4)] h-[var(--space-5)] w-1/2\"\n          radius=\"full\"\n        />\n      </section>\n    );\n  }\n\n  if (isErrored) {\n    return (\n      <section\n        data-scope=\"reviews\"\n        data-state=\"error\"\n        className={emptyContainerClass}\n        aria-live=\"polite\"\n      >\n        {headerNode}\n        <AIErrorCard\n          title=\"Unable to load reviews\"\n          description={errorMessage ?? \"We couldnt sync your reviews.\"}\n          hint=\"Check your connection or retry the sync to refresh your queue.\"\n          retryLabel=\"Retry sync\"\n          onRetry={onRetry ?? undefined}\n          className=\"glitch-card\"\n        />\n      </section>\n    );\n  }\n\n  if (count === 0) {\n    const baseCardClass = cn(\n      \"relative isolate overflow-hidden bg-card/80 text-card-foreground\",\n      interactiveRingClass,\n    );\n\n    return (\n      <section\n        data-scope=\"reviews\"\n        data-state=\"empty\"\n        className=\"mx-auto w-full space-y-[var(--space-3)]\"\n        aria-live=\"polite\"\n      >\n        {headerNode}\n        {hasAnyReviews ? (\n          <Card\n            depth=\"raised\"\n            className={cn(\n              baseCardClass,\n              className,\n              \"flex flex-col items-center justify-center gap-[var(--space-4)] text-center text-ui text-muted-foreground\",\n            )}\n          >\n            <span\n              aria-hidden\n              className=\"inline-flex items-center justify-center rounded-full border border-border/40 bg-card/70 p-[var(--space-3)] text-muted-foreground\"\n            >\n              <BookOpen\n                aria-hidden\n                focusable=\"false\"\n                className=\"size-[var(--space-6)]\"\n              />\n            </span>\n            <div className=\"space-y-[var(--space-1)]\">\n              <p className=\"text-card-foreground\">No reviews match your search.</p>\n              <p>Clear filters to see everything.</p>\n            </div>\n          </Card>\n        ) : (\n          <Card\n            depth=\"raised\"\n            className={cn(\n              baseCardClass,\n              className,\n              \"grid gap-[var(--space-4)] text-ui text-muted-foreground\",\n              \"sm:grid-cols-[minmax(0,1.25fr)_minmax(0,1fr)] sm:items-center\",\n            )}\n          >\n            <div className=\"relative mx-auto aspect-[4/3] w-full max-w-[min(100%,var(--space-15))] overflow-hidden rounded-[calc(var(--radius-card)*0.9)] border border-border/35 bg-gradient-blob-primary/30 sm:mx-0\">\n              <SmallAgnesNoxiImage className=\"rounded-[inherit]\" />\n            </div>\n            <div className=\"flex flex-col items-center gap-[var(--space-3)] text-center sm:items-start sm:text-left\">\n              <div className=\"space-y-[var(--space-1)]\">\n                <p className=\"text-title font-semibold tracking-[-0.01em] text-card-foreground\">\n                  No reviews yet.\n                </p>\n                <p className=\"max-w-[28ch]\">Start by capturing your first match.</p>\n              </div>\n              {onCreate ? (\n                <Button\n                  type=\"button\"\n                  size=\"lg\"\n                  onClick={onCreate}\n                  className=\"w-full sm:w-auto\"\n                >\n                  Start a review\n                </Button>\n              ) : null}\n            </div>\n          </Card>\n        )}\n      </section>\n    );\n  }\n\n  return (\n    <section\n      data-scope=\"reviews\"\n      data-state=\"ready\"\n      className={containerClass}\n      ref={(node) => {\n        scrollContainerRef.current = node;\n      }}\n    >\n      {headerNode}\n      <GenericList\n        items={visibleReviews}\n        getKey={(review) => review.id}\n        listClassName=\"flex flex-col gap-[var(--space-3)]\"\n        renderItem={(review) => (\n          <ReviewListItem\n            review={review}\n            selected={review.id === selectedId}\n            onSelect={onSelect ? () => onSelect(review.id) : undefined}\n            onRename={\n              onRename ? (nextTitle) => onRename(review.id, nextTitle) : undefined\n            }\n            onDelete={onDelete ? () => onDelete(review.id) : undefined}\n          />\n        )}\n      />\n      {shouldShowSummary ? (\n        <footer className=\"mt-[var(--space-3)] flex flex-col gap-[var(--space-2)] text-ui text-muted-foreground\">\n          <div className=\"flex items-center justify-between gap-[var(--space-3)]\">\n            <span aria-live=\"polite\">{summaryLabel}</span>\n            {hasMore ? (\n              <div className=\"flex items-center gap-[var(--space-2)]\">\n                <Button\n                  type=\"button\"\n                  size=\"sm\"\n                  variant=\"quiet\"\n                  onClick={handleToggleAutoLoad}\n                  className=\"shrink-0\"\n                  aria-pressed={autoLoadEnabled}\n                >\n                  {autoLoadEnabled ? \"Pause auto-load\" : \"Enable auto-load\"}\n                </Button>\n                <Button\n                  type=\"button\"\n                  size=\"sm\"\n                  variant=\"neo\"\n                  onClick={handleLoadMore}\n                  className=\"shrink-0\"\n                >\n                  Load more\n                </Button>\n              </div>\n            ) : null}\n          </div>\n          <div\n            role=\"progressbar\"\n            aria-label=\"Reviews shown\"\n            aria-valuemin={0}\n            aria-valuemax={count}\n            aria-valuenow={visibleReviews.length}\n            className=\"relative h-[var(--space-1)] w-full overflow-hidden rounded-full border border-border/40 bg-card/40\"\n          >\n            <span\n              aria-hidden\n              className=\"absolute inset-y-0 left-0 block h-full rounded-full bg-accent/70\"\n              style={{ width: `${progressPercent}%` }}\n            />\n          </div>\n        </footer>\n      ) : null}\n      <div ref={sentinelRef} aria-hidden className=\"h-px w-full\" />\n    </section>\n  );\n}\n","\"use client\";\n\nimport * as React from \"react\";\nimport { usePersistentState } from \"@/lib/db\";\nimport {\n  isPillar,\n  isRole,\n  isSide,\n  type Pillar,\n  type Review,\n  type ReviewMarker,\n} from \"@/lib/types\";\n\nconst REVIEWS_STORAGE_KEY = \"reviews.v1\" as const;\nconst EMPTY_REVIEW_LIST: Review[] = [];\n\nfunction isRecord(value: unknown): value is Record<string, unknown> {\n  return typeof value === \"object\" && value !== null && !Array.isArray(value);\n}\n\nfunction decodeStringArray(value: unknown): string[] {\n  if (!Array.isArray(value)) return [];\n  const result: string[] = [];\n  for (const entry of value) {\n    if (typeof entry === \"string\") {\n      result.push(entry);\n    }\n  }\n  return result;\n}\n\nfunction decodePillarArray(value: unknown): Pillar[] {\n  if (!Array.isArray(value)) return [];\n  const result: Pillar[] = [];\n  for (const entry of value) {\n    if (isPillar(entry)) {\n      result.push(entry);\n    }\n  }\n  return result;\n}\n\nfunction decodeReviewMarker(value: unknown): ReviewMarker | null {\n  if (!isRecord(value)) return null;\n  const id = value[\"id\"];\n  const time = value[\"time\"];\n  const seconds = value[\"seconds\"];\n  const note = value[\"note\"];\n  if (typeof id !== \"string\") return null;\n  if (typeof time !== \"string\") return null;\n  if (typeof seconds !== \"number\" || !Number.isFinite(seconds)) return null;\n  if (typeof note !== \"string\") return null;\n  const marker: ReviewMarker = { id, time, seconds, note };\n  if (typeof value[\"noteOnly\"] === \"boolean\") {\n    marker.noteOnly = value[\"noteOnly\"];\n  }\n  return marker;\n}\n\nfunction decodeReview(value: unknown): Review | null {\n  if (!isRecord(value)) return null;\n  const id = value[\"id\"];\n  const title = value[\"title\"];\n  const createdAt = value[\"createdAt\"];\n  if (typeof id !== \"string\") return null;\n  if (typeof title !== \"string\") return null;\n  if (typeof createdAt !== \"number\" || !Number.isFinite(createdAt)) return null;\n  const review: Review = {\n    id,\n    title,\n    createdAt,\n    tags: decodeStringArray(value[\"tags\"]),\n    pillars: decodePillarArray(value[\"pillars\"]),\n  };\n  const opponent = value[\"opponent\"];\n  if (typeof opponent === \"string\") {\n    review.opponent = opponent;\n  }\n  const lane = value[\"lane\"];\n  if (typeof lane === \"string\") {\n    review.lane = lane;\n  }\n  const side = value[\"side\"];\n  if (isSide(side)) {\n    review.side = side;\n  }\n  const patch = value[\"patch\"];\n  if (typeof patch === \"string\") {\n    review.patch = patch;\n  }\n  const duration = value[\"duration\"];\n  if (typeof duration === \"string\") {\n    review.duration = duration;\n  }\n  const matchup = value[\"matchup\"];\n  if (typeof matchup === \"string\") {\n    review.matchup = matchup;\n  }\n  const notes = value[\"notes\"];\n  if (typeof notes === \"string\") {\n    review.notes = notes;\n  }\n  const resultValue = value[\"result\"];\n  if (resultValue === \"Win\" || resultValue === \"Loss\") {\n    review.result = resultValue;\n  }\n  const score = value[\"score\"];\n  if (typeof score === \"number\" && Number.isFinite(score)) {\n    review.score = score;\n  }\n  const role = value[\"role\"];\n  if (isRole(role)) {\n    review.role = role;\n  }\n  const focusOn = value[\"focusOn\"];\n  if (typeof focusOn === \"boolean\") {\n    review.focusOn = focusOn;\n  }\n  const focus = value[\"focus\"];\n  if (typeof focus === \"number\" && Number.isFinite(focus)) {\n    review.focus = focus;\n  }\n  const markersRaw = value[\"markers\"];\n  if (Array.isArray(markersRaw)) {\n    const markers = markersRaw\n      .map(decodeReviewMarker)\n      .filter((marker): marker is ReviewMarker => marker !== null);\n    if (markers.length > 0 || markersRaw.length === 0) {\n      review.markers = markers;\n    }\n  }\n  const status = value[\"status\"];\n  if (status === \"new\") {\n    review.status = status;\n  }\n  return review;\n}\n\nexport function decodeReviews(value: unknown): Review[] | null {\n  if (!Array.isArray(value)) return null;\n  const result: Review[] = [];\n  for (const entry of value) {\n    const review = decodeReview(entry);\n    if (review) result.push(review);\n  }\n  return result;\n}\n\nexport function useReviews() {\n  const [reviews, setReviews] = usePersistentState<Review[]>(\n    REVIEWS_STORAGE_KEY,\n    EMPTY_REVIEW_LIST,\n    { decode: decodeReviews },\n  );\n  const [isHydrated, setIsHydrated] = React.useState(false);\n\n  React.useEffect(() => {\n    setIsHydrated(true);\n  }, []);\n\n  const totalCount = reviews.length;\n\n  const flaggedReviews = React.useMemo(\n    () => reviews.filter((review) => review.focusOn),\n    [reviews],\n  );\n\n  const flaggedReviewCount = flaggedReviews.length;\n\n  const recentReviews = React.useMemo(\n    () =>\n      [...reviews]\n        .sort((a, b) => b.createdAt - a.createdAt)\n        .slice(0, 3),\n    [reviews],\n  );\n\n  return {\n    reviews,\n    setReviews,\n    isHydrated,\n    totalCount,\n    flaggedReviews,\n    flaggedReviewCount,\n    recentReviews,\n  } as const;\n}\n","\"use client\";\n\nimport * as React from \"react\";\nimport { Label } from \"@/components/ui\";\nimport { Input } from \"@/components/ui/primitives/Input\";\nimport { Target, Shield } from \"lucide-react\";\nimport type { Review } from \"@/lib/types\";\n\nexport type LaneOpponentFormHandle = {\n  save: () => void;\n};\n\ntype LaneOpponentFormProps = {\n  lane?: string;\n  opponent?: string;\n  commitMeta: (patch: Partial<Review>) => void;\n  onRename?: (title: string) => void;\n  onOpponentEnter?: () => void;\n};\n\nfunction LaneOpponentForm(\n  {\n    lane: lane0 = \"\",\n    opponent: opponent0 = \"\",\n    commitMeta,\n    onRename,\n    onOpponentEnter,\n  }: LaneOpponentFormProps,\n  ref: React.Ref<LaneOpponentFormHandle>,\n) {\n  const [lane, setLane] = React.useState(lane0);\n  const [opponent, setOpponent] = React.useState(opponent0);\n  const laneRef = React.useRef<HTMLInputElement>(null);\n  const opponentRef = React.useRef<HTMLInputElement>(null);\n  const laneInputId = React.useId();\n  const opponentInputId = React.useId();\n  const opponentLabelId = React.useId();\n\n  React.useEffect(() => {\n    setLane(lane0);\n  }, [lane0]);\n\n  React.useEffect(() => {\n    setOpponent(opponent0);\n  }, [opponent0]);\n\n  const commitLane = React.useCallback(() => {\n    const t = (lane || \"\").trim();\n    onRename?.(t);\n    commitMeta({ lane: t });\n  }, [lane, commitMeta, onRename]);\n\n  const commitOpponent = React.useCallback(() => {\n    const t = (opponent || \"\").trim();\n    commitMeta({ opponent: t });\n  }, [opponent, commitMeta]);\n\n  const save = React.useCallback(() => {\n    commitLane();\n    commitOpponent();\n  }, [commitLane, commitOpponent]);\n\n  React.useImperativeHandle(ref, () => ({ save }), [save]);\n\n  const go = React.useCallback(\n    (r: React.RefObject<HTMLInputElement | null>) => {\n      r.current?.focus();\n    },\n    [],\n  );\n\n  return (\n    <div className=\"flex flex-col gap-[var(--space-2)]\">\n      <div className=\"mb-[var(--space-2)] space-y-[var(--space-2)]\">\n        <Label htmlFor={laneInputId}>Lane</Label>\n        <div className=\"relative\">\n          <Target className=\"pointer-events-none absolute left-[var(--space-4)] top-1/2 size-[var(--icon-size-sm)] -translate-y-1/2 text-muted-foreground\" />\n          <Input\n            ref={laneRef}\n            name=\"lane\"\n            id={laneInputId}\n            value={lane}\n            onChange={(e) => setLane(e.target.value)}\n            onBlur={commitLane}\n            onKeyDown={(e) => {\n              if (e.key === \"Enter\") {\n                e.preventDefault();\n                commitLane();\n                go(opponentRef);\n              }\n            }}\n            className=\"pl-[var(--space-6)]\"\n            placeholder=\"Ashe/Lulu\"\n          />\n        </div>\n      </div>\n\n      <div className=\"space-y-[var(--space-2)]\">\n        <Label\n          htmlFor={opponentInputId}\n          className=\"flex items-center gap-[var(--space-2)]\"\n        >\n          <span id={opponentLabelId}>Opponent</span>\n          <span\n            aria-hidden\n            className=\"h-[var(--hairline-w)] flex-1 bg-gradient-to-r from-foreground/20 via-foreground/5 to-transparent\"\n          />\n        </Label>\n        <div className=\"relative\">\n          <Shield className=\"pointer-events-none absolute left-[var(--space-4)] top-1/2 size-[var(--icon-size-sm)] -translate-y-1/2 text-muted-foreground\" />\n          <Input\n            ref={opponentRef}\n            name=\"opponent\"\n            id={opponentInputId}\n            value={opponent}\n            onChange={(e) => setOpponent(e.target.value)}\n            onBlur={commitOpponent}\n            onKeyDown={(e) => {\n              if (e.key === \"Enter\") {\n                e.preventDefault();\n                onOpponentEnter?.();\n              }\n            }}\n            placeholder=\"Draven/Thresh\"\n            className=\"pl-[var(--space-6)]\"\n            aria-labelledby={opponentLabelId}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nconst LaneOpponentFormComponent = React.forwardRef<\n  LaneOpponentFormHandle,\n  LaneOpponentFormProps\n>(LaneOpponentForm)\n\nLaneOpponentFormComponent.displayName = \"LaneOpponentForm\"\n\nexport { LaneOpponentFormComponent as LaneOpponentForm }\n","import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\ntype SectionLabelProps<T extends React.ElementType = \"h3\"> = {\n  as?: T;\n  children: React.ReactNode;\n} & Omit<React.ComponentPropsWithoutRef<T>, \"as\" | \"children\">;\n\n/** Reusable section label divider for grouping review sections. */\nexport function SectionLabel<T extends React.ElementType = \"h3\">({\n  as,\n  children,\n  className,\n  ...props\n}: SectionLabelProps<T>) {\n  const Component = as ?? \"h3\";\n\n  return (\n    <div className=\"mb-[var(--space-2)] flex items-center gap-[var(--space-2)]\">\n      <Component\n        className={cn(\"text-ui tracking-wide text-muted-foreground\", className)}\n        {...props}\n      >\n        {children}\n      </Component>\n      <div className=\"h-[var(--hairline-w)] flex-1 bg-gradient-to-r from-foreground/20 via-foreground/5 to-transparent\" />\n    </div>\n  );\n}\n\n","import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\ntype ReviewSurfaceTone = \"default\" | \"muted\" | \"translucent\";\ntype ReviewSurfacePadding =\n  | \"none\"\n  | \"xs\"\n  | \"sm\"\n  | \"md\"\n  | \"lg\"\n  | \"inline\";\n\ntype ReviewSurfaceOwnProps<T extends React.ElementType = \"div\"> = {\n  tone?: ReviewSurfaceTone;\n  padding?: ReviewSurfacePadding;\n  focusWithin?: boolean;\n  as?: T;\n};\n\nexport type ReviewSurfaceProps<T extends React.ElementType = \"div\"> =\n  ReviewSurfaceOwnProps<T> &\n    Omit<React.ComponentPropsWithoutRef<T>, keyof ReviewSurfaceOwnProps<T>>;\n\nconst toneClassNames: Record<ReviewSurfaceTone, string> = {\n  default: \"border border-border bg-card\",\n  muted: \"border border-border/80 bg-muted/40\",\n  translucent: \"border border-border/70 veil-soft\",\n};\n\nconst paddingClassNames: Record<ReviewSurfacePadding, string> = {\n  none: \"\",\n  xs: \"px-[var(--space-2)] py-[var(--space-1)]\",\n  sm: \"px-[var(--space-3)] py-[var(--space-2)]\",\n  md: \"px-[var(--space-4)] py-[var(--space-3)]\",\n  lg: \"px-[var(--space-5)] py-[var(--space-4)]\",\n  inline: \"px-[var(--space-4)]\",\n};\n\nexport function ReviewSurface<\n  T extends React.ElementType = \"div\",\n>({\n  tone = \"default\",\n  padding = \"md\",\n  focusWithin = false,\n  as,\n  className,\n  children,\n  ...rest\n}: ReviewSurfaceProps<T>) {\n  const Comp = (as ?? \"div\") as React.ElementType;\n\n  return (\n    <Comp\n      className={cn(\n        \"rounded-card r-card-lg\",\n        toneClassNames[tone],\n        paddingClassNames[padding],\n        focusWithin && \"focus-within:ring-2 focus-within:ring-ring\",\n        className,\n      )}\n      {...rest}\n    >\n      {children}\n    </Comp>\n  );\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"ReviewSliderTrack_root__q5TK_\",\"glitch\":\"ReviewSliderTrack_glitch__DBxoc\",\"fill\":\"ReviewSliderTrack_fill__V9rSw\",\"knob\":\"ReviewSliderTrack_knob__II8X_\"};","import type { Review } from \"@/lib/types\";\n\nconst SEARCH_CACHE_KEY = Symbol.for(\"planner.reviews.searchCache\");\n\ntype SearchCacheMetadata =\n  Pick<\n    Review,\n    | \"title\"\n    | \"tags\"\n    | \"pillars\"\n    | \"opponent\"\n    | \"lane\"\n    | \"side\"\n    | \"result\"\n    | \"patch\"\n    | \"duration\"\n    | \"notes\"\n  > & {\n    tagsLength: number;\n    pillarsLength: number;\n  };\n\ntype SearchCache = {\n  raw: string;\n  blob: string;\n  meta: SearchCacheMetadata;\n};\n\ntype SearchableReview = Review & {\n  [SEARCH_CACHE_KEY]?: SearchCache;\n};\n\nfunction collectSearchParts(review: Review): string[] {\n  const parts: string[] = [];\n  if (review.title) parts.push(review.title);\n  if (Array.isArray(review.tags) && review.tags.length)\n    parts.push(review.tags.join(\" \"));\n  if (Array.isArray(review.pillars) && review.pillars.length)\n    parts.push(review.pillars.join(\" \"));\n  if (review.opponent) parts.push(review.opponent);\n  if (review.lane) parts.push(review.lane);\n  if (review.side) parts.push(review.side);\n  if (review.result) parts.push(review.result);\n  if (review.patch) parts.push(review.patch);\n  if (review.duration) parts.push(review.duration);\n  if (review.notes) parts.push(review.notes);\n  return parts;\n}\n\nfunction buildSearchSource(review: Review): string {\n  return collectSearchParts(review).join(\" \");\n}\n\nfunction setCache(review: SearchableReview, cache: SearchCache) {\n  Object.defineProperty(review, SEARCH_CACHE_KEY, {\n    value: cache,\n    configurable: true,\n    enumerable: false,\n    writable: true,\n  });\n}\n\nfunction captureMetadata(review: Review): SearchCacheMetadata {\n  return {\n    title: review.title,\n    tags: review.tags,\n    tagsLength: review.tags.length,\n    pillars: review.pillars,\n    pillarsLength: review.pillars.length,\n    opponent: review.opponent,\n    lane: review.lane,\n    side: review.side,\n    result: review.result,\n    patch: review.patch,\n    duration: review.duration,\n    notes: review.notes,\n  };\n}\n\nfunction isCacheFresh(\n  review: Review,\n  metadata: SearchCacheMetadata,\n): boolean {\n  return (\n    metadata.title === review.title &&\n    metadata.tags === review.tags &&\n    metadata.tagsLength === review.tags.length &&\n    metadata.pillars === review.pillars &&\n    metadata.pillarsLength === review.pillars.length &&\n    metadata.opponent === review.opponent &&\n    metadata.lane === review.lane &&\n    metadata.side === review.side &&\n    metadata.result === review.result &&\n    metadata.patch === review.patch &&\n    metadata.duration === review.duration &&\n    metadata.notes === review.notes\n  );\n}\n\nexport function getSearchBlob(review: Review): string {\n  const searchable = review as SearchableReview;\n  const cached = searchable[SEARCH_CACHE_KEY];\n  if (cached && isCacheFresh(review, cached.meta)) return cached.blob;\n  const raw = buildSearchSource(review);\n  const blob = raw.toLowerCase();\n  setCache(searchable, { raw, blob, meta: captureMetadata(review) });\n  return blob;\n}\n\nexport function primeReviewSearch(review: Review): Review {\n  getSearchBlob(review);\n  return review;\n}\n"],"names":["ReviewEditor","review","FOCUS_POOLS","onChangeNotes","onChangeTags","onRename","onChangeMeta","onDone","onDelete","className","notes","setNotes","React","tags","setTags","Array","isArray","rootRef","laneFormRef","resultScoreRef","pillarsRef","timestampsRef","focusRangeRef","laneLabelId","tagsLabelId","notesLabelId","lastRole","setLastRole","usePersistentState","LAST_ROLE_KEY","role","setRole","focusOn","Boolean","focus","setFocus","Number","isFinite","NaN","id","r","setFocusOn","commitMeta","partial","commitNotes","saveAll","current","save","saveAllRef","handlePointerDown","e","contains","target","document","addEventListener","removeEventListener","handleChangeTags","next","focusMsgIndex","pickIndex","String","focusMsg","SectionCard","ref","variant","cn","div","SectionLabel","RoleSelector","value","onChange","selectRole","v","ariaLabelledby","LaneOpponentForm","lane","title","opponent","onOpponentEnter","focusResult","IconButton","aria-label","size","iconSize","onClick","Trash2","Check","ResultScoreSection","result","score","onScoreEnter","focusTime","aria-pressed","tone","NeonIcon","kind","on","ReviewSurface","padding","focusWithin","input","type","min","max","step","ReviewSliderTrack","Badge","as","span","PillarsSelector","pillars","TimestampMarkers","markers","TagInput","placeholder","helper","Textarea","onBlur","resize","textareaClassName","aria-labelledby","ReviewSummary","SCORE_POOLS","onEdit","normalizedScore","Math","round","normalizedFocus","laneTitle","scorePool","msgIndex","length","msg","Icon","ScoreIcon","cls","scoreIconCls","scoreIcon","focusPool","roleOption","ROLE_OPTIONS","find","RoleIcon","roleLabel","label","resultBadge","metaRow","headerActions","Pencil","Hero","subtitle","headingLevel","actions","accent","ReviewSummaryScore","ReviewSummaryPillars","ReviewSummaryTimestamps","ReviewSummaryNotes","itemLoading","loadingLine","scoreBadge","ReviewListItem","selected","loading","disabled","onSelect","rest","trim","untitled","matchup","side","contextLabel","filter","join","createdAtLabel","createdAt","date","Date","isNaN","getTime","toLocaleDateString","LOCALE","year","month","day","summary","raw","normalized","replace","MAX_SUMMARY_LENGTH","slice","trimEnd","event","defaultPrevented","HTMLElement","closest","handleKeyDown","currentTarget","key","preventDefault","handleRename","nextTitle","window","prompt","data-scope","cardClassName","Card","tabIndex","aria-current","undefined","aria-disabled","data-disabled","data-selected","depth","handleSelect","onKeyDown","aria-hidden","statusDotBlink","statusDotWin","statusDotDefault","status","statusDotPulse","p","data-review-item-action","Button","stopPropagation","displayName","normalizeMarker","m","parseMmSs","obj","uid","seconds","time","formatMmSs","note","noteOnly","TimestampMarkersComponent","markers0","lastMarkerMode","setLastMarkerMode","LAST_MARKER_MODE_KEY","lastMarkerTime","setLastMarkerTime","LAST_MARKER_TIME_KEY","setMarkers","map","useTimestamp","setUseTimestamp","tTime","setTTime","tNote","setTNote","timeRef","noteRef","parsedTime","timeError","canAddMarker","sortedMarkers","sort","a","b","addMarker","s","safeS","removeMarker","Input","name","inputMode","pattern","aria-invalid","aria-describedby","FileText","Plus","ul","NeonPillarChip","active","children","prev","phase","setPhase","t","setTimeout","clearTimeout","lit","styles","data-lit","data-phase","PillarsSelectorComponent","pillars0","setPillars","togglePillar","has","includes","x","concat","ALL_PILLARS","button","onIconKey","handler","PillarBadge","pillar","ScoreMeter","trackProps","detail","staticGlow","ReviewPage","reviews","setReviews","isHydrated","useReviews","selectedId","setSelectedId","useState","useEffect","some","onCreate","useCallback","now","fresh","patch","duration","primeReviewSearch","patchById","nextNotes","nextTags","safeSelectedId","useMemo","ReviewsPage","control","surfaceProps","valueFormatter","surfaceClassName","surfaceRest","trackClassName","trackRest","labelId","labelledControl","isElementWithProps","existing","props","merged","formatValue","formatDefaultValue","hasTimed","hasNoteOnly","hasTimedMarker","marker","sorted","StaticNeonWrap","DEFAULT_EMPTY","description","GenericList","items","renderItem","getKey","getStatus","emptyState","listClassName","itemClassName","testId","action","aria-live","data-testid","data-text","Ghost","item","index","statusInfo","statusBadge","li","toneTokenClassNames","knobSizeByVariant","display","fillClassName","knobClassName","glitch","clamped","isInteractive","data-tone","data-variant","data-value","data-glitch","Flag","MapPin","Target","Crosshair","Shield","seed","modulo","h","i","charCodeAt","imul","abs","Skull","Meh","Trophy","Smile","ResultScoreSectionComponent","result0","score0","setResult","setScore","resultRef","scoreRangeRef","resultLabelId","scoreLabelId","pool","ToggleButton","ariaLabelledBy","leftLabel","rightLabel","ScoreSlider","controlClassName","useReviewFilter","base","q","needle","toLowerCase","list","getSearchBlob","ts","localeCompare","sensitivity","sizeProp","Clock","Brain","UIToggleNeonIcon","icon","colorVar","searchParams","error","onRetry","useSearchParams","setQ","setSort","detailMode","setDetailMode","intentApplied","setIntentApplied","isLoading","errorMessage","Error","message","trimmed","isErrored","allowInteractions","commitCreateReview","tryCreateReview","get","intentParam","filtered","totalCount","listReviews","filteredCount","hasReviews","panelClass","detailBaseId","heroHeadingId","sortLabelId","emptySearchDescriptionId","emptySearchTooltipId","sortItems","shouldShowEmptySearchHelper","isSearchTooltipOpen","setIsSearchTooltipOpen","closeSearchTooltip","openSearchTooltip","handleSearchFocus","handleSearchBlur","handleSearchMouseEnter","handleSearchMouseLeave","activeElement","handleSearchKeyDown","handleWindowKeyDown","heroSearchLabel","heroSearchDescription","ids","push","heroSearchDisabled","heroSearchTooltip","PageShell","grid","topClassName","frame","BookOpen","search","onValueChange","height","debounceMs","right","onFocus","onMouseEnter","onMouseLeave","illustration","Image","src","alt","fill","sizes","priority","contentClassName","Skeleton","ariaHidden","radius","Select","hideLabel","nav","ReviewList","header","hasAnyReviews","hoverRing","ReviewPanel","aria-busy","AIErrorCard","hint","retryLabel","TabBar","ariaLabel","idBase","hidden","values","focusable","CardHeader","CardTitle","CardDescription","CardContent","CardFooter","count","activeIdx","findIndex","liveRef","textContent","tablistClassName","linkPanels","cardSurfaceClassName","REVIEW_SCROLL_STORAGE_KEY","REVIEW_AUTOLOAD_STORAGE_KEY","readSessionStorage","sessionStorage","getItem","writeSessionStorage","setItem","visibleCount","setVisibleCount","PAGE_SIZE","firstPageSignature","previousSignatureRef","autoLoadEnabled","setAutoLoadEnabled","scrollContainerRef","sentinelRef","autoLoadLockRef","restoredRef","stored","readBooleanPreference","fallback","baselineVisible","previousSignature","visibleReviews","hasMore","shouldShowSummary","progressPercent","progressRatio","summaryLabel","handleLoadMore","handleToggleAutoLoad","container","parsed","parseInt","scrollTop","handleScroll","requestAnimationFrame","toString","handlePageHide","passive","cancelAnimationFrame","sentinel","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","root","rootMargin","observe","disconnect","interactiveRingClass","containerClass","emptyContainerClass","headerNode","section","data-state","from","_","baseCardClass","SmallAgnesNoxiImage","node","footer","aria-valuemin","aria-valuemax","aria-valuenow","style","width","EMPTY_REVIEW_LIST","isRecord","decodeReviewMarker","decodeReviews","decodeReview","decodeStringArray","decodePillarArray","isPillar","isSide","resultValue","isRole","markersRaw","REVIEWS_STORAGE_KEY","decode","setIsHydrated","flaggedReviews","flaggedReviewCount","recentReviews","LaneOpponentFormComponent","lane0","opponent0","setLane","setOpponent","laneRef","opponentRef","laneInputId","opponentInputId","opponentLabelId","commitLane","commitOpponent","go","Label","htmlFor","Component","toneClassNames","default","muted","translucent","paddingClassNames","none","xs","sm","md","lg","inline","Comp","SEARCH_CACHE_KEY","Symbol","for","cached","searchable","metadata","meta","isCacheFresh","tagsLength","pillarsLength","blob","collectSearchParts","buildSearchSource","parts","Object","defineProperty","cache","configurable","enumerable","writable"],"sourceRoot":"","ignoreList":[]}