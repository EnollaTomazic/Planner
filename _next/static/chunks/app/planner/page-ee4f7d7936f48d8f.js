(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[649],{25:(e,t,a)=>{"use strict";a.d(t,{default:()=>h});var r=a(5155),s=a(2115),n=a(4979),l=a(3462),i=a(7649),o=a(4467),c=a(4269),d=a(5505);let u=(0,a(1847).A)("arrow-up-to-line",[["path",{d:"M5 3h14",key:"7usisc"}],["path",{d:"m18 13-6-6-6 6",key:"1kf1n9"}],["path",{d:"M12 7v14",key:"1akyts"}]]);var m=a(383),p=a(4804);let f=new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short"}),v=new Intl.DateTimeFormat(void 0,{weekday:"long",month:"long",day:"numeric"}),g=s.forwardRef(function(e,t){let{iso:a,selected:n,today:l,done:i,total:o,onClick:d,onDoubleClick:u,onNavigate:m,onFocus:f,tabIndex:g}=e,h=s.useMemo(()=>(e=>{let t=(0,p.E4)(e);return t?v.format(t):e})(a),[a]),x=s.useMemo(()=>{if(o<=0)return 0;let e=i/o;return!Number.isFinite(e)||e<=0?0:e>=1?1:e},[i,o]),{tint:j,text:k}=s.useMemo(()=>0===o?{tint:"bg-card",text:"text-muted-foreground"}:x>=2/3?{tint:"bg-success-soft",text:"text-foreground"}:x>=1/3?{tint:"bg-warning-soft",text:"text-foreground"}:{tint:"bg-warning-soft-strong",text:"text-foreground"},[x,o]),b=s.useId(),y=s.useId(),w=n?"Press Enter again or double-click to jump.":"Press Enter to select.",N="".concat(y," ").concat(b);return(0,r.jsxs)("button",{type:"button",role:"option",ref:t,onClick:()=>d(a),onDoubleClick:()=>u(a),onKeyDown:e=>{if("Enter"===e.key&&n){e.preventDefault(),e.stopPropagation(),u(a);return}if("ArrowLeft"===e.key){e.preventDefault(),m("prev");return}if("ArrowRight"===e.key){e.preventDefault(),m("next");return}if("Home"===e.key){e.preventDefault(),m("first");return}"End"===e.key&&(e.preventDefault(),m("last"))},onFocus:f,tabIndex:g,"aria-selected":n,"aria-label":"Select ".concat(h),"aria-describedby":N,title:n?"Press Enter again or double-click to jump":"Click or press Enter to focus",className:(0,c.cn)("chip relative flex-none w-[--chip-width] rounded-card r-card-lg border text-left px-[var(--space-3)] py-[var(--space-2)] transition snap-start","border-card-hairline",j,"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring","active:border-primary/60 active:bg-card/85",l&&"chip--today",n?"border-dashed border-primary/75":"hover:border-primary/40"),"data-today":l||void 0,"data-active":n||void 0,children:[(0,r.jsx)("div",{className:(0,c.cn)("chip__date",k,l&&"bg-card"===j?"text-accent-3":void 0),"data-text":h,children:h}),(0,r.jsxs)("div",{id:y,className:"chip__counts text-foreground",children:[(0,r.jsx)("span",{className:"tabular-nums",children:i}),(0,r.jsxs)("span",{className:"text-foreground/70",children:[" / ",o]})]}),(0,r.jsx)("span",{id:b,className:"sr-only","aria-live":"polite","aria-atomic":"true",children:w}),(0,r.jsx)("span",{"aria-hidden":!0,className:"chip__scan"}),(0,r.jsx)("span",{"aria-hidden":!0,className:"chip__edge"})]})});function h(){let{iso:e,setIso:t,today:a}=(0,i.useFocusDate)(),{start:v,end:h,days:x}=(0,i.useWeek)(e),j="".concat(f.format(v)," — ").concat(f.format(h)),k="".concat(f.format(v)," → ").concat(f.format(h)),b=(0,p.$$)(v),y=(0,p.$$)(h),{per:w,weekDone:N,weekTotal:P}=(0,o.useWeekData)(x),C=(0,d.j)(),D=s.useRef([]),S=s.useCallback(()=>{let t=x.indexOf(e);return -1!==t?t:x.length>0?0:-1},[x,e]),[T,I]=s.useState(()=>{let e=S();return -1===e?0:e});s.useEffect(()=>{let e=S();-1!==e&&I(t=>t===e?t:e)},[S]),s.useEffect(()=>{D.current.length=x.length},[x.length]);let M=s.useCallback(a=>{if(a<0||a>=x.length)return;let r=x[a];r&&(r!==e&&t(r),I(a),window.requestAnimationFrame(()=>{var e;null==(e=D.current[a])||e.focus({preventScroll:!0})}))},[x,e,t]),E=s.useCallback((e,t)=>{if(0===x.length)return;let a=e;switch(t){case"prev":a=Math.max(0,e-1);break;case"next":a=Math.min(x.length-1,e+1);break;case"first":a=0;break;case"last":a=x.length-1}a!==e&&M(a)},[x,M]),[A,z]=s.useState(!1);s.useEffect(()=>{let e=null,t=()=>{null===e&&(e=window.requestAnimationFrame(()=>{e=null;let t=window.scrollY<=4;z(e=>!t&&e)}))};return window.addEventListener("scroll",t,{passive:!0}),()=>{window.removeEventListener("scroll",t),null!==e&&window.cancelAnimationFrame(e)}},[]);let _=e=>t(e),F=e=>{t(e);let a=document.getElementById("day-".concat(e));a&&(a.scrollIntoView({behavior:C?"auto":"smooth",block:"start",inline:"nearest"}),a.focus({preventScroll:!0}),z(!0))},O=A?(0,r.jsxs)(l.default,{variant:"primary",size:"sm","aria-label":"Jump to top",onClick:()=>{{var e;window.scrollTo({top:0,behavior:C?"auto":"smooth"});let t=null!=(e=document.getElementById("planner-header"))?e:document.getElementById("main-content");t instanceof HTMLElement&&window.requestAnimationFrame(()=>{t.focus({preventScroll:!0})})}},title:"Jump to top",className:"px-[var(--space-4)]",children:[(0,r.jsx)(u,{}),(0,r.jsx)("span",{children:"Top"})]}):void 0;return(0,r.jsx)(n.default,{heading:j,subtitle:"".concat(b," → ").concat(y),actions:O,rail:!0,sticky:!0,dividerTint:"primary",children:(0,r.jsxs)("div",{className:"grid gap-[var(--space-3)] flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-[var(--space-3)]",children:[(0,r.jsxs)("span",{className:(0,c.cn)("inline-flex items-center gap-[var(--space-2)] rounded-card r-card-lg px-[var(--space-3)] py-[var(--space-2)] text-ui","bg-card/72 ring-1 ring-border/55 backdrop-blur"),"aria-label":"Week range ".concat(k),children:[(0,r.jsx)(m.A,{className:"size-4 opacity-80"}),(0,r.jsx)("span",{className:"opacity-90",children:k})]}),(0,r.jsxs)("span",{className:"text-ui text-muted-foreground",children:[(0,r.jsx)("span",{className:"opacity-70",children:"Total tasks: "}),(0,r.jsxs)("span",{className:"font-medium tabular-nums text-foreground",children:[N," / ",P]})]})]}),(0,r.jsx)("div",{className:"flex gap-[var(--space-3)] overflow-x-auto snap-x snap-mandatory lg:overflow-visible",children:x.map((t,s)=>{var n,l,i,o;return(0,r.jsx)(g,{iso:t,selected:t===e,today:t===a,done:null!=(i=null==(n=w[s])?void 0:n.done)?i:0,total:null!=(o=null==(l=w[s])?void 0:l.total)?o:0,onClick:_,onDoubleClick:F,onNavigate:e=>E(s,e),onFocus:()=>I(s),tabIndex:T===s?0:-1,ref:e=>{D.current[s]=e}},t)})})]})})}},142:(e,t,a)=>{"use strict";a.d(t,{default:()=>o});var r=a(5155),s=a(2115),n=a(8363);let l=(0,a(1847).A)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);var i=a(5505);function o(e){let{watchRef:t,forceVisible:a=!1}=e,[o,c]=s.useState(!1),d=(0,i.j)();return(s.useEffect(()=>{let e=t.current;if(!e)return;let a=new IntersectionObserver(e=>{e.forEach(e=>c(!e.isIntersecting))});return a.observe(e),()=>{a.unobserve(e),a.disconnect()}},[t]),o||a)?(0,r.jsx)(n.default,{"aria-label":"Scroll to top",onClick:()=>{window.scrollTo({top:0,behavior:d?"auto":"smooth"})},className:"fixed bottom-[var(--space-8)] right-[var(--space-2)] z-50",children:(0,r.jsx)(l,{})}):null}},306:(e,t,a)=>{"use strict";a.d(t,{q0:()=>r});let r=[4,8,12,16,24,32,48,64],s=[["md",8],["lg",12],["xl",16],["2xl",24],["full",9999]];s.reduce((e,t)=>{let[a,r]=t;return e[a]=r,e},{}),s.map(e=>{let[t]=e;return"--radius-".concat(t)}),s.reduce((e,t)=>{let[a,r]=t;return e["--radius-".concat(a)]="".concat(r,"px"),e},{})},1146:(e,t,a)=>{"use strict";a.d(t,{default:()=>b});var r=a(5155);a(8768);var s=a(2115),n=a(7151),l=a(7833),i=a(3706);let o=s.memo(function(e){let{iso:t,isToday:a}=e;return(0,r.jsx)("li",{id:"day-".concat(t),"aria-label":"Day ".concat(t).concat(a?" (Today)":""),className:"w-full scroll-m-[calc(var(--space-8)+var(--space-6))] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",tabIndex:-1,children:(0,r.jsx)(i.default,{iso:t,isToday:a})})},(e,t)=>e.iso===t.iso&&e.isToday===t.isToday);var c=a(142),d=a(7649),u=a(6557),m=a(25),p=a(4625),f=a(1464),v=a(3462);let g=(0,a(1847).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var h=a(7937),x=a(383),j=a(4804);function k(){let{iso:e,today:t,setIso:a}=(0,d.useFocusDate)(),{start:i,end:u,days:k}=(0,d.useWeek)(e),b=s.useMemo(()=>(0,j.tj)(i,u),[i,u]),y=s.useMemo(()=>k.map(e=>({iso:e,isToday:e===t})),[k,t]),w=s.useCallback(()=>{a((0,j.$$)((0,j.fi)(i,-7)))},[a,i]),N=s.useCallback(()=>{a((0,j.$$)((0,j.fi)(i,7)))},[a,i]),P=s.useCallback(()=>{a(t)},[a,t]),C=s.useRef(null),D=(0,r.jsxs)("div",{className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsxs)(v.default,{variant:"ghost",size:"sm","aria-label":"Previous week",onClick:w,children:[(0,r.jsx)(g,{}),(0,r.jsx)("span",{children:"Prev"})]}),(0,r.jsx)(v.default,{size:"sm","aria-label":"Jump to today",onClick:P,children:"Today"}),(0,r.jsxs)(v.default,{variant:"ghost",size:"sm","aria-label":"Next week",onClick:N,children:[(0,r.jsx)("span",{children:"Next"}),(0,r.jsx)(h.A,{})]})]});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.default,{as:"main",className:"py-[var(--space-6)] space-y-[var(--space-6)]","aria-labelledby":"planner-header",children:[(0,r.jsx)(p.zY,{contentClassName:"space-y-[var(--space-2)]",header:{id:"planner-header",tabIndex:-1,eyebrow:"Planner",heading:"Planner for Today",subtitle:"Plan your week",icon:(0,r.jsx)(x.A,{className:"opacity-80"}),right:D,sticky:!0},hero:{frame:!1,sticky:!1,rail:!1,barClassName:"hidden",className:"planner-header__hero",heading:(0,r.jsx)("span",{className:"sr-only",children:"Week picker"}),children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.default,{}),(0,r.jsx)("div",{"aria-live":"polite",className:"sr-only",children:b})]})}}),(0,r.jsxs)("section",{"aria-label":"Today and weekly panels",className:"grid grid-cols-1 gap-[var(--space-6)] lg:grid-cols-12",children:[(0,r.jsx)("div",{className:"lg:col-span-8",ref:C,children:(0,r.jsx)(n.default,{iso:e})}),(0,r.jsx)("aside",{"aria-label":"Week notes",className:"lg:col-span-4 space-y-[var(--space-6)] lg:sticky lg:top-[var(--space-8)]",children:(0,r.jsx)(l.default,{iso:e})})]}),(0,r.jsx)("ul",{"aria-label":"Week days (Monday to Sunday)",className:"flex flex-col gap-[var(--space-4)]",children:y.map(e=>(0,r.jsx)(o,{iso:e.iso,isToday:e.isToday},e.iso))})]}),(0,r.jsx)(c.default,{watchRef:C})]})}function b(){return(0,r.jsx)(u.PlannerProvider,{children:(0,r.jsx)(k,{})})}},1266:(e,t,a)=>{"use strict";a.r(t),a.d(t,{usePlannerStore:()=>d});var r=a(2115),s=a(6557),n=a(4538),l=a(7419);let i="planner:projects",o="planner:tasks",c=!1;function d(){let{days:e,setDays:t}=(0,s.useDays)(),{focus:a,setFocus:d}=(0,s.useFocus)(),u=r.useCallback(e=>{t(e)},[t]);r.useEffect(()=>{if(!c){let e=(0,l.iG)(i),t=(0,l.iG)(o);if(!e&&!t){c=!0;return}u(r=>(function(e,t,a){var r,n,d,u;if(c)return e;let m=null!=(r=null==a?void 0:a.projects)?r:(0,l.iG)(i),p=null!=(n=null==a?void 0:a.tasks)?n:(0,l.iG)(o);if(!m&&!p)return c=!0,e;let f={...e},v=(0,s.ensureDay)(f,t);if(m&&(v={...v,projects:m}),p){let e={},t={};for(let a of p)t[a.id]=a,a.projectId&&(null!=(u=e[d=a.projectId])?u:e[d]=[]).push(a.id);v={...v,tasks:p,tasksById:t,tasksByProject:e}}let{doneCount:g,totalCount:h}=(0,s.computeDayCounts)(v.projects,v.tasks);return f[t]={...v,doneCount:g,totalCount:h},(0,l.Ab)(i),(0,l.Ab)(o),c=!0,f})(r,a,{projects:e,tasks:t}))}},[u,a]);let m=r.useCallback((e,t)=>{u(a=>{let r=t((0,s.ensureDay)(a,e));return{...a,[e]:r}})},[u]),p=r.useCallback(t=>(0,s.ensureDay)(e,t),[e]),f=r.useCallback((e,t)=>{u(a=>({...a,[e]:t}))},[u]),v=r.useMemo(()=>(0,n.v)(a,m),[a,m]);return{days:e,focus:a,setFocus:d,day:p(a),getDay:p,setDay:f,upsertDay:m,...v}}},1323:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(5155);function s(e){let{text:t}=e;return(0,r.jsx)("div",{className:"tasks-placeholder text-label",children:t})}a(2115)},1360:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},1468:(e,t,a)=>{"use strict";a.d(t,{default:()=>o});var r=a(5155);a(8768),a(2115);var s=a(3278),n=a(2105),l=a(3462),i=a(8772);function o(e){let{iso:t}=e,{value:a,setValue:o,saving:c,isDirty:d,lastSavedRef:u,commit:m}=(0,i.useDayNotes)(t);return(0,r.jsxs)(s.default,{className:"card-neo-soft",children:[(0,r.jsx)(s.default.Header,{title:"Daily Focus"}),(0,r.jsxs)(s.default.Body,{children:[(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),m()},className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)(n.default,{placeholder:"What’s the one thing today?",value:a,onChange:e=>o(e.target.value),onBlur:m,name:"focus-".concat(t),autoComplete:"off",className:"flex-1","aria-label":"Daily focus"}),(0,r.jsx)(l.default,{type:"submit",variant:"primary",size:"sm",disabled:!d||c,"aria-disabled":!d||c,children:c?"Saving…":"Save"})]}),(0,r.jsx)("div",{className:"mt-[var(--space-2)] text-label text-muted-foreground","aria-live":"polite",children:c?"Saving changes…":d?"Unsaved changes":u.current?"All changes saved":"No focus set yet"})]})]})}},2021:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var r=a(5155),s=a(2115),n=a(4804),l=a(641);function i(e){let{iso:t,projectCount:a,doneCount:i,totalCount:o}=e,c=s.useMemo(()=>"// ".concat((0,n.XS)(t)),[t]),d=0===o?0:Math.round(i/o*100);return(0,r.jsxs)("div",{className:"col-span-1 lg:col-span-3 flex items-center gap-[var(--space-3)] min-w-0",children:[(0,r.jsx)("span",{className:"glitch glitch-label text-ui font-semibold tracking-wide shrink-0","data-text":c,children:c}),(0,r.jsx)("div",{className:"flex-1 min-w-0",children:(0,r.jsx)(l.default,{current:i,total:o})}),(0,r.jsxs)("div",{className:"shrink-0 flex items-baseline gap-[var(--space-3)] text-label text-muted-foreground",children:[(0,r.jsxs)("span",{className:"tabular-nums font-medium text-foreground",children:[d,"%"]}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"\xb7"}),(0,r.jsxs)("span",{className:"whitespace-nowrap",children:[(0,r.jsx)("span",{className:"tabular-nums",children:a})," projects"]}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"\xb7"}),(0,r.jsxs)("span",{className:"whitespace-nowrap",children:[(0,r.jsx)("span",{className:"tabular-nums",children:i})," /"," ",(0,r.jsx)("span",{className:"tabular-nums",children:o})," items"]})]})]})}},2607:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useDay:()=>i});var r=a(2115),s=a(6557),n=a(4538),l=a(1266);function i(e){let{days:t,upsertDay:a}=(0,l.usePlannerStore)(),i=r.useMemo(()=>(0,s.ensureDay)(t,e),[t,e]),o=i.tasks,c=i.tasksById,d=i.tasksByProject,u=r.useMemo(()=>(0,n.v)(e,a),[e,a]),m=i.doneCount,p=i.totalCount;return{projects:i.projects,tasks:o,tasksById:c,tasksByProject:d,addProject:u.addProject,renameProject:u.renameProject,deleteProject:u.removeProject,toggleProject:u.toggleProject,addTask:u.addTask,renameTask:u.renameTask,deleteTask:u.removeTask,toggleTask:u.toggleTask,addTaskImage:u.addTaskImage,removeTaskImage:u.removeTaskImage,doneCount:m,totalCount:p,doneTasks:m,totalTasks:p}}},3011:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return s}});let r=a(2115);function s(e,t){let a=(0,r.useRef)(null),s=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=a.current;e&&(a.current=null,e());let t=s.current;t&&(s.current=null,t())}else e&&(a.current=n(e,r)),t&&(s.current=n(t,r))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let a=e(t);return"function"==typeof a?a:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3706:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(5155);a(8768);var s=a(2115),n=a(9535),l=a(2607),i=a(4269),o=a(2021),c=a(9897),d=a(4433);function u(e){let{iso:t,isToday:a}=e,{projects:u,addProject:m,renameProject:p,deleteProject:f,toggleProject:v,tasksById:g,tasksByProject:h,addTask:x,renameTask:j,toggleTask:k,deleteTask:b,addTaskImage:y,removeTaskImage:w,doneCount:N,totalCount:P}=(0,l.useDay)(t),[C,D]=(0,n.useSelectedProject)(t),[,S]=(0,n.useSelectedTask)(t);return s.useEffect(()=>{C&&!u.some(e=>e.id===C)&&D("")},[u,C,D]),(0,r.jsxs)("section",{className:(0,i.cn)("daycard relative overflow-hidden card-neo-soft rounded-card r-card-lg border card-pad","grid gap-[var(--space-4)] lg:gap-[var(--space-6)]","grid-cols-1 lg:grid-cols-12",a&&"ring-1 ring-ring/65 title-glow","before:pointer-events-none before:absolute before:inset-x-[var(--space-4)] before:top-0 before:h-px before:bg-gradient-to-r","before:from-transparent before:via-ring/45 before:to-transparent","after:pointer-events-none after:absolute after:-inset-px after:[border-radius:var(--radius-card)] after:bg-[radial-gradient(60%_40%_at_100%_0%,hsl(var(--ring)/.12),transparent_60%)]"),"aria-label":"Planner for ".concat(t),children:[(0,r.jsx)("div",{className:"col-span-1 lg:col-span-12",children:(0,r.jsx)(o.default,{iso:t,projectCount:u.length,doneCount:N,totalCount:P})}),(0,r.jsx)("div",{className:"col-span-1 lg:col-span-3",children:(0,r.jsx)(c.default,{projects:u,selectedProjectId:C,setSelectedProjectId:D,setSelectedTaskId:S,toggleProject:v,renameProject:p,deleteProject:f,onAdd:m})}),C&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"hidden lg:block lg:col-span-1 w-px mx-auto bg-card-hairline/90 rounded-full self-stretch","aria-hidden":!0}),(0,r.jsx)("div",{className:"col-span-1 lg:col-span-8",children:(0,r.jsx)(d.default,{tasksById:g,tasksByProject:h,selectedProjectId:C,addTask:x,renameTask:j,toggleTask:k,deleteTask:b,addTaskImage:y,removeTaskImage:w,setSelectedTaskId:S})})]})]})}},4392:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(2115);function s(e){let{ref:t,when:a}=e,s=r.useRef(!1);r.useEffect(()=>{if(a&&!s.current){var e;null==(e=t.current)||e.focus()}s.current=a},[a,t])}},4433:(e,t,a)=>{"use strict";a.d(t,{default:()=>o});var r=a(5155),s=a(2115),n=a(2105),l=a(1323),i=a(6439);function o(e){let{tasksById:t,tasksByProject:a,selectedProjectId:o,addTask:c,renameTask:d,toggleTask:u,deleteTask:m,addTaskImage:p,removeTaskImage:f,setSelectedTaskId:v}=e,[g,h]=s.useState(""),x=s.useMemo(()=>{var e;return o?(null!=(e=a[o])?e:[]).map(e=>t[e]).filter(e=>!!e):[]},[o,a,t]),j=s.useCallback(e=>{e.preventDefault();let t=g.trim();if(!t||!o)return;let a=c(t,o);h(""),a&&v(a)},[g,o,c,v]);return(0,r.jsxs)("div",{className:"flex flex-col gap-[var(--space-3)] min-w-0",children:[o&&(0,r.jsx)("form",{onSubmit:j,children:(0,r.jsx)(n.default,{className:"w-full",placeholder:"> add task…",value:g,onChange:e=>h(e.target.value),"aria-label":"Add task"})}),(0,r.jsx)("div",{className:"min-h-[calc(var(--space-8)*2)] max-h-[calc(var(--space-8)*5)] overflow-y-auto px-[var(--space-2)] py-[var(--space-2)]",children:o?0===x.length?(0,r.jsx)(l.A,{text:"No tasks yet"}):(0,r.jsx)("ul",{className:"space-y-[var(--space-2)] [&>li:first-child]:mt-[var(--space-2)] [&>li:last-child]:mb-[var(--space-2)]","aria-label":"Tasks",children:x.map(e=>(0,r.jsx)(i.default,{task:e,onToggle:()=>{u(e.id),v(e.id)},onDelete:()=>{m(e.id),v("")},onEdit:t=>d(e.id,t),onSelect:()=>v(e.id),onAddImage:t=>p(e.id,t),onRemoveImage:t=>f(e.id,t)},e.id))}):(0,r.jsx)(l.A,{text:"Select a project to view tasks"})})]})}},4467:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useWeekData:()=>l});var r=a(2115),s=a(6557),n=a(1266);function l(e){let{days:t}=(0,n.usePlannerStore)();return r.useMemo(()=>{let a=0,r=0;return{per:e.map(e=>{let{doneCount:n,totalCount:l}=(0,s.ensureDay)(t,e);return a+=n,r+=l,{iso:e,done:n,total:l}}),weekDone:a,weekTotal:r}},[e,t])}},4538:(e,t,a)=>{"use strict";a.d(t,{v:()=>l});var r=a(7419),s=a(6557);function n(e){var t,a,r,n,l,i;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=null!=(t=o.projects)?t:e.projects,d=Object.prototype.hasOwnProperty.call(o,"tasks"),u=d&&null!=(a=o.tasks)?a:e.tasks,m=null!=(r=e.tasksById)?r:{},p=null!=(n=e.tasksByProject)?n:{};if(d){let e=(0,s.buildTaskLookups)(u);m=e.tasksById,p=e.tasksByProject}else Object.prototype.hasOwnProperty.call(o,"tasksById")&&(m=null!=(l=o.tasksById)?l:{}),Object.prototype.hasOwnProperty.call(o,"tasksByProject")&&(p=null!=(i=o.tasksByProject)?i:{});let{doneCount:f,totalCount:v}=(0,s.computeDayCounts)(c,u);return{...e,...o,projects:c,tasks:u,tasksById:m,tasksByProject:p,doneCount:f,totalCount:v}}function l(e,t){return{addProject:a=>{let s=(0,r.uid)("proj");return t(e,e=>(function(e,t,a){let r=a.trim();if(!r)return e;let s=Date.now(),l=[...e.projects,{id:t,name:r,done:!1,createdAt:s}];return n(e,{projects:l})})(e,s,a)),s},renameProject:(a,r)=>t(e,e=>(function(e,t,a){let r=a.trim();return r?n(e,{projects:e.projects.map(e=>e.id===t?{...e,name:r}:e)}):e})(e,a,r)),toggleProject:a=>t(e,e=>(function(e,t){var a,r;let s=null!=(r=null==(a=e.projects.find(e=>e.id===t))?void 0:a.done)&&r,l=e.projects.map(e=>e.id===t?{...e,done:!s}:e),i=e.tasks.map(e=>e.projectId===t?{...e,done:!s}:e);return n(e,{projects:l,tasks:i})})(e,a)),removeProject:a=>t(e,e=>n(e,{projects:e.projects.filter(e=>e.id!==a),tasks:e.tasks.filter(e=>e.projectId!==a)})),addTask:(a,s)=>{let l=(0,r.uid)("task");return t(e,e=>(function(e,t,a,r){let s=a.trim();if(!s)return e;let l=Date.now(),i=[...e.tasks,{id:t,title:s,done:!1,projectId:r,createdAt:l,images:[]}];return n(e,{tasks:i})})(e,l,a,s)),l},renameTask:(a,r)=>t(e,e=>(function(e,t,a){let r=a.trim();return r?n(e,{tasks:e.tasks.map(e=>e.id===t?{...e,title:r}:e)}):e})(e,a,r)),toggleTask:a=>t(e,e=>n(e,{tasks:e.tasks.map(e=>e.id===a?{...e,done:!e.done}:e)})),removeTask:a=>t(e,e=>n(e,{tasks:e.tasks.filter(e=>e.id!==a)})),addTaskImage:(a,r)=>t(e,e=>(function(e,t,a){let r=a.trim();return r?n(e,{tasks:e.tasks.map(e=>e.id===t?{...e,images:[...e.images,r]}:e)}):e})(e,a,r)),removeTaskImage:(a,r)=>t(e,e=>n(e,{tasks:e.tasks.map(e=>e.id===a?{...e,images:e.images.filter(e=>e!==r)}:e)})),setNotes:a=>t(e,e=>({...e,notes:a}))}}},4804:(e,t,a)=>{"use strict";a.d(t,{$$:()=>j,E4:()=>p,Ez:()=>f,Md:()=>x,XS:()=>v,XV:()=>s,bM:()=>y,fi:()=>k,tj:()=>w,ts:()=>g,wg:()=>h});var r=a(4269);let s=new Intl.DateTimeFormat(r.ne,{month:"numeric",day:"numeric",year:"numeric"}),n=new Intl.DateTimeFormat(r.ne,{day:"2-digit",month:"short"}),l=new Intl.DateTimeFormat(r.ne,{month:"long",day:"numeric"}),i=new Intl.DateTimeFormat(r.ne,{month:"long"}),o=new Intl.DateTimeFormat(r.ne,{day:"numeric"}),c=new Intl.DateTimeFormat(r.ne,{weekday:"long"}),d=new Intl.DateTimeFormat(r.ne,{month:"short"}),u=new Intl.DateTimeFormat(r.ne,{day:"2-digit"});function m(e){return/^\d{4}-\d{2}-\d{2}$/.test(e)}function p(e){if(!m(e))return null;let[t,a,r]=e.split("-").map(e=>parseInt(e,10)),s=new Date(t,a-1,r,0,0,0,0);return Number.isFinite(s.getTime())&&s.getFullYear()===t&&s.getMonth()===a-1&&s.getDate()===r?s:null}function f(e){let t=p(e);return t?n.format(t):e}function v(e){let t=p(e);if(!t)return e;let a=c.format(t).toLocaleUpperCase(r.ne),s=d.format(t).toLocaleUpperCase(r.ne),n=u.format(t);return"".concat(a,"_").concat(s," :: ").concat(n)}function g(e){if("number"==typeof e)return e;if(e instanceof Date)return+e;if("string"==typeof e){let t=Date.parse(e);return Number.isNaN(t)?0:t}return 0}function h(e){let{unit:t="seconds",padMinutes:a=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Number.isFinite(e)?e:0,s=Math.max(0,"milliseconds"===t?Math.floor(r/1e3):Math.floor(r)),n=Math.floor(s/60),l=a?String(n).padStart(2,"0"):String(n),i=String(s%60).padStart(2,"0");return"".concat(l,":").concat(i)}function x(e){let{unit:t="seconds"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.trim().match(/^(\d{1,3})\s*:\s*([0-5]?\d)$/);if(!a)return null;let r=60*Number(a[1])+Number(a[2]);return"milliseconds"===t?1e3*r:r}function j(e){let t=function(e){let t;if(e instanceof Date)t=new Date(e);else if("number"==typeof e)t=new Date(e);else if("string"==typeof e){let a=m(e)?p(e):null;t=null!=a?a:new Date(e)}else t=new Date;return Number.isFinite(t.getTime())||(t=new Date),t}(e),a=t.getFullYear(),r="".concat(t.getMonth()+1).padStart(2,"0"),s="".concat(t.getDate()).padStart(2,"0");return"".concat(a,"-").concat(r,"-").concat(s)}function k(e,t){let a=new Date(e);return a.setDate(a.getDate()+t),a}function b(e){let t=new Date(e),a=t.getDay();return t.setHours(0,0,0,0),k(t,-((a+6)%7))}function y(e){var t;let a=null!=(t=p(e))?t:new Date;return{start:b(a),end:function(e){let t=k(b(e),6);return t.setHours(23,59,59,999),t}(a)}}function w(e,t){if("function"==typeof l.formatRange)try{return"Week of ".concat(l.formatRange(e,t))}catch(e){}if(e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()){let a=i.format(e),r=o.format(e),s=o.format(t);return"Week of ".concat(a," ").concat(r," – ").concat(s)}let a=l.format(e),r=l.format(t);return"Week of ".concat(a," – ").concat(r)}},5789:(e,t,a)=>{Promise.resolve().then(a.bind(a,3706)),Promise.resolve().then(a.bind(a,2021)),Promise.resolve().then(a.bind(a,1468)),Promise.resolve().then(a.bind(a,1146)),Promise.resolve().then(a.bind(a,6557)),Promise.resolve().then(a.bind(a,9897)),Promise.resolve().then(a.bind(a,142)),Promise.resolve().then(a.bind(a,4433)),Promise.resolve().then(a.bind(a,6439)),Promise.resolve().then(a.bind(a,7151)),Promise.resolve().then(a.bind(a,2607)),Promise.resolve().then(a.bind(a,8772)),Promise.resolve().then(a.bind(a,7649)),Promise.resolve().then(a.bind(a,1266)),Promise.resolve().then(a.bind(a,9535)),Promise.resolve().then(a.bind(a,4467)),Promise.resolve().then(a.bind(a,7833)),Promise.resolve().then(a.bind(a,25)),Promise.resolve().then(a.bind(a,6118)),Promise.resolve().then(a.bind(a,7419))},6118:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var r=a(5155);a(8768);var s=a(3278),n=a(7649),l=a(4467),i=a(4269),o=a(4804);function c(e){let{iso:t,variant:a="card",className:c,showLabel:d=!0,bleed:u=!1}=e,{days:m,isToday:p}=(0,n.useWeek)(t),{per:f,weekDone:v,weekTotal:g}=(0,l.useWeekData)(m),h=7===m.length?"".concat((0,o.Ez)(m[0])," — ").concat((0,o.Ez)(m[6])):"",x="inline"===a?d?(0,r.jsxs)("div",{className:"mb-[var(--space-2)] flex items-center justify-between gap-[var(--space-2)] text-label font-medium tracking-[0.02em] text-muted-foreground",children:[(0,r.jsxs)("div",{className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)("span",{className:"uppercase tracking-[0.02em]",children:"Week"}),(0,r.jsx)("span",{"aria-hidden":!0,children:"•"}),(0,r.jsx)("span",{children:h})]}),(0,r.jsxs)("span",{className:"pill pill--medium font-semibold",children:[(0,r.jsx)("span",{className:"tabular-nums",children:v}),"/",(0,r.jsx)("span",{className:"tabular-nums",children:g})]})]}):null:(0,r.jsxs)("div",{className:"mb-[var(--space-3)] flex items-center gap-[var(--space-3)]",children:[(0,r.jsx)("div",{className:"text-ui font-medium text-muted-foreground",children:h}),(0,r.jsxs)("span",{className:"ml-auto badge badge--sm",role:"status","aria-live":"polite",title:"Completed / Total items this week",children:[(0,r.jsx)("span",{className:"badge__icon",children:"✅"}),(0,r.jsx)("span",{className:"tabular-nums",children:v}),"/",(0,r.jsx)("span",{className:"tabular-nums",children:g})]})]}),j=(0,r.jsx)("div",{className:"inline"===a?"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 xl:grid-cols-7 gap-[var(--space-2)]":"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 xl:grid-cols-7 gap-[var(--space-3)]",role:"list","aria-label":"Week days summary",children:f.map(e=>{let t=p(e.iso),s=0===e.total,n=(0,o.Ez)(e.iso),l="".concat(e.done," of ").concat(e.total," done");return(0,r.jsxs)("div",{role:"listitem",className:(0,i.cn)("ws-tile group","inline"===a?"p-[var(--space-2)] rounded-card r-card-lg":"p-[var(--space-3)] rounded-card r-card-lg",t&&"ws-tile--today",s&&"ws-tile--empty"),"data-today":t||void 0,tabIndex:0,"aria-label":"".concat(n,": ").concat(l),children:[(0,r.jsx)("div",{className:"ws-tile__date",children:n}),(0,r.jsxs)("div",{className:(0,i.cn)("ws-tile__counts","inline"===a?"text-body":"text-title"),children:[(0,r.jsx)("span",{className:"tabular-nums",children:e.done}),(0,r.jsx)("span",{className:"opacity-60",children:" / "}),(0,r.jsx)("span",{className:"tabular-nums",children:e.total})]}),t?(0,r.jsx)("span",{"aria-hidden":!0,className:"ws-rail"}):null]},e.iso)})}),k=(0,r.jsxs)("div",{className:(0,i.cn)(c,u&&"ws-bleed"),children:[x,j]});return"inline"===a?k:(0,r.jsxs)(s.default,{className:"card-neo",children:[(0,r.jsx)(s.default.Header,{title:"Week Summary"}),(0,r.jsx)(s.default.Body,{children:k})]})}},6439:(e,t,a)=>{"use strict";a.d(t,{default:()=>g});var r=a(5155),s=a(2115),n=a(5239),l=a(2105),i=a(8363),o=a(9412),c=a(8514),d=a(1360),u=a(4269),m=a(4392);let p=a(306).q0[6],f="var(--space-".concat(7,")"),v="[overflow:visible] grid min-h-[var(--space-7)] min-w-0 grid-cols-[auto,1fr,auto] items-center gap-[var(--space-4)] pl-[var(--space-4)] pr-[var(--space-2)] py-[var(--space-2)]";function g(e){let{task:t,onToggle:a,onDelete:g,onEdit:h,onSelect:x,onAddImage:j,onRemoveImage:k}=e,[b,y]=s.useState(!1),[w,N]=s.useState(t.title),[P,C]=s.useState(""),D=s.useRef(null),[S,T]=s.useState(!1);(0,m.A)({ref:D,when:b});let I=s.useCallback(()=>{T(!0)},[]),M=s.useCallback(e=>{let t=e.relatedTarget;t&&e.currentTarget.contains(t)||T(!1)},[]),E=s.useCallback(()=>{x()},[x]),A=s.useCallback(e=>{e.target===e.currentTarget&&("Enter"===e.key&&(e.preventDefault(),x()),(" "===e.key||"Spacebar"===e.key)&&e.preventDefault())},[x]),z=s.useCallback(e=>{e.target===e.currentTarget&&(" "===e.key||"Spacebar"===e.key)&&(e.preventDefault(),x())},[x]);function _(){let e=w.trim();y(!1),e&&e!==t.title&&h(e)}return(0,r.jsxs)("li",{className:"group",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{role:"button",tabIndex:0,"aria-label":"Select task ".concat(t.title),onClick:E,onKeyDown:A,onKeyUp:z,className:(0,u.cn)("w-full cursor-pointer rounded-card r-card-lg border transition-colors",v,"bg-card/55 hover:bg-card/70 focus-visible:bg-card/70 active:bg-card/80","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-0","data-[focus-within=true]:ring-2 data-[focus-within=true]:ring-ring"),"data-focus-within":S?"true":void 0}),(0,r.jsxs)("div",{className:(0,u.cn)("pointer-events-none absolute inset-0 z-[1]",v),onFocusCapture:I,onBlurCapture:M,children:[(0,r.jsx)("div",{className:"pointer-events-auto shrink-0 ml-[var(--space-1)]",onClick:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),children:(0,r.jsx)(o.default,{checked:t.done,onChange:()=>{b||a()},"aria-label":"Toggle task done",size:"sm"})}),(0,r.jsx)("div",{className:"pointer-events-auto flex-1 min-w-0 px-[var(--space-1)]",children:b?(0,r.jsx)(l.default,{name:"dc-rename-task-".concat(t.id),ref:D,value:w,onChange:e=>N(e.target.value),onBlur:_,onKeyDown:e=>{"Enter"===e.key&&_(),"Escape"===e.key&&(y(!1),N(t.title))},"aria-label":"Rename task"}):(0,r.jsx)("button",{type:"button",className:"task-tile__text block w-full text-left focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring rounded-card r-card-lg",onClick:e=>{e.stopPropagation(),a()},onDoubleClick:e=>{e.stopPropagation(),y(!0)},"aria-pressed":t.done,title:"Click to toggle; double-click to edit",children:(0,r.jsx)("span",{className:(0,u.cn)("truncate break-words",t.done&&"line-through-soft"),children:t.title})})}),(0,r.jsxs)("div",{className:(0,u.cn)("pointer-events-auto flex shrink-0 items-center gap-[var(--space-2)]",b?"opacity-0 pointer-events-none":"opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto group-focus-within:opacity-100 group-focus-within:pointer-events-auto"),children:[(0,r.jsx)(i.default,{"aria-label":"Edit task",title:"Edit",onClick:e=>{e.stopPropagation(),y(!0)},size:"sm",iconSize:"xs",variant:"ring",children:(0,r.jsx)(c.A,{})}),(0,r.jsx)(i.default,{"aria-label":"Delete task",title:"Delete",onClick:e=>{e.stopPropagation(),g()},size:"sm",iconSize:"xs",variant:"ring",children:(0,r.jsx)(d.A,{})})]})]})]}),t.images.length>0&&(0,r.jsx)("ul",{className:"mt-[var(--space-2)] space-y-[var(--space-2)]",children:t.images.map(e=>(0,r.jsxs)("li",{className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)(n.default,{src:e,alt:"Task image for ".concat(t.title),width:p,height:p,className:"rounded-card r-card-md object-cover",style:{maxHeight:f,height:f,width:f},unoptimized:!0}),(0,r.jsx)(i.default,{"aria-label":"Remove image",title:"Remove image",onClick:()=>k(e),size:"sm",iconSize:"xs",variant:"ring",children:(0,r.jsx)(d.A,{})})]},e))}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=P.trim();t&&(j(t),C(""))},className:"mt-[var(--space-2)]",children:[(0,r.jsx)("label",{htmlFor:"task-image-".concat(t.id),className:"sr-only",children:"Add image URL"}),(0,r.jsx)(l.default,{id:"task-image-".concat(t.id),type:"url",value:P,onChange:e=>C(e.target.value),placeholder:"https://example.com/image.jpg"})]})]})}},6557:(e,t,a)=>{"use strict";a.r(t),a.d(t,{PlannerProvider:()=>f,buildTaskLookups:()=>o,computeDayCounts:()=>i,ensureDay:()=>c,todayISO:()=>l,useDays:()=>v,useFocus:()=>g,useSelection:()=>h}),a(8768);var r=a(2115),s=a(7419),n=a(4804);function l(){return(0,n.$$)(new Date)}function i(e,t){let a=0,r=0;for(let t of e)r+=1,t.done&&(a+=1);for(let e of t)r+=1,e.done&&(a+=1);return{doneCount:a,totalCount:r}}function o(e){let t={},a={};for(let s of e){var r;a[s.id]=s;let e=s.projectId;e&&(null!=(r=t[e])?r:t[e]=[]).push(s.id)}return{tasksById:a,tasksByProject:t}}function c(e,t){var a,r;let s=e[t];if(!s)return{projects:[],tasks:[],tasksById:{},tasksByProject:{},doneCount:0,totalCount:0};let n=s.tasks,l=!1;s.tasks.every(e=>Array.isArray(e.images))||(l=!0,n=s.tasks.map(e=>{var t;return{...e,images:null!=(t=e.images)?t:[]}}));let{tasksById:c,tasksByProject:d}=o(n),u=null!=(a=s.tasksByProject)?a:{},m=null!=(r=s.tasksById)?r:{},p=!Object.prototype.hasOwnProperty.call(s,"tasksByProject")||!function(e,t){let a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(let r of a){var s;let a=null!=(s=e[r])?s:[],n=t[r];if(!n||a.length!==n.length)return!1;for(let e=0;e<a.length;e+=1)if(a[e]!==n[e])return!1}return!0}(u,d),f=!Object.prototype.hasOwnProperty.call(s,"tasksById")||!function(e,t){let a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(let r of a)if(!Object.prototype.hasOwnProperty.call(t,r)||e[r]!==t[r])return!1;return!0}(m,c),{doneCount:v,totalCount:g}=i(s.projects,n),h=s.doneCount!==v||s.totalCount!==g;return l||p||f||h?{...s,...l?{tasks:n}:{},...p?{tasksByProject:d}:{},...f?{tasksById:c}:{},doneCount:v,totalCount:g}:s}function d(e,t){let a=e,r=!1;for(let s of Object.keys(e)){let n=e[s],l=Object.prototype.hasOwnProperty.call(t,s),i=!!(null==n?void 0:n.projectId),o=!!(null==n?void 0:n.taskId);l&&(i||o)||(r||(r=!0,a={...a}),delete a[s])}return r?a:e}let u=r.createContext(null),m=r.createContext(null),p=r.createContext(null);function f(e){let{children:t}=e,[a,n]=(0,s.usePersistentState)("planner:days",{}),[i,o]=(0,s.usePersistentState)("planner:focus",l()),[f,v]=(0,s.usePersistentState)("planner:selected",{}),g=r.useMemo(()=>d(f,a),[f,a]);r.useEffect(()=>{Object.is(g,f)||v(g)},[g,f,v]);let h=r.useMemo(()=>{let e={};for(let[r,s]of Object.entries(a)){var t;e[r]=null!=(t=s.tasksById)?t:{}}return e},[a]);r.useEffect(()=>{Object.is(a,a)||n(a)},[a,a,n]);let x=r.useCallback(e=>{n(t=>{let a="function"==typeof e?e(t):e;if(Object.is(t,a))return t;let r=a,s=!1;for(let e of Object.keys(a)){if(t[e]===a[e])continue;let n=function(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))return;let a=c(e,t);return a===e[t]?void 0:a}(r,e);n&&(s||(s=!0,r={...r}),r[e]=n)}return s?r:a})},[n]),j=r.useMemo(()=>({days:a,setDays:x,tasksById:h}),[a,x,h]),k=r.useMemo(()=>({focus:i,setFocus:o}),[i,o]),b=r.useCallback(e=>{v(t=>{let r="function"==typeof e?e(t):e;if(Object.is(t,r))return t;let s=d(r,a);return Object.is(t,s)?t:s})},[a,v]),y=r.useMemo(()=>({selected:g,setSelected:b}),[g,b]);return r.createElement(u.Provider,{value:j},r.createElement(m.Provider,{value:k},r.createElement(p.Provider,{value:y},t)))}function v(){let e=r.useContext(u);if(!e)throw Error("PlannerProvider missing. Wrap your planner page with <PlannerProvider>.");return e}function g(){let e=r.useContext(m);if(!e)throw Error("PlannerProvider missing. Wrap your planner page with <PlannerProvider>.");return e}function h(){let e=r.useContext(p);if(!e)throw Error("PlannerProvider missing. Wrap your planner page with <PlannerProvider>.");return e}},7151:(e,t,a)=>{"use strict";a.d(t,{default:()=>x});var r=a(5155),s=a(2115),n=a(4269),l=a(4804),i=a(7649),o=a(9535),c=a(2607),d=a(9412),u=a(2105),m=a(8363),p=a(641),f=a(3462);let v=(0,a(1847).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var g=a(8514),h=a(1360);function x(e){let{iso:t}=e,a=(0,s.useMemo)(()=>(0,l.$$)(),[]),{iso:x,setIso:j,today:k}=(0,i.useFocusDate)(),b=null!=t?t:x,y=b===k;(0,s.useEffect)(()=>{t&&t!==x&&j(t)},[t,x,j]);let{projects:w,tasks:N,addTask:P,renameTask:C,toggleTask:D,deleteTask:S,addProject:T,renameProject:I,deleteProject:M,toggleProject:E}=(0,c.useDay)(b),[A,z]=(0,o.useSelectedProject)(b),[,_]=(0,o.useSelectedTask)(b),F=(0,s.useMemo)(()=>{var e;let t=w.find(e=>e.id===A);return null!=(e=null==t?void 0:t.name)?e:""},[w,A]),[O,B]=(0,s.useState)({text:"",toggleMarker:!1}),R=O.text,W=(0,s.useRef)(null),$=(0,s.useRef)(new Map);(0,s.useEffect)(()=>{A&&!w.some(e=>e.id===A)&&z("")},[w,A,z]);let[L,H]=(0,s.useState)(null),[K,U]=(0,s.useState)(""),[q,Y]=(0,s.useState)(null),[V,G]=(0,s.useState)(""),[J,X]=(0,s.useState)(""),[Q,Z]=(0,s.useState)(!1),ee=(0,s.useMemo)(()=>A?N.filter(e=>e.projectId===A):[],[N,A]),{done:et,total:ea}=(0,s.useMemo)(()=>ee.reduce((e,t)=>(e.total+=1,t.done&&(e.done+=1),e),{done:0,total:0}),[ee]);(0,s.useEffect)(()=>{Z(!1)},[A]),(0,s.useEffect)(()=>{Q&&ee.length<=12&&Z(!1)},[Q,ee]);let er="today-hero-task-list-".concat(A||"none"),es=Q?ee:ee.slice(0,12),en=ee.length>12,el=(0,s.useRef)(null);return(0,s.useEffect)(()=>{if(!A){W.current=null,$.current=new Map,B(e=>e.text?{text:"",toggleMarker:e.toggleMarker}:e);return}let e=new Map(ee.map(e=>[e.id,{title:e.title,done:e.done}]));if(W.current!==A){W.current=A,$.current=e,B(e=>e.text?{text:"",toggleMarker:e.toggleMarker}:e);return}let t=$.current,a=null,r=F?' in project "'.concat(F,'"'):"";for(let[s,n]of e)if(!t.has(s)){a='Task "'.concat(n.title,'" added').concat(r,".");break}if(!a){for(let[s,n]of t)if(!e.has(s)){a='Task "'.concat(n.title,'" removed').concat(r,".");break}}if(!a)for(let[s,n]of e){let e=t.get(s);if(e){if(e.title!==n.title){a='Task "'.concat(e.title,'" renamed to "').concat(n.title,'"').concat(r,".");break}if(e.done!==n.done){a=n.done?'Task "'.concat(n.title,'" marked complete').concat(r,"."):'Task "'.concat(n.title,'" marked incomplete').concat(r,".");break}}}a&&B(e=>({text:"".concat(a).concat(e.toggleMarker?"":"​"),toggleMarker:!e.toggleMarker})),$.current=e},[ee,A,F]),(0,r.jsxs)("section",{className:"bg-hero-soft rounded-card r-card-lg card-pad-lg anim-in",children:[(0,r.jsxs)("div",{className:"mb-[var(--space-4)] flex flex-col gap-[var(--space-2)] md:flex-row md:items-center md:justify-between",children:[(0,r.jsx)("div",{className:"flex items-center gap-[var(--space-3)]",children:(0,r.jsx)("h2",{className:"glitch text-title font-semibold tracking-[-0.01em]","data-text":y?"Today":b,children:y?"Today":b})}),(0,r.jsxs)("div",{className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)("input",{ref:el,type:"date",value:b||a,onChange:e=>j(e.target.value),"aria-label":"Change focused date",className:"sr-only"}),(0,r.jsx)(m.default,{"aria-label":"Open calendar",title:b,onClick:()=>{var e;let t=el.current;(null==t?void 0:t.showPicker)?t.showPicker():null==(e=el.current)||e.focus()},size:"md",variant:"ring",iconSize:"md",children:(0,r.jsx)(v,{})})]})]}),(0,r.jsx)(p.default,{current:et,total:ea,showPercentage:!0,className:"mb-[var(--space-4)] flex items-center gap-[var(--space-3)]",trackClassName:"w-full",percentageClassName:"glitch-percent w-[var(--space-7)] text-right text-ui font-medium"}),(0,r.jsxs)("div",{className:"mt-[var(--space-4)] space-y-[var(--space-4)]",children:[(0,r.jsx)("form",{onSubmit:e=>{e.preventDefault();let t=J.trim();if(!t)return;let a=T(t);X(""),a&&z(a)},children:(0,r.jsx)(u.default,{name:"new-project",placeholder:"> new project…",value:J,onChange:e=>X(e.target.value),"aria-label":"New project",className:"w-full"})}),w.length>0&&(0,r.jsxs)("ul",{className:"space-y-[var(--space-2)]",role:"list","aria-label":"Projects",children:[w.slice(0,12).map(e=>{let t=L===e.id,a=A===e.id;return(0,r.jsxs)("li",{className:(0,n.cn)("group flex select-none items-center justify-between rounded-card r-card-lg border px-[var(--space-3)] py-[var(--space-2)] text-ui font-medium transition","border-border bg-card/55 hover:bg-card/70",a&&"ring-1 ring-ring"),onClick:()=>!t&&z(e.id),title:t?"Editing…":a?"Selected":"Click to select",role:"listitem",children:[t?(0,r.jsx)(u.default,{name:"rename-project-".concat(e.id),autoFocus:!0,value:K,onChange:e=>U(e.target.value),onKeyDown:t=>{"Enter"===t.key&&(I(e.id,K||e.name),H(null)),"Escape"===t.key&&H(null)},onBlur:()=>{I(e.id,K||e.name),H(null)},"aria-label":"Rename project ".concat(e.name),onClick:e=>e.stopPropagation()}):(0,r.jsxs)("div",{className:"flex items-center gap-[var(--space-3)] min-w-0",children:[(0,r.jsx)("span",{className:"shrink-0",onMouseDown:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),children:(0,r.jsx)(d.default,{size:"sm",checked:e.done,onChange:()=>E(e.id),"aria-label":"Toggle completion for ".concat(e.name)})}),(0,r.jsx)("span",{className:(0,n.cn)("truncate",e.done&&"line-through-soft opacity-70"),children:e.name})]}),(0,r.jsxs)("div",{className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)(m.default,{"aria-label":"Edit project ".concat(e.name),title:"Edit",onClick:t=>{t.stopPropagation(),H(e.id),U(e.name)},size:"sm",variant:"ring",iconSize:"xs",children:(0,r.jsx)(g.A,{})}),(0,r.jsx)(m.default,{"aria-label":"Remove project ".concat(e.name),title:"Remove",onClick:t=>{t.stopPropagation(),M(e.id),A===e.id&&z("")},size:"sm",variant:"ring",iconSize:"xs",children:(0,r.jsx)(h.A,{})})]})]},e.id)}),w.length>12&&(0,r.jsxs)("li",{className:"pr-[var(--space-1)] text-right text-label font-medium tracking-[0.02em] opacity-70",children:["+ ",w.length-12," more…"]})]})]}),A?(0,r.jsxs)("div",{className:"mt-[var(--space-4)] space-y-[var(--space-4)]",children:[(0,r.jsx)("form",{onSubmit:e=>{var t;e.preventDefault();let a=e.currentTarget.elements.namedItem("new-task-".concat(A)),r=null!=(t=null==a?void 0:a.value)?t:"";if(!r.trim())return;let s=P(r,A);a&&(a.value=""),s&&_(s)},children:(0,r.jsx)(u.default,{name:"new-task-".concat(A),placeholder:'> task for "'.concat(F||"Project",'"'),"aria-label":"New task",className:"w-full"})}),(0,r.jsx)("div",{"aria-live":"polite",className:"sr-only",children:R}),0===ee.length?(0,r.jsx)("div",{className:"tasks-placeholder",children:"No tasks yet."}):(0,r.jsxs)("div",{className:"space-y-[var(--space-2)]",children:[(0,r.jsx)("ul",{id:er,className:"space-y-[var(--space-2)]",role:"list","aria-label":"Tasks",children:es.map(e=>{let t=q===e.id;return(0,r.jsxs)("li",{className:(0,n.cn)("task-tile flex items-center justify-between rounded-card r-card-lg border px-[var(--space-3)] py-[var(--space-2)]","border-border bg-card/55 hover:bg-card/70"),role:"listitem",onClick:()=>_(e.id),children:[(0,r.jsxs)("div",{className:"flex items-center gap-[var(--space-3)]",children:[(0,r.jsx)(d.default,{checked:e.done,onChange:()=>{D(e.id),_(e.id)},size:"sm"}),t?(0,r.jsx)(u.default,{name:"rename-task-".concat(e.id),autoFocus:!0,value:V,onChange:e=>G(e.target.value),onKeyDown:t=>{"Enter"===t.key&&(C(e.id,V||e.title),Y(null)),"Escape"===t.key&&Y(null)},onBlur:()=>{C(e.id,V||e.title),Y(null)},"aria-label":"Rename task ".concat(e.title)}):(0,r.jsx)("button",{type:"button",className:(0,n.cn)("task-tile__text",e.done&&"line-through-soft"),onClick:()=>Y(e.id),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),Y(e.id))},"aria-label":"Edit task ".concat(e.title),title:"Edit task",children:e.title})]}),(0,r.jsxs)("div",{className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)(m.default,{"aria-label":"Edit task ".concat(e.title),title:"Edit",onClick:()=>{Y(e.id),G(e.title),_(e.id)},size:"sm",variant:"ring",iconSize:"xs",children:(0,r.jsx)(g.A,{})}),(0,r.jsx)(m.default,{"aria-label":"Remove task",title:"Remove",onClick:()=>{S(e.id),_("")},size:"sm",variant:"ring",iconSize:"xs",children:(0,r.jsx)(h.A,{})})]})]},e.id)})}),en&&(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(f.default,{size:"sm",variant:"ghost",onClick:()=>Z(e=>!e),"aria-expanded":Q,"aria-controls":er,children:Q?"Show less":"Show more"})})]})]}):(0,r.jsx)("div",{className:"mt-[var(--space-4)] text-ui font-medium text-muted-foreground",children:"Select a project to add and view tasks."})]})}},7649:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useFocusDate:()=>l,useWeek:()=>i});var r=a(2115),s=a(4804),n=a(6557);function l(){let{focus:e,setFocus:t}=(0,n.useFocus)();return{iso:e,setIso:t,today:(0,n.todayISO)()}}function i(e){return r.useMemo(()=>{let{start:t,end:a}=(0,s.bM)(e),r=[];for(let e=0;e<7;e++)r.push((0,s.$$)((0,s.fi)(t,e)));let l=(0,n.todayISO)();return{start:t,end:a,days:r,isToday:e=>e===l}},[e])}},7833:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var r=a(5155);a(8768),a(2115);var s=a(3278),n=a(4069),l=a(8772);function i(e){let{iso:t}=e,{value:a,setValue:i,saving:o,isDirty:c,lastSavedRef:d,commit:u}=(0,l.useDayNotes)(t);return(0,r.jsxs)(s.default,{className:"card-neo-soft",children:[(0,r.jsx)(s.default.Header,{title:"Notes"}),(0,r.jsxs)(s.default.Body,{children:[(0,r.jsx)(n.default,{placeholder:"Jot down anything related to this day…",value:a,onChange:e=>i(e.target.value),name:"notes-".concat(t),resize:"resize-y",textareaClassName:"min-h-[calc(var(--space-8)*3_-_var(--space-3))] leading-relaxed",onBlur:u}),(0,r.jsx)("div",{className:"mt-[var(--space-2)] text-label text-muted-foreground","aria-live":"polite",children:o?"Saving changes…":c?"Unsaved changes":d.current?"All changes saved":"No notes yet"})]})]})}},8514:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(1847).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},8768:()=>{},8772:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useDayNotes:()=>n});var r=a(2115),s=a(1266);function n(e){var t;let{getDay:a,upsertDay:n}=(0,s.usePlannerStore)(),l=null!=(t=a(e).notes)?t:"",i=r.useCallback(t=>{n(e,e=>({...e,notes:t}))},[e,n]),[o,c]=r.useState(()=>l),[d,u]=r.useState(!1),m=r.useRef(l.trim()),p=r.useMemo(()=>o.trim(),[o]),f=p!==m.current,v=r.useCallback(()=>{if(f){u(!0);try{i(p),m.current=p}finally{u(!1)}}},[f,i,p]);return r.useEffect(()=>{c(l),m.current=l.trim()},[e,l]),{value:o,setValue:c,saving:d,isDirty:f,lastSavedRef:m,commit:v}}},9535:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useSelectedProject:()=>o,useSelectedTask:()=>d,useSelectionState:()=>n});var r=a(2115),s=a(6557);function n(e,t){let{getCurrentId:a,produceSelection:n}=t,{selected:l,setSelected:i}=(0,s.useSelection)();return[a(l[e]),r.useCallback(t=>{i(a=>{let r=a[e],s=n(t,r);return r&&r.projectId===s.projectId&&r.taskId===s.taskId?a:{...a,[e]:s}})},[e,n,i])]}let l=e=>{var t;return null!=(t=null==e?void 0:e.projectId)?t:""},i=e=>e?{projectId:e}:{};function o(e){return n(e,{getCurrentId:l,produceSelection:i})}let c=e=>{var t;return null!=(t=null==e?void 0:e.taskId)?t:""};function d(e){let{tasksById:t}=(0,s.useDays)(),a=r.useCallback(a=>{var r,s;if(!a)return{};let n=null==(s=t[e])||null==(r=s[a])?void 0:r.projectId;return{taskId:a,projectId:n}},[e,t]);return n(e,{getCurrentId:c,produceSelection:a})}},9897:(e,t,a)=>{"use strict";a.d(t,{default:()=>m});var r=a(5155),s=a(2115),n=a(2105),l=a(8363),i=a(9412),o=a(8514),c=a(1360),d=a(4269),u=a(1323);function m(e){let{projects:t,selectedProjectId:a,setSelectedProjectId:m,setSelectedTaskId:p,toggleProject:f,renameProject:v,deleteProject:g,onAdd:h}=e,[x,j]=s.useState(null),[k,b]=s.useState(""),[y,w]=s.useState(""),N=t.length>3,P=t.length>1,C=s.useCallback((e,t)=>{let a=k.trim()||t;v(e,a),b(a),j(null)},[k,v,j,b]),D=s.useCallback((e,a)=>r=>{if((" "===r.key||"Enter"===r.key)&&(r.preventDefault(),m(a.id)),P&&("ArrowDown"===r.key||"ArrowRight"===r.key)){r.preventDefault();let a=(e+1)%t.length;m(t[a].id)}if(P&&("ArrowUp"===r.key||"ArrowLeft"===r.key)){r.preventDefault();let a=(e-1+t.length)%t.length;m(t[a].id)}},[P,t,m]);return(0,r.jsx)("div",{className:"flex flex-col gap-[var(--space-3)] min-w-0",children:(0,r.jsx)("div",{className:(0,d.cn)("px-0 w-full",N?"overflow-y-auto":"overflow-visible"),style:N?{maxHeight:"calc(var(--space-8) * 4 + var(--space-1))"}:void 0,children:(0,r.jsxs)("ul",{className:"w-full space-y-[var(--space-2)] py-[var(--space-2)]",role:"radiogroup","aria-label":"Projects",children:[(0,r.jsx)("li",{className:"w-full",children:(0,r.jsx)("form",{onSubmit:e=>{e.preventDefault(),function(){let e=y.trim();if(!e)return;let t=h(e);w(""),t&&m(t)}()},children:(0,r.jsx)(n.default,{className:"w-full",placeholder:"> new project…",value:y,onChange:e=>w(e.target.value),"aria-label":"Add project"})})}),0===t.length?(0,r.jsx)("li",{children:(0,r.jsx)(u.A,{text:"No projects yet."})}):t.map((e,t)=>{let s=e.id===a,u=x===e.id,v=D(t,e);return(0,r.jsx)("li",{className:"w-full",children:(0,r.jsxs)("div",{role:"radio",tabIndex:0,"aria-checked":s,"aria-label":e.name||"Untitled project",onKeyDown:u?void 0:v,onClick:()=>{!u&&(m(s?"":e.id),s&&p(""))},className:(0,d.cn)("proj-card group relative [overflow:visible] w-full text-left rounded-card r-card-lg border pl-[var(--space-4)] pr-[var(--space-2)] py-[var(--space-2)]","bg-card/55 hover:bg-card/70 transition","grid min-h-[var(--space-7)] grid-cols-[auto,1fr,auto] items-center gap-[var(--space-4)]","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",s&&"proj-card--active ring-1 ring-ring"),children:[(0,r.jsx)("span",{className:"shrink-0",onMouseDown:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),children:(0,r.jsx)(i.default,{checked:!!e.done,onChange:()=>f(e.id),"aria-label":"Toggle project complete",size:"sm"})}),u?(0,r.jsx)(n.default,{name:"rename-project-".concat(e.id),autoFocus:!0,value:k,onChange:e=>b(e.target.value),onKeyDown:t=>{"Enter"===t.key&&C(e.id,e.name),"Escape"===t.key&&(j(null),b(e.name))},onBlur:()=>{C(e.id,e.name)},"aria-label":"Rename project ".concat(e.name)}):(0,r.jsx)("span",{className:"proj-card__title truncate font-medium",children:e.name||"Untitled"}),(0,r.jsxs)("div",{className:"ml-auto flex items-center gap-[var(--space-2)] opacity-0 transition-opacity group-hover:opacity-100 group-focus-within:opacity-100",children:[(0,r.jsx)(l.default,{"aria-label":"Edit project",title:"Edit",onClick:t=>{t.preventDefault(),t.stopPropagation(),j(e.id),b(e.name)},size:"sm",iconSize:"xs",variant:"ring",children:(0,r.jsx)(o.A,{})}),(0,r.jsx)(l.default,{"aria-label":"Delete project",title:"Delete",onClick:t=>{t.preventDefault(),t.stopPropagation();let r=a===e.id;g(e.id),r&&m("")},size:"sm",iconSize:"xs",variant:"ring",children:(0,r.jsx)(c.A,{})})]})]})},e.id)})]})})})}}},e=>{e.O(0,[627,182,678,985,625,441,255,358],()=>e(e.s=5789)),_N_E=e.O()}]);