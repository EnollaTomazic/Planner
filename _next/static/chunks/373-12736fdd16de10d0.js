(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[373],{6557:(e,t,a)=>{"use strict";a.r(t),a.d(t,{PlannerProvider:()=>b,buildTaskLookups:()=>g,computeDayCounts:()=>f,decodePlannerDays:()=>d,ensureDay:()=>v,pruneOldDays:()=>p,todayISO:()=>m,useDays:()=>y,useFocus:()=>w,useSelection:()=>N}),a(48768);var r=a(12115),s=a(67419),l=a(84804);function n(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function i(e){if(!n(e))return null;let t=e.id,a=e.name,r=e.done,s=e.createdAt;return"string"==typeof t&&"string"==typeof a&&"boolean"==typeof r&&"number"==typeof s&&Number.isFinite(s)?{id:t,name:a,done:r,createdAt:s}:null}function o(e){if(!Array.isArray(e))return[];let t=[];for(let a of e)"string"==typeof a&&t.push(a);return t}function c(e){if(!n(e))return null;let t=e.id,a=e.title,r=e.done,s=e.createdAt;if("string"!=typeof t||"string"!=typeof a||"boolean"!=typeof r||"number"!=typeof s||!Number.isFinite(s))return null;let l=e.projectId,i=o(e.images);return{id:t,title:a,done:r,createdAt:s,..."string"==typeof l?{projectId:l}:{},images:i}}function d(e){if(!n(e))return{};let t={};for(let[a,r]of Object.entries(e)){let e=function(e){if(!n(e))return null;let t=e.projects,a=e.tasks,r=Array.isArray(t)?t.map(i).filter(e=>null!==e):[],s=Array.isArray(a)?a.map(c).filter(e=>null!==e):[],{tasksById:l,tasksByProject:o}=g(s),{doneCount:d,totalCount:u}=f(r,s),p=e.focus,m=e.notes,v="string"==typeof p,h="string"==typeof m;if(!r.length&&!s.length&&!v&&!h)return null;let j={projects:r,tasks:s,tasksById:l,tasksByProject:o,doneCount:d,totalCount:u};return v&&(j.focus=p),h&&(j.notes=m),j}(r);e&&(t[a]=e)}return t}function u(e){return"string"!=typeof e?null:""===e||(0,l.E4)(e)?e:null}function p(e){let t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{maxAgeDays:r=365,now:s}=a,n=Math.floor(r);if(!Number.isFinite(n)||n<0)return e;if(void 0===s)t=new Date;else if("string"==typeof s){var i;t=null!=(i=(0,l.E4)(s))?i:new Date(s)}else t=new Date(s);if(Number.isNaN(t.getTime()))return e;let o=new Date(t.getTime());o.setDate(o.getDate()-n),o.setHours(0,0,0,0);let c=o.getTime(),d=new Date(t.getTime());d.setHours(23,59,59,999);let u=d.getTime(),p=Object.keys(e);if(!p.length)return e;let m=[],f=!1,g=1/0,v=-1/0;for(let e of p){let t=(0,l.E4)(e);if(!t){m.push({iso:e,time:null});continue}let a=t.getTime();m.push({iso:e,time:a}),f=!0,a<g&&(g=a),a>v&&(v=a)}if(f&&g>=c&&v<=u)return e;let h=e,j=!1;for(let{iso:t,time:a}of m)null===a||a>=c||(j||(j=!0,h={...e}),delete h[t]);return j?h:e}function m(){return(0,l.$$)(new Date)}function f(e,t){let a=0,r=0;for(let t of e)r+=1,t.done&&(a+=1);for(let e of t)r+=1,e.done&&(a+=1);return{doneCount:a,totalCount:r}}function g(e){let t={},a={};for(let s of e){var r;a[s.id]=s;let e=s.projectId;e&&(null!=(r=t[e])?r:t[e]=[]).push(s.id)}return{tasksById:a,tasksByProject:t}}function v(e,t){var a,r;let s=e[t];if(!s)return{projects:[],tasks:[],tasksById:{},tasksByProject:{},doneCount:0,totalCount:0};let l=s.tasks,n=!1;for(let e=0;e<l.length;e+=1){let t=l[e],a=t.images;if(Array.isArray(a)&&a.every(e=>"string"==typeof e))continue;let r=o(a);n||(n=!0,l=l.slice()),l[e]={...t,images:r}}let{tasksById:i,tasksByProject:c}=g(l),d=null!=(a=s.tasksByProject)?a:{},u=null!=(r=s.tasksById)?r:{},p=!Object.prototype.hasOwnProperty.call(s,"tasksByProject")||!function(e,t){let a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(let r of a){var s;let a=null!=(s=e[r])?s:[],l=t[r];if(!l||a.length!==l.length)return!1;for(let e=0;e<a.length;e+=1)if(a[e]!==l[e])return!1}return!0}(d,c),m=!Object.prototype.hasOwnProperty.call(s,"tasksById")||!function(e,t){let a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(let r of a)if(!Object.prototype.hasOwnProperty.call(t,r)||e[r]!==t[r])return!1;return!0}(u,i),{doneCount:v,totalCount:h}=f(s.projects,l),j=s.doneCount!==v||s.totalCount!==h;return n||p||m||j?{...s,...n?{tasks:l}:{},...p?{tasksByProject:c}:{},...m?{tasksById:i}:{},doneCount:v,totalCount:h}:s}function h(e){if(!e)return;if("string"==typeof e)return[e];let t=new Set;for(let a of e)"string"==typeof a&&t.add(a);return t.size?Array.from(t):void 0}let j=r.createContext(null),x=r.createContext(null),k=r.createContext(null);function b(e){let{children:t}=e,[a,l]=(0,s.usePersistentState)("planner:days",{},{decode:d}),[i,o]=(0,s.usePersistentState)("planner:focus","",{decode:u}),[c,f]=(0,s.usePersistentState)("planner:selected",{}),[g,b]=r.useState(()=>m());r.useEffect(()=>{""===i&&o(e=>""===e?m():e)},[i,o]),r.useEffect(()=>{let e=!1,t=()=>{let r=new Date,s=new Date(r);return s.setDate(r.getDate()+1),s.setHours(0,0,0,0),setTimeout(()=>{(()=>{if(e)return;let t=m();b(t),o(t)})(),a=t()},Math.max(0,s.getTime()-r.getTime()))},a=t();return()=>{e=!0,clearTimeout(a)}},[o,b]);let y=r.useMemo(()=>(function(e,t){let a=e,r=!1;for(let n of Object.keys(e)){var s,l;let i=e[n],o=t[n],c=null==i?void 0:i.projectId,d=null==i?void 0:i.taskId;if(!o||!c&&!d||c&&!o.projects.some(e=>e.id===c)){r||(r=!0,a={...a}),delete a[n];continue}!d||(null!=(l=null==(s=o.tasksById)?void 0:s[d])?l:o.tasks.find(e=>e.id===d))||(r||(r=!0,a={...a}),delete a[n])}return r?a:e})(c,a),[c,a]);r.useEffect(()=>{Object.is(y,c)||f(y)},[y,c,f]);let w=r.useMemo(()=>{let e={};for(let[r,s]of Object.entries(a)){var t;e[r]=null!=(t=s.tasksById)?t:{}}return e},[a]);r.useEffect(()=>{Object.is(a,a)||l(a)},[a,a,l]);let N=r.useCallback(e=>{l(t=>{let{days:a,changed:r}=function(e){if(Array.isArray(e)){let[t,a]=e;return{days:t,changed:h(a)}}return n(e)&&Object.prototype.hasOwnProperty.call(e,"days")&&n(e.days)?{days:e.days,changed:h(e.changed)}:{days:e,changed:void 0}}("function"==typeof e?e(t):e),s=p(a),l=!Object.is(s,a);for(let e of void 0===r?Object.keys(s):r.filter(e=>Object.prototype.hasOwnProperty.call(s,e))){if(t[e]===s[e])continue;let a=function(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))return;let a=v(e,t);return a===e[t]?void 0:a}(s,e);a&&(l||(l=!0,s={...s}),s[e]=a)}return!l&&Object.is(t,s)?t:s})},[l]),C=r.useMemo(()=>({days:a,setDays:N,tasksById:w}),[a,N,w]),P=r.useMemo(()=>({focus:i,setFocus:o,today:g}),[i,o,g]),T=r.useCallback(e=>{f(t=>{let a="function"==typeof e?e(t):e;return Object.is(t,a)?t:a})},[f]),S=r.useMemo(()=>({selected:y,setSelected:T}),[y,T]);return r.createElement(j.Provider,{value:C},r.createElement(x.Provider,{value:P},r.createElement(k.Provider,{value:S},t)))}function y(){let e=r.useContext(j);if(!e)throw Error("PlannerProvider missing. Wrap your planner page with <PlannerProvider>.");return e}function w(){let e=r.useContext(x);if(!e)throw Error("PlannerProvider missing. Wrap your planner page with <PlannerProvider>.");return e}function N(){let e=r.useContext(k);if(!e)throw Error("PlannerProvider missing. Wrap your planner page with <PlannerProvider>.");return e}},8659:(e,t,a)=>{"use strict";a.d(t,{default:()=>k});var r=a(95155);a(48768);var s=a(12115),l=a(23578),n=a(57833),i=a(15892),o=a(67284),c=a(57649),d=a(6557),u=a(77372),p=a(24625),m=a(81464),f=a(95948),g=a(90368),v=a(27937),h=a(10383),j=a(84804);function x(){let{iso:e,today:t,setIso:a}=(0,c.useFocusDate)(),{start:d,end:x,days:k}=(0,c.useWeek)(e),b=s.useMemo(()=>(0,j.tj)(d,x),[d,x]),y=s.useMemo(()=>k.map(e=>({iso:e,isToday:e===t})),[k,t]),w=s.useCallback(()=>{a((0,j.$$)((0,j.fi)(d,-7)))},[a,d]),N=s.useCallback(()=>{a((0,j.$$)((0,j.fi)(d,7)))},[a,d]),C=s.useCallback(()=>{a(t)},[a,t]),P=s.useRef(null),T=(0,r.jsxs)("div",{className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsxs)(f.default,{variant:"ghost",size:"sm","aria-label":"Previous week",onClick:w,children:[(0,r.jsx)(g.A,{}),(0,r.jsx)("span",{children:"Prev"})]}),(0,r.jsx)(f.default,{size:"sm","aria-label":"Jump to today",onClick:C,children:"Today"}),(0,r.jsxs)(f.default,{variant:"ghost",size:"sm","aria-label":"Next week",onClick:N,children:[(0,r.jsx)("span",{children:"Next"}),(0,r.jsx)(v.A,{})]})]});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(m.default,{as:"main",className:"py-[var(--space-6)] space-y-[var(--space-6)]","aria-labelledby":"planner-header",children:[(0,r.jsx)(p.zY,{contentClassName:"space-y-[var(--space-2)]",header:{id:"planner-header",tabIndex:-1,eyebrow:"Planner",heading:"Planner for Today",subtitle:"Plan your week",icon:(0,r.jsx)(h.A,{className:"opacity-80"}),right:T,sticky:!1},hero:{frame:!1,sticky:!1,rail:!1,barClassName:"hidden",className:"planner-header__hero",heading:(0,r.jsx)("span",{className:"sr-only",children:"Week picker"}),children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.default,{}),(0,r.jsx)("div",{"aria-live":"polite",className:"sr-only",children:b})]})}}),(0,r.jsxs)("section",{"aria-label":"Today and weekly panels",className:"grid grid-cols-1 gap-[var(--space-6)] lg:grid-cols-12",children:[(0,r.jsx)("div",{className:"lg:col-span-8",ref:P,children:(0,r.jsx)(l.default,{iso:e})}),(0,r.jsx)("aside",{"aria-label":"Week notes",className:"lg:col-span-4 space-y-[var(--space-6)] lg:sticky lg:top-[var(--space-8)]",children:(0,r.jsx)(n.default,{iso:e})})]}),(0,r.jsx)("ul",{"aria-label":"Week days (Monday to Sunday)",className:"flex flex-col gap-[var(--space-4)]",children:y.map(e=>(0,r.jsx)(i.A,{iso:e.iso,isToday:e.isToday},e.iso))})]}),(0,r.jsx)(o.default,{watchRef:P})]})}function k(){return(0,r.jsx)(d.PlannerProvider,{children:(0,r.jsx)(x,{})})}},9535:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useSelectedProject:()=>o,useSelectedTask:()=>d,useSelectionState:()=>l});var r=a(12115),s=a(6557);function l(e,t){let{getCurrentId:a,produceSelection:l}=t,{selected:n,setSelected:i}=(0,s.useSelection)();return[a(n[e]),r.useCallback(t=>{i(a=>{let r=a[e],s=l(t,r);return r&&r.projectId===s.projectId&&r.taskId===s.taskId?a:{...a,[e]:s}})},[e,l,i])]}let n=e=>{var t;return null!=(t=null==e?void 0:e.projectId)?t:""},i=e=>e?{projectId:e}:{};function o(e){return l(e,{getCurrentId:n,produceSelection:i})}let c=e=>{var t;return null!=(t=null==e?void 0:e.taskId)?t:""};function d(e){let{tasksById:t}=(0,s.useDays)(),a=r.useCallback(a=>{var r,s;if(!a)return{};let l=null==(s=t[e])||null==(r=s[a])?void 0:r.projectId;return{taskId:a,projectId:l}},[e,t]);return l(e,{getCurrentId:c,produceSelection:a})}},11468:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var r=a(95155);a(48768);var s=a(12115),l=a(3278),n=a(52105),i=a(95948),o=a(81393);function c(e){let{iso:t}=e,{value:a,setValue:c,saving:d,isDirty:u,lastSavedRef:p,commit:m}=(0,o.useDayFocus)(t),f=s.useMemo(()=>"focus-".concat(t,"-header"),[t]);return(0,r.jsxs)(l.default,{className:"card-neo-soft",children:[(0,r.jsx)(l.default.Header,{id:f,title:"Daily Focus"}),(0,r.jsxs)(l.default.Body,{children:[(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),m()},className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)(n.default,{placeholder:"What’s the one thing today?",value:a,onChange:e=>c(e.target.value),onBlur:m,name:"focus-".concat(t),autoComplete:"off",className:"flex-1","aria-labelledby":f}),(0,r.jsx)(i.default,{type:"submit",variant:"primary",size:"sm",disabled:!u||d,"aria-disabled":!u||d,children:d?"Saving…":"Save"})]}),(0,r.jsx)("div",{className:"mt-[var(--space-2)] text-label text-muted-foreground","aria-live":"polite",children:d?"Saving changes…":u?"Unsaved changes":p.current?"All changes saved":"No focus set yet"})]})]})}},12607:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useDay:()=>i});var r=a(12115),s=a(6557),l=a(83996),n=a(51266);function i(e){let{days:t,upsertDay:a}=(0,n.usePlannerStore)(),i=r.useMemo(()=>(0,s.ensureDay)(t,e),[t,e]),o=i.tasks,c=i.tasksById,d=i.tasksByProject,u=r.useMemo(()=>(0,l.v_)(e,a),[e,a]),p=i.doneCount,m=i.totalCount;return{projects:i.projects,tasks:o,tasksById:c,tasksByProject:d,addProject:u.addProject,renameProject:u.renameProject,deleteProject:u.removeProject,toggleProject:u.toggleProject,addTask:u.addTask,renameTask:u.renameTask,deleteTask:u.removeTask,toggleTask:u.toggleTask,addTaskImage:u.addTaskImage,removeTaskImage:u.removeTaskImage,doneCount:p,totalCount:m}}},15892:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(95155),s=a(12115),l=a(93706);let n=s.memo(function(e){let{iso:t,isToday:a}=e;return(0,r.jsx)("li",{id:"day-".concat(t),"aria-label":"Day ".concat(t).concat(a?" (Today)":""),className:"w-full scroll-m-[calc(var(--space-8)+var(--space-6))] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",tabIndex:-1,children:(0,r.jsx)(l.default,{iso:t,isToday:a})})},(e,t)=>e.iso===t.iso&&e.isToday===t.isToday)},16386:(e,t,a)=>{"use strict";a.d(t,{AI:()=>d,By:()=>l,Vo:()=>f,XZ:()=>c,ei:()=>u,mr:()=>m,oB:()=>n,oE:()=>o,u0:()=>p,wE:()=>i});var r=a(6557);function s(e){var t,a,s,l,n,i;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=null!=(t=o.projects)?t:e.projects,d=Object.prototype.hasOwnProperty.call(o,"tasks"),u=d&&null!=(a=o.tasks)?a:e.tasks,p=null!=(s=e.tasksById)?s:{},m=null!=(l=e.tasksByProject)?l:{};if(d){let e=(0,r.buildTaskLookups)(u);p=e.tasksById,m=e.tasksByProject}else Object.prototype.hasOwnProperty.call(o,"tasksById")&&(p=null!=(n=o.tasksById)?n:{}),Object.prototype.hasOwnProperty.call(o,"tasksByProject")&&(m=null!=(i=o.tasksByProject)?i:{});let{doneCount:f,totalCount:g}=(0,r.computeDayCounts)(c,u);return{...e,...o,projects:c,tasks:u,tasksById:p,tasksByProject:m,doneCount:f,totalCount:g}}function l(e,t,a){let r=a.trim();if(!r)return e;let l=Date.now(),n=[...e.projects,{id:t,name:r,done:!1,createdAt:l}];return s(e,{projects:n})}function n(e,t,a){let r=a.trim();return r?s(e,{projects:e.projects.map(e=>e.id===t?{...e,name:r}:e)}):e}function i(e,t){var a,r;let l=null!=(r=null==(a=e.projects.find(e=>e.id===t))?void 0:a.done)&&r,n=e.projects.map(e=>e.id===t?{...e,done:!l}:e),i=e.tasks.map(e=>e.projectId===t?{...e,done:!l}:e);return s(e,{projects:n,tasks:i})}function o(e,t){return s(e,{projects:e.projects.filter(e=>e.id!==t),tasks:e.tasks.filter(e=>e.projectId!==t)})}function c(e,t,a,r){let l=a.trim();if(!l)return e;let n=Date.now(),i=[...e.tasks,{id:t,title:l,done:!1,projectId:r,createdAt:n,images:[]}];return s(e,{tasks:i})}function d(e,t,a){let r=a.trim();return r?s(e,{tasks:e.tasks.map(e=>e.id===t?{...e,title:r}:e)}):e}function u(e,t){return s(e,{tasks:e.tasks.map(e=>e.id===t?{...e,done:!e.done}:e)})}function p(e,t){return s(e,{tasks:e.tasks.filter(e=>e.id!==t)})}function m(e,t,a){let r=a.trim();return r?s(e,{tasks:e.tasks.map(e=>e.id===t?{...e,images:[...e.images,r]}:e)}):e}function f(e,t,a,r){return s(e,{tasks:e.tasks.map(e=>{if(e.id!==t)return e;let s=void 0!==r&&e.images[r]===a?r:e.images.indexOf(a);if(s<0)return e;let l=e.images.slice();return l.splice(s,1),{...e,images:l}})})}},23578:(e,t,a)=>{"use strict";a.d(t,{default:()=>b});var r=a(95155),s=a(12115),l=a(50641),n=a(16485),i=a(84804),o=a(58363);function c(e){let{viewIso:t,isToday:a,onChange:l}=e,c=(0,s.useMemo)(()=>(0,i.$$)(),[]),d=(0,s.useRef)(null),u=(0,s.useCallback)(()=>{var e;let t=d.current;if(null==t?void 0:t.showPicker)return void t.showPicker();null==(e=d.current)||e.focus()},[]),p=(0,s.useCallback)(e=>{l(e.target.value)},[l]),m=a?"Today":t,f=t||c;return(0,r.jsxs)("div",{className:"mb-[var(--space-4)] flex flex-col gap-[var(--space-2)] md:flex-row md:items-center md:justify-between",children:[(0,r.jsx)("div",{className:"flex items-center gap-[var(--space-3)]",children:(0,r.jsx)("h2",{className:"glitch text-title font-semibold tracking-[-0.01em]","data-text":m,children:m})}),(0,r.jsxs)("div",{className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)("input",{ref:d,type:"date",value:f,onChange:p,"aria-label":"Change focused date",className:"sr-only"}),(0,r.jsx)(o.default,{"aria-label":"Open calendar",title:t,onClick:u,size:"md",variant:"ghost",iconSize:"md",children:(0,r.jsx)(n.A,{})})]})]})}var d=a(18514),u=a(71360),p=a(64269),m=a(95948),f=a(52105),g=a(49412);function v(e){let{projects:t,selectedProjectId:a,projectsListId:s,projectName:l,editingProjectId:n,editingProjectName:i,showAllProjects:c,visibleProjects:v,hiddenProjectsCount:h,shouldShowProjectToggle:j,onProjectNameChange:x,onProjectFormSubmit:k,onProjectSelect:b,onProjectToggle:y,onProjectDelete:w,onProjectEditOpen:N,onProjectRenameChange:C,onProjectRenameCommit:P,onProjectRenameCancel:T,onToggleShowAllProjects:S}=e,D=v.some(e=>e.id===a)?"".concat(s,"-option-").concat(a):void 0;return(0,r.jsxs)("div",{className:"mt-[var(--space-4)] space-y-[var(--space-4)]",children:[(0,r.jsx)("form",{onSubmit:k,children:(0,r.jsx)(f.default,{name:"new-project",placeholder:"> new project…",value:l,onChange:e=>x(e.target.value),"aria-label":"New project",className:"w-full"})}),t.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("ul",{id:s,className:"space-y-[var(--space-2)]",role:"listbox","aria-label":"Projects","aria-activedescendant":D,children:[v.map(e=>{let t=n===e.id,l=a===e.id,c="".concat(s,"-option-").concat(e.id);return(0,r.jsx)("li",{role:"presentation",children:(0,r.jsxs)("div",{className:(0,p.cn)("group flex select-none items-center justify-between rounded-card r-card-lg border px-[var(--space-3)] py-[var(--space-2)] text-ui font-medium transition","border-border bg-card/55 hover:bg-card/70 focus-visible:bg-card/70 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",l&&"ring-1 ring-ring"),tabIndex:0,role:"option",id:c,"aria-selected":l,"aria-disabled":t,onClick:()=>{t||b(e.id)},onKeyDown:a=>{a.target===a.currentTarget&&!t&&["Enter"," ","Space","Spacebar"].includes(a.key)&&(a.preventDefault(),b(e.id))},title:t?"Editing…":l?"Selected":"Click to select",children:[t?(0,r.jsx)(f.default,{name:"rename-project-".concat(e.id),autoFocus:!0,value:i,onChange:e=>C(e.target.value),onKeyDown:t=>{"Enter"===t.key&&P(e.id,e.name),"Escape"===t.key&&T()},onBlur:()=>{P(e.id,e.name)},"aria-label":"Rename project ".concat(e.name),onClick:e=>e.stopPropagation()}):(0,r.jsxs)("div",{className:"flex min-w-0 items-center gap-[var(--space-3)]",children:[(0,r.jsx)("span",{className:"shrink-0",onMouseDown:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),children:(0,r.jsx)(g.default,{size:"sm",checked:e.done,onChange:()=>y(e.id),"aria-label":"Toggle completion for ".concat(e.name)})}),(0,r.jsx)("span",{className:(0,p.cn)("truncate",e.done&&"line-through-soft text-muted-foreground"),children:e.name})]}),(0,r.jsxs)("div",{className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)(o.default,{"aria-label":"Edit project ".concat(e.name),title:"Edit",onClick:t=>{t.stopPropagation(),N(e.id,e.name)},size:"sm",variant:"ghost",iconSize:"xs",children:(0,r.jsx)(d.A,{})}),(0,r.jsx)(o.default,{"aria-label":"Remove project ".concat(e.name),title:"Remove",onClick:t=>{t.stopPropagation(),w(e.id)},size:"sm",variant:"ghost",iconSize:"xs",children:(0,r.jsx)(u.A,{})})]})]})},e.id)}),h>0&&(0,r.jsxs)("li",{className:"pr-[var(--space-1)] text-right text-label font-medium tracking-[0.02em] opacity-70",children:["+ ",h," more…"]})]}),j&&(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(m.default,{size:"sm",variant:"ghost",onClick:S,"aria-expanded":c,"aria-controls":s,children:c?"Show less":"Show more"})})]})]})}function h(e){let{projectId:t,projectName:a,tasksListId:s,taskInputName:l,visibleTasks:n,totalTaskCount:i,showAllTasks:c,shouldShowTaskToggle:v,editingTaskId:h,editingTaskText:j,taskAnnouncementText:x,onTaskFormSubmit:k,onTaskSelect:b,onTaskToggle:y,onTaskDelete:w,onTaskEditOpen:N,onTaskRenameChange:C,onTaskRenameCommit:P,onTaskRenameCancel:T,onToggleShowAllTasks:S}=e;return t?(0,r.jsxs)("div",{className:"mt-[var(--space-4)] space-y-[var(--space-4)]",children:[(0,r.jsx)("form",{onSubmit:k,children:(0,r.jsx)(f.default,{name:l,placeholder:'> task for "'.concat(a||"Project",'"'),"aria-label":"New task",className:"w-full"})}),(0,r.jsx)("div",{"aria-live":"polite",className:"sr-only",children:x}),0===i?(0,r.jsx)("div",{className:"tasks-placeholder",children:"No tasks yet."}):(0,r.jsxs)("div",{className:"space-y-[var(--space-2)]",children:[(0,r.jsx)("ul",{id:s,className:"space-y-[var(--space-2)]",role:"list","aria-label":"Tasks",children:n.map(e=>{let t=h===e.id;return(0,r.jsxs)("li",{className:(0,p.cn)("task-tile flex items-center justify-between rounded-card r-card-lg border px-[var(--space-3)] py-[var(--space-2)]","border-border bg-card/55 hover:bg-card/70"),role:"listitem",tabIndex:0,onClick:t=>{if(t.defaultPrevented)return;let a=t.target;null!=a&&a.closest("button, a, input, textarea, select, [role='button'], [role='link'], [role='checkbox'], [role='menuitem'], [role='switch']")||b(e.id)},onKeyDown:t=>{t.defaultPrevented||t.currentTarget===t.target&&("Enter"===t.key||" "===t.key||"Spacebar"===t.key)&&(t.preventDefault(),b(e.id))},children:[(0,r.jsxs)("div",{className:"flex items-center gap-[var(--space-3)]",children:[(0,r.jsx)(g.default,{checked:e.done,onChange:()=>{y(e.id)},size:"sm"}),t?(0,r.jsx)(f.default,{name:"rename-task-".concat(e.id),autoFocus:!0,value:j,onChange:e=>C(e.target.value),onKeyDown:t=>{"Enter"===t.key&&P(e.id,e.title),"Escape"===t.key&&T()},onBlur:()=>{P(e.id,e.title)},"aria-label":"Rename task ".concat(e.title)}):(0,r.jsx)("button",{type:"button",className:(0,p.cn)("task-tile__text",e.done&&"line-through-soft"),onClick:t=>{t.stopPropagation(),N(e.id,e.title)},onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),t.stopPropagation(),N(e.id,e.title))},"aria-label":"Edit task ".concat(e.title),title:"Edit task",children:e.title})]}),(0,r.jsxs)("div",{className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)(o.default,{"aria-label":"Edit task ".concat(e.title),title:"Edit",onClick:t=>{t.stopPropagation(),N(e.id,e.title,{select:!0})},size:"sm",variant:"ghost",iconSize:"xs",children:(0,r.jsx)(d.A,{})}),(0,r.jsx)(o.default,{"aria-label":"Remove task",title:"Remove",onClick:t=>{t.stopPropagation(),w(e.id)},size:"sm",variant:"ghost",iconSize:"xs",children:(0,r.jsx)(u.A,{})})]})]},e.id)})}),v&&(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(m.default,{size:"sm",variant:"ghost",onClick:S,"aria-expanded":c,"aria-controls":s,children:c?"Show less":"Show more"})})]})]}):(0,r.jsx)("div",{className:"mt-[var(--space-4)] text-ui font-medium text-muted-foreground",children:"Select a project to add and view tasks."})}var j=a(12607),x=a(57649),k=a(9535);function b(e){let{iso:t}=e,{iso:a,setIso:n,today:i}=(0,x.useFocusDate)(),o=null!=t?t:a,d=o===i;(0,s.useEffect)(()=>{t&&t!==a&&n(t)},[t,a,n]);let{projects:u,tasks:p,addTask:m,renameTask:f,toggleTask:g,deleteTask:b,addProject:y,renameProject:w,deleteProject:N,toggleProject:C}=(0,j.useDay)(o),[P,T]=(0,k.useSelectedProject)(o),[,S]=(0,k.useSelectedTask)(o),D=(0,s.useMemo)(()=>{var e;let t=u.find(e=>e.id===P);return null!=(e=null==t?void 0:t.name)?e:""},[u,P]);(0,s.useEffect)(()=>{P&&!u.some(e=>e.id===P)&&T("")},[u,P,T]);let E=(0,s.useMemo)(()=>P?p.filter(e=>e.projectId===P):[],[p,P]),{done:I,total:A}=(0,s.useMemo)(()=>E.reduce((e,t)=>(e.total+=1,t.done&&(e.done+=1),e),{done:0,total:0}),[E]),M=function(e){let{projects:t,selectedProjectId:a,setSelectedProjectId:r,addProject:l,renameProject:n,deleteProject:i,toggleProject:o}=e,[c,d]=(0,s.useState)(""),[u,p]=(0,s.useState)(null),[m,f]=(0,s.useState)(""),[g,v]=(0,s.useState)(!1),h=(0,s.useMemo)(()=>g?t:t.slice(0,12),[t,g]),j=(0,s.useMemo)(()=>Math.max(t.length-h.length,0),[t.length,h.length]),x=t.length>12,k=(0,s.useCallback)(e=>{d(e)},[]),b=(0,s.useCallback)(e=>{e.preventDefault();let t=c.trim();if(!t)return;let a=l(t);d(""),a&&r(a)},[l,c,r]),y=(0,s.useCallback)(e=>{r(e)},[r]),w=(0,s.useCallback)(e=>{o(e)},[o]),N=(0,s.useCallback)(e=>{i(e),a===e&&r(""),u===e&&(p(null),f(""))},[i,u,a,r]),C=(0,s.useCallback)((e,t)=>{p(e),f(t)},[]),P=(0,s.useCallback)(e=>{f(e)},[]),T=(0,s.useCallback)((e,t)=>{n(e,m.trim()||t),p(null)},[m,n]),S=(0,s.useCallback)(()=>{p(null)},[]),D=(0,s.useCallback)(()=>{v(e=>!e)},[]);return(0,s.useEffect)(()=>{g&&t.length<=12&&v(!1)},[t.length,g]),(0,s.useEffect)(()=>{a&&!g&&!(t.length<=12)&&(t.slice(0,12).some(e=>e.id===a)||v(!0))},[t,a,g]),(0,s.useEffect)(()=>{u&&(t.some(e=>e.id===u)||(p(null),f("")))},[u,t]),{projectsListId:"today-hero-project-list",projectName:c,editingProjectId:u,editingProjectName:m,showAllProjects:g,visibleProjects:h,hiddenProjectsCount:j,shouldShowProjectToggle:x,handleProjectNameChange:k,handleProjectFormSubmit:b,handleProjectSelect:y,handleProjectToggle:w,handleProjectDelete:N,openProjectEditor:C,handleProjectRenameChange:P,commitProjectRename:T,cancelProjectRename:S,toggleShowAllProjects:D}}({projects:u,selectedProjectId:P,setSelectedProjectId:T,addProject:y,renameProject:w,deleteProject:N,toggleProject:C}),z=function(e){let{scopedTasks:t,projectId:a,projectName:r,addTask:l,renameTask:n,deleteTask:i,toggleTask:o,setSelectedTaskId:c}=e,[d,u]=(0,s.useState)(!1),[p,m]=(0,s.useState)(null),[f,g]=(0,s.useState)(""),[v,h]=(0,s.useState)({text:"",toggleMarker:!1}),j=(0,s.useRef)(null),x=(0,s.useRef)(new Map),k=(0,s.useMemo)(()=>"today-hero-task-list-".concat(a||"none"),[a]),b=(0,s.useMemo)(()=>"new-task-".concat(a||"none"),[a]),y=t.length,w=(0,s.useMemo)(()=>d?t:t.slice(0,12),[t,d]),N=y>12,C=(0,s.useCallback)(e=>{var t;if(!a)return void e.preventDefault();e.preventDefault();let r=e.currentTarget.elements.namedItem(b),s=(null!=(t=null==r?void 0:r.value)?t:"").trim();if(!s)return;let n=l(s,a);r&&(r.value=""),n&&c(n)},[l,a,c,b]),P=(0,s.useCallback)(e=>{c(e)},[c]),T=(0,s.useCallback)(e=>{o(e),c(e)},[c,o]),S=(0,s.useCallback)(e=>{i(e),c(""),p===e&&(m(null),g(""))},[i,p,c]),D=(0,s.useCallback)((e,t,a)=>{g(t),m(e),(null==a?void 0:a.select)&&c(e)},[c]),E=(0,s.useCallback)(e=>{g(e)},[]),I=(0,s.useCallback)((e,t)=>{n(e,f.trim()||t),m(null)},[f,n]),A=(0,s.useCallback)(()=>{m(null)},[]),M=(0,s.useCallback)(()=>{u(e=>!e)},[]);return(0,s.useEffect)(()=>{u(!1)},[a]),(0,s.useEffect)(()=>{d&&y<=12&&u(!1)},[d,y]),(0,s.useEffect)(()=>{p&&!t.some(e=>e.id===p)&&(m(null),g(""))},[p,t]),(0,s.useEffect)(()=>{if(!a){j.current=null,x.current=new Map,h(e=>e.text?{text:"",toggleMarker:e.toggleMarker}:e);return}let e=new Map(t.map(e=>[e.id,{title:e.title,done:e.done}]));if(j.current!==a){j.current=a,x.current=e,h(e=>e.text?{text:"",toggleMarker:e.toggleMarker}:e);return}let s=x.current,l=null,n=r?' in project "'.concat(r,'"'):"";for(let[t,a]of e)if(!s.has(t)){l='Task "'.concat(a.title,'" added').concat(n,".");break}if(!l){for(let[t,a]of s)if(!e.has(t)){l='Task "'.concat(a.title,'" removed').concat(n,".");break}}if(!l)for(let[t,a]of e){let e=s.get(t);if(e){if(e.title!==a.title){l='Task "'.concat(e.title,'" renamed to "').concat(a.title,'"').concat(n,".");break}if(e.done!==a.done){l=a.done?'Task "'.concat(a.title,'" marked complete').concat(n,"."):'Task "'.concat(a.title,'" marked incomplete').concat(n,".");break}}}l&&h(e=>({text:"".concat(l).concat(e.toggleMarker?"":"​"),toggleMarker:!e.toggleMarker})),x.current=e},[a,r,t]),{tasksListId:k,taskInputName:b,visibleTasks:w,totalTaskCount:y,showAllTasks:d,shouldShowTaskToggle:N,editingTaskId:p,editingTaskText:f,taskAnnouncementText:v.text,handleTaskFormSubmit:C,handleTaskSelect:P,handleTaskToggle:T,handleTaskDelete:S,openTaskEditor:D,handleTaskRenameChange:E,commitTaskRename:I,cancelTaskRename:A,toggleShowAllTasks:M}}({scopedTasks:E,projectId:P,projectName:D,addTask:m,renameTask:f,deleteTask:b,toggleTask:g,setSelectedTaskId:S});return(0,r.jsxs)("section",{className:"bg-hero-soft rounded-card r-card-lg card-pad-lg anim-in",children:[(0,r.jsx)(c,{viewIso:o,isToday:d,onChange:n}),(0,r.jsx)(l.default,{current:I,total:A,showPercentage:!0,className:"mb-[var(--space-4)] flex items-center gap-[var(--space-3)]",trackClassName:"w-full",percentageClassName:"glitch-percent w-[var(--space-7)] text-right text-ui font-medium"}),(0,r.jsx)(v,{projects:u,selectedProjectId:P,projectsListId:M.projectsListId,projectName:M.projectName,editingProjectId:M.editingProjectId,editingProjectName:M.editingProjectName,showAllProjects:M.showAllProjects,visibleProjects:M.visibleProjects,hiddenProjectsCount:M.hiddenProjectsCount,shouldShowProjectToggle:M.shouldShowProjectToggle,onProjectNameChange:M.handleProjectNameChange,onProjectFormSubmit:M.handleProjectFormSubmit,onProjectSelect:M.handleProjectSelect,onProjectToggle:M.handleProjectToggle,onProjectDelete:M.handleProjectDelete,onProjectEditOpen:M.openProjectEditor,onProjectRenameChange:M.handleProjectRenameChange,onProjectRenameCommit:M.commitProjectRename,onProjectRenameCancel:M.cancelProjectRename,onToggleShowAllProjects:M.toggleShowAllProjects}),(0,r.jsx)(h,{projectId:P,projectName:D,tasksListId:z.tasksListId,taskInputName:z.taskInputName,visibleTasks:z.visibleTasks,totalTaskCount:z.totalTaskCount,showAllTasks:z.showAllTasks,shouldShowTaskToggle:z.shouldShowTaskToggle,editingTaskId:z.editingTaskId,editingTaskText:z.editingTaskText,taskAnnouncementText:z.taskAnnouncementText,onTaskFormSubmit:z.handleTaskFormSubmit,onTaskSelect:z.handleTaskSelect,onTaskToggle:z.handleTaskToggle,onTaskDelete:z.handleTaskDelete,onTaskEditOpen:z.openTaskEditor,onTaskRenameChange:z.handleTaskRenameChange,onTaskRenameCommit:z.commitTaskRename,onTaskRenameCancel:z.cancelTaskRename,onToggleShowAllTasks:z.toggleShowAllTasks})]})}},26439:(e,t,a)=>{"use strict";a.d(t,{default:()=>v});var r=a(95155),s=a(12115),l=a(15239),n=a(52105),i=a(58363),o=a(95948),c=a(49412),d=a(18514),u=a(71360),p=a(64269),m=a(44392);let f=a(50306).q0[6],g="var(--space-".concat(7,")");function v(e){let{task:t,toggleTask:a,deleteTask:v,renameTask:h,selectTask:j,addImage:x,removeImage:k}=e,[b,y]=s.useState(!1),[w,N]=s.useState(t.title),[C,P]=s.useState(""),T=s.useRef(null),[S,D]=s.useState(!1),[E,I]=s.useState(null),A=C.trim(),M=A.length>0,z=t.title.trim(),R=s.useCallback(e=>{if(!e)return"Enter an image URL.";try{let t=new URL(e);if("https:"!==t.protocol)return"Image URL must start with https."}catch(e){return"Enter a valid image URL."}return null},[]);(0,m.A)({ref:T,when:b}),s.useEffect(()=>{b||N(t.title)},[b,t.title]);let B=s.useCallback(()=>{D(!0)},[]),F=s.useCallback(e=>{let t=e.relatedTarget;t&&e.currentTarget.contains(t)||D(!1)},[]),O=s.useCallback(()=>{j()},[j]),_=s.useCallback(e=>{e.target===e.currentTarget&&("Enter"===e.key&&(e.preventDefault(),j()),(" "===e.key||"Spacebar"===e.key)&&e.preventDefault())},[j]),L=s.useCallback(e=>{e.target===e.currentTarget&&(" "===e.key||"Spacebar"===e.key)&&(e.preventDefault(),j())},[j]);function W(){let e=w.trim();if(y(!1),!e)return void N(t.title);e!==t.title&&h(e)}return(0,r.jsxs)("li",{className:"group",children:[(0,r.jsxs)("div",{className:"relative",onFocusCapture:B,onBlurCapture:F,children:[(0,r.jsx)("button",{type:"button","aria-label":"Select task ".concat(t.title),onClick:O,onKeyDown:_,onKeyUp:L,className:(0,p.cn)("absolute inset-0 w-full cursor-pointer rounded-card r-card-lg border transition-colors","bg-card/55 hover:bg-card/70 focus-visible:bg-card/70 active:bg-card/80","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-0","data-[focus-within=true]:ring-2 data-[focus-within=true]:ring-ring"),"data-focus-within":S?"true":void 0,children:(0,r.jsx)("span",{className:"sr-only",children:"Select task ".concat(t.title)})}),(0,r.jsxs)("div",{className:(0,p.cn)("pointer-events-none relative z-[1]","[overflow:visible] grid min-h-[var(--space-7)] min-w-0 grid-cols-[auto,1fr,auto] items-center gap-[var(--space-4)] pl-[var(--space-4)] pr-[var(--space-2)] py-[var(--space-2)]"),children:[(0,r.jsx)("div",{className:"pointer-events-auto shrink-0 ml-[var(--space-1)]",onClick:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),children:(0,r.jsx)(c.default,{checked:t.done,onChange:()=>{b||a()},"aria-label":"Toggle ".concat(t.title," done"),size:"sm"})}),(0,r.jsx)("div",{className:"pointer-events-auto flex-1 min-w-0 px-[var(--space-1)]",children:b?(0,r.jsx)(n.default,{name:"dc-rename-task-".concat(t.id),ref:T,value:w,onChange:e=>N(e.target.value),onBlur:W,onKeyDown:e=>{"Enter"===e.key&&W(),"Escape"===e.key&&(y(!1),N(t.title))},"aria-label":z?"Rename task ".concat(z):"Rename task"}):(0,r.jsx)("button",{type:"button",className:"task-tile__text block w-full text-left focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring rounded-card r-card-lg",onClick:e=>{e.stopPropagation(),a()},onDoubleClick:e=>{e.stopPropagation(),y(!0)},onPointerDown:e=>e.stopPropagation(),"aria-pressed":t.done,title:"Click to toggle; double-click to edit",children:(0,r.jsx)("span",{className:(0,p.cn)("truncate break-words",t.done&&"line-through-soft"),children:t.title})})}),(0,r.jsxs)("div",{className:(0,p.cn)("pointer-events-auto flex shrink-0 items-center gap-[var(--space-2)]",b?"opacity-0 pointer-events-none":"opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto group-focus-within:opacity-100 group-focus-within:pointer-events-auto"),children:[(0,r.jsx)(i.default,{"aria-label":"Edit task",title:"Edit",onClick:e=>{e.stopPropagation(),y(!0)},onPointerDown:e=>e.stopPropagation(),size:"sm",iconSize:"xs",variant:"ghost",children:(0,r.jsx)(d.A,{})}),(0,r.jsx)(i.default,{"aria-label":"Delete task",title:"Delete",onClick:e=>{e.stopPropagation(),v()},onPointerDown:e=>e.stopPropagation(),size:"sm",iconSize:"xs",variant:"ghost",children:(0,r.jsx)(u.A,{})})]})]})]}),t.images.length>0&&(0,r.jsx)("ul",{className:"mt-[var(--space-2)] space-y-[var(--space-2)]",children:t.images.map((e,a)=>(0,r.jsxs)("li",{className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)(l.default,{src:e,alt:"Task image for ".concat(t.title),width:f,height:f,className:"rounded-card r-card-md object-cover",style:{maxHeight:g,height:g,width:g}}),(0,r.jsx)(i.default,{"aria-label":"Remove image",title:"Remove image",onClick:()=>k(e,a),size:"sm",iconSize:"xs",variant:"ghost",children:(0,r.jsx)(u.A,{})})]},"".concat(e,"-").concat(a)))}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),function(){let e=R(A);if(e)return I(e);x(A),P(""),I(null)}()},className:"mt-[var(--space-2)] flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)("label",{htmlFor:"task-image-".concat(t.id),className:"sr-only",children:"Add image URL"}),(0,r.jsx)(n.default,{id:"task-image-".concat(t.id),type:"url",value:C,onChange:e=>{let t=e.target.value;if(P(t),E){let e=t.trim();if(!e)return void I(null);I(R(e))}},placeholder:"https://example.com/image.jpg",className:"flex-1","aria-invalid":E?"true":void 0,"aria-describedby":E?"task-image-".concat(t.id,"-error"):void 0}),(0,r.jsx)(o.default,{type:"submit",size:"sm",disabled:!M,className:"shrink-0",children:"Attach image"})]}),E&&(0,r.jsx)("p",{id:"task-image-".concat(t.id,"-error"),className:"mt-[var(--space-1)] text-ui text-danger",role:"alert","aria-live":"polite",children:E})]})}},34467:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useWeekData:()=>n});var r=a(12115),s=a(6557),l=a(51266);function n(e){let{days:t}=(0,l.usePlannerStore)();return r.useMemo(()=>{let a=0,r=0;return{per:e.map(e=>{let{doneCount:l,totalCount:n}=(0,s.ensureDay)(t,e);return a+=l,r+=n,{iso:e,done:l,total:n}}),weekDone:a,weekTotal:r}},[e,t])}},36118:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var r=a(95155);a(48768);var s=a(3278),l=a(57649),n=a(34467),i=a(64269),o=a(84804);function c(e){let{iso:t,variant:a="card",className:c,showLabel:d=!0,bleed:u=!1}=e,{days:p,isToday:m}=(0,l.useWeek)(t),{per:f,weekDone:g,weekTotal:v}=(0,n.useWeekData)(p),h=7===p.length?"".concat((0,o.Ez)(p[0])," — ").concat((0,o.Ez)(p[6])):"",j="inline"===a?d?(0,r.jsxs)("div",{className:"mb-[var(--space-2)] flex items-center justify-between gap-[var(--space-2)] text-label font-medium tracking-[0.02em] text-muted-foreground",children:[(0,r.jsxs)("div",{className:"flex items-center gap-[var(--space-2)]",children:[(0,r.jsx)("span",{className:"uppercase tracking-[0.02em]",children:"Week"}),(0,r.jsx)("span",{"aria-hidden":!0,children:"•"}),(0,r.jsx)("span",{children:h})]}),(0,r.jsxs)("span",{className:"pill pill--medium font-semibold",children:[(0,r.jsx)("span",{className:"tabular-nums",children:g}),"/",(0,r.jsx)("span",{className:"tabular-nums",children:v})]})]}):null:(0,r.jsxs)("div",{className:"mb-[var(--space-3)] flex items-center gap-[var(--space-3)]",children:[(0,r.jsx)("div",{className:"text-ui font-medium text-muted-foreground",children:h}),(0,r.jsxs)("span",{className:"ml-auto badge badge--sm",role:"status","aria-live":"polite",title:"Completed / Total items this week",children:[(0,r.jsx)("span",{className:"badge__icon",children:"✅"}),(0,r.jsx)("span",{className:"tabular-nums",children:g}),"/",(0,r.jsx)("span",{className:"tabular-nums",children:v})]})]}),x=(0,r.jsx)("div",{className:"inline"===a?"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 xl:grid-cols-7 gap-[var(--space-2)]":"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 xl:grid-cols-7 gap-[var(--space-3)]",role:"list","aria-label":"Week days summary",children:f.map(e=>{let t=m(e.iso),s=0===e.total,l=(0,o.Ez)(e.iso),n="".concat(e.done," of ").concat(e.total," done");return(0,r.jsxs)("div",{role:"listitem",className:(0,i.cn)("ws-tile group","inline"===a?"p-[var(--space-2)] rounded-card r-card-lg":"p-[var(--space-3)] rounded-card r-card-lg",t&&"ws-tile--today",s&&"ws-tile--empty"),"data-today":t||void 0,"aria-label":"".concat(l,": ").concat(n),children:[(0,r.jsx)("div",{className:"ws-tile__date",children:l}),(0,r.jsxs)("div",{className:(0,i.cn)("ws-tile__counts","inline"===a?"text-body":"text-title"),children:[(0,r.jsx)("span",{className:"tabular-nums",children:e.done}),(0,r.jsx)("span",{className:"opacity-60",children:" / "}),(0,r.jsx)("span",{className:"tabular-nums",children:e.total})]}),t?(0,r.jsx)("span",{"aria-hidden":!0,className:"ws-rail"}):null]},e.iso)})}),k=(0,r.jsxs)("div",{className:(0,i.cn)(c,u&&"ws-bleed"),children:[j,x]});return"inline"===a?k:(0,r.jsxs)(s.default,{className:"card-neo",children:[(0,r.jsx)(s.default.Header,{title:"Week Summary"}),(0,r.jsx)(s.default.Body,{children:k})]})}},48768:()=>{},48772:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useDayNotes:()=>n});var r=a(82192),s=a(58418),l=a(83996);let n=(0,r.createDayTextFieldHook)({selectValue:e=>e.notes,applyValue:l.ym,scheduleSavingReset:s.l})},51266:(e,t,a)=>{"use strict";a.r(t),a.d(t,{usePlannerStore:()=>d});var r=a(12115),s=a(6557),l=a(83996),n=a(67419);let i="planner:projects",o="planner:tasks",c=!1;function d(){let{days:e,setDays:t}=(0,s.useDays)(),{focus:a,setFocus:d}=(0,s.useFocus)(),u=r.useCallback((e,a)=>{if(void 0===a)return void t(e);let r="string"==typeof a?[a]:Array.from(a);t(t=>[e(t),r])},[t]);r.useEffect(()=>{if(!c){if(!a)return;let e=(0,n.iG)(i),t=(0,n.iG)(o);if(!e&&!t){c=!0;return}u(r=>(function(e,t,a){var r,l;if(c)return e;let d=null!=(r=null==a?void 0:a.projects)?r:(0,n.iG)(i),u=null!=(l=null==a?void 0:a.tasks)?l:(0,n.iG)(o);if(!d&&!u)return c=!0,e;let p={...e},m=(0,s.ensureDay)(p,t);d&&(m={...m,projects:d}),u&&(m={...m,tasks:u,...(0,s.buildTaskLookups)(u)});let{doneCount:f,totalCount:g}=(0,s.computeDayCounts)(m.projects,m.tasks);return p[t]={...m,doneCount:f,totalCount:g},(0,n.Ab)(i),(0,n.Ab)(o),c=!0,p})(r,a,{projects:e,tasks:t}),a)}},[u,a]);let p=r.useCallback((e,t)=>{u(a=>{let r=t((0,s.ensureDay)(a,e));return{...a,[e]:r}},e)},[u]),m=r.useCallback(t=>(0,s.ensureDay)(e,t),[e]),f=r.useCallback((e,t)=>{u(a=>({...a,[e]:t}),e)},[u]),{setFocus:g,...v}=r.useMemo(()=>(0,l.v_)(a,p),[a,p]);return{days:e,focus:a,setFocus:d,day:m(a),getDay:m,setDay:f,upsertDay:p,setDayFocus:g,...v}}},57649:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useFocusDate:()=>n,useWeek:()=>i});var r=a(12115),s=a(84804),l=a(6557);function n(){let{focus:e,setFocus:t,today:a}=(0,l.useFocus)();return{iso:e,setIso:t,today:a}}function i(e){let{today:t}=(0,l.useFocus)();return r.useMemo(()=>{let{start:a,end:r}=(0,s.bM)(e),l=[];for(let e=0;e<7;e++)l.push((0,s.$$)((0,s.fi)(a,e)));return{start:a,end:r,days:l,isToday:e=>e===t}},[e,t])}},57833:(e,t,a)=>{"use strict";a.d(t,{default:()=>o});var r=a(95155);a(48768);var s=a(12115),l=a(3278),n=a(4069),i=a(48772);function o(e){let{iso:t}=e,{value:a,setValue:o,saving:c,isDirty:d,lastSavedRef:u,commit:p}=(0,i.useDayNotes)(t),m=s.useMemo(()=>"notes-".concat(t,"-header"),[t]);return(0,r.jsxs)(l.default,{className:"card-neo-soft",children:[(0,r.jsx)(l.default.Header,{id:m,title:"Notes"}),(0,r.jsxs)(l.default.Body,{children:[(0,r.jsx)(n.default,{placeholder:"Jot down anything related to this day…",value:a,onChange:e=>o(e.target.value),name:"notes-".concat(t),"aria-labelledby":m,"aria-label":"Notes",resize:"resize-y",textareaClassName:"min-h-[calc(var(--space-8)*3_-_var(--space-3))] leading-relaxed",onBlur:p}),(0,r.jsx)("div",{className:"mt-[var(--space-2)] text-label text-muted-foreground","aria-live":"polite",children:c?"Saving…":d?"Unsaved changes":u.current?"All changes saved":"No notes yet"})]})]})}},58418:(e,t,a)=>{"use strict";function r(e){if("function"==typeof queueMicrotask)return void queueMicrotask(e);setTimeout(e,0)}a.d(t,{l:()=>r})},62021:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var r=a(95155),s=a(12115),l=a(84804),n=a(50641);function i(e){let{iso:t,projectCount:a,doneCount:i,totalCount:o}=e,c=s.useMemo(()=>"// ".concat((0,l.XS)(t)),[t]),d=0===o?0:Math.round(i/o*100);return(0,r.jsxs)("div",{className:"col-span-1 lg:col-span-3 flex items-center gap-[var(--space-3)] min-w-0",children:[(0,r.jsx)("span",{className:"glitch glitch-label text-ui font-semibold tracking-wide shrink-0","data-text":c,children:c}),(0,r.jsx)("div",{className:"flex-1 min-w-0",children:(0,r.jsx)(n.default,{current:i,total:o})}),(0,r.jsxs)("div",{className:"shrink-0 flex items-baseline gap-[var(--space-3)] text-label text-muted-foreground",children:[(0,r.jsxs)("span",{className:"tabular-nums font-medium text-foreground",children:[d,"%"]}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"\xb7"}),(0,r.jsxs)("span",{className:"whitespace-nowrap",children:[(0,r.jsx)("span",{className:"tabular-nums",children:a})," projects"]}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"\xb7"}),(0,r.jsxs)("span",{className:"whitespace-nowrap",children:[(0,r.jsx)("span",{className:"tabular-nums",children:i})," /"," ",(0,r.jsx)("span",{className:"tabular-nums",children:o})," items"]})]})]})}},67284:(e,t,a)=>{"use strict";a.d(t,{default:()=>o});var r=a(95155),s=a(12115),l=a(58363),n=a(20562),i=a(25505);function o(e){let{watchRef:t,forceVisible:a=!1}=e,[o,c]=s.useState(!1),d=(0,i.j)(),[u,p]=s.useState(()=>t.current),m="IntersectionObserver"in window;return(s.useEffect(()=>{if(t.current!==u){var e;p(null!=(e=t.current)?e:null)}},[t,u]),s.useEffect(()=>{if(!m)return void c(!0);if(!u)return;let e=new IntersectionObserver(e=>{e.forEach(e=>c(!e.isIntersecting))});return e.observe(u),()=>{e.unobserve(u),e.disconnect()}},[m,u]),o||a)?(0,r.jsx)(l.default,{"aria-label":"Scroll to top",onClick:()=>{window.scrollTo({top:0,behavior:d?"auto":"smooth"})},className:"fixed bottom-[var(--space-8)] right-[var(--space-2)] z-50",children:(0,r.jsx)(n.A,{})}):null}},77372:(e,t,a)=>{"use strict";a.d(t,{default:()=>h});var r=a(95155),s=a(12115),l=a(34979),n=a(95948),i=a(57649),o=a(34467),c=a(64269),d=a(25505),u=a(98297),p=a(10383),m=a(84804);let f=new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"short"}),g=new Intl.DateTimeFormat(void 0,{weekday:"long",month:"long",day:"numeric"}),v=s.forwardRef(function(e,t){let{iso:a,selected:l,today:n,done:i,total:o,onClick:d,onDoubleClick:u,onNavigate:p,onFocus:f,tabIndex:v}=e,h=s.useMemo(()=>(e=>{let t=(0,m.E4)(e);return t?g.format(t):e})(a),[a]),j=s.useMemo(()=>{if(o<=0)return 0;let e=i/o;return!Number.isFinite(e)||e<=0?0:e>=1?1:e},[i,o]),{tint:x,text:k}=s.useMemo(()=>0===o?{tint:"bg-card",text:"text-muted-foreground"}:j>=2/3?{tint:"bg-success-soft",text:"text-foreground"}:j>=1/3?{tint:"bg-accent-3/20",text:"text-foreground"}:{tint:"bg-accent-3/30",text:"text-foreground"},[j,o]),b=s.useId(),y=s.useId(),w=l?"Press Enter again or double-click to jump.":"Press Enter to select.",N="".concat(y," ").concat(b);return(0,r.jsxs)("button",{type:"button",role:"option",ref:t,onClick:()=>d(a),onDoubleClick:()=>u(a),onKeyDown:e=>{if("Enter"===e.key&&l){e.preventDefault(),e.stopPropagation(),u(a);return}if("ArrowLeft"===e.key){e.preventDefault(),p("prev");return}if("ArrowRight"===e.key){e.preventDefault(),p("next");return}if("Home"===e.key){e.preventDefault(),p("first");return}"End"===e.key&&(e.preventDefault(),p("last"))},onFocus:f,tabIndex:v,"aria-selected":l,"aria-label":"Select ".concat(h),"aria-describedby":N,title:l?"Press Enter again or double-click to jump":"Click or press Enter to focus",className:(0,c.cn)("chip relative flex-none w-[--chip-width] rounded-card r-card-lg border text-left px-[var(--space-3)] py-[var(--space-2)] transition snap-start","border-card-hairline",x,"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring","active:border-primary/60 active:bg-card/85",n&&"chip--today",l?"border-dashed border-primary/75":"hover:border-primary/40"),"data-today":n||void 0,"data-active":l||void 0,children:[(0,r.jsx)("div",{className:(0,c.cn)("chip__date",k,n&&"bg-card"===x?"text-accent-3":void 0),"data-text":h,children:h}),(0,r.jsxs)("div",{id:y,className:"chip__counts text-foreground",children:[(0,r.jsx)("span",{className:"tabular-nums",children:i}),(0,r.jsxs)("span",{className:"text-foreground/70",children:[" / ",o]})]}),(0,r.jsx)("span",{id:b,className:"sr-only","aria-live":"polite","aria-atomic":"true",children:w}),(0,r.jsx)("span",{"aria-hidden":!0,className:"chip__scan"}),(0,r.jsx)("span",{"aria-hidden":!0,className:"chip__edge"})]})});function h(){let{iso:e,setIso:t,today:a}=(0,i.useFocusDate)(),{start:g,end:h,days:j}=(0,i.useWeek)(e),x="".concat(f.format(g)," — ").concat(f.format(h)),k="".concat(f.format(g)," → ").concat(f.format(h)),b=(0,m.$$)(g),y=(0,m.$$)(h),{per:w,weekDone:N,weekTotal:C}=(0,o.useWeekData)(j),P=(0,d.j)(),T=s.useRef([]),S=s.useCallback(()=>{let t=j.indexOf(e);return -1!==t?t:j.length>0?0:-1},[j,e]),[D,E]=s.useState(()=>{let e=S();return -1===e?0:e});s.useEffect(()=>{let e=S();-1!==e&&E(t=>t===e?t:e)},[S]),s.useEffect(()=>{T.current.length=j.length},[j.length]);let I=s.useCallback(a=>{if(a<0||a>=j.length)return;let r=j[a];r&&(r!==e&&t(r),E(a),window.requestAnimationFrame(()=>{var e;null==(e=T.current[a])||e.focus({preventScroll:!0})}))},[j,e,t]),A=s.useCallback((e,t)=>{if(0===j.length)return;let a=e;switch(t){case"prev":a=Math.max(0,e-1);break;case"next":a=Math.min(j.length-1,e+1);break;case"first":a=0;break;case"last":a=j.length-1}a!==e&&I(a)},[j,I]),[M,z]=s.useState(!1);s.useEffect(()=>{let e=null,t=()=>{null===e&&(e=window.requestAnimationFrame(()=>{e=null;let t=window.scrollY<=4;z(e=>!t&&e)}))};return window.addEventListener("scroll",t,{passive:!0}),()=>{window.removeEventListener("scroll",t),null!==e&&window.cancelAnimationFrame(e)}},[]);let R=e=>t(e),B=e=>{t(e);let a=document.getElementById("day-".concat(e));a&&(a.scrollIntoView({behavior:P?"auto":"smooth",block:"start",inline:"nearest"}),a.focus({preventScroll:!0}),z(!0))},F=M?(0,r.jsxs)(n.default,{variant:"primary",size:"sm","aria-label":"Jump to top",onClick:()=>{{var e;window.scrollTo({top:0,behavior:P?"auto":"smooth"});let t=null!=(e=document.getElementById("planner-header"))?e:document.getElementById("main-content");t instanceof HTMLElement&&window.requestAnimationFrame(()=>{t.focus({preventScroll:!0})})}},title:"Jump to top",className:"px-[var(--space-4)]",children:[(0,r.jsx)(u.A,{}),(0,r.jsx)("span",{children:"Top"})]}):void 0;return(0,r.jsx)(l.default,{heading:x,subtitle:"".concat(b," → ").concat(y),actions:F,rail:!0,sticky:!0,dividerTint:"primary",children:(0,r.jsxs)("div",{className:"grid gap-[var(--space-3)] flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-[var(--space-3)]",children:[(0,r.jsxs)("span",{className:(0,c.cn)("inline-flex items-center gap-[var(--space-2)] rounded-card r-card-lg px-[var(--space-3)] py-[var(--space-2)] text-ui","bg-card/72 ring-1 ring-border/55 backdrop-blur"),"aria-label":"Week range ".concat(k),children:[(0,r.jsx)(p.A,{className:"size-4 opacity-80"}),(0,r.jsx)("span",{className:"opacity-90",children:k})]}),(0,r.jsxs)("span",{className:"text-ui text-muted-foreground",children:["Total tasks:"," ",(0,r.jsxs)("span",{className:"font-medium tabular-nums text-foreground",children:[N," / ",C]})]})]}),(0,r.jsx)("div",{role:"listbox","aria-label":"Select a focus day between ".concat(k),className:"flex gap-[var(--space-3)] overflow-x-auto snap-x snap-mandatory lg:overflow-visible",children:j.map((t,s)=>{var l,n,i,o;return(0,r.jsx)(v,{iso:t,selected:t===e,today:t===a,done:null!=(i=null==(l=w[s])?void 0:l.done)?i:0,total:null!=(o=null==(n=w[s])?void 0:n.total)?o:0,onClick:R,onDoubleClick:B,onNavigate:e=>A(s,e),onFocus:()=>E(s),tabIndex:D===s?0:-1,ref:e=>{T.current[s]=e}},t)})})]})})}},77656:(e,t,a)=>{"use strict";a.d(t,{default:()=>l});var r=a(95155);a(12115);var s=a(64269);function l(e){let{renderComposer:t,renderEmpty:a,renderList:l,isEmpty:n,className:i,viewportClassName:o,viewportStyle:c,viewportProps:d}=e,{className:u,style:p,...m}=null!=d?d:{},f=null==t?void 0:t(),g=n?a():l();return(0,r.jsxs)("div",{className:(0,s.cn)("flex min-w-0 flex-col gap-[var(--space-3)]",i),children:[f,(0,r.jsx)("div",{...m,className:(0,s.cn)("w-full overflow-y-auto px-[var(--space-2)] py-[var(--space-2)]",u,o),style:{...p,...c},children:g})]})}},79897:(e,t,a)=>{"use strict";a.d(t,{default:()=>m});var r=a(95155),s=a(12115),l=a(52105),n=a(58363),i=a(49412),o=a(18514),c=a(71360),d=a(64269),u=a(81323),p=a(77656);function m(e){let{projects:t,selectedProjectId:a,setSelectedProjectId:m,setSelectedTaskId:f,toggleProject:g,renameProject:v,deleteProject:h,addProject:j}=e,[x,k]=s.useState(null),[b,y]=s.useState(""),[w,N]=s.useState(""),C=s.useRef(new Map),P=t.length>3,T=t.length>1,S=0===t.length,D=s.useCallback((e,t)=>{t?C.current.set(e,t):C.current.delete(e)},[]),E=s.useCallback(e=>{let t=C.current.get(e);null==t||t.focus()},[]),I=s.useCallback((e,t)=>{let a=b.trim()||t;v(e,a),y(a),k(null)},[b,v,k,y]),A=s.useCallback((e,a)=>r=>{if((" "===r.key||"Enter"===r.key)&&(r.preventDefault(),m(a.id)),T&&("ArrowDown"===r.key||"ArrowRight"===r.key)){r.preventDefault();let a=(e+1)%t.length,s=t[a].id;m(s),E(s)}if(T&&("ArrowUp"===r.key||"ArrowLeft"===r.key)){r.preventDefault();let a=(e-1+t.length)%t.length,s=t[a].id;m(s),E(s)}},[E,T,t,m]);return(0,r.jsx)(p.default,{className:"gap-[var(--space-2)]",renderComposer:()=>(0,r.jsx)("form",{onSubmit:e=>{e.preventDefault(),function(){let e=w.trim();if(!e)return;let t=j(e);N(""),t&&m(t)}()},children:(0,r.jsx)(l.default,{className:"w-full",placeholder:"> new project…",value:w,onChange:e=>N(e.target.value),"aria-label":"Add project"})}),isEmpty:S,renderEmpty:()=>(0,r.jsx)("ul",{className:"w-full space-y-[var(--space-2)] py-[var(--space-2)]","aria-label":"Projects",children:(0,r.jsx)("li",{className:"w-full",children:(0,r.jsx)(u.A,{text:"No projects yet."})})}),renderList:()=>(0,r.jsx)("ul",{className:"w-full space-y-[var(--space-2)] py-[var(--space-2)]",role:"radiogroup","aria-label":"Projects",children:t.map((e,t)=>{let s=e.id===a,u=x===e.id,p=A(t,e),v=e.name.trim()||"Untitled project";return(0,r.jsx)("li",{className:"w-full",children:(0,r.jsxs)("div",{role:"radio",tabIndex:s?0:-1,"aria-checked":s,"aria-label":v,ref:t=>D(e.id,t),onKeyDown:u?void 0:p,onClick:()=>{u||s||(f(""),m(e.id))},className:(0,d.cn)("proj-card group relative [overflow:visible] w-full text-left rounded-card r-card-lg border pl-[var(--space-4)] pr-[var(--space-2)] py-[var(--space-2)]","bg-card/55 hover:bg-card/70 transition","grid min-h-[var(--space-7)] grid-cols-[auto,1fr,auto] items-center gap-[var(--space-4)]","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",s&&"proj-card--active ring-1 ring-ring"),children:[(0,r.jsx)("span",{className:"shrink-0",onMouseDown:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),children:(0,r.jsx)(i.default,{checked:!!e.done,onChange:()=>g(e.id),"aria-label":"Toggle ".concat(v," complete"),size:"sm"})}),u?(0,r.jsx)(l.default,{name:"rename-project-".concat(e.id),autoFocus:!0,value:b,onChange:e=>y(e.target.value),onKeyDown:t=>{"Enter"===t.key&&I(e.id,e.name),"Escape"===t.key&&(k(null),y(e.name))},onBlur:()=>{I(e.id,e.name)},"aria-label":"Rename project ".concat(e.name)}):(0,r.jsx)("span",{className:"proj-card__title truncate font-medium",children:e.name||"Untitled"}),(0,r.jsxs)("div",{className:"ml-auto flex items-center gap-[var(--space-2)] opacity-0 transition-opacity group-hover:opacity-100 group-focus-within:opacity-100",children:[(0,r.jsx)(n.default,{"aria-label":"Edit project",title:"Edit",onClick:t=>{t.preventDefault(),t.stopPropagation(),k(e.id),y(e.name)},size:"sm",iconSize:"xs",variant:"ghost",children:(0,r.jsx)(o.A,{})}),(0,r.jsx)(n.default,{"aria-label":"Delete project",title:"Delete",onClick:t=>{t.preventDefault(),t.stopPropagation();let r=a===e.id;h(e.id),r&&m("")},size:"sm",iconSize:"xs",variant:"ghost",children:(0,r.jsx)(c.A,{})})]})]})},e.id)})}),viewportClassName:(0,d.cn)("px-0 w-full py-0",P?void 0:"overflow-visible"),viewportStyle:P?{maxHeight:"calc(var(--space-8) * 4 + var(--space-1))"}:void 0})}},81323:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(95155);function s(e){let{text:t}=e;return(0,r.jsx)("div",{className:"tasks-placeholder text-label",children:t})}a(12115)},81393:(e,t,a)=>{"use strict";a.r(t),a.d(t,{useDayFocus:()=>n});var r=a(82192),s=a(58418),l=a(83996);let n=(0,r.createDayTextFieldHook)({selectValue:e=>e.focus,applyValue:l.Z6,scheduleSavingReset:s.l})},82192:(e,t,a)=>{"use strict";a.r(t),a.d(t,{createDayTextFieldHook:()=>n});var r=a(12115),s=a(58418),l=a(51266);function n(e){let{selectValue:t,applyValue:a,scheduleSavingReset:n=s.l}=e;return function(e){var s;let{getDay:i,upsertDay:o}=(0,l.usePlannerStore)(),c=null!=(s=t(i(e)))?s:"",d=r.useCallback(t=>{o(e,e=>a(e,t))},[e,o]),[u,p]=r.useState(()=>c),[m,f]=r.useState(!1),g=r.useRef(c.trim()),v=r.useMemo(()=>u.trim(),[u]),h=v!==g.current,j=r.useCallback(()=>{if(h){f(!0);try{d(v),g.current=v}finally{n(()=>{f(!1)})}}},[d,h,v]);return r.useEffect(()=>{p(c),g.current=c.trim()},[e,c]),{value:u,setValue:p,saving:m,isDirty:h,lastSavedRef:g,commit:j}}}},83996:(e,t,a)=>{"use strict";a.d(t,{Z6:()=>n,v_:()=>i,ym:()=>l});var r=a(67419),s=a(16386);function l(e,t){return{...e,notes:t}}function n(e,t){return{...e,focus:t}}function i(e,t){return{addProject:a=>{let l=(0,r.uid)("proj");return t(e,e=>(0,s.By)(e,l,a)),l},renameProject:(a,r)=>t(e,e=>(0,s.oB)(e,a,r)),toggleProject:a=>t(e,e=>(0,s.wE)(e,a)),removeProject:a=>t(e,e=>(0,s.oE)(e,a)),addTask:(a,l)=>{let n=(0,r.uid)("task");return t(e,e=>(0,s.XZ)(e,n,a,l)),n},renameTask:(a,r)=>t(e,e=>(0,s.AI)(e,a,r)),toggleTask:a=>t(e,e=>(0,s.ei)(e,a)),removeTask:a=>t(e,e=>(0,s.u0)(e,a)),addTaskImage:(a,r)=>t(e,e=>(0,s.mr)(e,a,r)),removeTaskImage:(a,r,l)=>t(e,e=>(0,s.Vo)(e,a,r,l)),setNotes:a=>t(e,e=>l(e,a)),setFocus:a=>t(e,e=>n(e,a))}}},93706:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(95155);a(48768);var s=a(12115),l=a(9535),n=a(12607),i=a(64269),o=a(62021),c=a(79897),d=a(94433);function u(e){let{iso:t,isToday:a}=e,{projects:u,addProject:p,renameProject:m,deleteProject:f,toggleProject:g,tasksById:v,tasksByProject:h,addTask:j,renameTask:x,toggleTask:k,deleteTask:b,addTaskImage:y,removeTaskImage:w,doneCount:N,totalCount:C}=(0,n.useDay)(t),[P,T]=(0,l.useSelectedProject)(t),[,S]=(0,l.useSelectedTask)(t);return s.useEffect(()=>{P&&!u.some(e=>e.id===P)&&T("")},[u,P,T]),(0,r.jsxs)("section",{className:(0,i.cn)("daycard relative overflow-hidden card-neo-soft rounded-card r-card-lg border card-pad","grid gap-[var(--space-4)] lg:gap-[var(--space-6)]","grid-cols-1 lg:grid-cols-12",a&&"ring-1 ring-ring/65 title-glow","before:pointer-events-none before:absolute before:inset-x-[var(--space-4)] before:top-0 before:h-px before:bg-gradient-to-r","before:from-transparent before:via-ring/45 before:to-transparent","after:pointer-events-none after:absolute after:-inset-px after:[border-radius:var(--radius-card)] after:bg-[radial-gradient(60%_40%_at_100%_0%,hsl(var(--ring)/.12),transparent_60%)]"),"aria-label":"Planner for ".concat(t),children:[(0,r.jsx)("div",{className:"col-span-1 lg:col-span-12",children:(0,r.jsx)(o.default,{iso:t,projectCount:u.length,doneCount:N,totalCount:C})}),(0,r.jsx)("div",{className:"col-span-1 lg:col-span-3",children:(0,r.jsx)(c.default,{projects:u,selectedProjectId:P,setSelectedProjectId:T,setSelectedTaskId:S,toggleProject:g,renameProject:m,deleteProject:f,addProject:p})}),P&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"hidden lg:block lg:col-span-1 w-px mx-auto bg-card-hairline/90 rounded-full self-stretch","aria-hidden":!0}),(0,r.jsx)("div",{className:"col-span-1 lg:col-span-8",children:(0,r.jsx)(d.default,{tasksById:v,tasksByProject:h,selectedProjectId:P,addTask:j,renameTask:x,toggleTask:k,deleteTask:b,addTaskImage:y,removeTaskImage:(e,t,a)=>w(e,t,a),setSelectedTaskId:S})})]})]})}},94433:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var r=a(95155),s=a(12115),l=a(52105),n=a(81323),i=a(77656),o=a(26439);function c(e){let{tasksById:t,tasksByProject:a,selectedProjectId:c,addTask:d,renameTask:u,toggleTask:p,deleteTask:m,addTaskImage:f,removeTaskImage:g,setSelectedTaskId:v}=e,[h,j]=s.useState(""),x=s.useMemo(()=>{var e;return c?(null!=(e=a[c])?e:[]).map(e=>t[e]).filter(e=>!!e):[]},[c,a,t]),k=!!c,b=!k||0===x.length,y=s.useCallback(e=>{e.preventDefault();let t=h.trim();if(!t||!c)return;let a=d(t,c);j(""),a&&v(a)},[h,c,d,v]);return(0,r.jsx)(i.default,{renderComposer:k?()=>(0,r.jsx)("form",{onSubmit:y,children:(0,r.jsx)(l.default,{className:"w-full",placeholder:"> add task…",value:h,onChange:e=>j(e.target.value),"aria-label":"Add task"})}):void 0,isEmpty:b,renderEmpty:()=>(0,r.jsx)(n.A,{text:k?"No tasks yet":"Select a project to view tasks"}),renderList:()=>(0,r.jsx)("ul",{className:"space-y-[var(--space-2)] [&>li:first-child]:mt-[var(--space-2)] [&>li:last-child]:mb-[var(--space-2)]","aria-label":"Tasks",children:x.map(e=>(0,r.jsx)(o.default,{task:e,toggleTask:()=>{p(e.id),v(e.id)},deleteTask:()=>{m(e.id),v("")},renameTask:t=>u(e.id,t),selectTask:()=>v(e.id),addImage:t=>f(e.id,t),removeImage:(t,a)=>g(e.id,t,a)},e.id))}),viewportClassName:"min-h-[calc(var(--space-8)*2)] max-h-[calc(var(--space-8)*5)]"})}}}]);